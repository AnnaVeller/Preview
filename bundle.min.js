(()=>{var t,e,r={4582:(t,e)=>{"use strict";function r(t,e){return void 0===e&&(e=Object),e&&"function"==typeof e.freeze?e.freeze(t):t}var n=r({HTML:"text/html",isHTML:function(t){return t===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=r({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.assign=function(t,e){if(null===t||"object"!=typeof t)throw new TypeError("target is not an object");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},e.find=function(t,e,r){if(void 0===r&&(r=Array.prototype),t&&"function"==typeof r.find)return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(e.call(void 0,i,n,t))return i}},e.freeze=r,e.MIME_TYPE=n,e.NAMESPACE=i},5752:(t,e,r)=>{var n=r(4582),i=r(4722),s=r(6559),o=r(4466),a=i.DOMImplementation,h=n.NAMESPACE,l=o.ParseError,u=o.XMLReader;function c(t){return t.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function d(t){this.options=t||{locator:{}}}function p(){this.cdata=!1}function f(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function m(t,e,r){return"string"==typeof t?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}function g(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}d.prototype.parseFromString=function(t,e){var r=this.options,n=new u,i=r.domBuilder||new p,o=r.errorHandler,a=r.locator,l=r.xmlns||{},d=/\/x?html?$/.test(e),f=d?s.HTML_ENTITIES:s.XML_ENTITIES;a&&i.setDocumentLocator(a),n.errorHandler=function(t,e,r){if(!t){if(e instanceof p)return e;t=e}var n={},i=t instanceof Function;function s(e){var s=t[e];!s&&i&&(s=2==t.length?function(r){t(e,r)}:t),n[e]=s&&function(t){s("[xmldom "+e+"]\t"+t+function(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),n}(o,i,a),n.domBuilder=r.domBuilder||i,d&&(l[""]=h.HTML),l.xml=l.xml||h.XML;var m=r.normalizeLineEndings||c;return t&&"string"==typeof t?n.parse(m(t),l,f):n.errorHandler.error("invalid doc source"),i.doc},p.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var i=this.doc,s=i.createElementNS(t,r||e),o=n.length;g(this,s),this.currentElement=s,this.locator&&f(this.locator,s);for(var a=0;a<o;a++){t=n.getURI(a);var h=n.getValue(a),l=(r=n.getQName(a),i.createAttributeNS(t,r));this.locator&&f(n.getLocator(a),l),l.value=l.nodeValue=h,s.setAttributeNode(l)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&f(this.locator,r),g(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=m.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(t);else n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&f(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=m.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&f(this.locator,n),g(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(t,e,r);this.locator&&f(this.locator,i),g(this,i),this.doc.doctype=i}},warning:function(t){},error:function(t){},fatalError:function(t){throw new l(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){p.prototype[t]=function(){return null}})),e.DOMParser=d},4722:(t,e,r)=>{var n=r(4582),i=n.find,s=n.NAMESPACE;function o(t){return""!==t}function a(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function h(t){if(!t)return[];var e=function(t){return t?t.split(/[\t\n\f\r ]+/).filter(o):[]}(t);return Object.keys(e.reduce(a,{}))}function l(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function u(t,e){var r=t.prototype;if(!(r instanceof e)){function n(){}n.prototype=e.prototype,l(r,n=new n),t.prototype=r=n}r.constructor!=t&&(r.constructor=t)}var c={},d=c.ELEMENT_NODE=1,p=c.ATTRIBUTE_NODE=2,f=c.TEXT_NODE=3,m=c.CDATA_SECTION_NODE=4,g=c.ENTITY_REFERENCE_NODE=5,_=c.ENTITY_NODE=6,b=c.PROCESSING_INSTRUCTION_NODE=7,x=c.COMMENT_NODE=8,v=c.DOCUMENT_NODE=9,y=c.DOCUMENT_TYPE_NODE=10,C=c.DOCUMENT_FRAGMENT_NODE=11,T=c.NOTATION_NODE=12,S={},w={},A=(S.INDEX_SIZE_ERR=(w[1]="Index size error",1),S.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),S.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),M=(S.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),S.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),S.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),S.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),S.NOT_FOUND_ERR=(w[8]="Not found",8)),E=(S.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),S.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));function L(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,w[t]),this.message=w[t],Error.captureStackTrace&&Error.captureStackTrace(this,L);return r.code=t,e&&(this.message=this.message+": "+e),r}function R(){}function P(t,e){this._node=t,this._refresh=e,B(this)}function B(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(bt(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var n=r.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];l(r,t),t._inc=e}}function O(){}function I(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function D(t,e,r,n){if(n?e[I(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var i=t.ownerDocument;i&&(n&&z(i,t,n),function(t,e,r){t&&t._inc++,r.namespaceURI===s.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}(i,t,r))}}function F(t,e,r){var n=I(e,r);if(!(n>=0))throw new L(M,new Error(t.tagName+"@"+r));for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,t){var s=t.ownerDocument;s&&(z(s,t,r),r.ownerElement=null)}}function G(){}function k(){}function U(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function N(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(N(t,e))return!0}while(t=t.nextSibling)}function H(){this.ownerDocument=this}function z(t,e,r,n){t&&t._inc++,r.namespaceURI===s.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function X(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var i=e.firstChild,s=0;i;)n[s++]=i,i=i.nextSibling;n.length=s,delete n[n.length]}}}function V(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,X(t.ownerDocument,t),e}function W(t){return t&&t.nodeType===k.DOCUMENT_TYPE_NODE}function Y(t){return t&&t.nodeType===k.ELEMENT_NODE}function j(t){return t&&t.nodeType===k.TEXT_NODE}function q(t,e){var r=t.childNodes||[];if(i(r,Y)||W(e))return!1;var n=i(r,W);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function $(t,e){var r=t.childNodes||[];if(i(r,(function(t){return Y(t)&&t!==e})))return!1;var n=i(r,W);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function Z(t,e,r){var n=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===k.DOCUMENT_FRAGMENT_NODE){var o=s.filter(Y);if(o.length>1||i(s,j))throw new L(A,"More than one element or text in fragment");if(1===o.length&&!q(t,r))throw new L(A,"Element in fragment can not be inserted before doctype")}if(Y(e)&&!q(t,r))throw new L(A,"Only one element can be added and only after doctype");if(W(e)){if(i(n,W))throw new L(A,"Only one doctype is allowed");var a=i(n,Y);if(r&&n.indexOf(a)<n.indexOf(r))throw new L(A,"Doctype can only be inserted before an element");if(!r&&a)throw new L(A,"Doctype can not be appended since element is present")}}function K(t,e,r){var n=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===k.DOCUMENT_FRAGMENT_NODE){var o=s.filter(Y);if(o.length>1||i(s,j))throw new L(A,"More than one element or text in fragment");if(1===o.length&&!$(t,r))throw new L(A,"Element in fragment can not be inserted before doctype")}if(Y(e)&&!$(t,r))throw new L(A,"Only one element can be added and only after doctype");if(W(e)){if(i(n,(function(t){return W(t)&&t!==r})))throw new L(A,"Only one doctype is allowed");var a=i(n,Y);if(r&&n.indexOf(a)<n.indexOf(r))throw new L(A,"Doctype can only be inserted before an element")}}function Q(t,e,r,n){(function(t,e,r){if(!function(t){return t&&(t.nodeType===k.DOCUMENT_NODE||t.nodeType===k.DOCUMENT_FRAGMENT_NODE||t.nodeType===k.ELEMENT_NODE)}(t))throw new L(A,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new L(M,"child not in parent");if(!function(t){return t&&(Y(t)||j(t)||W(t)||t.nodeType===k.DOCUMENT_FRAGMENT_NODE||t.nodeType===k.COMMENT_NODE||t.nodeType===k.PROCESSING_INSTRUCTION_NODE)}(e)||W(e)&&t.nodeType!==k.DOCUMENT_NODE)throw new L(A,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)})(t,e,r),t.nodeType===k.DOCUMENT_NODE&&(n||Z)(t,e,r);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===C){var s=e.firstChild;if(null==s)return e;var o=e.lastChild}else s=o=e;var a=r?r.previousSibling:t.lastChild;s.previousSibling=a,o.nextSibling=r,a?a.nextSibling=s:t.firstChild=s,null==r?t.lastChild=o:r.previousSibling=o;do{s.parentNode=t}while(s!==o&&(s=s.nextSibling));return X(t.ownerDocument||t,t),e.nodeType==C&&(e.firstChild=e.lastChild=null),e}function J(){this._nsMap={}}function tt(){}function et(){}function rt(){}function nt(){}function it(){}function st(){}function ot(){}function at(){}function ht(){}function lt(){}function ut(){}function ct(){}function dt(t,e){var r=[],n=9==this.nodeType&&this.documentElement||this,i=n.prefix,s=n.namespaceURI;if(s&&null==i&&null==(i=n.lookupPrefix(s)))var o=[{namespace:s,prefix:null}];return mt(this,r,t,e,o),r.join("")}function pt(t,e,r){var n=t.prefix||"",i=t.namespaceURI;if(!i)return!1;if("xml"===n&&i===s.XML||i===s.XMLNS)return!1;for(var o=r.length;o--;){var a=r[o];if(a.prefix===n)return a.namespace!==i}return!0}function ft(t,e,r){t.push(" ",e,'="',r.replace(/[<>&"\t\n\r]/g,U),'"')}function mt(t,e,r,n,i){if(i||(i=[]),n){if(!(t=n(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case d:var o=t.attributes,a=o.length,h=t.firstChild,l=t.tagName,u=l;if(!(r=s.isHTML(t.namespaceURI)||r)&&!t.prefix&&t.namespaceURI){for(var c,_=0;_<o.length;_++)if("xmlns"===o.item(_).name){c=o.item(_).value;break}if(!c)for(var T=i.length-1;T>=0;T--)if(""===(S=i[T]).prefix&&S.namespace===t.namespaceURI){c=S.namespace;break}if(c!==t.namespaceURI)for(T=i.length-1;T>=0;T--){var S;if((S=i[T]).namespace===t.namespaceURI){S.prefix&&(u=S.prefix+":"+l);break}}}e.push("<",u);for(var w=0;w<a;w++)"xmlns"==(A=o.item(w)).prefix?i.push({prefix:A.localName,namespace:A.value}):"xmlns"==A.nodeName&&i.push({prefix:"",namespace:A.value});for(w=0;w<a;w++){var A,M,E;pt(A=o.item(w),0,i)&&(ft(e,(M=A.prefix||"")?"xmlns:"+M:"xmlns",E=A.namespaceURI),i.push({prefix:M,namespace:E})),mt(A,e,r,n,i)}if(l===u&&pt(t,0,i)&&(ft(e,(M=t.prefix||"")?"xmlns:"+M:"xmlns",E=t.namespaceURI),i.push({prefix:M,namespace:E})),h||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),r&&/^script$/i.test(l))for(;h;)h.data?e.push(h.data):mt(h,e,r,n,i.slice()),h=h.nextSibling;else for(;h;)mt(h,e,r,n,i.slice()),h=h.nextSibling;e.push("</",u,">")}else e.push("/>");return;case v:case C:for(h=t.firstChild;h;)mt(h,e,r,n,i.slice()),h=h.nextSibling;return;case p:return ft(e,t.name,t.value);case f:return e.push(t.data.replace(/[<&>]/g,U));case m:return e.push("<![CDATA[",t.data,"]]>");case x:return e.push("\x3c!--",t.data,"--\x3e");case y:var L=t.publicId,R=t.systemId;if(e.push("<!DOCTYPE ",t.name),L)e.push(" PUBLIC ",L),R&&"."!=R&&e.push(" ",R),e.push(">");else if(R&&"."!=R)e.push(" SYSTEM ",R,">");else{var P=t.internalSubset;P&&e.push(" [",P,"]"),e.push(">")}return;case b:return e.push("<?",t.target," ",t.data,"?>");case g:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function gt(t,e,r){var n;switch(e.nodeType){case d:(n=e.cloneNode(!1)).ownerDocument=t;case C:break;case p:r=!0}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var i=e.firstChild;i;)n.appendChild(gt(t,i,r)),i=i.nextSibling;return n}function _t(t,e,r){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];"object"!=typeof s&&s!=n[i]&&(n[i]=s)}switch(e.childNodes&&(n.childNodes=new R),n.ownerDocument=t,n.nodeType){case d:var o=e.attributes,a=n.attributes=new O,h=o.length;a._ownerElement=n;for(var l=0;l<h;l++)n.setAttributeNode(_t(t,o.item(l),!0));break;case p:r=!0}if(r)for(var u=e.firstChild;u;)n.appendChild(_t(t,u,r)),u=u.nextSibling;return n}function bt(t,e,r){t[e]=r}S.INVALID_STATE_ERR=(w[11]="Invalid state",11),S.SYNTAX_ERR=(w[12]="Syntax error",12),S.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),S.NAMESPACE_ERR=(w[14]="Invalid namespace",14),S.INVALID_ACCESS_ERR=(w[15]="Invalid access",15),L.prototype=Error.prototype,l(S,L),R.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)mt(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}},P.prototype.item=function(t){return B(this),this[t]||null},u(P,R),O.prototype={length:0,item:R.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new L(E);var r=this.getNamedItem(t.nodeName);return D(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e,r=t.ownerElement;if(r&&r!=this._ownerElement)throw new L(E);return e=this.getNamedItemNS(t.namespaceURI,t.localName),D(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return F(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return F(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}},G.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new H;if(n.implementation=this,n.childNodes=new R,n.doctype=r||null,r&&n.appendChild(r),e){var i=n.createElementNS(t,e);n.appendChild(i)}return n},createDocumentType:function(t,e,r){var n=new st;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}},k.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Q(this,t,e)},replaceChild:function(t,e){Q(this,t,e,K),e&&this.removeChild(e)},removeChild:function(t){return V(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return _t(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==f&&t.nodeType==f?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r)for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n;e=e.nodeType==p?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==p?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},l(c,k),l(c,k.prototype),H.prototype={nodeName:"#document",nodeType:v,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==C){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return Q(this,t,e),t.ownerDocument=this,null===this.documentElement&&t.nodeType===d&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),V(this,t)},replaceChild:function(t,e){Q(this,t,e,K),t.ownerDocument=this,e&&this.removeChild(e),Y(t)&&(this.documentElement=t)},importNode:function(t,e){return gt(this,t,e)},getElementById:function(t){var e=null;return N(this.documentElement,(function(r){if(r.nodeType==d&&r.getAttribute("id")==t)return e=r,!0})),e},getElementsByClassName:function(t){var e=h(t);return new P(this,(function(r){var n=[];return e.length>0&&N(r.documentElement,(function(i){if(i!==r&&i.nodeType===d){var s=i.getAttribute("class");if(s){var o=t===s;if(!o){var a=h(s);o=e.every((l=a,function(t){return l&&-1!==l.indexOf(t)}))}o&&n.push(i)}}var l})),n}))},createElement:function(t){var e=new J;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new R,(e.attributes=new O)._ownerElement=e,e},createDocumentFragment:function(){var t=new lt;return t.ownerDocument=this,t.childNodes=new R,t},createTextNode:function(t){var e=new rt;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new nt;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new it;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new ut;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new tt;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new ht;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new J,n=e.split(":"),i=r.attributes=new O;return r.childNodes=new R,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=e,i._ownerElement=r,r},createAttributeNS:function(t,e){var r=new tt,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}},u(H,k),J.prototype={nodeType:d,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===C?this.insertBefore(t,null):function(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,X(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new P(this,(function(e){var r=[];return N(e,(function(n){n===e||n.nodeType!=d||"*"!==t&&n.tagName!=t||r.push(n)})),r}))},getElementsByTagNameNS:function(t,e){return new P(this,(function(r){var n=[];return N(r,(function(i){i===r||i.nodeType!==d||"*"!==t&&i.namespaceURI!==t||"*"!==e&&i.localName!=e||n.push(i)})),n}))}},H.prototype.getElementsByTagName=J.prototype.getElementsByTagName,H.prototype.getElementsByTagNameNS=J.prototype.getElementsByTagNameNS,u(J,k),tt.prototype.nodeType=p,u(tt,k),et.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(w[A])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){r=this.data.substring(0,t)+r+this.data.substring(t+e),this.nodeValue=this.data=r,this.length=r.length}},u(et,k),rt.prototype={nodeName:"#text",nodeType:f,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},u(rt,et),nt.prototype={nodeName:"#comment",nodeType:x},u(nt,et),it.prototype={nodeName:"#cdata-section",nodeType:m},u(it,et),st.prototype.nodeType=y,u(st,k),ot.prototype.nodeType=T,u(ot,k),at.prototype.nodeType=_,u(at,k),ht.prototype.nodeType=g,u(ht,k),lt.prototype.nodeName="#document-fragment",lt.prototype.nodeType=C,u(lt,k),ut.prototype.nodeType=b,u(ut,k),ct.prototype.serializeToString=function(t,e,r){return dt.call(t,e,r)},k.prototype.toString=dt;try{if(Object.defineProperty){function xt(t){switch(t.nodeType){case d:case C:var e=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&e.push(xt(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}}Object.defineProperty(P.prototype,"length",{get:function(){return B(this),this.$$length}}),Object.defineProperty(k.prototype,"textContent",{get:function(){return xt(this)},set:function(t){switch(this.nodeType){case d:case C:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),bt=function(t,e,r){t["$$"+e]=r}}}catch(vt){}e.DocumentType=st,e.DOMException=L,e.DOMImplementation=G,e.Element=J,e.Node=k,e.NodeList=R,e.XMLSerializer=ct},6559:(t,e,r)=>{"use strict";var n=r(4582).freeze;e.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=n({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),e.entityMap=e.HTML_ENTITIES},8978:(t,e,r)=>{var n=r(4722);n.DOMImplementation,n.XMLSerializer,e.DOMParser=r(5752).DOMParser},4466:(t,e,r)=>{var n=r(4582).NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+i.source+s.source+"*(?::"+i.source+s.source+"*)?$");function a(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,a)}function h(){}function l(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function u(t,e,r,i,s,o){function a(t,e,n){r.attributeNames.hasOwnProperty(t)&&o.fatalError("Attribute "+t+" redefined"),r.addValue(t,e.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),n)}for(var h,l=++e,u=0;;){var c=t.charAt(l);switch(c){case"=":if(1===u)h=t.slice(e,l),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(o.warning('attribute value must after "="'),h=t.slice(e,l)),e=l+1,!((l=t.indexOf(c,e))>0))throw new Error("attribute value no end '"+c+"' match");a(h,d=t.slice(e,l),e-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');a(h,d=t.slice(e,l),e),o.warning('attribute "'+h+'" missed start quot('+c+")!!"),e=l+1,u=5}break;case"/":switch(u){case 0:r.setTagName(t.slice(e,l));case 5:case 6:case 7:u=7,r.closed=!0;case 4:case 1:break;case 2:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==u&&r.setTagName(t.slice(e,l)),l;case">":switch(u){case 0:r.setTagName(t.slice(e,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=t.slice(e,l)).slice(-1)&&(r.closed=!0,d=d.slice(0,-1));case 2:2===u&&(d=h),4==u?(o.warning('attribute "'+d+'" missed quot(")!'),a(h,d,e)):(n.isHTML(i[""])&&d.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),a(d,d,e));break;case 3:throw new Error("attribute value missed!!")}return l;case"":c=" ";default:if(c<=" ")switch(u){case 0:r.setTagName(t.slice(e,l)),u=6;break;case 1:h=t.slice(e,l),u=2;break;case 4:var d=t.slice(e,l);o.warning('attribute "'+d+'" missed quot(")!!'),a(h,d,e);case 5:u=6}else switch(u){case 2:r.tagName,n.isHTML(i[""])&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),a(h,h,e),e=l,u=1;break;case 5:o.warning('attribute space is required"'+h+'"!!');case 6:u=1,e=l;break;case 3:u=4,e=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function c(t,e,r){for(var i=t.tagName,s=null,o=t.length;o--;){var a=t[o],h=a.qName,l=a.value;if((p=h.indexOf(":"))>0)var u=a.prefix=h.slice(0,p),c=h.slice(p+1),d="xmlns"===u&&c;else c=h,u=null,d="xmlns"===h&&"";a.localName=c,!1!==d&&(null==s&&(s={},f(r,r={})),r[d]=s[d]=l,a.uri=n.XMLNS,e.startPrefixMapping(d,l))}for(o=t.length;o--;)(u=(a=t[o]).prefix)&&("xml"===u&&(a.uri=n.XML),"xmlns"!==u&&(a.uri=r[u||""]));var p;(p=i.indexOf(":"))>0?(u=t.prefix=i.slice(0,p),c=t.localName=i.slice(p+1)):(u=null,c=t.localName=i);var m=t.uri=r[u||""];if(e.startElement(m,c,i,t),!t.closed)return t.currentNSMap=r,t.localNSMap=s,!0;if(e.endElement(m,c,i),s)for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&e.endPrefixMapping(u)}function d(t,e,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var s=t.indexOf("</"+r+">",e),o=t.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(r)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,n),i.characters(o,0,o.length),s)}return e+1}function p(t,e,r,n){var i=n[r];return null==i&&((i=t.lastIndexOf("</"+r+">"))<e&&(i=t.lastIndexOf("</"+r)),n[r]=i),i<e}function f(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function m(t,e,r,n){if("-"===t.charAt(e+2))return"-"===t.charAt(e+3)?(i=t.indexOf("--\x3e",e+4))>e?(r.comment(t,e+4,i-e-4),i+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==t.substr(e+3,6)){var i=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,i-e-9),r.endCDATA(),i+3}var s=function(t,e){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);r=i.exec(t);)if(n.push(r),r[1])return n}(t,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var a=s[1][0],h=!1,l=!1;o>3&&(/^public$/i.test(s[2][0])?(h=s[3][0],l=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(l=s[3][0]));var u=s[o-1];return r.startDTD(a,h,l),r.endDTD(),u.index+u[0].length}return-1}function g(t,e,r){var n=t.indexOf("?>",e);if(n){var i=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function _(){this.attributeNames={}}a.prototype=new Error,a.prototype.name=a.name,h.prototype={parse:function(t,e,r){var i=this.domBuilder;i.startDocument(),f(e,e={}),function(t,e,r,i,s){function o(t){var e=t.slice(1,-1);return Object.hasOwnProperty.call(r,e)?r[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),r=56320+(1023&t);return String.fromCharCode(e,r)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(s.error("entity not found:"+t),t)}function h(e){if(e>S){var r=t.substring(S,e).replace(/&#?\w+;/g,o);y&&f(S),i.characters(r,0,e-S),S=e}}function f(e,r){for(;e>=x&&(r=v.exec(t));)b=r.index,x=b+r[0].length,y.lineNumber++;y.columnNumber=e-b+1}for(var b=0,x=0,v=/.*(?:\r\n?|\n)|.*$/g,y=i.locator,C=[{currentNSMap:e}],T={},S=0;;){try{var w=t.indexOf("<",S);if(w<0){if(!t.substr(S).match(/^\s*$/)){var A=i.doc,M=A.createTextNode(t.substr(S));A.appendChild(M),i.currentElement=M}return}switch(w>S&&h(w),t.charAt(w+1)){case"/":var E=t.indexOf(">",w+3),L=t.substring(w+2,E).replace(/[ \t\n\r]+$/g,""),R=C.pop();E<0?(L=t.substring(w+2).replace(/[\s<].*/,""),s.error("end tag name: "+L+" is not complete:"+R.tagName),E=w+1+L.length):L.match(/\s</)&&(L=L.replace(/[\s<].*/,""),s.error("end tag name: "+L+" maybe not complete"),E=w+1+L.length);var P=R.localNSMap,B=R.tagName==L;if(B||R.tagName&&R.tagName.toLowerCase()==L.toLowerCase()){if(i.endElement(R.uri,R.localName,L),P)for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&i.endPrefixMapping(O);B||s.fatalError("end tag name: "+L+" is not match the current start tagName:"+R.tagName)}else C.push(R);E++;break;case"?":y&&f(w),E=g(t,w,i);break;case"!":y&&f(w),E=m(t,w,i,s);break;default:y&&f(w);var I=new _,D=C[C.length-1].currentNSMap,F=(E=u(t,w,I,D,o,s),I.length);if(!I.closed&&p(t,E,I.tagName,T)&&(I.closed=!0,r.nbsp||s.warning("unclosed xml attribute")),y&&F){for(var G=l(y,{}),k=0;k<F;k++){var U=I[k];f(U.offset),U.locator=l(y,{})}i.locator=G,c(I,i,D)&&C.push(I),i.locator=y}else c(I,i,D)&&C.push(I);n.isHTML(I.uri)&&!I.closed?E=d(t,E,I.tagName,o,i):E++}}catch(t){if(t instanceof a)throw t;s.error("element parse error: "+t),E=-1}E>S?S=E:h(Math.max(w,S)+1)}}(t,e,r,i,this.errorHandler),i.endDocument()}},_.prototype={setTagName:function(t){if(!o.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!o.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=h,e.ParseError=a},6570:t=>{"use strict";function e(t,e,n){n=n||2;var s,o,a,h,c,d,f,m=e&&e.length,g=m?e[0]*n:t.length,_=r(t,0,g,n,!0),b=[];if(!_||_.next===_.prev)return b;if(m&&(_=function(t,e,n,i){var s,o,a,h=[];for(s=0,o=e.length;s<o;s++)(a=r(t,e[s]*i,s<o-1?e[s+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),h.push(p(a));for(h.sort(l),s=0;s<h.length;s++)n=u(h[s],n);return n}(t,e,_,n)),t.length>80*n){s=a=t[0],o=h=t[1];for(var x=n;x<g;x+=n)(c=t[x])<s&&(s=c),(d=t[x+1])<o&&(o=d),c>a&&(a=c),d>h&&(h=d);f=0!==(f=Math.max(a-s,h-o))?32767/f:0}return i(_,b,n,s,o,f,0),b}function r(t,e,r,n,i){var s,o;if(i===A(t,e,r,n)>0)for(s=e;s<r;s+=n)o=T(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=T(s,t[s],t[s+1],o);return o&&_(o,o.next)&&(S(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!_(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(S(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function i(t,e,r,l,u,c,p){if(t){!p&&c&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=d(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,s,o,a,h,l=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,l*=2}while(o>1)}(i)}(t,l,u,c);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,c?o(t,l,u,c):s(t))e.push(f.i/r|0),e.push(t.i/r|0),e.push(m.i/r|0),S(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?i(t=a(n(t),e,r),e,r,l,u,c,2):2===p&&h(t,e,r,l,u,c):i(n(t),e,r,l,u,c,1);break}}}function s(t){var e=t.prev,r=t,n=t.next;if(g(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,a=e.y,h=r.y,l=n.y,u=i<s?i<o?i:o:s<o?s:o,c=a<h?a<l?a:l:h<l?h:l,d=i>s?i>o?i:o:s>o?s:o,p=a>h?a>l?a:l:h>l?h:l,m=n.next;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=c&&m.y<=p&&f(i,a,s,h,o,l,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function o(t,e,r,n){var i=t.prev,s=t,o=t.next;if(g(i,s,o)>=0)return!1;for(var a=i.x,h=s.x,l=o.x,u=i.y,c=s.y,p=o.y,m=a<h?a<l?a:l:h<l?h:l,_=u<c?u<p?u:p:c<p?c:p,b=a>h?a>l?a:l:h>l?h:l,x=u>c?u>p?u:p:c>p?c:p,v=d(m,_,e,r,n),y=d(b,x,e,r,n),C=t.prevZ,T=t.nextZ;C&&C.z>=v&&T&&T.z<=y;){if(C.x>=m&&C.x<=b&&C.y>=_&&C.y<=x&&C!==i&&C!==o&&f(a,u,h,c,l,p,C.x,C.y)&&g(C.prev,C,C.next)>=0)return!1;if(C=C.prevZ,T.x>=m&&T.x<=b&&T.y>=_&&T.y<=x&&T!==i&&T!==o&&f(a,u,h,c,l,p,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;C&&C.z>=v;){if(C.x>=m&&C.x<=b&&C.y>=_&&C.y<=x&&C!==i&&C!==o&&f(a,u,h,c,l,p,C.x,C.y)&&g(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;T&&T.z<=y;){if(T.x>=m&&T.x<=b&&T.y>=_&&T.y<=x&&T!==i&&T!==o&&f(a,u,h,c,l,p,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function a(t,e,r){var i=t;do{var s=i.prev,o=i.next.next;!_(s,o)&&b(s,i,i.next,o)&&y(s,o)&&y(o,s)&&(e.push(s.i/r|0),e.push(i.i/r|0),e.push(o.i/r|0),S(i),S(i.next),i=t=o),i=i.next}while(i!==t);return n(i)}function h(t,e,r,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var u=C(h,l);return h=n(h,h.next),u=n(u,u.next),i(h,e,r,s,o,a,0),void i(u,e,r,s,o,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function u(t,e){var r=function(t,e){var r,n=e,i=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o&&(o=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var h,l=r,u=r.x,d=r.y,p=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&f(s<d?i:o,s,u,d,s<d?o:i,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(i-n.x),y(n,t)&&(h<p||h===p&&(n.x>r.x||n.x===r.x&&c(r,n)))&&(r=n,p=h)),n=n.next}while(n!==l);return r}(t,e);if(!r)return e;var i=C(r,t);return n(i,i.next),n(r,r.next)}function c(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function f(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&b(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(y(t,e)&&y(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||_(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,r,n){var i=v(g(t,e,r)),s=v(g(t,e,n)),o=v(g(r,n,t)),a=v(g(r,n,e));return i!==s&&o!==a||!(0!==i||!x(t,r,e))||!(0!==s||!x(t,n,e))||!(0!==o||!x(r,t,n))||!(0!==a||!x(r,e,n))}function x(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function v(t){return t>0?1:t<0?-1:0}function y(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function C(t,e){var r=new w(t.i,t.x,t.y),n=new w(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function T(t,e,r,n){var i=new w(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(i)for(var a=0,h=e.length;a<h;a++){var l=e[a]*r,u=a<h-1?e[a+1]*r:t.length;o-=Math.abs(A(t,l,u,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,p=n[a+1]*r,f=n[a+2]*r;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},228:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||t,o),h=r?r+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,s),!0;case 6:return u.fn.call(u.context,e,n,i,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,i);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||i&&!a[h].once||n&&a[h].context!==n)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},8133:t=>{t.exports=function(t){var i=[];return t.replace(r,(function(t,r,s){var o=r.toLowerCase();for(s=function(t){var e=t.match(n);return e?e.map(Number):[]}(s),"m"==o&&s.length>2&&(i.push([r].concat(s.splice(0,2))),o="l",r="m"==r?"l":"L");;){if(s.length==e[o])return s.unshift(r),i.push(s);if(s.length<e[o])throw new Error("malformed path data");i.push([r].concat(s.splice(0,e[o])))}})),i};var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},3112:t=>{t.exports='<svg viewBox="0 0 2000 2000" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2000 0H0V2000H2000V0Z" fill="#6AA0FF"></path><path d="M485.703 397.112C489.006 396.774 492.302 396.6 495.579 396.585C518.518 396.483 540.594 404.231 558.617 418.9C579.215 435.661 592.052 459.448 594.765 485.867C596.879 506.485 592.665 526.746 582.549 544.691L593.308 581.366C594.111 584.099 593.408 587.052 591.46 589.127C589.516 591.201 586.608 592.1 583.835 591.472L544.634 582.683C532.725 589.403 519.747 593.521 506.01 594.932C502.555 595.284 499.104 595.46 495.669 595.46C472.901 595.46 450.998 587.71 433.097 573.14C412.499 556.379 399.661 532.597 396.949 506.178C394.237 479.759 401.977 453.863 418.738 433.265C435.498 412.667 459.284 399.824 485.703 397.112Z" fill="#000072"></path><path d="M729.057 235.149C736.92 230.301 746.812 228.394 757.777 228.545C790.675 228.999 833.241 247.976 859.715 261.639C874.779 269.414 890.046 278.304 905.089 287.809C906.12 288.218 907.043 288.593 907.905 288.942L908.079 289.013C914.12 291.471 917.215 292.73 933.812 295.824C958.531 301.261 984.035 304.599 1009.61 307.946L1009.63 307.949C1051 313.365 1092.56 318.805 1131.22 333.2C1158.98 314.607 1189.09 297.375 1218.38 283.737C1246.09 270.835 1290.61 253.063 1324.82 253.482C1336.22 253.622 1346.47 255.783 1354.58 260.82C1396.46 286.838 1395.35 424.504 1358.41 546.621C1379.75 587.401 1391.78 633.035 1398.99 678.332C1402.28 701.726 1404.24 725.975 1404.18 750.278C1413.58 749.163 1424.23 748.733 1433.46 748.788C1447.72 748.872 1461.79 750.337 1475.15 753.103C1481.82 754.781 1488.56 756.564 1495.1 758.673C1491.13 758.748 1487.21 758.678 1483.3 758.583C1481.42 758.552 1479.39 758.463 1477.4 758.375L1476.04 758.316C1475.54 758.294 1475.04 758.274 1474.56 758.256C1473.13 758.334 1465.79 758.355 1461.99 758.366L1461.09 758.368C1460.63 758.37 1460.27 758.371 1460.04 758.372C1441.7 758.501 1422.12 761.004 1403.95 763.622C1402.95 793.706 1398.67 823.649 1389.83 851.933C1418.7 857.531 1446.32 872.308 1464.15 895.192C1440.45 879.228 1413.03 869.319 1385.74 864.005C1376.28 889.831 1362.72 914.034 1344.01 935.395C1306.33 978.177 1254.26 1005.45 1198.97 1019.02C1226.59 1041.14 1251.25 1069.09 1272.67 1095.91C1274.26 1097.99 1275.84 1100.08 1277.41 1102.18C1284.85 1066.16 1303.73 1031.54 1330.87 1006.22C1353.28 985.31 1390.44 962.151 1445.19 961.906C1453.01 961.871 1461.19 962.304 1469.73 963.278C1511.61 968.059 1546.65 987.18 1571.07 1018.59C1596.15 1050.84 1607.8 1094.58 1602.21 1135.61C1596.59 1176.89 1575.86 1209.72 1545.31 1225.67C1523.51 1237.07 1499.84 1237.89 1480.4 1227.94C1471.88 1223.58 1445.17 1204.98 1458.98 1148.41C1467.05 1115.34 1463.1 1095.47 1447.26 1089.34C1422.1 1079.63 1391.94 1095.12 1380 1123.88C1357.93 1177.07 1391.2 1244.11 1423.38 1308.94C1426.03 1314.27 1428.66 1319.59 1431.26 1324.88C1463.99 1391.5 1459.61 1469.87 1420.61 1515.46C1397.55 1542.43 1359.69 1558.89 1314.01 1561.81C1309.21 1562.12 1304.4 1562.26 1299.59 1562.26C1286.46 1562.26 1273.42 1561.06 1260.75 1558.92C1260.85 1597.88 1260.8 1636.48 1260.3 1673.74C1260.42 1674.76 1260.55 1675.8 1260.69 1676.89C1260.77 1677.51 1260.85 1678.14 1260.93 1678.79C1263.25 1697.23 1266.6 1723.86 1257.98 1743.14C1251.48 1756.68 1239.64 1765.96 1225.26 1768.71C1214.64 1771.35 1194.58 1771.15 1178.41 1770.99H1178.39H1178.37L1177.79 1770.98C1171.66 1770.93 1166.12 1770.87 1161.92 1771H1120.74C1099.31 1771.91 1070.6 1766.2 1060.59 1742.62C1057.15 1735.08 1055.99 1727.05 1055.61 1719.81C1054.89 1705.51 1056.5 1692.07 1059.6 1678.16L1044.61 1531.64C1044.41 1531.68 1044.2 1531.71 1044 1531.75C1043.8 1531.78 1043.6 1531.82 1043.39 1531.85C1042.82 1531.95 1042.25 1532.04 1041.67 1532.13C1042.42 1545.01 1043.26 1558.26 1044.12 1571.47V1571.54C1047.76 1627.93 1051.52 1686.24 1047.19 1712.3C1040.75 1751.01 1013.38 1771.46 968.049 1771.46H866.034C847.812 1771.46 834.01 1765.78 825 1754.56C813.784 1740.6 813.041 1720.99 815.814 1708.44C820.46 1687.42 838.471 1673.24 852.82 1666.88C837.082 1600.05 825.563 1539.71 817.226 1489.54C795.021 1486.82 774.882 1480.21 759.487 1467.45C739.06 1450.52 728.131 1424.59 726.097 1388.18C722.807 1329.47 746.363 1249.47 790.723 1168.68C821.479 1112.66 859.45 1061.61 897.639 1023.88C880.087 1021.36 862.674 1018 845.529 1013.64L837.081 1011.61C834.385 1010.78 830.814 1009.7 826.997 1008.54L825.04 1007.94C823.93 1007.6 822.809 1007.26 821.692 1006.92C816.559 1005.36 811.498 1003.82 807.934 1002.71C804.297 1001.24 800.539 999.809 796.762 998.373L796.173 998.149L796.17 998.147L796.168 998.146C790.523 996.001 784.848 993.844 779.482 991.548C773.596 988.956 761.259 983.01 755.739 980.273C753.602 979.079 750.306 977.199 747.141 975.394L746.954 975.287L746.953 975.286L746.505 975.031C744.204 973.719 742.02 972.474 740.461 971.594C687.407 940.474 639.672 890.458 629.607 827.716C629.276 825.751 628.976 823.781 628.708 821.807C597.777 819.665 566.85 822.421 537.133 833.874C557.31 817.247 583.129 809.638 609.537 809.178C615.504 809.074 621.499 809.351 627.467 809.956C625.735 786.402 628.296 762.553 634.701 739.793C608.599 728.499 581.462 719.675 553.626 712.864C550.852 712.127 548.061 711.432 545.262 710.799H545.258L545.247 710.797C540.583 709.689 535.881 708.571 531.16 707.088C538.643 705.98 546.239 705.267 553.808 705.2C582.063 704.949 612.547 711.833 639.461 725.004C641.94 718.181 644.772 711.488 647.944 704.968C650.074 644.862 672.872 543.958 707.131 477.815C708.369 475.357 709.639 472.909 710.939 470.472C689.337 362.675 694.125 256.686 729.057 235.149Z" fill="#000072"></path><path d="M1432.41 980.706C1419.72 981.001 1407.75 982.598 1396.51 985.298C1372.45 993.137 1354.37 1005.83 1341.62 1017.73C1312.95 1044.47 1294.38 1082.53 1290.44 1120.74C1348.22 1204.07 1387.75 1304.01 1379.72 1406.39C1378.58 1420.32 1376.41 1434.85 1371.45 1448.73C1360 1482.05 1335.32 1498.07 1305.98 1503.6C1313.66 1508.55 1324.49 1511.85 1339.57 1512.37C1395.88 1514.3 1422.52 1476.95 1434.88 1446.45C1441.24 1410.64 1435.55 1369.34 1417.12 1331.82C1414.53 1326.55 1411.9 1321.25 1409.27 1315.94C1377.37 1251.66 1344.51 1185.32 1362 1127.73C1368.36 1072.32 1405.77 1043.64 1439.9 1044.52C1441.47 1044.56 1443.03 1044.66 1444.58 1044.83C1450.7 1045.48 1456.04 1046.92 1460.69 1048.98C1458.55 1043.5 1456.15 1037.89 1456.69 1032.64C1457.84 1021.56 1472.18 1008.98 1467.87 995.072C1466.58 990.956 1462.21 987.274 1458.07 981.876C1452.65 981.281 1447.31 980.868 1442.11 980.733C1438.83 980.64 1435.6 980.632 1432.41 980.706Z" fill="white"></path><path d="M1434.88 1446.45C1422.52 1476.95 1395.88 1514.3 1339.58 1512.37C1324.5 1511.85 1313.67 1508.55 1305.98 1503.6C1292.42 1506.16 1277.95 1506.69 1263.17 1505.27C1262.29 1505.42 1261.41 1505.4 1260.53 1505.54C1260.59 1518.07 1260.6 1530.5 1260.65 1543.01C1277.54 1546.07 1295.32 1547.22 1313 1546.09C1354.4 1543.44 1388.37 1528.93 1408.64 1505.22C1422.17 1489.4 1430.88 1469 1434.88 1446.45Z" fill="#CCCCE3"></path><path d="M1439.9 1044.52C1405.77 1043.63 1368.37 1072.32 1362 1127.73C1363.01 1124.41 1364.11 1121.1 1365.46 1117.84C1380.65 1081.24 1419.89 1061.86 1452.94 1074.64C1453.65 1074.92 1454.34 1075.35 1455.04 1075.67C1455.1 1075.6 1455.16 1075.53 1455.23 1075.46C1456.09 1074.5 1456.86 1073.6 1457.68 1072.69C1458.45 1071.83 1459.15 1070.99 1459.83 1070.14C1461.06 1068.59 1462.15 1067.03 1462.85 1065.34C1463.37 1064.11 1463.63 1062.83 1463.7 1061.52C1463.77 1060.21 1463.65 1058.86 1463.39 1057.48C1462.88 1054.72 1461.82 1051.87 1460.69 1048.98C1460.69 1048.98 1460.69 1048.98 1460.7 1048.98C1456.04 1046.92 1450.7 1045.48 1444.58 1044.82C1443.03 1044.66 1441.47 1044.56 1439.9 1044.52Z" fill="#CCCCE3"></path><path d="M1458.08 981.875C1462.21 987.274 1466.59 990.956 1467.87 995.071C1472.18 1008.98 1457.84 1021.56 1456.7 1032.64C1456.15 1037.89 1458.55 1043.5 1460.7 1048.98C1493.8 1063.63 1491.99 1110.07 1486.91 1133.15C1480.21 1163.68 1478.37 1208.18 1522.9 1208.18C1533.04 1208.18 1542.09 1206.4 1550.02 1203.7C1568.12 1189.35 1580.72 1166.64 1585.6 1138.93C1589.41 1096.68 1574.8 1050.77 1541.88 1019.37C1542.85 1023.48 1542.45 1027.36 1540.52 1030.55C1534.62 1040.29 1516.54 1040.12 1500.11 1030.17C1483.7 1020.22 1475.17 1004.25 1481.08 994.519C1482.87 991.556 1485.78 989.522 1489.43 988.382C1480.08 985.368 1470.06 983.188 1459.36 981.967C1458.92 981.916 1458.51 981.923 1458.08 981.875ZM1459.83 1070.14C1459.15 1070.99 1458.45 1071.83 1457.68 1072.69C1458.42 1071.85 1459.17 1070.97 1459.83 1070.14ZM1455.23 1075.47C1455.17 1075.53 1455.11 1075.6 1455.04 1075.67C1455.11 1075.6 1455.16 1075.54 1455.23 1075.47Z" fill="#FFAD40"></path><path d="M1460.69 1048.98C1462.95 1054.76 1464.92 1060.41 1462.85 1065.34C1461.34 1069.01 1458.25 1072.08 1455.04 1075.67C1471.11 1082.91 1486.51 1102.04 1474.29 1152.14C1462.94 1198.66 1483.36 1211.76 1487.58 1213.91C1502.43 1221.5 1520.81 1220.7 1538.02 1211.71C1542.29 1209.48 1546.23 1206.71 1550.02 1203.7C1542.09 1206.4 1533.04 1208.18 1522.9 1208.18C1478.36 1208.18 1480.21 1163.68 1486.91 1133.15C1491.99 1110.07 1493.8 1063.62 1460.69 1048.98Z" fill="#FF9343"></path><path d="M1445.55 977.657C1427.01 977.719 1410.73 980.668 1396.51 985.3C1410.58 981.921 1425.78 980.274 1442.12 980.735C1447.73 980.88 1453.48 981.287 1459.36 981.97C1470.06 983.19 1480.08 985.371 1489.43 988.384C1485.78 989.524 1482.87 991.558 1481.08 994.521C1475.16 1004.26 1483.7 1020.23 1500.11 1030.18C1516.54 1040.13 1534.62 1040.29 1540.51 1030.55C1542.45 1027.36 1542.84 1023.49 1541.88 1019.37C1574.8 1050.78 1589.41 1096.68 1585.6 1138.94C1585.92 1137.11 1586.35 1135.35 1586.61 1133.49C1591.63 1096.57 1581.17 1057.23 1558.64 1028.25C1536.88 1000.27 1505.52 983.216 1467.95 978.927C1460.15 978.035 1452.69 977.633 1445.55 977.657Z" fill="#FFD6A0"></path><path d="M924.062 1026.83C915.652 1036.68 908.43 1045.91 903.012 1053.12C903.117 1052.98 903.313 1052.75 903.42 1052.61C908.696 1045.6 915.507 1036.92 923.585 1027.43C923.774 1027.21 923.871 1027.06 924.062 1026.83Z" fill="#FF9343"></path><path d="M795.654 1392.97C791.899 1397.3 787.227 1400.55 781.371 1402.05C765.18 1406.19 752.472 1402.68 743.08 1397.58C746.16 1423.72 754.631 1442.96 769.537 1455.32C781.289 1465.06 796.925 1470.48 814.601 1473.12C812.19 1458 809.97 1443.5 808.139 1430.61C806.27 1426.61 804.786 1422.41 803.196 1418.26C793.62 1421.33 782.851 1421.89 773.264 1419.8C781.621 1416.2 791.316 1412.78 799.367 1407.71C797.835 1402.92 796.841 1397.91 795.654 1392.97Z" fill="#CCCCE3"></path><path d="M1169.5 1536.66C1128.75 1536.51 1090.38 1544.43 1062.54 1552.18L1075.38 1677.72C1075.48 1678.67 1075.4 1679.6 1075.18 1680.48C1073.72 1686.5 1072.62 1693.22 1071.92 1699.63C1071.38 1705.98 1071.19 1712.88 1071.61 1719.64C1079.91 1724.5 1091.49 1727.84 1107.7 1728.2C1108.17 1715.83 1111.36 1703.55 1118.47 1693.51C1114.02 1703.84 1112.51 1716.68 1114.86 1728.25H1193.42C1194.69 1715.78 1192.77 1702.48 1187.39 1693.51C1194.38 1700.77 1199.51 1714.34 1201.08 1728.25H1206.73C1226.54 1728.25 1238.81 1725.38 1247.33 1720.25C1247.48 1718.32 1247.68 1716.39 1247.7 1714.42C1248.02 1701.04 1246.19 1687.8 1244.59 1674.35C1244.88 1647.72 1245.07 1621 1245.03 1594.28C1245 1582.72 1244.93 1564 1244.87 1547.82C1220.13 1539.85 1194.38 1536.74 1169.5 1536.66Z" fill="white"></path><path d="M829.16 1464.59C837.644 1518.53 850.164 1586.73 868.255 1663.53C870.82 1663.4 873.386 1663.22 875.949 1663.2C904.388 1663 932.663 1669.57 959.766 1677.6C929.866 1673.7 898.826 1671.74 869.198 1678.05C867.996 1678.36 865.368 1678.99 864.251 1679.42C853.561 1682.49 835.148 1694 831.202 1711.84C830.573 1714.68 830.292 1718.83 830.43 1723.28C835.946 1725.09 843.405 1726.65 852.024 1727.91C852.537 1714.53 857.869 1701.36 868.284 1693.51C860.1 1701.71 857.026 1716 859.079 1728.86C872.933 1730.48 889.134 1731.27 905.862 1730.84C905.651 1716.47 911.137 1701.93 922.307 1693.51C913.76 1702.08 910.897 1717.23 913.519 1730.51C961.675 1728.17 1010.74 1715.29 1012.97 1682C1014.62 1659.1 1011.68 1598.53 999.435 1578.94C990.404 1564.5 973.477 1555.92 911.518 1528.99C877.836 1514.34 853.479 1493.33 835.96 1472.1C833.707 1469.59 831.241 1467.21 829.16 1464.59Z" fill="white"></path><path d="M835.957 1472.1C853.475 1493.33 877.832 1514.33 911.515 1528.98C973.474 1555.92 990.4 1564.5 999.431 1578.94C1011.68 1598.52 1014.61 1659.1 1012.97 1681.99C1010.74 1715.28 961.672 1728.17 913.516 1730.51C915.938 1742.78 923.022 1753.47 935.078 1755.71H968.054C1005.7 1755.71 1026.51 1740.66 1031.66 1709.72C1035.69 1685.43 1031.99 1628.01 1028.41 1572.48C1027.56 1559.33 1026.73 1546.38 1025.99 1533.94C984.467 1538.11 941.797 1532.71 902.831 1517.93C874.767 1507.07 853.014 1491.13 835.957 1472.1ZM830.426 1723.28C830.645 1730.35 832.21 1738.38 837.286 1744.7C841.961 1750.52 849.098 1754.02 858.474 1755.21C853.693 1747.25 851.651 1737.53 852.02 1727.91C843.401 1726.64 835.942 1725.09 830.426 1723.28ZM859.075 1728.85C861.147 1741.83 868.443 1753.36 881.054 1755.71H912.746C908.256 1748.46 905.988 1739.68 905.858 1730.83C889.13 1731.26 872.93 1730.47 859.075 1728.85Z" fill="#CCCCE3"></path><path d="M1114.87 1728.25C1117.19 1739.69 1123.28 1749.9 1134.08 1755.24H1161.92L1181.36 1755.22C1182.54 1754.84 1183.96 1754.07 1185.3 1752.46C1189.85 1746.28 1192.48 1737.49 1193.42 1728.25H1114.87Z" fill="#CCCCE3"></path><path d="M1164.23 1661.86C1138.17 1661.39 1111.22 1669.62 1091.36 1683.61C1133.91 1674.71 1177.06 1668.06 1219.67 1680.16C1204.23 1667.87 1184.5 1662.23 1164.23 1661.86Z" fill="#000072"></path><path d="M1059.14 1443.26C1102.42 1432.73 1131.42 1416.87 1149.44 1393.19C1150.69 1396.67 1152.37 1400.01 1154.73 1402.96C1158.81 1407.9 1163.87 1411.36 1169.43 1413.75C1157.81 1429.25 1156.14 1451.49 1163.01 1469.53C1164.62 1474.26 1167.06 1478.34 1169.87 1482.09C1181.3 1497.35 1201.24 1504.89 1220.01 1506.67C1228.32 1507.57 1236.54 1507.61 1244.74 1507.17C1244.79 1522.38 1244.83 1533.66 1244.88 1547.82C1179.6 1526.8 1107.38 1539.69 1062.55 1552.18L1060.1 1528.28C1061.12 1528.04 1062.15 1527.8 1063.18 1527.57C1066.42 1526.82 1069.66 1526.08 1072.85 1525.15H1072.84C971.682 1525.34 850.707 1511.27 815.111 1405.73C860.909 1444.43 948.723 1470.12 1059.14 1443.26Z" fill="#CCCCE3"></path><path d="M890.977 1069.59C846.226 1124.28 815.647 1190.04 797.359 1258.15C790.537 1287.25 787.353 1317.23 788.669 1346.24C786.47 1345.99 784.261 1345.84 782.062 1345.8C776.097 1345.69 770.206 1346.35 764.817 1347.73C772.299 1349.82 781.253 1352.51 789.483 1356.24C790.525 1368.82 792.778 1381.02 795.655 1392.97C791.9 1397.3 787.229 1400.55 781.372 1402.05C765.182 1406.18 752.474 1402.68 743.082 1397.57C742.938 1396.35 742.763 1395.17 742.588 1393.98C742.271 1391.83 741.953 1389.68 741.819 1387.29C736.117 1285.47 812.669 1137.96 895.139 1049.28L895.137 1049.29H895.139C897.332 1050.4 899.743 1050.92 902.075 1052.02C902.22 1051.82 902.203 1052.22 902.353 1052.02C930.488 1065.05 969.561 1076.98 1018.01 1079.09C1067.87 1081.28 1109.78 1075.23 1146 1063.79V1063.82C1146.02 1064.32 1194.64 1043.86 1200.01 1040.97C1298.83 1127.65 1374.92 1275.42 1364.03 1404.44C1362.41 1427.61 1357.29 1445.68 1348.52 1459.18C1314.43 1479.51 1261.12 1470 1261.13 1470C1229.84 1477.32 1206.05 1469.34 1204.7 1452.66C1204.06 1444.55 1207.4 1438.05 1210.53 1431.94C1213.45 1426.24 1216.19 1420.89 1215.36 1414.9C1213.48 1401.32 1203.61 1399.3 1192.05 1396.92C1187.76 1396.04 1183.24 1395.12 1178.8 1393.53C1172.09 1391.12 1167.02 1387.02 1163.14 1382.49C1162.8 1379.66 1162.89 1376.62 1163.68 1373.3C1166.73 1361.93 1178.33 1354.34 1189.97 1349.87C1201.37 1345.91 1213.59 1343.78 1225.53 1341.8C1218.83 1340.3 1212.14 1338.84 1205.4 1337.69C1206.01 1328.78 1205.5 1320.6 1204.69 1312.3C1199.43 1268.52 1187.76 1225.58 1172.02 1184.5C1166.76 1171.02 1160.13 1158.32 1153.53 1145.64C1152.31 1143.3 1151.1 1140.97 1149.89 1138.64C1150.99 1141.38 1152.02 1144.14 1153.06 1146.91C1153.33 1147.64 1153.61 1148.38 1153.88 1149.11C1170.6 1234.29 1178.76 1296.6 1170.49 1341.98C1165.16 1345.31 1160.25 1349.32 1156.12 1354.29C1147.5 1364.62 1144.88 1379.85 1149.44 1392.59C1131.42 1416.27 1102.43 1432.13 1059.14 1442.66C948.725 1469.53 860.911 1443.83 815.113 1405.13C812.849 1398.42 810.883 1391.39 809.337 1383.92C801.356 1343.61 803.812 1301.61 814.229 1261.86C830.968 1199.98 857.796 1141.96 884.696 1083.78C885.472 1082.11 886.397 1079.97 887.381 1077.7H887.382C888.546 1075.01 889.793 1072.13 890.977 1069.59Z" fill="white"></path><path d="M1163.13 1383.08C1164.35 1393.32 1172.44 1400.1 1184.32 1401.74C1184.85 1401.74 1185.29 1401.89 1185.78 1401.97C1185.9 1401.97 1186.02 1401.94 1186.15 1401.94C1194.69 1401.94 1202.88 1406.85 1204.17 1415.93C1204.93 1422.15 1203.06 1428.38 1200.87 1434.11C1200.52 1428.76 1199.95 1422.87 1197.16 1418.25C1195.73 1416.25 1193.74 1415.06 1191.95 1415.39C1191.35 1415.44 1190.46 1415.65 1189.62 1415.94C1189.48 1416.05 1189.4 1416.19 1189.25 1416.3C1179.94 1422.35 1174.81 1434.08 1174.69 1446.2C1174.5 1475.85 1194.88 1488.24 1221.79 1491.03C1235.62 1492.79 1250.01 1491.38 1263.65 1489.5C1305.04 1493.35 1332.75 1484.05 1348.52 1459.77C1314.43 1480.1 1261.12 1470.59 1261.12 1470.59C1229.84 1477.91 1206.05 1469.93 1204.7 1453.25C1203.46 1437.57 1217.07 1427.91 1215.36 1415.49C1212.77 1396.87 1195.19 1399.98 1178.8 1394.12C1172.09 1391.71 1167.01 1387.61 1163.13 1383.08Z" fill="#CCCCE3"></path><path d="M727.268 270.007C725.885 270.071 724.52 270.272 723.175 270.615C715.077 293.937 711.643 332.241 714.259 377.894C715.547 376.542 717.117 375.475 719.159 375.29C722.818 374.687 726.408 373.923 730.017 373.206C728.282 338.149 731.873 304.647 741.681 287.057C743.041 284.618 745.815 281.431 750.414 279.501C743.113 273.792 736.034 270.354 729.364 270.013C728.661 269.977 727.962 269.975 727.268 270.007Z" fill="#CCCCE3"></path><path d="M1343.18 279.448C1334.47 279.649 1325.39 285.974 1317.08 303.313C1317.27 303.284 1317.48 303.214 1317.67 303.188C1319.47 302.932 1321.15 302.815 1322.71 302.816C1333.62 302.822 1338.65 308.572 1340.78 312.334C1361.69 349.421 1354.18 454.128 1327.38 499.06C1327.22 499.334 1326.92 499.468 1326.73 499.716C1331.62 505.558 1333.96 508.397 1335.18 509.877C1335.39 510.14 1337.45 512.596 1337.45 512.596C1337.45 512.607 1337.46 512.622 1337.47 512.634C1337.46 512.621 1337.46 512.608 1337.45 512.596C1341.08 517.615 1344.4 522.813 1347.66 528.047C1377.51 421.726 1376.1 317.141 1354.6 283.3C1353.95 282.623 1353.26 282.065 1352.57 281.494C1349.53 280.159 1346.38 279.374 1343.18 279.448Z" fill="#FF9343"></path><path d="M1325.73 268.99C1285.16 267.65 1212.41 299.403 1148.75 340.536C1152.5 342.261 1156.2 344.129 1159.89 346.054C1237.45 300.564 1324.63 268.126 1348.65 278.904C1350.79 279.865 1352.76 281.379 1354.6 283.296C1352.07 279.32 1349.33 276.096 1346.27 274.192C1341.02 270.931 1334.05 269.265 1325.73 268.99Z" fill="white"></path><path d="M1085.31 1748.08C1075.32 1741.76 1072.33 1730.95 1071.62 1719.63C1079.91 1724.5 1091.5 1727.84 1107.71 1728.2C1107.66 1729.45 1107.49 1730.68 1107.5 1731.93C1107.55 1740.01 1110.19 1748.04 1114.45 1755.14C1104.21 1754.86 1093.72 1753.39 1085.31 1748.08Z" fill="#CCCCE3"></path><path d="M1011 1006.05C1136.34 1007.79 1238.73 986.646 1312.46 942.375C1255.1 993.09 1175.93 1012.41 1102.08 1029.14C1116.03 1029.55 1130.19 1029.04 1144.37 1027.8L1144.38 1027.99C1155.48 1027 1166.85 1025.41 1177.9 1023.41C1185.38 1029.08 1192.74 1035.19 1200 1041.56C1183.85 1050.25 1165.03 1057.72 1145.97 1063.82L1146 1064.38C1109.79 1075.83 1067.87 1081.87 1018.01 1079.69C969.551 1077.58 922.946 1062.68 894.81 1049.64C900.228 1042.43 907.78 1035.79 917.115 1026.06C935.351 1027.82 960.596 1029.7 978.841 1029.97C958.244 1026.48 934.724 1022.18 914.947 1018.05C907.125 1016.65 899.232 1014.71 891.422 1012.8C888.164 1012 884.921 1011.2 881.703 1010.45C873.394 1008.66 865.165 1006.17 856.958 1003.68C851.573 1002.05 846.197 1000.42 840.813 998.996C837.602 997.891 833.143 996.285 828.545 994.628C822.838 992.572 816.917 990.439 812.903 989.092C811.796 988.676 809.555 987.718 807.279 986.745C804.856 985.71 802.393 984.657 801.22 984.225C780.177 975.635 759.194 964.685 739.555 951.736C804.765 980.842 893.066 1001.94 1011 1006.05Z" fill="#CCCCE3"></path><path d="M1247.34 1720.25C1246.56 1730.19 1243.9 1739.53 1236.47 1746.33C1229.07 1753.38 1215.94 1755.02 1202.99 1755.2L1198.75 1755.21C1201.63 1747.3 1202.16 1737.7 1201.09 1728.25H1206.73C1226.54 1728.25 1238.82 1725.38 1247.34 1720.25Z" fill="#CCCCE3"></path><path d="M1063.8 476.614C1061.11 476.547 1058.51 476.984 1056.03 478.032C1029.6 489.207 1033.71 518.469 1049.71 526.952C1072.95 539.278 1123.69 525.059 1123.69 525.059C1123.69 525.059 1089.82 477.262 1063.8 476.614Z" fill="#000072"></path><path d="M1315.11 333.276C1300.09 333.445 1271.05 363.46 1289.46 406.639C1297.44 425.383 1314.93 448.214 1323.05 470.882C1335.08 437.123 1339.13 389.317 1335.6 354.826C1329.77 344.971 1322.89 335.154 1317.9 333.645C1317.05 333.386 1316.11 333.265 1315.11 333.276Z" fill="#F27E80"></path><path d="M1323.05 318.557C1322.6 318.549 1322.09 318.562 1321.52 318.602C1296.25 320.41 1238.14 366.372 1224.32 383.173C1250.46 402.766 1279.64 427.719 1319.37 480.175C1320.67 477.225 1321.9 474.115 1323.05 470.877C1314.92 448.209 1297.44 425.378 1289.45 406.634C1269.83 360.576 1304.17 329.496 1317.9 333.64C1322.89 335.149 1329.77 344.966 1335.6 354.821C1334.1 340.15 1331.35 327.686 1327.06 320.068C1326.84 319.682 1326.25 318.607 1323.05 318.557Z" fill="#FF5C64"></path><path d="M656.23 733.244C645.034 764.869 642.243 799.719 648.964 832.454C678.947 832.338 703.587 811.335 704.52 784.543C705.414 758.887 684.268 737.007 656.23 733.244Z" fill="#FF999E"></path><path d="M737.324 248.562C741.798 245.805 747.845 244.369 755.245 244.204C818.295 242.803 839.376 264.037 861.536 288.994C883.426 299.48 905.938 309.006 929.822 313.861C961.493 321.045 993.659 323.945 1025.76 326.839C1036.44 327.801 1047.11 328.764 1057.75 329.883C1054.8 343.954 1051.88 368.349 1050.65 384.727C1049.23 414.804 1052.05 446.873 1062.66 476.702C1060.38 476.771 1058.15 477.139 1056.03 478.035C1029.61 489.21 1033.71 518.472 1049.72 526.955C1061.04 532.96 1078.86 532.63 1094.18 530.748C1107.65 545.929 1124.76 559.303 1146.45 569.858C1232.06 611.539 1306.22 581.429 1350.69 552.1C1359.79 580.483 1367.86 608.912 1374.21 638.176C1382.15 676.114 1386.72 714.874 1386.58 753.622C1359.86 759.416 1334.55 770.521 1314.27 787.534C1337.53 777.49 1361.71 770.256 1386.37 765.5C1386.14 773.18 1385.79 780.858 1385.17 788.524C1384.21 809.631 1380.14 830.604 1373.4 850.65C1369.11 850.302 1364.81 850.115 1360.52 850.105C1342.58 850.063 1324.78 852.95 1308.74 858.549C1329.03 858.276 1349.49 859.009 1369.54 861.658C1360.5 884.484 1347.67 905.761 1331.13 924.028C1325.23 930.626 1318.94 936.651 1312.46 942.379C1238.74 986.651 1136.35 1007.79 1011.01 1006.06C893.068 1001.94 804.767 980.847 739.556 951.74C698.608 924.74 664.034 888.241 650.659 840.663C650.19 838.84 649.838 836.989 649.487 835.137C649.318 834.243 649.148 833.348 648.965 832.457C678.948 832.341 703.588 811.338 704.522 784.546C705.415 758.891 684.269 737.01 656.231 733.247C658.811 725.959 661.673 718.784 665.128 711.918C674.925 611.563 698.799 501.418 764.272 422.101C778.295 425.667 792.986 425.328 806.845 419.048C806.844 419.045 806.842 419.043 806.84 419.041L806.838 419.038C780.78 418.636 756.366 407.63 737.795 390.066C757.14 386.69 776.306 381.114 794.237 373.585C797.794 372.109 801.297 370.61 804.762 369.127L804.796 369.112C812.483 365.823 819.98 362.616 827.461 359.918C838.37 355.996 849.486 353.244 861.063 351.581C861.164 351.571 861.259 351.544 861.354 351.517L861.38 351.509C861.444 351.492 861.508 351.474 861.575 351.463C869.174 350.365 877.255 350.489 885.4 350.615H885.406C895.471 350.77 905.634 350.926 915.111 348.778C904.919 348.043 895.63 345.165 886.244 342.258L886.24 342.257L886.237 342.256C879.813 340.266 873.341 338.261 866.505 336.921L866.492 337.003L849.245 333.871C849.257 333.927 849.27 333.982 849.283 334.038C849.216 333.973 849.148 333.907 849.081 333.841L849.036 333.833L849.028 333.789C824.68 310.056 785.569 281.467 763.422 278.169C761.738 277.917 760.171 277.802 758.715 277.801C755.32 277.799 752.708 278.54 750.413 279.503C743.112 273.794 736.032 270.356 729.363 270.015C727.258 269.907 725.193 270.102 723.174 270.617C723.198 270.546 723.223 270.475 723.248 270.404L723.254 270.386C723.29 270.283 723.325 270.18 723.361 270.076L723.373 270.041C724.104 267.935 724.834 265.83 725.648 264.002C725.65 264 725.653 263.998 725.655 263.997C728.952 256.59 732.861 251.313 737.324 248.562Z" fill="white"></path><path d="M1337.44 512.593C1337.44 512.593 1336.45 511.405 1336.14 511.033C1336.44 511.39 1337.45 512.598 1337.45 512.598C1337.46 512.608 1337.46 512.618 1337.47 512.629C1337.47 512.636 1337.47 512.643 1337.48 512.649V512.655C1337.48 512.664 1337.48 512.673 1337.49 512.683C1337.47 512.654 1337.46 512.622 1337.44 512.593Z" fill="white"></path><path d="M789.555 486.857C766.005 487.157 742.434 538.971 742.434 538.971C742.434 538.971 788.557 542.839 806.573 528.359C818.979 518.389 817.673 492.462 793.027 487.198C791.871 486.951 790.713 486.842 789.555 486.857Z" fill="#000072"></path><path d="M1227.95 764.099C1195.75 764.312 1169.42 785.202 1168.48 811.878C1167.52 839.415 1193.99 862.689 1227.61 863.863C1261.22 865.037 1289.25 843.665 1290.21 816.129C1291.17 788.592 1264.7 765.317 1231.09 764.143C1230.04 764.107 1228.99 764.093 1227.95 764.099Z" fill="#FF999E"></path><path d="M1159.89 346.056C1227.44 306.441 1302.26 276.707 1336.34 276.825H1336.33C1341.39 276.842 1345.54 277.514 1348.65 278.906C1350.03 279.527 1351.32 280.449 1352.57 281.492C1349.52 280.157 1346.38 279.372 1343.18 279.446C1334.47 279.647 1325.39 285.972 1317.08 303.311C1285.97 308.191 1223.96 355.843 1209.39 377.48C1207.85 379.768 1206.67 381.859 1206.29 383.48C1205.56 386.554 1206.74 389.758 1209.29 391.632C1237.53 412.415 1268.91 437.875 1314.27 499.684C1315.76 501.713 1318.12 502.898 1320.62 502.898C1320.74 502.898 1320.86 502.898 1320.99 502.888C1323.31 502.777 1325.33 501.525 1326.73 499.712C1332.93 507.116 1337.44 512.591 1337.44 512.591C1337.45 512.609 1337.46 512.627 1337.47 512.645C1337.47 512.657 1337.48 512.669 1337.48 512.681C1342.12 525.856 1346.48 538.974 1350.68 552.095C1306.22 581.425 1232.06 611.535 1146.44 569.854C1124.76 559.299 1107.65 545.925 1094.18 530.743C1110.32 528.762 1123.69 525.058 1123.69 525.058C1123.69 525.058 1089.82 477.261 1063.81 476.613C1063.58 476.607 1063.37 476.631 1063.15 476.655C1062.99 476.674 1062.82 476.692 1062.65 476.697C1051.02 443.981 1048.75 408.571 1051.17 376.049L1051.15 376.053C1052.37 359.672 1054.78 344.052 1057.75 329.879C1070.07 331.175 1082.37 332.647 1094.58 334.616C1121.53 338.777 1148 345.708 1174.43 354.335C1174.44 354.339 1174.45 354.344 1174.46 354.348C1174.46 354.352 1174.47 354.356 1174.48 354.36C1174.5 354.367 1174.52 354.374 1174.53 354.381C1174.52 354.372 1174.5 354.363 1174.48 354.356C1174.48 354.356 1174.48 354.353 1174.47 354.352L1174.48 354.35C1174.48 354.35 1174.47 354.348 1174.47 354.346L1174.46 354.342C1169.68 351.338 1164.81 348.626 1159.89 346.056Z" fill="#FFAD40"></path><path d="M990.088 834.752C993.264 830.675 997.592 828.931 1001.96 828.926C1012.29 828.913 1022.84 838.655 1018.8 850.267C1016.79 848.991 1014.87 847.798 1012.99 846.666C1008.08 865.05 991.307 880.434 972.636 884.16C952.249 889.022 927.453 882.106 916.619 863.734C938.633 880.208 972.239 878.304 990.713 858.299C995.191 853.365 998.537 846.393 1000.6 839.765C997.332 838.098 993.902 836.465 990.088 834.752Z" fill="#000072"></path><path d="M1170.49 1342.57C1178.75 1297.19 1170.6 1234.89 1153.88 1149.71C1170.68 1194.39 1179.9 1241.63 1185.34 1288.91C1186.9 1303.83 1188.62 1319.03 1189.3 1333.97C1182.72 1336.09 1176.35 1338.92 1170.49 1342.57Z" fill="#CCCCE3"></path><path d="M722.781 450.273C719.189 429.76 716.657 409.769 715.145 390.83C720.449 396.832 726.584 402.339 733.335 407.114C734.426 414.525 735.745 421.791 737.293 428.778C732.14 435.736 727.364 442.956 722.781 450.273Z" fill="#CCCCE3"></path><path d="M1070.16 658.529C1037.59 658.479 1011.13 688.93 1011.08 726.545C1011.02 764.159 1037.38 794.693 1069.95 794.743C1102.53 794.794 1128.98 764.342 1129.04 726.728C1129.1 689.113 1102.74 658.58 1070.16 658.529Z" fill="#000072"></path><path d="M1052.68 696.869C1042.06 696.853 1033.43 707.739 1033.41 721.184C1033.39 734.629 1041.98 745.542 1052.61 745.558C1063.23 745.575 1071.85 734.689 1071.88 721.244C1071.9 707.798 1063.3 696.886 1052.68 696.869Z" fill="white"></path><path d="M1087.31 739.172C1081.43 739.163 1076.65 746.532 1076.64 755.63C1076.62 764.728 1081.38 772.111 1087.26 772.12C1093.14 772.129 1097.92 764.761 1097.93 755.663C1097.95 746.565 1093.19 739.181 1087.31 739.172Z" fill="#33338E"></path><path d="M776.227 657.141C744.626 657.091 718.963 686.636 718.906 723.13C718.85 759.624 744.421 789.248 776.022 789.296C807.622 789.345 833.285 759.801 833.342 723.308C833.399 686.814 807.827 657.19 776.227 657.141Z" fill="#000072"></path><path d="M759.263 694.344C748.961 694.328 740.592 704.888 740.572 717.931C740.552 730.975 748.888 741.561 759.19 741.577C769.493 741.593 777.861 731.032 777.881 717.989C777.901 704.946 769.566 694.359 759.263 694.344Z" fill="white"></path><path d="M792.86 735.381C787.154 735.372 782.517 742.521 782.504 751.347C782.49 760.173 787.104 767.336 792.81 767.345C798.517 767.355 803.154 760.206 803.167 751.379C803.181 742.552 798.566 735.389 792.86 735.381Z" fill="#33338E"></path><path d="M851.757 772.553C852.366 763.792 866.59 759.828 882.282 759.818C902.458 759.806 925.062 766.33 924.279 777.597C923.42 789.922 908.92 799.861 897.901 805.677C896.423 806.457 894.883 807.058 893.311 807.489C893.656 806.596 890.392 822.227 889.922 825.682C889.438 829.234 889.112 831.625 888.812 831.633C887.697 831.662 879.469 816.681 877.864 806.253C876.521 805.642 875.224 804.898 873.998 804.015C863.888 796.728 850.898 784.884 851.757 772.553Z" fill="#000072"></path><path d="M877.929 767.395C873.188 767.415 869.356 768.022 869.26 769.412C869.099 771.692 874.046 774.063 877.868 775.545C880.515 776.575 883.946 776.81 886.713 776.157C890.706 775.218 895.93 773.556 896.09 771.276C896.251 768.959 885.829 767.362 877.929 767.395Z" fill="white"></path><path d="M486.226 410.822C519.555 407.396 552.668 425.121 568.399 454.767C568.38 454.743 568.362 454.72 568.344 454.697C568.361 454.719 568.379 454.742 568.396 454.764C573.281 463.969 576.518 474.236 577.645 485.224C579.524 503.517 579.935 523.749 570.357 539.424C569.176 541.358 582.371 576.255 577.645 576.741C572.919 577.228 542.511 569.196 542.511 569.196C517.034 582.95 488.912 584.411 465.903 576.741C438.767 567.696 415.275 538.949 412.216 509.175C411.113 498.433 411.691 480.87 414.575 470.79C414.577 470.786 414.579 470.781 414.582 470.776C417.644 460.083 422.855 450.015 430.087 441.128C444.141 423.855 464.076 413.097 486.226 410.822Z" fill="white"></path><path d="M477.713 465.092C473.195 465.22 468.796 466.895 465.337 470.356C457.427 478.267 457.427 491.089 465.337 498.995L466.567 500.226L491.435 525.093C493.52 527.177 496.899 527.177 498.984 525.093L523.851 500.226L525.081 498.995C532.981 491.089 532.982 478.267 525.076 470.356C517.165 462.445 504.343 463.862 496.437 471.773L495.207 473.003L493.976 471.773C489.526 467.323 483.522 464.928 477.713 465.092Z" fill="#FF0068"></path><path d="M760.441 309.939C756.614 310.187 752.738 312.283 749.141 315.17C746.212 330.137 744.927 349.166 745.713 369.659C759.747 366.117 773.506 361.709 787.068 356.021C791.088 354.316 795.28 352.719 799.404 351.061C786.717 329.925 772.394 312.292 763.738 310.211C762.648 309.949 761.547 309.867 760.441 309.939Z" fill="#F27E80"></path><path d="M758.642 293.545C756.096 293.545 755.628 294.384 755.438 294.725C752.717 299.606 750.752 306.946 749.143 315.17C753.78 311.448 758.88 309.045 763.74 310.21C772.396 312.291 786.72 329.924 799.406 351.061C810.146 346.744 821.094 342.647 832.358 339.853C810.103 319.631 777.188 295.095 759.908 293.605C759.441 293.565 759.019 293.545 758.642 293.545Z" fill="#FF5C64"></path></svg>'},1179:t=>{t.exports='<svg viewBox="0 0 3000 2000" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_1244_2779)"><path d="M3000 0H0V2000H3000V0Z" fill="white"></path><path d="M1 1997H2999V0H1V1997Z" fill="#FFE3BC"></path><path d="M1189 1339C1189 1339 1778 1043 2155 1055C2533 1067 2999 1417 2999 1417L1189 1339Z" fill="#FFC68A"></path><path d="M1189 1339C1189 1339 1777 1043 2155 1055C2533 1067 2999 1416 2999 1416L1189 1339Z" fill="#FFC68A"></path><path d="M16 1249C16 1249 599 975 883 957C1168 940 2127 1400 2127 1400L1 1417L16 1249Z" fill="#FFCF95"></path><path d="M431 1405C431 1405 450 1354 422 1323C394 1292 355 1325 355 1325C355 1325 354 1307 344 1296C335 1285 319 1293 319 1293C319 1293 312 1219 262 1206C212 1193 183 1238 183 1238C183 1238 155 1223 137 1237C119 1252 119 1279 119 1279C119 1279 67 1253 36 1302C36 1302 23 1282 0 1320V1400L1 1446L431 1405Z" fill="#932500"></path><path d="M195 1315C193 1319 190 1321 187 1321L184 1320C180 1318 178 1313 180 1309C181 1307 187 1290 200 1288C207 1286 214 1289 219 1294C224 1285 233 1277 245 1276H246C269 1276 280 1304 281 1305C282 1309 280 1314 277 1316C273 1318 268 1316 266 1312C266 1312 259 1294 246 1294C233 1294 230 1310 229 1311C229 1314 226 1317 223 1318C220 1318 217 1317 215 1314C214 1312 208 1303 203 1305C200 1305 196 1311 195 1315Z" fill="#D5000D"></path><path d="M67 1365C68 1355 74 1338 89 1337C99 1336 106 1343 111 1349C119 1342 131 1336 145 1343C153 1346 158 1353 161 1361C168 1357 177 1354 186 1358C202 1365 203 1383 202 1392C202 1397 198 1400 193 1400H192C187 1399 184 1394 185 1389C185 1387 185 1379 179 1376C174 1374 168 1380 167 1380L168 1398C167 1403 164 1407 160 1407H159C155 1406 152 1402 152 1397C152 1389 151 1364 139 1359C126 1352 117 1367 116 1368C114 1371 112 1372 109 1372C106 1372 104 1370 102 1367C101 1365 96 1354 90 1354C84 1355 83 1367 83 1367C82 1372 78 1375 74 1374C70 1374 67 1369 67 1365Z" fill="#D5000D"></path><path d="M377 1243C377 1243 376 1221 386 1206C393 1195 413 1191 427 1179C427 1179 422 1189 412 1198C402 1206 404 1231 377 1243Z" fill="#D5000D"></path><path d="M371 1259C371 1259 377 1244 374 1226C371 1208 364 1200 361 1185C361 1185 354 1202 357 1219C360 1237 365 1239 368 1247L371 1259Z" fill="#D5000D"></path><path d="M365 1302L364 1283C364 1274 351 1259 339 1255C339 1255 345 1261 349 1279C353 1297 356 1301 366 1310L365 1302Z" fill="#D5000D"></path><path d="M369 1277C369 1277 372 1259 385 1251C398 1244 414 1235 423 1224C423 1224 414 1247 403 1259C392 1272 378 1271 369 1277Z" fill="#D5000D"></path><path d="M354 1271C354 1271 359 1279 360 1288C361 1297 366 1311 366 1311L365 1303L363 1291C362 1284 361 1279 354 1271Z" fill="#932500"></path><path d="M395 1251L378 1264C372 1269 367 1279 367 1279V1282C367 1282 372 1272 379 1265L395 1251Z" fill="#932500"></path><path d="M365 1215L369 1231C372 1241 369 1264 369 1264L371 1257C371 1257 373 1245 371 1234L365 1215Z" fill="#932500"></path><path d="M390 1219L388 1222L386 1226L384 1229L383 1231V1232L376 1247L374 1254L371 1262V1265L370 1269L368 1277L367 1308V1316L368 1324L369 1340L367 1324L366 1317L365 1309V1293L366 1277L369 1261L372 1253L373 1249L375 1246L378 1239L382 1232L386 1225L390 1219Z" fill="#932500"></path><path d="M2568 1405C2568 1405 2549 1354 2578 1323C2606 1292 2644 1325 2644 1325C2644 1325 2646 1307 2655 1296C2664 1285 2681 1293 2681 1293C2681 1293 2687 1219 2738 1206C2788 1193 2817 1238 2817 1238C2817 1238 2845 1223 2863 1237C2880 1252 2880 1279 2880 1279C2880 1279 2933 1253 2964 1302C2964 1302 2999 1271 2999 1317V1474L2568 1405Z" fill="#932500"></path><path d="M2805 1315C2806 1319 2809 1321 2812 1321L2815 1320C2819 1318 2821 1313 2820 1309C2819 1307 2813 1290 2800 1288C2792 1286 2786 1289 2780 1294C2775 1285 2767 1277 2754 1276C2730 1276 2720 1304 2719 1305C2717 1309 2719 1314 2723 1316C2727 1318 2732 1316 2733 1312C2733 1312 2741 1294 2754 1294C2766 1294 2770 1310 2770 1311C2771 1314 2773 1317 2776 1318C2780 1318 2783 1317 2784 1314C2786 1312 2792 1303 2797 1305C2800 1305 2804 1311 2805 1315Z" fill="#D5000D"></path><path d="M2932 1365C2931 1355 2926 1338 2911 1337C2901 1336 2894 1343 2889 1349C2881 1342 2869 1336 2855 1343C2847 1346 2842 1353 2838 1361C2832 1357 2823 1354 2814 1358C2798 1365 2796 1383 2797 1392C2798 1397 2802 1400 2806 1400H2808C2812 1399 2816 1394 2815 1389C2815 1387 2814 1379 2821 1376C2826 1374 2832 1380 2833 1380L2832 1398C2832 1403 2836 1407 2840 1407C2844 1406 2848 1402 2848 1397C2847 1389 2849 1364 2861 1359C2874 1352 2883 1367 2884 1368C2885 1371 2888 1372 2891 1372C2894 1372 2896 1370 2897 1367C2898 1365 2904 1354 2910 1354C2915 1355 2917 1367 2917 1367C2918 1372 2921 1375 2926 1374C2930 1374 2933 1369 2932 1365Z" fill="#D5000D"></path><path d="M2623 1243C2623 1243 2624 1221 2614 1206C2607 1195 2587 1191 2573 1179C2573 1179 2578 1189 2588 1198C2597 1206 2596 1231 2623 1243Z" fill="#D5000D"></path><path d="M2629 1259C2629 1259 2622 1244 2625 1226C2628 1208 2636 1200 2639 1185C2639 1185 2645 1202 2643 1219C2640 1237 2635 1239 2632 1247L2629 1259Z" fill="#D5000D"></path><path d="M2635 1302L2636 1283C2636 1274 2649 1259 2660 1255C2660 1255 2654 1261 2651 1279C2647 1297 2644 1301 2633 1310L2635 1302Z" fill="#D5000D"></path><path d="M2631 1277C2631 1277 2627 1259 2614 1251C2602 1244 2586 1235 2577 1224C2577 1224 2585 1247 2597 1259C2608 1272 2621 1271 2631 1277Z" fill="#D5000D"></path><path d="M2645 1271C2645 1271 2640 1279 2640 1288C2639 1297 2634 1311 2634 1311V1303L2637 1291C2638 1284 2639 1279 2645 1271Z" fill="#932500"></path><path d="M2605 1251L2622 1264C2628 1269 2633 1279 2633 1279L2632 1282C2632 1282 2628 1272 2620 1265L2605 1251Z" fill="#932500"></path><path d="M2635 1215L2631 1231C2627 1241 2630 1264 2630 1264L2629 1257C2629 1257 2626 1245 2629 1234C2630 1226 2632 1224 2635 1215Z" fill="#932500"></path><path d="M2609 1219L2611 1222L2613 1226L2615 1229L2616 1231L2617 1232L2623 1247L2626 1254L2628 1262L2629 1265L2630 1269L2631 1277C2633 1287 2633 1298 2633 1308V1312L2632 1316V1324L2630 1340L2633 1324L2634 1317V1309L2635 1293L2633 1277C2633 1271 2632 1266 2630 1261L2628 1253L2626 1249L2625 1246L2622 1239L2618 1232L2614 1225L2609 1219Z" fill="#932500"></path><path d="M1500 1318C778 1318 1 1457 1 1457V1997H2999V1456C2999 1456 2222 1318 1500 1318Z" fill="#FF6700"></path><path d="M773 1997C773 1997 1809 1461 2999 1633V1997H773Z" fill="#E54000"></path><path d="M1071 324C1071 324 1044 370 995 370C947 369 927 325 927 325C927 325 904 371 847 370C801 369 775 332 775 332C775 332 699 390 621 374C529 355 504 251 504 251C501 251 403 231 404 177C404 102 546 93 546 93C546 93 554 25 596 0H1107C1148 26 1151 51 1151 51C1151 51 1301 58 1308 188C1315 319 1071 324 1071 324Z" fill="white"></path><path d="M807 0C766 40 759 111 759 111C759 111 686 51 647 66C607 81 575 148 575 148C575 148 446 149 449 177C451 204 502 250 504 251C504 251 529 355 621 374C699 390 775 332 775 332C775 332 801 369 847 370C904 371 927 325 927 325C927 325 947 369 995 370C1044 370 1071 324 1071 324C1071 324 1257 277 1250 198C1243 119 1121 129 1121 129C1121 129 1129 77 1079 51C1029 25 986 97 986 97C986 97 966 36 927 0H807Z" fill="#F7DDBB"></path><path d="M2344 609C2347 693 2132 696 2132 696C2132 696 2110 753 2059 752C2009 751 1983 720 1983 720C1983 720 1946 762 1886 755C1826 748 1802 716 1802 716C1802 716 1646 728 1638 653C1630 577 1734 579 1734 579C1734 579 1714 521 1745 481C1782 433 1832 452 1832 452C1832 452 1848 324 1958 333C2049 341 2062 458 2062 458C2062 458 2106 412 2158 443C2203 471 2196 520 2196 520C2196 520 2341 526 2344 609Z" fill="white"></path><path d="M1906 534C1906 534 1870 487 1830 511C1785 537 1794 598 1794 598C1794 598 1685 605 1688 647C1690 689 1802 716 1802 716C1802 716 1826 748 1886 755C1946 762 1983 720 1983 720C1983 720 2009 751 2059 752C2110 753 2132 696 2132 696C2132 696 2320 643 2312 602C2303 560 2164 572 2164 572C2164 572 2164 532 2132 514C2085 489 2052 549 2052 549C2052 549 2050 448 1984 441H1979C1924 441 1906 534 1906 534Z" fill="#F7DDBB"></path><path d="M1504 898C1501 916 1481 924 1459 928C1428 933 1394 930 1394 930C1394 930 1383 958 1355 963C1327 968 1302 937 1302 937C1275 939 1248 937 1225 933C1196 927 1176 916 1175 901C1174 882 1201 883 1201 883C1201 883 1193 859 1207 845C1220 832 1241 842 1241 842C1241 842 1238 809 1260 794C1284 777 1309 796 1309 796C1309 796 1324 756 1356 756C1388 755 1404 807 1404 807C1404 807 1426 794 1443 806C1458 818 1456 842 1456 842C1456 842 1512 864 1504 898Z" fill="white"></path><path d="M1321 826C1321 826 1308 813 1289 819C1263 828 1262 863 1262 863C1262 863 1240 851 1226 857C1212 862 1219 892 1219 892C1219 892 1200 891 1195 902C1192 907 1210 922 1225 933C1248 937 1275 939 1302 937C1302 937 1327 968 1355 963C1383 958 1394 930 1394 930C1394 930 1428 933 1459 928C1474 923 1487 916 1488 908C1489 888 1437 876 1437 876C1437 876 1442 852 1426 839C1411 826 1386 839 1386 839C1386 839 1386 809 1362 802L1354 800C1333 800 1321 826 1321 826Z" fill="white"></path><path d="M2999 869V919C2999 919 2996 999 2901 960C2901 960 2810 1023 2766 955C2766 955 2733 981 2699 949C2699 949 2613 1056 2528 965C2528 965 2420 1040 2352 983C2285 927 2292 865 2292 865C2292 865 2230 831 2242 771C2254 712 2304 708 2304 708C2303 707 2280 679 2291 641C2291 641 2180 635 2165 562C2151 489 2219 443 2219 443C2219 443 2202 372 2223 327C2244 282 2305 274 2305 274C2305 274 2306 161 2419 151C2419 151 2383 60 2470 0H2999V869Z" fill="#FF7500"></path><path d="M2999 378V21C2999 116 3008 220 2921 136C2921 136 2923 211 2875 236C2827 262 2804 223 2804 223C2804 223 2781 252 2764 246C2746 240 2728 239 2728 239C2728 239 2704 280 2716 363C2716 363 2721 443 2782 463C2844 483 2859 471 2859 471C2859 471 2863 530 2925 539C2929 539 2999 539 2999 642V378Z" fill="#EF5000"></path><path d="M2999 509V784C2895 829 2892 736 2892 736C2892 736 2867 779 2806 803L2801 805L2769 719C2769 719 2749 739 2716 739C2683 739 2671 685 2671 685C2671 685 2656 709 2634 712C2613 715 2588 678 2588 678C2588 678 2582 727 2555 741C2528 755 2495 717 2495 717C2479 738 2446 751 2446 751C2462 803 2536 838 2538 837L2641 842C2634 845 2625 847 2616 847C2546 850 2526 837 2526 837C2526 837 2485 944 2401 917C2347 900 2364 807 2364 807C2364 807 2321 837 2288 797C2255 757 2304 708 2304 708C2304 708 2254 712 2242 771C2230 831 2292 865 2292 865C2292 865 2285 927 2352 983C2420 1040 2528 965 2528 965C2613 1056 2699 949 2699 949C2733 981 2766 955 2766 955C2810 1023 2901 960 2901 960C2996 999 2999 919 2999 919V509Z" fill="#EF5000"></path><path d="M2999 1198V1843C2918 1502 2956 1093 2856 951C2757 810 2622 887 2536 852C2450 817 2444 742 2444 742C2485 803 2512 837 2626 833C2606 820 2600 789 2599 770L2598 754L2603 768C2630 830 2673 831 2676 831C2777 832 2812 868 2813 869C2812 867 2780 793 2769 751C2755 702 2766 648 2761 581C2756 514 2752 467 2687 389C2621 311 2634 225 2634 225C2646 328 2705 364 2705 364C2691 289 2715 247 2726 231L2732 225L2727 244C2700 356 2760 421 2783 507C2807 594 2794 683 2793 691C2794 683 2811 604 2825 567C2839 528 2849 511 2849 458C2849 436 2853 418 2857 405C2862 387 2869 378 2869 378L2866 391C2856 442 2876 471 2869 513C2861 557 2825 648 2831 739C2835 810 2908 902 2941 989C2974 1076 2999 1198 2999 1198Z" fill="#65443A"></path><path d="M2999 1258V1273C2981 1218 2967 1137 2946 1073C2918 991 2895 949 2864 891C2853 873 2842 852 2829 827C2808 787 2801 738 2808 681C2814 635 2828 596 2837 572L2839 564C2853 525 2857 511 2853 458C2852 436 2854 418 2857 405C2862 387 2869 378 2869 378L2866 391C2862 403 2856 425 2858 458C2862 511 2857 526 2844 566L2841 574C2824 622 2785 733 2833 824L2868 889C2900 946 2923 988 2950 1071C2970 1130 2981 1203 2999 1258Z" fill="#7D554B"></path><path d="M2999 1419V1434C2976 1368 2968 1279 2950 1199C2937 1142 2925 1088 2913 1049C2896 992 2884 964 2869 936C2867 934 2851 913 2802 880C2772 859 2739 855 2706 852C2686 849 2666 847 2649 840C2617 828 2604 791 2599 770L2598 754L2603 768C2608 787 2621 823 2650 835C2667 842 2686 844 2707 846C2738 850 2773 854 2805 876C2832 894 2850 909 2860 919L2851 902C2842 886 2832 869 2821 846C2773 756 2775 684 2776 613L2777 607C2778 548 2772 534 2749 473L2728 417C2707 359 2708 309 2713 278C2717 256 2722 240 2726 231L2732 225L2727 244C2724 253 2720 265 2718 279C2713 310 2711 358 2732 415L2754 471C2777 533 2783 547 2781 607V614C2780 686 2778 755 2825 844L2855 899C2880 946 2893 969 2918 1048C2929 1086 2942 1140 2955 1198C2972 1272 2978 1355 2999 1419Z" fill="#7D554B"></path><path d="M2262 199L2263 196C2263 191 2264 172 2244 165C2222 158 2213 130 2213 130C2213 130 2190 166 2210 204C2228 239 2257 217 2257 217L2271 229V223C2271 223 2241 202 2226 178C2226 178 2254 210 2262 199Z" fill="#FFB200"></path><path d="M2307 1012L2310 1011C2315 1010 2332 1007 2339 1028C2348 1053 2373 1060 2373 1060C2373 1060 2344 1089 2307 1070C2274 1053 2291 1020 2291 1020L2280 1005L2285 1004C2285 1004 2306 1035 2329 1049C2329 1049 2298 1022 2307 1012Z" fill="#FFB200"></path><path d="M2686 1059L2688 1063C2689 1069 2693 1092 2670 1103C2643 1116 2636 1151 2636 1151C2636 1151 2603 1113 2622 1062C2639 1017 2677 1038 2677 1038L2693 1021L2694 1029C2694 1029 2661 1059 2646 1091C2646 1091 2675 1047 2686 1059Z" fill="#FFB200"></path><path d="M2367 715C2367 715 2371 749 2399 754C2424 759 2437 728 2437 728C2437 728 2469 736 2480 711C2490 686 2483 672 2483 672C2483 672 2513 699 2492 733C2476 760 2454 752 2454 752C2454 752 2426 797 2391 782C2356 767 2367 715 2367 715Z" fill="#EF5000"></path><path d="M2567 744C2567 744 2571 763 2582 764C2593 764 2599 752 2599 752C2599 752 2606 765 2614 759C2622 754 2621 745 2621 745C2621 745 2627 757 2618 768C2609 778 2599 770 2599 770C2599 770 2588 788 2572 777C2560 768 2567 744 2567 744Z" fill="#FF7500"></path><path d="M2842 329C2842 329 2839 357 2853 364C2867 372 2878 354 2878 354C2878 354 2885 380 2899 377C2912 374 2915 363 2915 363C2915 363 2917 382 2900 391C2883 401 2872 384 2872 384C2872 384 2849 401 2833 376C2821 357 2842 329 2842 329Z" fill="#FF7500"></path><path d="M2557 141C2557 141 2527 203 2574 231C2620 257 2645 221 2645 221C2645 221 2651 242 2672 247C2693 253 2715 235 2715 235C2715 235 2717 254 2747 259C2777 265 2801 226 2801 226C2801 226 2734 258 2730 191C2730 191 2697 227 2672 209C2653 195 2651 177 2651 177C2651 177 2620 213 2588 202C2555 190 2557 141 2557 141Z" fill="#EF5000"></path><path d="M2313 544C2313 544 2266 535 2259 502C2251 469 2283 450 2283 450C2283 450 2249 399 2269 359C2287 323 2355 341 2355 341C2355 341 2378 280 2409 281C2446 283 2458 343 2458 343C2458 343 2431 306 2409 311C2388 316 2374 373 2374 373C2374 373 2311 354 2303 377C2292 409 2344 457 2344 457C2344 457 2282 468 2283 496C2285 524 2313 544 2313 544Z" fill="#FFB200"></path><path d="M2632 99.9998C2632 99.9998 2616 70.9998 2628 52.9998C2640 35.9998 2661 44.9998 2661 44.9998C2661 44.9998 2670 5.99976 2696 -0.000235379C2719 -4.00024 2740 39.9998 2740 39.9998C2740 39.9998 2776 26.9998 2788 44.9998C2803 65.9998 2781 96.9998 2781 96.9998C2781 96.9998 2786 66.9998 2775 57.9998C2764 47.9998 2733 63.9998 2733 63.9998C2733 63.9998 2716 20.9998 2702 25.9998C2683 32.9998 2683 80.9998 2683 80.9998C2683 80.9998 2653 51.9998 2641 63.9998C2629 75.9998 2632 99.9998 2632 99.9998Z" fill="#FFB200"></path><path d="M2505 525C2505 525 2481 477 2507 456C2534 436 2556 471 2556 471C2556 471 2578 451 2595 458C2612 465 2608 499 2608 499C2608 499 2600 476 2588 474C2577 472 2553 498 2553 498C2553 498 2528 464 2517 472C2506 481 2505 525 2505 525Z" fill="#FFB200"></path><path d="M1 902C1 902 190 1023 234 955C234 955 266 981 301 949C301 949 387 1056 471 965C471 965 580 1040 647 983C714 927 708 865 708 865C708 865 770 831 758 771C746 712 696 708 696 708C696 707 719 679 708 641C708 641 820 635 834 562C849 489 780 443 780 443C780 443 797 372 777 327C756 282 695 274 695 274C695 274 694 161 581 151C581 151 603 60 516 0H1V902Z" fill="#FF7500"></path><path d="M1 0V148C62 186 79 136 79 136C79 136 77 211 125 236C173 262 196 223 196 223C196 223 218 252 236 246C254 240 272 239 272 239C272 239 295 280 284 363C284 363 278 443 217 463C156 483 141 471 141 471C141 471 136 530 75 539C71 539 1 463 1 614V0Z" fill="#EF5000"></path><path d="M1 363V614C1 835 56 749 194 803L198 805L231 719C231 719 251 739 283 739C316 739 328 685 328 685C328 685 344 709 365 712C387 715 411 678 411 678C411 678 417 727 444 741C472 755 505 717 505 717C521 738 553 751 553 751C538 803 464 838 461 837L358 842C366 845 374 847 384 847C454 850 474 837 474 837C474 837 514 944 598 917C652 900 636 807 636 807C636 807 678 837 712 797C745 757 696 708 696 708C696 708 746 712 758 771C770 831 708 865 708 865C708 865 714 927 647 983C580 1040 471 965 471 965C387 1056 301 949 301 949C266 981 234 955 234 955C190 1023 1 902 1 902V363Z" fill="#EF5000"></path><path d="M0 1197V1842C81 1501 44 1093 143 951C243 810 377 887 463 852C549 817 556 742 556 742C515 803 487 837 374 833C393 820 399 789 401 770V754L396 768C370 830 326 831 324 831C223 832 188 868 187 869C188 867 220 793 231 751C244 702 233 648 239 581C244 514 247 467 313 389C379 311 365 225 365 225C354 328 295 364 295 364C308 289 285 247 274 231L268 225L273 244C299 356 240 421 216 507C192 594 206 683 207 691C205 683 188 604 175 567C161 528 151 511 150 458C150 436 147 418 143 405C137 387 131 378 131 378L134 391C143 442 124 471 131 513C139 557 175 648 169 739C165 810 91 902 59 989C26 1076 0 1197 0 1197Z" fill="#65443A"></path><path d="M0 1257V1272C19 1217 33 1137 54 1073C81 991 104 949 136 891L171 827C192 787 199 738 191 681C185 635 171 596 163 572L160 564C147 525 143 511 146 458C148 436 146 418 143 405C137 387 131 378 131 378L134 391C138 403 143 425 141 458C138 511 142 526 156 566L159 574C175 622 214 733 167 824L132 889C100 946 77 988 49 1071C30 1130 18 1202 0 1257Z" fill="#7D554B"></path><path d="M0 1418V1433C24 1367 31 1279 49 1199C62 1142 75 1088 87 1049C104 992 116 964 131 936C132 934 149 913 197 880C228 859 261 855 293 852C314 849 334 847 351 840C383 828 396 791 401 770V754L396 768C392 787 379 823 350 835C333 842 313 844 293 846C262 850 226 854 195 876C167 894 150 909 140 919L149 902L179 846C226 756 225 684 223 613V607C222 548 227 534 250 473L272 417C293 359 291 309 286 278C283 256 277 240 274 231L268 225L273 244L282 279C287 310 288 358 267 415L246 471C223 533 217 547 218 607V614C220 686 222 755 175 844L145 899C119 946 106 969 82 1048C70 1086 58 1140 45 1198C28 1272 22 1354 0 1418Z" fill="#7D554B"></path><path d="M738 199L737 196C736 191 736 172 755 165C778 158 787 130 787 130C787 130 810 166 790 204C772 239 743 217 743 217L729 229V223C729 223 758 202 773 178C773 178 745 210 738 199Z" fill="#FFB200"></path><path d="M693 1012L690 1011C685 1010 668 1007 661 1028C652 1053 626 1060 626 1060C626 1060 656 1089 692 1070C725 1053 708 1020 708 1020L720 1005L714 1004C714 1004 693 1035 670 1049C670 1049 702 1022 693 1012Z" fill="#FFB200"></path><path d="M314 1059L312 1063C311 1069 307 1092 330 1103C356 1116 363 1151 363 1151C363 1151 396 1113 377 1062C360 1017 323 1038 323 1038L307 1021L306 1029C306 1029 339 1059 353 1091C353 1091 324 1047 314 1059Z" fill="#FFB200"></path><path d="M633.001 715C633.001 715 628.001 749 601.001 754C576.001 759 562.001 728 562.001 728C562.001 728 530.001 736 520.001 711C509.001 686 516.001 672 516.001 672C516.001 672 487.001 699 508.001 733C524.001 760 546.001 752 546.001 752C546.001 752 573.001 797 608.001 782C643.001 767 633.001 715 633.001 715Z" fill="#EF5000"></path><path d="M433 744C433 744 428 763 418 764C407 764 401 752 401 752C401 752 394 765 386 759C378 754 379 745 379 745C379 745 373 757 381 768C390 778 400 770 400 770C400 770 412 788 428 777C440 768 433 744 433 744Z" fill="#FF7500"></path><path d="M157 329C157 329 161 357 147 364C133 372 122 354 122 354C122 354 114 380 101 377C88.0001 374 85.0001 363 85.0001 363C85.0001 363 82.0001 382 99.0001 391C117 401 128 384 128 384C128 384 151 401 167 376C179 357 157 329 157 329Z" fill="#FF7500"></path><path d="M443 141C443 141 473 203 425 231C380 257 355 221 355 221C355 221 348 242 328 247C307 253 285 235 285 235C285 235 283 254 253 259C223 265 198 226 198 226C198 226 266 258 270 191C270 191 303 227 328 209C346 195 349 177 349 177C349 177 380 213 411 202C445 190 443 141 443 141Z" fill="#EF5000"></path><path d="M687 544C687 544 734 535 741 502C748 469 716 450 716 450C716 450 751 399 730 359C713 323 644 341 644 341C644 341 622 280 591 281C553 283 542 343 542 343C542 343 569 306 590 311C612 316 626 373 626 373C626 373 689 354 697 377C708 409 656 457 656 457C656 457 717 468 716 496C715 524 687 544 687 544Z" fill="#FFB200"></path><path d="M368 99.9998C368 99.9998 383 70.9998 371 52.9998C360 35.9998 338 44.9998 338 44.9998C338 44.9998 330 5.99976 303 -0.000235379C280 -4.00024 260 39.9998 260 39.9998C260 39.9998 224 26.9998 212 44.9998C197 65.9998 219 96.9998 219 96.9998C219 96.9998 214 66.9998 225 57.9998C236 47.9998 267 63.9998 267 63.9998C267 63.9998 284 20.9998 298 25.9998C316 32.9998 317 80.9998 317 80.9998C317 80.9998 347 51.9998 358 63.9998C370 75.9998 368 99.9998 368 99.9998Z" fill="#FFB200"></path><path d="M495 525C495 525 518 477 492 456C466 436 443 471 443 471C443 471 422 451 404 458C388 465 392 499 392 499C392 499 399 476 411 474C423 472 447 498 447 498C447 498 472 464 483 472C493 481 495 525 495 525Z" fill="#EF5000"></path><path d="M2839 1708C2839 1708 2792 1691 2747 1626C2702 1560 2699 1523 2716 1512C2738 1499 2802 1549 2802 1549C2802 1549 2727 1459 2741 1423C2755 1387 2824 1450 2824 1450C2824 1450 2769 1362 2785 1337C2801 1311 2844 1383 2844 1383C2844 1383 2805 1286 2829 1266C2854 1247 2870 1306 2870 1306C2870 1306 2887 1195 2926 1206C2965 1217 2923 1322 2923 1322C2923 1322 2966 1285 2983 1302C3015 1334 2928 1384 2928 1384C2928 1384 2991 1391 2999 1417C3007 1442 2924 1461 2924 1461C2924 1461 2999 1419 2999 1452C2999 1489 2928 1555 2928 1555C2928 1555 2984 1507 2999 1544C2999 1544 2970 1668 2839 1708Z" fill="#570000"></path><path d="M2890 1319L2878 1370L2872 1396L2867 1422L2858 1474L2851 1526L2848 1553L2845 1579L2844 1592L2843 1605L2842 1618V1632L2841 1645V1658L2840 1671V1698L2841 1711V1724L2842 1738L2839 1711L2838 1705L2837 1698V1685L2836 1631C2836.78 1560.25 2845.5 1489.81 2862 1421L2868 1395L2871 1382L2874 1369L2882 1344L2890 1319Z" fill="#932500"></path><path d="M2741 1551C2770.79 1570.98 2796.85 1596.02 2818 1625L2821 1629L2822 1630L2824 1632L2829 1640L2834 1648L2838 1656L2832 1649L2826 1642L2814 1629L2790 1603L2766 1577L2741 1551Z" fill="#932500"></path><path d="M2772 1453L2795 1475L2814 1500C2826.32 1517.69 2836.39 1536.83 2844 1557L2835 1544L2827 1531L2809 1505L2791 1479L2772 1453Z" fill="#932500"></path><path d="M2812 1380L2827 1398L2839 1419L2849 1440L2857 1463L2846 1442L2835 1421L2824 1401L2812 1380Z" fill="#932500"></path><path d="M2842 1314L2853 1333L2861 1353C2866.43 1366.48 2870.12 1380.59 2872 1395L2865 1375L2857 1354L2850 1334L2842 1314Z" fill="#932500"></path><path d="M2838 1668C2848 1658 2859 1650 2870 1642L2903 1618L2938 1598C2950 1592 2962 1586 2975 1582L2941 1604L2907 1625L2873 1647L2838 1668Z" fill="#932500"></path><path d="M2846 1553L2874 1530L2904 1509L2920 1500L2927 1495L2935 1491L2968 1476L2938 1496L2907 1515L2877 1535L2846 1553Z" fill="#932500"></path><path d="M2855 1464L2877 1446L2899 1430L2923 1416L2948 1405L2925 1420L2902 1435L2879 1450L2855 1464Z" fill="#932500"></path><path d="M2873 1384L2889 1371L2906 1359L2923 1349L2942 1340L2925 1352L2908 1363L2890 1374L2873 1384Z" fill="#932500"></path><path d="M2466 1997C2466 1997 2454 1948 2485 1897C2526 1831 2614 1862 2614 1862C2614 1862 2616 1810 2665 1799C2665 1799 2647 1711 2693 1656C2743 1597 2818 1621 2818 1621C2818 1621 2831 1577 2860 1563C2889 1549 2918 1562 2918 1562C2918 1562 2917 1456 2999 1459V1997H2466Z" fill="#932500"></path><path d="M2782 1748L2780 1747C2776 1747 2772 1742 2773 1737C2773 1736 2779 1702 2812 1697C2825 1695 2837 1701 2845 1708C2849 1695 2859 1678 2878 1668C2914 1651 2947 1692 2949 1694C2952 1698 2951 1704 2947 1707C2943 1710 2938 1710 2935 1706C2934 1705 2909 1674 2886 1685C2861 1697 2858 1727 2858 1728C2858 1731 2855 1735 2852 1736C2848 1737 2844 1735 2842 1732C2842 1732 2829 1712 2814 1715C2795 1718 2791 1739 2791 1740C2790 1744 2786 1748 2782 1748Z" fill="#D5000D"></path><path d="M2942 1818H2939C2935 1817 2932 1812 2933 1807V1805C2934 1803 2935 1793 2925 1788C2916 1784 2908 1796 2908 1797C2905 1801 2899 1803 2895 1800C2891 1798 2890 1792 2892 1788C2898 1778 2913 1763 2933 1772C2953 1781 2953 1804 2950 1812C2949 1816 2945 1818 2942 1818Z" fill="#D5000D"></path><path d="M2635 1997C2635 1997 2629 1968 2643 1943C2657 1918 2685 1919 2685 1919C2685 1919 2665 1847 2725 1824C2778 1803 2808 1845 2808 1845C2808 1845 2845 1815 2875 1833C2907 1851 2900 1889 2900 1889C2900 1889 2950 1857 2982 1875C3000 1888 2999 1940 2999 1940V1997H2635Z" fill="#D5000D"></path><path d="M2742 1959C2739 1959 2736 1958 2734 1955C2727 1943 2718 1916 2738 1898C2754 1882 2774 1887 2787 1895C2794 1886 2807 1877 2822 1882C2842 1888 2845 1909 2844 1920C2843 1925 2839 1929 2834 1928C2829 1927 2825 1923 2826 1918C2826 1917 2828 1902 2817 1899C2805 1896 2797 1912 2797 1912L2790 1917L2783 1915C2782 1914 2764 1898 2750 1911C2737 1923 2749 1945 2750 1945C2752 1949 2751 1955 2747 1958L2742 1959Z" fill="#932500"></path><path d="M2418 1998L2363 1999H2353L2311 2000C2311 2000 2284 1765 2466 1740C2466 1740 2361 1791 2418 1998Z" fill="#570000"></path><path d="M2415 1998C2415 1998 2436 1846 2543 1864C2543 1864 2457 1882 2473 1998H2415Z" fill="#570000"></path><path d="M2344 1998H2269C2269 1998 2300 1927 2243 1899C2185 1872 2259 1876 2259 1876C2259 1876 2347 1882 2344 1998Z" fill="#932500"></path><path d="M2344 1998C2344 1998 2354 1926 2299 1880C2243 1834 2163 1866 2188 1951C2188 1951 2215 1901 2267 1901C2319 1901 2342 1935 2344 1998Z" fill="#570000"></path><path d="M2308 1982V1995L2307 1998H2300L2301 1994V1988L2302 1982V1963C2301 1954 2300 1946 2297 1938L2295 1932L2294 1929L2292 1926L2285 1916L2293 1925L2295 1928L2296 1931L2299 1937C2303 1945 2305 1953 2306 1962L2307 1969L2308 1975V1982Z" fill="#570000"></path><path d="M2431 1998H2373C2373 1998 2373 1878 2466 1861C2466 1861 2418 1897 2431 1998Z" fill="#932500"></path><path d="M2407 1934L2402 1956L2399 1979V1998H2395V1990L2396 1984V1981L2397 1978L2401 1956L2407 1934Z" fill="#570000"></path><path d="M2382 1809C2378 1818 2375 1828 2373 1837L2366 1867C2362 1886 2360 1907 2360 1927V1972L2361 1979L2362 1987L2363 1999H2353L2352 1988V1957L2353 1926C2355.74 1895.77 2361.78 1865.92 2371 1837L2382 1809Z" fill="#932500"></path><path d="M2999 1997H2970C2970 1997 2962 1965 2999 1917V1913V1997Z" fill="#570000"></path><path d="M2953 1997H2899C2861 1944 2832 1960 2836 1915C2839 1870 2895 1872 2924 1907L2927 1912C2952 1946 2953 1997 2953 1997Z" fill="#570000"></path><path d="M2999 1913V1917C2991 1938 2989 1962 2993 1997H2942C2942 1997 2923 1971 2927 1912L2928 1904C2934 1840 2973 1805 2999 1835V1913Z" fill="#570000"></path><path d="M2965 1990L2966 1997H2958L2957 1991L2956 1982V1955L2959 1919L2961 1911L2963 1902L2970 1886L2965 1903L2963 1911L2962 1920C2961 1931 2960 1943 2961 1955V1964L2962 1972L2963 1977L2965 1990Z" fill="#932500"></path><path d="M2999 1997H2995L2996 1996C3000 1971 2999 1956 2999 1997Z" fill="#932500"></path><path d="M2931 1997H2923L2920 1985L2918 1979L2917 1976V1975L2916 1974L2911 1962L2905 1952L2902 1947L2898 1942L2894 1938L2892 1936L2891 1935L2890 1934C2887 1931 2884 1929 2880 1928L2891 1933L2892 1934L2893 1935L2895 1937L2900 1941L2904 1945L2908 1950L2915 1960L2921 1971V1972L2922 1974L2926 1982L2930 1994L2931 1997Z" fill="#932500"></path><path d="M2522 1660C2522 1660 2523 1598 2497 1557C2479 1528 2424 1518 2385 1484C2385 1484 2399 1511 2426 1535C2453 1560 2448 1627 2522 1660Z" fill="#D5000D"></path><path d="M2539 1702C2539 1702 2520 1660 2528 1612C2536 1563 2558 1543 2565 1501C2565 1501 2583 1547 2575 1595C2568 1642 2553 1648 2547 1670C2540 1691 2539 1702 2539 1702Z" fill="#D5000D"></path><path d="M2554 1818L2556 1766C2556 1743 2592 1704 2623 1690C2623 1690 2607 1708 2597 1757C2587 1807 2578 1817 2551 1841C2551 1841 2551 1828 2554 1818Z" fill="#D5000D"></path><path d="M2543 1752C2543 1752 2534 1703 2499 1681C2464 1660 2421 1637 2397 1608C2397 1608 2419 1671 2450 1704C2482 1737 2518 1735 2543 1752Z" fill="#D5000D"></path><path d="M2583 1736C2583 1736 2569 1758 2567 1781C2565 1805 2552 1844 2552 1844L2553 1822C2553 1822 2558 1805 2560 1788C2563 1771 2564 1757 2583 1736Z" fill="#932500"></path><path d="M2472 1681C2472 1681 2503 1703 2519 1717C2535 1730 2548 1757 2548 1757V1765C2548 1765 2535 1737 2515 1720L2472 1681Z" fill="#932500"></path><path d="M2554 1582C2554 1582 2552 1600 2543 1626C2533 1654 2542 1716 2542 1716L2537 1697C2537 1697 2531 1664 2537 1636C2542 1614 2547 1608 2554 1582Z" fill="#932500"></path><path d="M2485 1594L2491 1603L2496 1612L2501 1621L2504 1625L2506 1630C2514.95 1649.27 2522.96 1668.96 2530 1689L2536 1709L2539 1720L2541 1730L2544 1751C2548 1779 2549 1808 2548 1837V1858L2546 1880L2542 1923L2549 1880L2552 1859L2553 1837L2554 1794C2554 1779 2552 1764 2551 1750C2549 1736 2546 1721 2542 1707L2535 1687L2532 1677L2528 1667L2519 1647L2509 1628L2497 1611L2485 1594Z" fill="#932500"></path><path d="M160 1708C160 1708 207 1691 252 1626C297 1560 301 1523 284 1512C262 1499 198 1549 198 1549C198 1549 273 1459 259 1423C244 1387 175 1450 175 1450C175 1450 231 1362 214 1337C198 1311 156 1383 156 1383C156 1383 195 1286 170 1266C146 1247 130 1306 130 1306C130 1306 112 1195 73.0002 1206C34.0002 1217 76.0002 1322 76.0002 1322C76.0002 1322 33.0002 1285 16.0002 1302C-13.9998 1334 71.0002 1384 71.0002 1384C71.0002 1384 8.00018 1359 0.000179946 1384C-6.99982 1410 76.0002 1461 76.0002 1461C76.0002 1461 13.0002 1424 1.00018 1457C-10.9998 1489 72.0002 1555 72.0002 1555C-96.9998 1542 100 1689 160 1708Z" fill="#570000"></path><path d="M110 1319L122 1370L127 1396L132 1422L141 1474L149 1526L152 1553L154 1579L155 1592L156 1605L157 1618L158 1625V1632L159 1645V1724L158 1738L161 1711L162 1705V1698L163 1685L164 1631C163 1596 160 1560 156 1525L148 1473L138 1421L132 1395L129 1382L125 1369L118 1344L110 1319Z" fill="#932500"></path><path d="M259 1551C238.326 1562.88 220.02 1578.48 205 1597C196 1606 188 1615 181 1625L179 1629L177 1630L176 1632L171 1640L166 1648L161 1656L168 1649L174 1642L185 1629L210 1603L234 1577L259 1551Z" fill="#932500"></path><path d="M227 1453L205 1475L186 1500L169 1528L155 1557L164 1544L173 1531L191 1505C196 1496 203 1487 209 1479L227 1453Z" fill="#932500"></path><path d="M187 1380L173 1398L161 1419C157 1426 153 1433 151 1440C147 1448 145 1455 143 1463L154 1442L165 1421L176 1401L187 1380Z" fill="#932500"></path><path d="M158 1314L147 1333L138 1353L132 1374L128 1395L135 1375L142 1354L150 1334L158 1314Z" fill="#932500"></path><path d="M161 1668C151 1658 141 1650 130 1642L96 1618L61 1598C49 1592 37 1586 25 1582L59 1604L93 1625L127 1647L161 1668Z" fill="#932500"></path><path d="M154 1553L125 1530L95 1509L80 1500L72 1495L64 1491C54 1485 43 1480 32 1476L62 1496L92 1515L123 1535L154 1553Z" fill="#932500"></path><path d="M145 1464L123 1446L100 1430L77 1416L52 1405L75 1420L98 1435C113.072 1445.6 128.767 1455.28 145 1464Z" fill="#932500"></path><path d="M127 1384L111 1371L94 1359L76 1349L58 1340L75 1352L92 1363L109 1374L127 1384Z" fill="#932500"></path><path d="M534 1997C534 1997 545 1948 514 1897C474 1831 385 1862 385 1862C385 1862 383 1810 335 1799C335 1799 353 1711 306 1656C256 1597 182 1621 182 1621C182 1621 168 1577 140 1563C111 1549 82 1562 82 1562C82 1562 82 1456 0 1459L1 1549V1997H534Z" fill="#932500"></path><path d="M218 1748L219 1747C224 1747 227 1742 227 1737C226 1736 221 1702 188 1697C174 1695 163 1701 155 1708C150 1695 141 1678 122 1668C85.9999 1651 51.9999 1692 50.9999 1694C47.9999 1698 48.9999 1704 51.9999 1707C55.9999 1710 61.9999 1710 64.9999 1706C64.9999 1705 90.9999 1674 114 1685C139 1697 141 1727 141 1728C142 1731 144 1735 148 1736C152 1737 156 1735 158 1732C158 1732 171 1712 185 1715C205 1718 209 1739 209 1740C210 1744 213 1748 218 1748Z" fill="#D5000D"></path><path d="M58.0002 1818H60.0002C65.0002 1817 68.0002 1812 67.0002 1807L66.0002 1805C66.0002 1803 65.0002 1793 74.0002 1788C84.0002 1784 91.0002 1796 92.0002 1797C95.0002 1801 100 1803 104 1800C109 1798 110 1792 107 1788C102 1778 86.0002 1763 67.0002 1772C46.0002 1781 47.0002 1804 49.0002 1812C51.0002 1816 55.0002 1818 58.0002 1818Z" fill="#D5000D"></path><path d="M364 1997C364 1997 371 1968 357 1943C343 1918 315 1919 315 1919C315 1919 335 1847 275 1824C222 1803 192 1845 192 1845C192 1845 155 1815 124 1833C92 1851 100 1889 100 1889C100 1889 50 1857 17 1875C1 1893 1 1941 1 1941V1997H364Z" fill="#D5000D"></path><path d="M258 1959C261 1959 264 1958 265 1955C273 1943 281 1916 262 1898C246 1882 226 1887 213 1895C206 1886 193 1877 177 1882C157 1888 155 1909 156 1920C156 1925 161 1929 166 1928C171 1927 174 1923 174 1918C174 1917 172 1902 182 1899C194 1896 203 1912 203 1912L209 1917L217 1915C218 1914 236 1898 250 1911C263 1923 250 1945 250 1945C248 1949 249 1955 253 1958L258 1959Z" fill="#932500"></path><path d="M581 1998L636 1999H647L689 2000C689 2000 716 1765 534 1740C534 1740 639 1791 581 1998Z" fill="#570000"></path><path d="M584 1998C584 1998 564 1846 456 1864C456 1864 543 1882 527 1998H584Z" fill="#570000"></path><path d="M656 1998H731C731 1998 700 1927 757 1899C814 1872 741 1876 741 1876C741 1876 653 1882 656 1998Z" fill="#932500"></path><path d="M656 1998C656 1998 645 1926 701 1880C757 1834 837 1866 811 1951C811 1951 784 1901 733 1901C681 1901 658 1935 656 1998Z" fill="#570000"></path><path d="M692 1982V1998H700L699 1994V1991L698 1988V1982L697 1978V1969L698 1963C698 1954 700 1946 702 1938L705 1932L706 1929L708 1926L715 1916L707 1925L705 1928L703 1931L701 1937C697 1945 695 1953 693 1962L692 1969V1982Z" fill="#570000"></path><path d="M568 1998H627C627 1998 627 1878 534 1861C534 1861 582 1897 568 1998Z" fill="#932500"></path><path d="M592 1934L597 1956C599 1964 600 1971 600 1979V1982L601 1984V1998H605L604 1990V1984L603 1981V1978L599 1956L592 1934Z" fill="#570000"></path><path d="M617 1809L627 1837C635.53 1866.24 639.906 1896.54 640 1927V1957L639 1972V1979L638 1987L636 1999H647V1988L648 1980V1957L646 1926C645 1906 641 1886 637 1866L629 1837C625 1827 622 1818 617 1809Z" fill="#932500"></path><path d="M47 1997H101C138 1944 167 1960 164 1915C160 1870 104 1872 76 1907L72 1912C48 1946 47 1997 47 1997Z" fill="#570000"></path><path d="M1 1915V1997H57C57 1997 76 1971 72 1912V1904C65 1840 27 1805 0 1836L1 1915Z" fill="#570000"></path><path d="M35 1990L33 1997H42L43 1991V1982L44 1977V1955C44 1943 43 1931 40 1919L39 1911L36 1902L30 1886L35 1903L37 1911L38 1920L39 1955L38 1964L37 1972V1977L35 1990Z" fill="#932500"></path><path d="M68 1997H76L80 1985L82 1979L83 1976V1975L84 1974L89 1962L94 1952L98 1947L101 1942L105 1938L107 1936L109 1935L110 1934L119 1928L109 1933L108 1934L107 1935L104 1937L100 1941L96 1945L92 1950L85 1960L79 1971L78 1972V1974L74 1982L69 1994L68 1997Z" fill="#932500"></path><path d="M478 1660C478 1660 476 1598 502 1557C521 1528 576 1518 614 1484C614 1484 600 1511 574 1535C547 1560 552 1627 478 1660Z" fill="#D5000D"></path><path d="M461 1702C461 1702 479 1660 471 1612C463 1563 442 1543 435 1501C435 1501 416 1547 424 1595C432 1642 446 1648 453 1670C460 1691 461 1702 461 1702Z" fill="#D5000D"></path><path d="M446 1818C446 1818 443 1790 443 1766C443 1743 408 1704 376 1690C376 1690 393 1708 403 1757C412 1807 421 1817 449 1841C449 1841 449 1828 446 1818Z" fill="#D5000D"></path><path d="M456 1752C456 1752 466 1703 501 1681C536 1660 578 1637 602 1608C602 1608 580 1671 549 1704C518 1737 482 1735 456 1752Z" fill="#D5000D"></path><path d="M417 1736C417 1736 431 1758 432 1781C434 1805 448 1844 448 1844L447 1822L439 1788C437 1771 435 1757 417 1736Z" fill="#932500"></path><path d="M528 1681C528 1681 496 1703 480 1717C465 1730 451 1757 451 1757L452 1765C452 1765 465 1737 485 1720L528 1681Z" fill="#932500"></path><path d="M446 1582C446 1582 447 1600 456 1626C466 1654 457 1716 457 1716L462 1697C462 1697 469 1664 462 1636C457 1614 452 1608 446 1582Z" fill="#932500"></path><path d="M515 1594L509 1603L504 1612L499 1621L496 1625L494 1630C487 1643 482 1656 477 1669L470 1689C467 1696 465 1702 464 1709L461 1720L459 1730L455 1751C452 1779 451 1808 451 1837V1842L452 1848V1858L453 1880L458 1923C454 1909 452 1895 450 1880L448 1859L446 1837V1794C445.918 1764.58 449.957 1735.3 458 1707L464 1687L468 1677L472 1667L481 1647L491 1628L502 1611L515 1594Z" fill="#932500"></path><path d="M2294 1395C2268 1389 2252 1393 2243 1400C2238 1404 2235 1410 2235 1416L2218 1421L2219 1422L2235 1420L2239 1429C2245 1438 2261 1451 2293 1454C2329 1456 2342 1442 2366 1441C2366 1441 2341 1405 2294 1395Z" fill="#932500"></path><path d="M2245 1391C2236 1398 2234 1411 2241 1420C2247 1430 2262 1443 2295 1445C2331 1448 2343 1433 2368 1432C2368 1432 2342 1397 2295 1386C2270 1381 2254 1385 2245 1391Z" fill="#D5000D"></path><path d="M2220 1412L2237 1408L2241 1407L2245 1406L2253 1405H2296L2304 1407L2312 1408L2316 1410L2321 1411C2331 1414 2342 1419 2352 1425V1426H2351C2341 1421 2330 1418 2320 1415L2303 1412L2295 1411L2287 1410H2254L2220 1413V1412Z" fill="#570000"></path><path d="M2250 1407V1408L2251 1409L2252 1410L2254 1413L2255 1414L2256 1415L2257 1416L2260 1418L2274 1426H2276L2277 1427L2281 1428L2285 1429L2288 1430L2296 1431L2304 1432L2305 1433L2304 1434H2296L2288 1433L2284 1432L2280 1431L2277 1430L2275 1429H2273L2258 1421L2255 1419L2254 1417H2253L2252 1416L2249 1413L2248 1411L2247 1409V1406L2250 1407Z" fill="#570000"></path><path d="M2289 1397L2282 1398L2274 1400L2268 1403L2265 1406L2263 1408V1409H2260L2259 1406V1405L2263 1402L2266 1400C2268 1399 2271 1397 2274 1397L2281 1395H2289L2290 1396L2289 1397Z" fill="#570000"></path><path d="M2311 1402L2307 1403L2303 1404L2300 1405L2297 1408H2295V1405L2298 1403L2302 1401H2306L2310 1400L2311 1401V1402Z" fill="#570000"></path><path d="M2286 1405L2287 1406L2288 1408L2289 1409L2290 1410L2291 1411H2292L2294 1413L2304 1419L2307 1420L2309 1421L2314 1423L2317 1424L2320 1425L2325 1426L2326 1427L2325 1428L2319 1427L2317 1426H2314L2308 1424L2306 1423L2303 1422L2293 1416L2290 1414L2289 1413L2288 1412L2287 1411L2286 1410L2285 1409L2283 1408L2284 1405H2286Z" fill="#570000"></path><path d="M829 1708C810 1705 799 1709 793 1714C789 1717 787 1722 788 1726H787L776 1730V1731L788 1729L791 1735C796 1742 807 1751 831 1751C857 1751 866 1740 883 1738C883 1738 864 1714 829 1708Z" fill="#932500"></path><path d="M794 1708C788 1713 787 1723 792 1729C797 1735 808 1744 832 1744C858 1745 867 1734 884 1732C884 1732 865 1707 830 1702C811 1699 800 1703 794 1708Z" fill="#D5000D"></path><path d="M777 1724L789 1720L791 1719H794L801 1717L825 1715L831 1716H837L843 1717L846 1718H849C857 1720 865 1723 872 1728C865 1725 857 1723 849 1722L837 1720H825C817 1719 809 1720 801 1721L777 1725V1724Z" fill="#570000"></path><path d="M798 1719V1720H799V1721L801 1723L802 1724H803L804 1725L806 1727L816 1731L817 1732H819L821 1733H824L827 1734H838L839 1735L838 1736H827L824 1735H821L818 1734H815L805 1729L802 1727L801 1726L800 1725L798 1723L797 1722L796 1720V1719H798Z" fill="#570000"></path><path d="M826 1710L821 1711L816 1713C814 1713 812 1714 811 1716L809 1717L807 1719L805 1720V1717L807 1715L810 1713L815 1710L820 1709L826 1708L827 1709L826 1710Z" fill="#570000"></path><path d="M842 1713H839L836 1714L834 1716L832 1717L831 1718L830 1716L833 1714L836 1712H839L842 1711V1713Z" fill="#570000"></path><path d="M824 1716L825 1717L826 1718H827V1719L828 1720H829L831 1721L838 1725L840 1726L842 1727L845 1728H847L849 1729H853L854 1730L853 1731L849 1730H845L841 1729L839 1728L837 1727L829 1724L828 1722H827L826 1721L825 1720H824L823 1719L822 1718L823 1716H824Z" fill="#570000"></path><path d="M1692 1462C1724 1457 1744 1463 1755 1472C1762 1478 1765 1486 1764 1494L1785 1501L1784 1502L1764 1498L1759 1509C1750 1520 1730 1536 1689 1536C1644 1536 1629 1517 1598 1514C1598 1514 1632 1472 1692 1462Z" fill="#932500"></path><path d="M1754 1462C1764 1470 1765 1487 1757 1498C1748 1510 1728 1525 1687 1525C1642 1526 1627 1507 1596 1504C1596 1504 1630 1461 1690 1452C1723 1446 1743 1453 1754 1462Z" fill="#D5000D"></path><path d="M1783 1490L1763 1483L1757 1482L1752 1480L1742 1478C1728 1476 1713 1475 1699 1475H1689L1678 1476L1667 1478L1662 1479L1657 1480C1643 1483 1629 1489 1617 1496V1497C1636.83 1489.18 1657.74 1484.46 1679 1483L1689 1482H1699C1727.18 1482.99 1755.25 1486 1783 1491V1490Z" fill="#570000"></path><path d="M1746 1481V1482L1745 1483L1744 1485L1740 1488L1739 1489L1738 1490L1736 1492L1732 1494C1727 1498 1721 1500 1715 1502L1713 1503L1710 1504L1706 1505L1701 1506L1696 1507H1686L1677 1508L1675 1509L1677 1511H1687L1696 1510L1701 1509H1706L1711 1508L1713 1507L1716 1506C1722 1504 1728 1502 1734 1498L1739 1495L1741 1494L1742 1493L1743 1492L1746 1488L1748 1486L1750 1483L1749 1480L1746 1481Z" fill="#570000"></path><path d="M1697 1465L1707 1467L1716 1470L1724 1475L1727 1478L1730 1482L1734 1483V1478L1730 1474L1726 1471L1717 1466L1707 1464L1697 1462L1696 1464L1697 1465Z" fill="#570000"></path><path d="M1670 1470L1675 1471L1679 1473L1683 1475L1687 1478C1687 1479 1689 1480 1690 1479V1475L1685 1472L1680 1470L1675 1468H1670L1669 1469L1670 1470Z" fill="#570000"></path><path d="M1700 1476L1699 1477L1698 1479L1697 1480L1695 1481L1694 1482L1693 1483L1690 1485L1677 1492L1674 1493L1671 1494L1664 1496L1660 1497L1657 1498L1650 1499L1649 1500L1650 1501L1657 1500H1661L1664 1499L1671 1498L1675 1497L1678 1496L1692 1489L1695 1487L1696 1486L1698 1485L1699 1484L1701 1482L1702 1481L1704 1479V1476H1700Z" fill="#570000"></path><path d="M729 1426C696 1433 679 1447 671 1460C667 1467 666 1476 669 1483L652 1498V1499L671 1487C673 1491 676 1494 679 1496C692 1503 715 1511 755 1495C798 1478 807 1454 835 1439C835 1439 789 1412 729 1426Z" fill="#932500"></path><path d="M669 1448C662 1461 666 1478 678 1485C690 1492 714 1499 753 1484C797 1467 805 1443 833 1428C833 1428 787 1401 727 1414C694 1422 677 1436 669 1448Z" fill="#D5000D"></path><path d="M650 1487L667 1472L672 1469L677 1466L686 1460C699 1452 712 1446 726 1440L736 1437L747 1434L757 1431L763 1430L768 1429C782 1427 797 1427 811 1429H812L811 1430C797 1430 783 1432 769 1435L748 1440L738 1443L728 1447C714 1452 701 1459 688 1465L651 1488L650 1487Z" fill="#570000"></path><path d="M682 1464L683 1465L684 1466L686 1467L691 1469H692L693 1470L695 1471L700 1472L719 1473H722L724 1472H729L734 1471L739 1469L748 1467L758 1463L760 1464L759 1466L749 1470L739 1473L735 1474L730 1475L725 1476L722 1477H720L699 1476L694 1475L692 1474H690L689 1473L684 1471L682 1470L680 1468L679 1465C680 1464 681 1463 682 1464Z" fill="#570000"></path><path d="M724 1430L716 1435L709 1442L702 1450L700 1454L698 1459L695 1461L693 1457L696 1452C696 1450 697 1448 699 1447L706 1439L714 1432L723 1428H725L724 1430Z" fill="#570000"></path><path d="M752 1424L748 1427L744 1431L741 1434L739 1439C738 1440 737 1441 736 1440C735 1440 734 1439 735 1437L738 1432L742 1428L747 1425L751 1422L753 1423L752 1424Z" fill="#570000"></path><path d="M725 1442L727 1443H728L730 1444L731 1445H733L735 1446L738 1447L752 1448H759L766 1447H770L773 1446L780 1444L782 1445L781 1447L774 1449L770 1450H767L760 1451L756 1452H752L737 1451L734 1450H732L730 1449H728L726 1448L725 1447L723 1446C722 1446 721 1444 722 1443C722 1442 724 1441 725 1442Z" fill="#570000"></path><path d="M2285 1658C2308 1656 2322 1661 2329 1668C2333 1671 2335 1677 2335 1683L2349 1689L2334 1686L2330 1693C2323 1701 2309 1711 2280 1710C2248 1708 2238 1695 2217 1691C2217 1691 2242 1663 2285 1658Z" fill="#932500"></path><path d="M2328 1660C2335 1666 2336 1678 2329 1686C2323 1693 2308 1704 2279 1702C2247 1701 2237 1687 2216 1684C2216 1684 2241 1655 2284 1650C2307 1648 2321 1653 2328 1660Z" fill="#FF6700"></path><path d="M2348 1681L2334 1675L2330 1674L2327 1673L2319 1671L2289 1667H2274L2267 1668L2263 1669H2259C2249 1671 2240 1674 2231 1679C2240 1676 2250 1674 2260 1673L2275 1672H2289L2319 1675L2348 1681Z" fill="#932500"></path><path d="M2322 1673V1674L2321 1675L2320 1676L2318 1678L2317 1679H2316L2315 1680L2312 1682L2300 1687L2298 1688H2296L2293 1689H2286L2279 1690L2273 1689H2272L2271 1690L2272 1692H2290L2293 1691H2297L2298 1690H2300L2313 1685L2317 1683L2318 1682L2319 1681H2320L2322 1678L2324 1677L2325 1675V1673H2322Z" fill="#932500"></path><path d="M2288 1660L2295 1662L2301 1664L2307 1668L2309 1670L2311 1673L2313 1674C2314 1673 2315 1672 2314 1671L2311 1668L2308 1665L2302 1662L2295 1659L2289 1658L2288 1659V1660Z" fill="#932500"></path><path d="M2269 1662L2272 1663L2275 1665L2278 1667L2280 1669L2283 1670V1667L2280 1664L2276 1663L2273 1662L2269 1661L2268 1662H2269Z" fill="#932500"></path><path d="M2290 1668L2289 1669L2288 1670L2287 1671H2286L2285 1672L2284 1673L2282 1674L2273 1678L2271 1679L2269 1680L2264 1681H2261L2259 1682H2254L2253 1683L2254 1684H2259L2262 1683H2264L2269 1682H2272L2274 1681L2284 1677L2286 1676L2287 1675L2288 1674L2289 1673L2290 1672H2291L2292 1671V1668H2290Z" fill="#932500"></path><path d="M1345 1828C1312 1827 1293 1835 1284 1845C1278 1851 1276 1860 1277 1867L1258 1877L1278 1871C1279 1875 1281 1879 1284 1882C1294 1892 1315 1904 1355 1900C1399 1895 1412 1874 1441 1868C1441 1868 1404 1830 1345 1828Z" fill="#932500"></path><path d="M1284 1835C1275 1844 1275 1861 1285 1871C1295 1881 1315 1893 1355 1889C1400 1884 1412 1863 1442 1857C1442 1857 1404 1819 1345 1817C1313 1816 1294 1824 1284 1835Z" fill="#FF6700"></path><path d="M1259 1866C1265 1862 1271 1859 1278 1857L1283 1855L1288 1853L1298 1850C1311 1845 1325 1843 1339 1841L1349 1840H1370L1375 1841H1380C1394 1843 1408 1846 1421 1852V1853C1407 1849 1394 1847 1380 1847L1360 1846L1349 1847L1339 1848L1299 1855C1285 1858 1272 1862 1259 1867L1258 1866H1259Z" fill="#932500"></path><path d="M1293 1853L1294 1854H1295L1296 1856L1300 1859L1301 1860L1302 1861L1304 1862L1308 1864L1326 1870H1328L1331 1871H1340L1345 1872L1354 1871L1364 1870L1365 1872C1366 1873 1365 1873 1364 1874L1355 1875H1335L1330 1874H1326C1319 1873 1313 1871 1307 1868L1302 1866L1300 1864H1299L1298 1863L1294 1860L1292 1858L1290 1856V1852L1293 1853Z" fill="#932500"></path><path d="M1340 1831L1331 1834L1322 1838L1315 1844L1312 1848L1309 1852L1306 1853C1305 1852 1304 1850 1305 1849L1308 1844L1312 1840L1321 1835L1330 1831L1339 1829L1341 1830L1340 1831Z" fill="#932500"></path><path d="M1367 1833L1362 1834L1358 1837C1356 1837 1355 1838 1354 1840L1351 1843L1348 1844V1840L1352 1836L1357 1834L1361 1832L1366 1831L1367 1832V1833Z" fill="#932500"></path><path d="M1338 1842L1339 1844L1340 1845L1342 1846L1343 1847L1344 1848H1346L1349 1850L1362 1855L1365 1856L1368 1857L1375 1858H1389L1390 1860L1389 1861H1375L1368 1860L1364 1859H1361L1347 1854L1344 1853L1342 1852L1341 1851L1339 1850L1338 1849L1336 1847L1335 1846L1334 1843C1335 1842 1337 1841 1338 1842Z" fill="#932500"></path><path d="M898 1552C896 1550 893 1551 892 1553L889 1559L887 1564L885 1570V1576L886 1577H887L889 1572L891 1567L894 1563L898 1560L899 1559C900 1557 900 1554 898 1552Z" fill="#D5000D"></path><path d="M882 1565L880 1559L877 1553L876 1552C874 1551 871 1551 870 1553C868 1556 869 1559 871 1560L874 1563L877 1567L880 1572L882 1577H884L883 1571L882 1565Z" fill="#D5000D"></path><path d="M1349 1428C1347 1426 1344 1426 1343 1429H1342L1339 1435L1337 1442L1335 1448V1456L1336 1455H1337L1339 1450L1342 1444L1345 1440L1349 1436L1350 1435C1352 1433 1351 1430 1349 1428Z" fill="#E54000"></path><path d="M1331 1442L1329 1435L1325 1429L1324 1428C1322 1426 1319 1427 1317 1429C1316 1432 1317 1435 1319 1437L1323 1440L1326 1445L1329 1450L1331 1456H1332L1333 1455V1449L1331 1442Z" fill="#E54000"></path><path d="M1993 1517C1991 1515 1988 1515 1987 1518L1983 1524L1981 1531L1979 1537V1545L1981 1544L1983 1539L1986 1533L1989 1529L1993 1525L1994 1524C1996 1522 1996 1519 1993 1517Z" fill="#D5000D"></path><path d="M1975 1531L1973 1524L1970 1518H1969L1968 1517C1966 1515 1963 1516 1962 1518C1960 1521 1961 1524 1963 1526L1967 1529L1970 1534L1973 1539L1975 1545H1976L1977 1544V1538L1975 1531Z" fill="#D5000D"></path><path d="M1627 1669C1624 1666 1619 1667 1617 1670L1611 1680L1608 1690L1606 1700L1605 1709L1606 1711L1608 1710L1611 1701L1616 1694L1621 1687L1626 1682L1628 1680C1631 1677 1630 1672 1627 1669Z" fill="#E54000"></path><path d="M1600 1690L1597 1680L1592 1671L1591 1670L1590 1669C1586 1666 1582 1667 1580 1671C1578 1675 1579 1680 1582 1682L1588 1687L1593 1694L1597 1702L1600 1710L1602 1711L1603 1710L1602 1700L1600 1690Z" fill="#E54000"></path><path d="M2106 1923C2104 1922 2101 1922 2099 1924L2095 1931L2092 1938L2091 1945V1953H2092L2095 1947L2098 1941L2101 1936L2105 1933L2107 1931C2108 1929 2108 1925 2106 1923Z" fill="#FF6700"></path><path d="M2087 1938L2085 1931L2081 1925L2079 1923C2077 1922 2074 1922 2072 1925C2071 1928 2072 1931 2074 1933L2078 1936L2082 1941L2085 1947L2087 1953L2088 1954L2089 1952L2088 1945L2087 1938Z" fill="#FF6700"></path><path d="M533 1351C530 1349 525 1349 523 1353L518 1362L514 1372L512 1382L511 1392L512 1394L514 1393L518 1384L522 1376L527 1369L532 1364L534 1363C537 1359 536 1354 533 1351Z" fill="#D5000D"></path><path d="M506 1373C506 1369 504 1366 503 1363L498 1353H497L496 1351C492 1349 488 1350 486 1354C484 1357 485 1362 488 1365L494 1370L499 1376L503 1384L506 1393L508 1394L509 1392L508 1382L506 1373Z" fill="#D5000D"></path><path d="M2683 1431C2680 1429 2675 1429 2673 1433L2667 1442L2664 1452L2662 1462L2661 1472L2662 1474L2664 1473L2667 1464L2672 1456L2677 1449L2682 1444L2684 1443C2687 1439 2686 1434 2683 1431Z" fill="#D5000D"></path><path d="M2656 1453L2653 1443L2648 1433H2647L2646 1431C2642 1429 2638 1430 2636 1434C2634 1437 2635 1442 2638 1445L2644 1450L2649 1456L2653 1464L2656 1473L2658 1474L2659 1472L2658 1462L2656 1453Z" fill="#D5000D"></path><path d="M1037 1919C1039 1917 1042 1918 1044 1920L1048 1928L1051 1935L1052 1942L1053 1950L1052 1951L1051 1950L1048 1944L1045 1938L1041 1933L1037 1929L1036 1928C1034 1925 1034 1921 1037 1919Z" fill="#FF6700"></path><path d="M1048 1916L1047 1914C1046 1911 1048 1908 1051 1907C1053 1906 1056 1908 1057 1911L1059 1921V1941L1058 1950L1057 1951L1056 1950L1055 1941L1053 1932L1051 1923L1048 1916Z" fill="#FF6700"></path><path d="M1062 1936L1065 1928L1069 1921L1070 1920C1073 1918 1076 1919 1078 1922C1079 1925 1079 1928 1076 1930L1072 1934L1068 1939L1065 1945L1062 1951L1061 1952L1060 1951L1061 1943L1062 1936Z" fill="#FF6700"></path><path d="M2034 1306C2037 1303 2042 1304 2044 1307L2045 1308L2050 1317L2054 1328L2056 1338V1348L2055 1350L2054 1349L2050 1340L2046 1332L2041 1325L2035 1319L2033 1318C2030 1314 2031 1309 2034 1306Z" fill="#D5000D"></path><path d="M2049 1301L2048 1299C2047 1295 2049 1290 2053 1289C2057 1287 2061 1290 2062 1294L2065 1309V1322L2064 1336L2063 1349L2062 1350L2060 1349L2059 1336L2056 1323L2053 1311L2049 1301Z" fill="#D5000D"></path><path d="M2069 1329L2073 1319L2078 1309L2080 1307C2084 1304 2088 1306 2090 1309C2093 1313 2092 1318 2088 1321L2082 1326L2077 1333L2073 1341L2069 1350L2068 1351L2066 1349L2067 1339L2069 1329Z" fill="#D5000D"></path><path d="M1088 1321C1086 1320 1084 1320 1082 1322L1079 1328L1077 1334L1076 1339L1075 1345L1076 1346H1077L1079 1341L1082 1336L1085 1332L1088 1329L1089 1328C1090 1326 1090 1323 1088 1321Z" fill="#D5000D"></path><path d="M1080 1318V1317C1081 1315 1080 1312 1077 1311C1075 1311 1073 1312 1072 1314V1315L1071 1323L1070 1331L1071 1338L1072 1346V1347L1073 1346L1074 1338L1075 1331L1077 1324L1080 1318Z" fill="#D5000D"></path><path d="M1068 1334L1066 1329L1063 1323L1062 1322C1060 1320 1057 1321 1056 1323C1055 1325 1055 1328 1057 1330L1061 1333L1064 1337L1066 1341L1068 1346L1069 1347L1070 1346L1069 1340L1068 1334Z" fill="#D5000D"></path><path d="M1130 1672C1132 1671 1135 1671 1136 1673L1140 1679L1142 1684L1143 1690V1697H1142V1696L1140 1691L1137 1687L1134 1683L1131 1680L1130 1679C1128 1677 1129 1674 1130 1672Z" fill="#D5000D"></path><path d="M1139 1669V1668C1138 1666 1139 1663 1141 1662C1144 1661 1146 1663 1147 1665L1148 1674V1689L1147 1697H1146L1145 1689L1143 1682L1142 1675L1139 1669Z" fill="#D5000D"></path><path d="M1151 1685L1153 1679L1156 1674L1157 1673C1159 1671 1162 1672 1163 1674C1164 1676 1163 1679 1162 1680L1158 1683L1155 1687L1153 1692L1151 1697L1150 1698L1149 1697L1150 1691L1151 1685Z" fill="#D5000D"></path><path d="M2005 1727C2002 1724 1998 1725 1995 1728L1990 1738L1986 1748L1985 1758L1984 1767L1985 1769L1986 1768L1990 1759L1994 1752L1999 1745L2005 1740L2006 1738C2009 1735 2008 1730 2005 1727Z" fill="#FF6700"></path><path d="M1991 1722V1720C1993 1716 1991 1712 1987 1710C1983 1709 1979 1711 1978 1715V1716L1976 1730L1975 1743L1976 1756L1977 1768L1978 1769C1979 1770 1980 1769 1980 1768L1981 1756L1984 1744L1987 1732L1991 1722Z" fill="#FF6700"></path><path d="M1971 1749L1968 1739L1963 1730L1962 1729L1961 1728C1957 1725 1953 1726 1951 1730C1949 1734 1950 1739 1953 1741L1959 1746L1964 1753L1968 1761L1971 1769L1973 1770L1974 1769L1973 1759L1971 1749Z" fill="#FF6700"></path><path d="M1731 1882C1729 1880 1726 1881 1724 1883L1720 1890L1718 1897L1716 1904V1912H1718L1720 1905L1723 1900L1727 1895C1728 1894 1729 1892 1731 1892L1732 1890C1734 1888 1733 1884 1731 1882Z" fill="#FF6700"></path><path d="M1721 1879V1877C1722 1874 1721 1871 1718 1870C1715 1869 1713 1871 1712 1874L1710 1884V1903L1711 1912L1712 1913L1713 1912L1714 1903L1716 1894L1718 1886L1721 1879Z" fill="#FF6700"></path><path d="M1707 1898L1705 1891L1701 1884L1699 1883C1697 1881 1694 1882 1692 1885C1691 1887 1692 1891 1694 1892L1698 1896L1701 1901L1705 1906L1707 1912L1708 1913L1709 1912L1708 1905L1707 1898Z" fill="#FF6700"></path><path d="M2663 1624C2661 1622 2658 1623 2657 1625L2653 1631L2651 1636L2650 1642V1649L2651 1648L2653 1643L2656 1639L2659 1635L2662 1632L2663 1631C2665 1629 2664 1626 2663 1624Z" fill="#FF6700"></path><path d="M2654 1621V1620C2655 1618 2654 1615 2652 1614C2649 1613 2647 1615 2646 1617L2645 1626V1641L2646 1649H2648V1641L2650 1634L2651 1627L2654 1621Z" fill="#FF6700"></path><path d="M2642 1637L2640 1631C2640 1629 2638 1627 2637 1626L2636 1625C2634 1623 2631 1624 2630 1626C2629 1628 2630 1631 2632 1632L2635 1635L2638 1639L2640 1644L2642 1649L2643 1650L2644 1649V1643L2642 1637Z" fill="#FF6700"></path></g><defs><clipPath id="clip0_1244_2779"><rect width="3000" height="2000" fill="white"></rect></clipPath></defs></svg>'},4486:(t,e,r)=>{"use strict";r.d(e,{A:()=>i,b:()=>n});var n=r(228);const i=n},3946:(t,e,r)=>{"use strict";r.d(e,{a:()=>h});var n=r(7566),i=r(8507),s=r(7218),o=r(9903);const a=class t{constructor(t,e=s.F){this._mobileInfo=e,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(e.tablet||e.phone)&&this._createTouchHook(),this._renderer=t}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width="100px",this._div.style.height="100px",this._div.style.position="absolute",this._div.style.top="0px",this._div.style.left="0px",this._div.style.zIndex=2..toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const t=this._renderer.view.canvas;if(t.parentNode)t.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{const e=new MutationObserver((()=>{t.parentNode&&(t.parentNode.appendChild(this._div),e.disconnect(),this._initAccessibilitySetup())}));e.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(this._isActive&&!this._isMobileAccessibility){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const t of this._children)t._accessibleDiv&&t._accessibleDiv.parentNode&&(t._accessibleDiv.parentNode.removeChild(t._accessibleDiv),t._accessibleDiv=null),t._accessibleActive=!1;this._pool.forEach((t=>{t.parentNode&&t.parentNode.removeChild(t)})),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&(t._accessibleActive||this._addChild(t),t._renderId=this._renderId);const e=t.children;if(e)for(let t=0;t<e.length;t++)this._updateAccessibleObjects(e[t])}init(e){const r={accessibilityOptions:{...t.defaultOptions,...e?.accessibilityOptions||{}}};this.debug=r.accessibilityOptions.debug,this._activateOnTab=r.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=r.accessibilityOptions.deactivateOnMouseMove,r.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const t=performance.now();if(this._mobileInfo.android.device&&t<this._androidUpdateCount)return;if(this._androidUpdateCount=t+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas)return;const e=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const t of this._children)t._renderId===this._renderId&&e.add(this._children.indexOf(t))}for(let t=this._children.length-1;t>=0;t--){const r=this._children[t];e.has(t)||(r._accessibleDiv&&r._accessibleDiv.parentNode&&(r._accessibleDiv.parentNode.removeChild(r._accessibleDiv),this._pool.push(r._accessibleDiv),r._accessibleDiv=null),r._accessibleActive=!1,(0,o.d)(this._children,t,1))}if(this._renderer.renderingToScreen){const{x:t,y:e,width:r,height:n}=this._renderer.screen,i=this._div;i.style.left=`${t}px`,i.style.top=`${e}px`,i.style.width=`${r}px`,i.style.height=`${n}px`}for(let t=0;t<this._children.length;t++){const e=this._children[t];if(!e._accessibleActive||!e._accessibleDiv)continue;const r=e._accessibleDiv,n=e.hitArea||e.getBounds().rectangle;if(e.hitArea){const t=e.worldTransform,i=this._renderer.resolution,s=this._renderer.resolution;r.style.left=(t.tx+n.x*t.a)*i+"px",r.style.top=(t.ty+n.y*t.d)*s+"px",r.style.width=n.width*t.a*i+"px",r.style.height=n.height*t.d*s+"px"}else{this._capHitArea(n);const t=this._renderer.resolution,e=this._renderer.resolution;r.style.left=n.x*t+"px",r.style.top=n.y*e+"px",r.style.width=n.width*t+"px",r.style.height=n.height*e+"px"}}this._renderId++}_updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}_capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:r}=this._renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>r&&(t.height=r-t.y)}_addChild(t){let e=this._pool.pop();e||("button"===t.accessibleType?e=document.createElement("button"):(e=document.createElement(t.accessibleType),e.style.cssText="\n                        color: transparent;\n                        pointer-events: none;\n                        padding: 0;\n                        margin: 0;\n                        border: 0;\n                        outline: 0;\n                        background: transparent;\n                        box-sizing: border-box;\n                        user-select: none;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                    ",t.accessibleText&&(e.innerText=t.accessibleText)),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title=`container ${t.tabIndex}`),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this._updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.container=t,this._children.push(t),this._div.appendChild(t._accessibleDiv),t.interactive&&(t._accessibleDiv.tabIndex=t.tabIndex)}_dispatchEvent(t,e){const{container:r}=t.target,i=this._renderer.events.rootBoundary,s=Object.assign(new n.N(i),{target:r});i.rootTarget=this._renderer.lastObjectRendered,e.forEach((t=>i.dispatchEvent(s,t)))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){9===t.keyCode&&this._activateOnTab&&this._activate()}_onMouseMove(t){0===t.movementX&&0===t.movementY||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(t){t?this._activate():this._deactivate()}};a.extension={type:[i.Ag.WebGLSystem,i.Ag.WebGPUSystem],name:"accessibility"},a.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let h=a},4302:(t,e,r)=>{"use strict";r.d(e,{K:()=>n});const n={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1}},6697:(t,e,r)=>{"use strict";r.d(e,{U:()=>i});var n=r(8507);class i{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,e;if(this._cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;t=r,e=n}this.renderer.resize(t,e),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}i.extension=n.Ag.Application},6719:(t,e,r)=>{"use strict";r.d(e,{y:()=>o});var n=r(8507),i=r(4458),s=r(8567);class o{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,i.d.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.R.shared:new s.R,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}o.extension=n.Ag.Application},1979:(t,e,r)=>{"use strict";r.d(e,{l:()=>s});var n=r(268),i=r(2406);const s=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||(0,n.R)(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=(0,i.z)(t);let s;for(let t=0;t<this.parsers.length;t++){const n=this.parsers[t];if(n.test(e)){s=n.getCacheableAssets(r,e);break}}const o=new Map(Object.entries(s||{}));s||r.forEach((t=>{o.set(t,e)}));const a=[...o.keys()],h={cacheKeys:a,keys:r};r.forEach((t=>{this._cacheMap.set(t,h)})),a.forEach((t=>{const r=s?s[t]:e;this._cache.has(t)&&this._cache.get(t)!==r&&(0,n.R)("[Cache] already has key:",t),this._cache.set(t,o.get(t))}))}remove(t){if(!this._cacheMap.has(t))return void(0,n.R)(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t);e.cacheKeys.forEach((t=>{this._cache.delete(t)})),e.keys.forEach((t=>{this._cacheMap.delete(t)}))}get parsers(){return this._parsers}}},4589:(t,e,r)=>{"use strict";r.d(e,{T:()=>n});var n=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(n||{})},2601:(t,e,r)=>{"use strict";r.d(e,{l:()=>l,x:()=>h});var n=r(268),i=r(2927),s=r(2406),o=r(4913),a=r(2217);class h{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach((t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if("string"==typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}}getAlias(t){const{alias:e,src:r}=t;return(0,s.z)(e||r,(t=>"string"==typeof t?t:Array.isArray(t)?t.map((t=>t?.src??t)):t?.src?t.src:t),!0)}addManifest(t){this._manifest&&(0,n.R)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach((t=>{this.addBundle(t.name,t.assets)}))}addBundle(t,e){const r=[];let n=e;Array.isArray(e)||(n=Object.entries(e).map((([t,e])=>"string"==typeof e||Array.isArray(e)?{alias:t,src:e}:{alias:t,...e}))),n.forEach((e=>{const n=e.src,i=e.alias;let s;if("string"==typeof i){const e=this._createBundleAssetId(t,i);r.push(e),s=[i,e]}else{const e=i.map((e=>this._createBundleAssetId(t,e)));r.push(...e),s=[...i,...e]}this.add({...e,alias:s,src:n})})),this._bundles[t]=r}add(t){const e=[];let r;Array.isArray(t)?e.push(...t):e.push(t),r=t=>{this.hasKey(t)&&(0,n.R)(`[Resolver] already has key: ${t} overwriting`)},(0,s.z)(e).forEach((t=>{const{src:e}=t;let{data:n,format:i,loadParser:a}=t;const h=(0,s.z)(e).map((t=>"string"==typeof t?(0,o.m)(t):Array.isArray(t)?t:[t])),l=this.getAlias(t);Array.isArray(l)?l.forEach(r):r(l);const u=[];h.forEach((t=>{t.forEach((t=>{let e={};if("object"!=typeof t){e.src=t;for(let r=0;r<this._parsers.length;r++){const n=this._parsers[r];if(n.test(t)){e=n.parse(t);break}}}else n=t.data??n,i=t.format??i,a=t.loadParser??a,e={...e,...t};if(!l)throw new Error(`[Resolver] alias is undefined for this asset: ${e.src}`);e=this._buildResolvedAsset(e,{aliases:l,data:n,format:i,loadParser:a}),u.push(e)}))})),l.forEach((t=>{this._assetMap[t]=u}))}))}resolveBundle(t){const e=(0,a.a)(t);t=(0,s.z)(t);const r={};return t.forEach((t=>{const e=this._bundles[t];if(e){const n=this.resolve(e),i={};for(const e in n){const r=n[e];i[this._extractAssetIdFromBundle(t,e)]=r}r[t]=i}})),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if("string"!=typeof t){const t={};for(const r in e)t[r]=e[r].src;return t}return e.src}resolve(t){const e=(0,a.a)(t);t=(0,s.z)(t);const r={};return t.forEach((t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const r=this._getPreferredOrder(e);r?.priority.forEach((t=>{r.params[t].forEach((r=>{const n=e.filter((e=>!!e[t]&&e[t]===r));n.length&&(e=n)}))})),this._resolverHash[t]=e[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{});r[t]=this._resolverHash[t]})),e?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const r=t[e],n=this._preferredOrder.find((t=>t.params.format.includes(r.format)));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){return this._defaultSearchParams?`${t}${/\?/.test(t)?"&":"?"}${this._defaultSearchParams}`:t}_buildResolvedAsset(t,e){const{aliases:r,data:n,loadParser:s,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=i.A.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=r??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=s??t.loadParser,t.format=o??t.format??l(t.src),t}}function l(t){return t.split(".").pop().split("?").shift().split("#").shift()}h.RETINA_PREFIX=/@([0-9\.]+)x/},2406:(t,e,r)=>{"use strict";r.d(e,{z:()=>n});const n=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map((t=>"string"==typeof t||r?e(t):t)):t)},2233:(t,e,r)=>{"use strict";r.d(e,{Y:()=>n});const n=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t}},4913:(t,e,r)=>{"use strict";function n(t,e,r,i,s){const o=e[r];for(let a=0;a<o.length;a++){const h=o[a];r<e.length-1?n(t.replace(i[r],h),e,r+1,i,s):s.push(t.replace(i[r],h))}}function i(t){const e=t.match(/\{(.*?)\}/g),r=[];if(e){const i=[];e.forEach((t=>{const e=t.substring(1,t.length-1).split(",");i.push(e)})),n(t,i,0,e,r)}else r.push(t);return r}r.d(e,{m:()=>i})},2217:(t,e,r)=>{"use strict";r.d(e,{a:()=>n});const n=t=>!Array.isArray(t)},2577:(t,e,r)=>{"use strict";r.d(e,{Q:()=>P});var n={grad:.9,turn:360,rad:360/(2*Math.PI)},i=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},s=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},o=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),t>r?r:t>e?t:e},a=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},h=function(t){return{r:o(t.r,0,255),g:o(t.g,0,255),b:o(t.b,0,255),a:o(t.a)}},l=function(t){return{r:s(t.r),g:s(t.g),b:s(t.b),a:s(t.a,3)}},u=/^#([0-9a-f]{3,8})$/i,c=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},d=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),a=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},p=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),a=n*(1-(e-s)*r),h=n*(1-(1-e+s)*r),l=s%6;return{r:255*[n,a,o,o,h,n][l],g:255*[h,n,n,a,o,o][l],b:255*[o,o,h,n,n,a][l],a:i}},f=function(t){return{h:a(t.h),s:o(t.s,0,100),l:o(t.l,0,100),a:o(t.a)}},m=function(t){return{h:s(t.h),s:s(t.s),l:s(t.l),a:s(t.a,3)}},g=function(t){return p((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},_=function(t){return{h:(e=d(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C={string:[[function(t){var e=u.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?s(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?s(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=v.exec(t)||y.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:h({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=b.exec(t)||x.exec(t);if(!e)return null;var r,i,s=f({h:(r=e[1],i=e[2],void 0===i&&(i="deg"),Number(r)*(n[i]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return g(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,s=t.a,o=void 0===s?1:s;return i(e)&&i(r)&&i(n)?h({r:Number(e),g:Number(r),b:Number(n),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,s=t.a,o=void 0===s?1:s;if(!i(e)||!i(r)||!i(n))return null;var a=f({h:Number(e),s:Number(r),l:Number(n),a:Number(o)});return g(a)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,s=t.a,h=void 0===s?1:s;if(!i(e)||!i(r)||!i(n))return null;var l=function(t){return{h:a(t.h),s:o(t.s,0,100),v:o(t.v,0,100),a:o(t.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(h)});return p(l)},"hsv"]]},T=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},S=function(t,e){var r=_(t);return{h:r.h,s:o(r.s+100*e,0,100),l:r.l,a:r.a}},w=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},A=function(t,e){var r=_(t);return{h:r.h,s:r.s,l:o(r.l+100*e,0,100),a:r.a}},M=function(){function t(t){this.parsed=function(t){return"string"==typeof t?T(t.trim(),C.string):"object"==typeof t&&null!==t?T(t,C.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return s(w(this.rgba),2)},t.prototype.isDark=function(){return w(this.rgba)<.5},t.prototype.isLight=function(){return w(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=l(this.rgba)).r,r=t.g,n=t.b,o=(i=t.a)<1?c(s(255*i)):"","#"+c(e)+c(r)+c(n)+o;var t,e,r,n,i,o},t.prototype.toRgb=function(){return l(this.rgba)},t.prototype.toRgbString=function(){return e=(t=l(this.rgba)).r,r=t.g,n=t.b,(i=t.a)<1?"rgba("+e+", "+r+", "+n+", "+i+")":"rgb("+e+", "+r+", "+n+")";var t,e,r,n,i},t.prototype.toHsl=function(){return m(_(this.rgba))},t.prototype.toHslString=function(){return e=(t=m(_(this.rgba))).h,r=t.s,n=t.l,(i=t.a)<1?"hsla("+e+", "+r+"%, "+n+"%, "+i+")":"hsl("+e+", "+r+"%, "+n+"%)";var t,e,r,n,i},t.prototype.toHsv=function(){return t=d(this.rgba),{h:s(t.h),s:s(t.s),v:s(t.v),a:s(t.a,3)};var t},t.prototype.invert=function(){return E({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),E(S(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),E(S(this.rgba,-t))},t.prototype.grayscale=function(){return E(S(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),E(A(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),E(A(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?E({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):s(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=_(this.rgba);return"number"==typeof t?E({h:t,s:e.s,l:e.l,a:e.a}):s(e.h)},t.prototype.isEqual=function(t){return this.toHex()===E(t).toHex()},t}(),E=function(t){return t instanceof M?t:new M(t)},L=[];!function(t){t.forEach((function(t){L.indexOf(t)<0&&(t(M,C),L.push(t))}))}([function(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,o,a=n[this.toHex()];if(a)return a;if(null==e?void 0:e.closest){var h=this.toRgb(),l=1/0,u="black";if(!s.length)for(var c in r)s[c]=new t(r[c]).toRgb();for(var d in r){var p=(i=h,o=s[d],Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));p<l&&(l=p,u=d)}return u}},e.string.push([function(e){var n=e.toLowerCase(),i="transparent"===n?"#0000":r[n];return i?new t(i).toRgb():null},"name"])}]);const R=class t{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(e){if(e instanceof t)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(null===e)throw new Error("Cannot set Color#value to null");null!==this._value&&this._isSourceEqual(this._value,e)||(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return"string"==typeof t||"number"==typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"==typeof t&&null!==t?{...t}:t}_isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if("number"===r||"string"===r||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length===e.length&&t.every(((t,r)=>t===e[r]));if(null!==t&&null!==e){const r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every((r=>t[r]===e[r]))}return t===e}toRgba(){const[t,e,r,n]=this._components;return{r:t,g:e,b:r,a:n}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,n]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(255*e),t[1]=Math.round(255*r),t[2]=Math.round(255*n),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,r,n,i]=this._components;return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,r,n]=this._components;return t[0]=e,t[1]=r,t[2]=n,t}toNumber(){return this._int}toBgrNumber(){const[t,e,r]=this.toUint8RgbArray();return(r<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}multiply(e){const[r,n,i,s]=t._temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=255&this._int;return e&&(r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0),(255*t<<24)+(r<<16)+(n<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(e){let r,n,i,s;if(("number"==typeof e||e instanceof Number)&&e>=0&&e<=16777215)r=(e>>16&255)/255,n=(e>>8&255)/255,i=(255&e)/255,s=1;else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,i,s=255]=e,r/=255,n/=255,i/=255,s/=255;else if("string"==typeof e||"object"==typeof e){if("string"==typeof e){const r=t.HEX_PATTERN.exec(e);r&&(e=`#${r[2]}`)}const o=E(e);o.isValid()&&(({r,g:n,b:i,a:s}=o.rgba),r/=255,n/=255,i/=255)}if(void 0===r)throw new Error(`Unable to convert color ${e}`);this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this._refreshInt()}_refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(255*t<<16)+(255*e<<8)+(255*r|0)}_clamp(t,e=0,r=1){return"number"==typeof t?Math.min(Math.max(t,e),r):(t.forEach(((n,i)=>{t[i]=Math.min(Math.max(n,e),r)})),t)}static isColorLike(e){return"number"==typeof e||"string"==typeof e||e instanceof Number||e instanceof t||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||void 0!==e.r&&void 0!==e.g&&void 0!==e.b||void 0!==e.r&&void 0!==e.g&&void 0!==e.b&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.l||void 0!==e.h&&void 0!==e.s&&void 0!==e.l&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.v||void 0!==e.h&&void 0!==e.s&&void 0!==e.v&&void 0!==e.a}};R.shared=new R,R._temp=new R,R.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let P=R},992:(t,e,r)=>{"use strict";r.d(e,{E:()=>n});const n={cullArea:null,cullable:!1,cullableChildren:!0}},7982:(t,e,r)=>{"use strict";r.d(e,{O:()=>n});const n={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")}},3751:(t,e,r)=>{"use strict";r.d(e,{e:()=>i});let n=r(7982).O;const i={get:()=>n,set(t){n=t}}},7385:(t,e,r)=>{"use strict";r.d(e,{Q:()=>o,W:()=>s});var n=r(8507);const i=[];async function s(t){if(!t)for(let t=0;t<i.length;t++){const e=i[t];if(e.value.test())return void await e.value.load()}}async function o(t){return s(!t)}n.XO.handleByNamedList(n.Ag.Environment,i)},9432:(t,e,r)=>{"use strict";r.d(e,{T:()=>d});var n=r(4486),i=r(5101),s=r(268),o=r(5504),a=r(3285),h=r(4935),l=r(6625);const u=new i.b,c=new i.b;class d{constructor(t){this.dispatch=new n.A,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(((t,e)=>t.priority-e.priority))}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let r=0,n=e.length;r<n;r++)e[r].fn(t);else(0,s.R)(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){o.U.pauseUpdate=!0;const r=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,u.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,i=r.length-1;n<i;n++)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,r=this._allInteractiveElements){if(0===r.length)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(e)?e:[e];for(let e=r.length-1;e>=0;e--)n.forEach((n=>{t.currentTarget=r[e],this.notifyTarget(t,n)}))}propagationPath(t){const e=[t];for(let r=0;r<2048&&t!==this.rootTarget&&t.parent;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,r,n,i,s=!1){let a=!1;if(this._interactivePrune(t))return null;if("dynamic"!==t.eventMode&&"dynamic"!==e||(o.U.pauseUpdate=!1),t.interactiveChildren&&t.children){const o=t.children;for(let h=o.length-1;h>=0;h--){const l=o[h],u=this.hitTestMoveRecursive(l,this._isInteractive(e)?e:l.eventMode,r,n,i,s||i(t,r));if(u){if(u.length>0&&!u[u.length-1].parent)continue;const e=t.isInteractive();(u.length>0||e)&&(e&&this._allInteractiveElements.push(t),u.push(t)),0===this._hitElements.length&&(this._hitElements=u),a=!0}}}const h=this._isInteractive(e),l=t.isInteractive();return l&&l&&this._allInteractiveElements.push(t),s||this._hitElements.length>0?null:a?this._hitElements:h&&!i(t,r)&&n(t,r)?l?[t]:[]:null}hitTestRecursive(t,e,r,n,i){if(this._interactivePrune(t)||i(t,r))return null;if("dynamic"!==t.eventMode&&"dynamic"!==e||(o.U.pauseUpdate=!1),t.interactiveChildren&&t.children){const s=t.children,o=r;for(let r=s.length-1;r>=0;r--){const a=s[r],h=this.hitTestRecursive(a,this._isInteractive(e)?e:a.eventMode,o,n,i);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const e=t.isInteractive();return(h.length>0||e)&&h.push(t),h}}}const s=this._isInteractive(e),a=t.isInteractive();return s&&n(t,r)?a?[t]:[]:null}_isInteractive(t){return"static"===t||"dynamic"===t}_interactivePrune(t){return!(t&&t.visible&&t.renderable&&t.measurable)||"none"===t.eventMode||"passive"===t.eventMode&&!t.interactiveChildren}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,c),!t.hitArea.contains(c.x,c.y)))return!0;if(t.effects&&t.effects.length)for(let r=0;r<t.effects.length;r++){const n=t.effects[r];if(n.containsPoint&&!n.containsPoint(e,this.hitTestFn))return!0}return!1}hitTestFn(t,e){return!!t.hitArea||!!t?.containsPoint&&(t.worldTransform.applyInverse(e,c),t.containsPoint(c))}notifyTarget(t,e){if(!t.currentTarget.isInteractive())return;e??(e=t.type);const r=`on${e}`;t.currentTarget[r]?.(t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this._notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this._notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof h.A))return void(0,s.R)("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)this.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){const t=2===e.button;this.dispatchEvent(e,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof h.A))return void(0,s.R)("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const r="mouse"===e.pointerType||"pen"===e.pointerType,n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&i!==e.target){const n="mousemove"===t.type?"mouseout":"pointerout",s=this.createPointerEvent(t,n,i);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!e.composedPath().includes(i)){const n=this.createPointerEvent(t,"pointerleave",i);for(n.eventPhase=n.AT_TARGET;n.target&&!e.composedPath().includes(n.target);)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(s)}if(i!==e.target){const n="mousemove"===t.type?"mouseover":"pointerover",s=this.clonePointerEvent(e,n);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let o=i?.parent;for(;o&&o!==this.rootTarget.parent&&o!==e.target;)o=o.parent;if(!o||o===this.rootTarget.parent){const t=this.clonePointerEvent(e,"pointerenter");for(t.eventPhase=t.AT_TARGET;t.target&&t.target!==i&&t.target!==this.rootTarget.parent;)t.currentTarget=t.target,this.notifyTarget(t),r&&this.notifyTarget(t,"mouseenter"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(s)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),"touch"===e.pointerType&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=e.target?.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof h.A))return void(0,s.R)("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.createPointerEvent(t),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const i=this.clonePointerEvent(r,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;e.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i)}mapPointerOut(t){if(!(t instanceof h.A))return void(0,s.R)("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId);if(e.overTargets){const r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.findMountedTarget(e.overTargets),i=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(i),r&&this.dispatchEvent(i,"mouseout");const s=this.createPointerEvent(t,"pointerleave",n);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;e.overTargets=null,this.freeEvent(i),this.freeEvent(s)}this.cursor=null}mapPointerUp(t){if(!(t instanceof h.A))return void(0,s.R)("EventBoundary cannot map a non-pointer event as a pointer event");const e=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=i;if(i&&!r.composedPath().includes(i)){let e=i;for(;e&&!r.composedPath().includes(e);){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],o=e}if(o){const i=this.clonePointerEvent(r,"click");i.target=o,i.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:i.target,timeStamp:e});const s=n.clicksByButton[t.button];if(s.target===i.target&&e-s.timeStamp<200?++s.clickCount:s.clickCount=1,s.target=i.target,s.timeStamp=e,i.detail=s.clickCount,"mouse"===i.pointerType){const t=2===i.button;this.dispatchEvent(i,t?"rightclick":"click")}else"touch"===i.pointerType&&this.dispatchEvent(i,"tap");this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof h.A))return void(0,s.R)("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(r){let i=r;for(;i;)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof l.O))return void(0,s.R)("EventBoundary cannot map a non-wheel event as a wheel event");const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let r=1;r<t.length&&t[r].parent===e;r++)e=t[r];return e}createPointerEvent(t,e,r){const n=this.allocateEvent(h.A);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=r??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],"string"==typeof e&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(l.O);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const r=this.allocateEvent(h.A);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=e??r.type,r}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof h.A&&e instanceof h.A&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof a._&&e instanceof a._&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.defaultPrevented=!1,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}_notifyListeners(t,e){const r=t.currentTarget._events[e];if(r)if("fn"in r)r.once&&t.currentTarget.removeListener(e,r.fn,void 0,!0),r.fn.call(r.context,t);else for(let n=0,i=r.length;n<i&&!t.propagationImmediatelyStopped;n++)r[n].once&&t.currentTarget.removeListener(e,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,t)}}},809:(t,e,r)=>{"use strict";r.d(e,{C:()=>u});var n=r(8507),i=r(9432),s=r(5504),o=r(4935),a=r(6625);const h={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},l=class t{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new i.T(null),s.U.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new o.A(null),this._rootWheelEvent=new a.O(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...t.defaultEventFeatures},{set:(t,e,r)=>("globalMove"===e&&(this.rootBoundary.enableGlobalMoveEvents=r),t[e]=r,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,t._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(t){t||(t="default");let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this._currentCursor===t)return;this._currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this._rootPointerEvent}_onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this._normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let t=0,r=e.length;t<r;t++){const r=e[t],n=this._bootstrapEvent(this._rootPointerEvent,r);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,s.U.pointerMoved();const e=this._normalizeToPointerData(t);for(let t=0,r=e.length;t<r;t++){const r=this._bootstrapEvent(this._rootPointerEvent,e[t]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this._normalizeToPointerData(t);for(let t=0,e=n.length;t<e;t++){const e=this._bootstrapEvent(this._rootPointerEvent,n[t]);e.type+=r,this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this._normalizeToPointerData(t);for(let t=0,r=e.length;t<r;t++){const r=this._bootstrapEvent(this._rootPointerEvent,e[t]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this._removeEvents(),this.domElement=t,s.U.domElement=t,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;s.U.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;s.U.removeTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(t,e,r){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*i,t.y=(r-n.top)*(this.domElement.height/n.height)*i}_normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const n=t.changedTouches[r];void 0===n.button&&(n.button=0),void 0===n.buttons&&(n.buttons=1),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){const r=t;void 0===r.isPrimary&&(r.isPrimary=!0),void 0===r.width&&(r.width=1),void 0===r.height&&(r.height=1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="mouse"),void 0===r.pointerId&&(r.pointerId=1),void 0===r.pressure&&(r.pressure=.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}normalizeWheelEvent(t){const e=this._rootWheelEvent;return this._transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}_bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this._transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=h[t.type]||t.type),t}_transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};l.extension={name:"events",type:[n.Ag.WebGLSystem,n.Ag.CanvasSystem,n.Ag.WebGPUSystem],priority:-1},l.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let u=l},5504:(t,e,r)=>{"use strict";r.d(e,{U:()=>s});var n=r(4458),i=r(8567);const s=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){!this._tickerAdded&&this.domElement&&(i.R.system.add(this._tickerUpdate,this,n.d.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(i.R.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const t=this.events._rootPointerEvent;this.events.supportsTouchEvents&&"touch"===t.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY,pointerType:t.pointerType,pointerId:t.pointerId}))}_tickerUpdate(t){this._deltaTime+=t.deltaTime,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this._update())}}},7566:(t,e,r)=>{"use strict";r.d(e,{N:()=>i});var n=r(5101);class i{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=i.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new n.b,this.page=new n.b,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}},317:(t,e,r)=>{"use strict";r.d(e,{e:()=>s});var n=r(809),i=r(7566);const s={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return"dynamic"===this.eventMode||"static"===this.eventMode},set interactive(t){this.eventMode=t?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??n.C.defaultEventMode},set eventMode(t){this._internalEventMode=t},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n="boolean"==typeof r&&r||"object"==typeof r&&r.capture,i="object"==typeof r?r.signal:void 0,s="object"==typeof r&&!0===r.once,o="function"==typeof e?void 0:e;t=n?`${t}capture`:t;const a="function"==typeof e?e:e.handleEvent,h=this;i&&i.addEventListener("abort",(()=>{h.off(t,a,o)})),s?h.once(t,a,o):h.on(t,a,o)},removeEventListener(t,e,r){const n="function"==typeof e?void 0:e;t="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.off(t,e,n)},dispatchEvent(t){if(!(t instanceof i.N))throw new Error("Container cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}}},3285:(t,e,r)=>{"use strict";r.d(e,{_:()=>s});var n=r(5101),i=r(7566);class s extends i.N{constructor(){super(...arguments),this.client=new n.b,this.movement=new n.b,this.offset=new n.b,this.global=new n.b,this.screen=new n.b}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,r,n,i,s,o,a,h,l,u,c,d,p,f){throw new Error("Method not implemented.")}}},4935:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(3285);class i extends n._{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}},6625:(t,e,r)=>{"use strict";r.d(e,{O:()=>i});var n=r(3285);class i extends n._{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}i.DOM_DELTA_PIXEL=0,i.DOM_DELTA_LINE=1,i.DOM_DELTA_PAGE=2},8507:(t,e,r)=>{"use strict";r.d(e,{Ag:()=>n,XO:()=>o,vp:()=>s});var n=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(n||{});const i=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},s=(t,e)=>i(t).priority??e,o={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(i).forEach((t=>{t.type.forEach((e=>this._removeHandlers[e]?.(t)))})),this},add(...t){return t.map(i).forEach((t=>{t.type.forEach((e=>{const r=this._addHandlers,n=this._queue;r[e]?r[e]?.(t):(n[e]=n[e]||[],n[e]?.push(t))}))})),this},handle(t,e,r){const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&(s[t]?.forEach((t=>e(t))),delete s[t]),this},handleByMap(t,e){return this.handle(t,(t=>{t.name&&(e[t.name]=t.ref)}),(t=>{t.name&&delete e[t.name]}))},handleByNamedList(t,e,r=-1){return this.handle(t,(t=>{e.findIndex((e=>e.name===t.name))>=0||(e.push({name:t.name,value:t.ref}),e.sort(((t,e)=>s(e.value,r)-s(t.value,r))))}),(t=>{const r=e.findIndex((e=>e.name===t.name));-1!==r&&e.splice(r,1)}))},handleByList(t,e,r=-1){return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>s(e,r)-s(t,r))))}),(t=>{const r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)}))}}},6554:(t,e,r)=>{"use strict";r.d(e,{d:()=>h});var n=r(9657),i=r(1595),s=r(8475),o=r(7547);const a=class t extends s.M{constructor(e){super(e={...t.defaultOptions,...e}),this.enabled=!0,this._state=o.U.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,"boolean"==typeof e.antialias?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(t,e,r,n){t.applyFilter(this,e,r,n)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(e){const{gpu:r,gl:s,...o}=e;let a,h;return r&&(a=i.B.from(r)),s&&(h=n.M.from(s)),new t({gpuProgram:a,glProgram:h,...o})}};a.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let h=a},9049:(t,e,r)=>{"use strict";r.d(e,{a:()=>n});class n{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}},9430:(t,e,r)=>{"use strict";r.d(e,{L:()=>i});var n=r(8507);class i{constructor(t){this._renderer=t}push(t,e,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){"pushFilter"===t.action?this._renderer.filter.push(t):"popFilter"===t.action&&this._renderer.filter.pop()}destroy(){this._renderer=null}}i.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"filter"}},825:(t,e,r)=>{"use strict";r.d(e,{u:()=>g});var n=r(8507),i=r(9313),s=r(5101),o=r(3513),a=r(3681),h=r(9921),l=r(4503),u=r(2437),c=r(5099),d=r(9636),p=r(5462),f=r(268);const m=new a.V({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class g{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new h.k({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new o.T({}),this.renderer=t}get activeBackTexture(){return this._activeFilterData?.backTexture}push(t){const e=this.renderer,r=t.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());const n=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,0===r.length)return void(n.skip=!0);const i=n.bounds;if(t.renderables?(0,p.L)(t.renderables,i):t.filterEffect.filterArea?(i.clear(),i.addRect(t.filterEffect.filterArea),i.applyMatrix(t.container.worldTransform)):t.container.getFastGlobalBounds(!0,i),t.container){const e=(t.container.renderGroup||t.container.parentRenderGroup).cacheToLocalTransform;e&&i.applyMatrix(e)}const s=e.renderTarget.renderTarget.colorTexture.source;let o=1/0,a=0,h=!0,l=!1,c=!1,d=!0;for(let t=0;t<r.length;t++){const n=r[t];if(o=Math.min(o,"inherit"===n.resolution?s._resolution:n.resolution),a+=n.padding,"off"===n.antialias?h=!1:"inherit"===n.antialias&&h&&(h=s.antialias),n.clipToViewport||(d=!1),!(n.compatibleRenderers&e.type)){c=!1;break}if(n.blendRequired&&!(e.backBuffer?.useBackBuffer??1)){(0,f.R)("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),c=!1;break}c=n.enabled||c,l||(l=n.blendRequired)}if(c){if(d){const t=e.renderTarget.rootViewPort,r=e.renderTarget.renderTarget.resolution;i.fitBounds(0,t.width/r,0,t.height/r)}i.scale(o).ceil().scale(1/o).pad(0|a),i.isPositive?(n.skip=!1,n.bounds=i,n.blendRequired=l,n.container=t.container,n.filterEffect=t.filterEffect,n.previousRenderSurface=e.renderTarget.renderSurface,n.inputTexture=u.W.getOptimalTexture(i.width,i.height,o,h),e.renderTarget.bind(n.inputTexture,!0),e.globalUniforms.push({offset:i})):n.skip=!0}else n.skip=!0}pop(){const t=this.renderer;this._filterStackIndex--;const e=this._filterStack[this._filterStackIndex];if(e.skip)return;this._activeFilterData=e;const r=e.inputTexture,n=e.bounds;let i=l.g.EMPTY;if(t.renderTarget.finishRenderPass(),e.blendRequired){const r=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,s=t.renderTarget.getRenderTarget(e.previousRenderSurface);i=this.getBackTexture(s,n,r)}e.backTexture=i;const s=e.filterEffect.filters;if(this._globalFilterBindGroup.setResource(r.source.style,2),this._globalFilterBindGroup.setResource(i.source,3),t.globalUniforms.pop(),1===s.length)s[0].apply(this,r,e.previousRenderSurface,!1),u.W.returnTexture(r);else{let t=e.inputTexture,r=u.W.getOptimalTexture(n.width,n.height,t.source._resolution,!1),i=0;for(i=0;i<s.length-1;++i){s[i].apply(this,t,r,!0);const e=t;t=r,r=e}s[i].apply(this,t,e.previousRenderSurface,!1),u.W.returnTexture(t),u.W.returnTexture(r)}e.blendRequired&&u.W.returnTexture(i)}getBackTexture(t,e,r){const n=t.colorTexture.source._resolution,i=u.W.getOptimalTexture(e.width,e.height,n,!1);let s=e.minX,o=e.minY;r&&(s-=r.minX,o-=r.minY),s=Math.floor(s*n),o=Math.floor(o*n);const a=Math.ceil(e.width*n),h=Math.ceil(e.height*n);return this.renderer.renderTarget.copyToTexture(t,i,{x:s,y:o},{width:a,height:h},{x:0,y:0}),i}applyFilter(t,e,r,n){const i=this.renderer,o=this._filterStack[this._filterStackIndex],a=o.bounds,h=s.b.shared,u=o.previousRenderSurface===r;let d=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(d=this._filterStack[p].inputTexture.source._resolution);const f=this._filterGlobalUniforms,g=f.uniforms,_=g.uOutputFrame,b=g.uInputSize,x=g.uInputPixel,v=g.uInputClamp,y=g.uGlobalFrame,C=g.uOutputTexture;if(u){let t=this._filterStackIndex;for(;t>0;){t--;const e=this._filterStack[this._filterStackIndex-1];if(!e.skip){h.x=e.bounds.minX,h.y=e.bounds.minY;break}}_[0]=a.minX-h.x,_[1]=a.minY-h.y}else _[0]=0,_[1]=0;_[2]=e.frame.width,_[3]=e.frame.height,b[0]=e.source.width,b[1]=e.source.height,b[2]=1/b[0],b[3]=1/b[1],x[0]=e.source.pixelWidth,x[1]=e.source.pixelHeight,x[2]=1/x[0],x[3]=1/x[1],v[0]=.5*x[2],v[1]=.5*x[3],v[2]=e.frame.width*b[2]-.5*x[2],v[3]=e.frame.height*b[3]-.5*x[3];const T=this.renderer.renderTarget.rootRenderTarget.colorTexture;y[0]=h.x*d,y[1]=h.y*d,y[2]=T.source.width*d,y[3]=T.source.height*d;const S=this.renderer.renderTarget.getRenderTarget(r);if(i.renderTarget.bind(r,!!n),r instanceof l.g?(C[0]=r.frame.width,C[1]=r.frame.height):(C[0]=S.width,C[1]=S.height),C[2]=S.isRoot?-1:1,f.update(),i.renderPipes.uniformBatch){const t=i.renderPipes.uniformBatch.getUboResource(f);this._globalFilterBindGroup.setResource(t,0)}else this._globalFilterBindGroup.setResource(f,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,i.encoder.draw({geometry:m,shader:t,state:t._state,topology:"triangle-list"}),i.type===c.W.WEBGL&&i.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new d.c,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(t,e){const r=this._activeFilterData,n=t.set(r.inputTexture._source.width,0,0,r.inputTexture._source.height,r.bounds.minX,r.bounds.minY),s=e.worldTransform.copyTo(i.u.shared),o=e.renderGroup||e.parentRenderGroup;return o&&o.cacheToLocalTransform&&s.prepend(o.cacheToLocalTransform),s.invert(),n.prepend(s),n.scale(1/e.texture.frame.width,1/e.texture.frame.height),n.translate(e.anchor.x,e.anchor.y),n}}g.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"filter"}},2329:(t,e,r)=>{"use strict";r.d(e,{L:()=>d});var n=r(9313),i=r(9657),s=r(1595),o=r(9921),a=r(1196),h=r(6554),l=r(2311),u=r(7314),c=r(5496);class d extends h.d{constructor(t){const{sprite:e,...r}=t,h=new a.N(e.texture),d=new o.k({uFilterMatrix:{value:new n.u,type:"mat3x3<f32>"},uMaskClamp:{value:h.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}});super({...r,gpuProgram:s.B.from({vertex:{source:c.A,entryPoint:"mainVertex"},fragment:{source:c.A,entryPoint:"mainFragment"}}),glProgram:i.M.from({vertex:u.A,fragment:l.A,name:"mask-filter"}),resources:{filterUniforms:d,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=h}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return 1===this.resources.filterUniforms.uniforms.uInverse}apply(t,e,r,n){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,r,n)}}},2311:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var n="in vec2 vMaskCoord;\nin vec2 vTextureCoord;\n\nuniform sampler2D uTexture;\nuniform sampler2D uMaskTexture;\n\nuniform float uAlpha;\nuniform vec4 uMaskClamp;\nuniform float uInverse;\n\nout vec4 finalColor;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(uMaskClamp.x, vMaskCoord.x) +\n        step(uMaskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, uMaskClamp.z) +\n        step(vMaskCoord.y, uMaskClamp.w));\n\n    // TODO look into why this is needed\n    float npmAlpha = uAlpha;\n    vec4 original = texture(uTexture, vTextureCoord);\n    vec4 masky = texture(uMaskTexture, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    float a = alphaMul * masky.r * npmAlpha * clip;\n\n    if (uInverse == 1.0) {\n        a = 1.0 - a;\n    }\n\n    finalColor = original * a;\n}\n"},7314:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var n="in vec2 aPosition;\n\nout vec2 vTextureCoord;\nout vec2 vMaskCoord;\n\n\nuniform vec4 uInputSize;\nuniform vec4 uOutputFrame;\nuniform vec4 uOutputTexture;\nuniform mat3 uFilterMatrix;\n\nvec4 filterVertexPosition(  vec2 aPosition )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n       \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord(  vec2 aPosition )\n{\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\n}\n\nvec2 getFilterCoord( vec2 aPosition )\n{\n    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\n}   \n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition(aPosition);\n    vTextureCoord = filterTextureCoord(aPosition);\n    vMaskCoord = getFilterCoord(aPosition);\n}\n"},5496:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var n="struct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct MaskUniforms {\n  uFilterMatrix:mat3x3<f32>,\n  uMaskClamp:vec4<f32>,\n  uAlpha:f32,\n  uInverse:f32,\n};\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n\n@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;\n@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>,\n    @location(1) filterUv : vec2<f32>,\n};\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);\n}\n\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\n}\n\nfn getSize() -> vec2<f32>\n{\n  return gfu.uGlobalFrame.zw;\n}\n\n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>,\n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition),\n   getFilterCoord(aPosition)\n  );\n}\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n  @location(1) filterUv: vec2<f32>,\n  @builtin(position) position: vec4<f32>\n) -> @location(0) vec4<f32> {\n\n    var maskClamp = filterUniforms.uMaskClamp;\n    var uAlpha = filterUniforms.uAlpha;\n\n    var clip = step(3.5,\n      step(maskClamp.x, filterUv.x) +\n      step(maskClamp.y, filterUv.y) +\n      step(filterUv.x, maskClamp.z) +\n      step(filterUv.y, maskClamp.w));\n\n    var mask = textureSample(uMaskTexture, uSampler, filterUv);\n    var source = textureSample(uTexture, uSampler, uv);\n    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);\n\n    var a: f32 = alphaMul * mask.r * uAlpha * clip;\n\n    if (filterUniforms.uInverse == 1.0) {\n        a = 1.0 - a;\n    }\n\n    return source * a;\n}\n"},9313:(t,e,r)=>{"use strict";r.d(e,{u:()=>s});var n=r(1652),i=r(5101);class s{constructor(t=1,e=0,r=0,n=1,i=0,s=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,i,s){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new i.b;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new i.b;const r=this.a,n=this.b,s=this.c,o=this.d,a=this.tx,h=this.ty,l=1/(r*o+s*-n),u=t.x,c=t.y;return e.x=o*l*u+-s*l*c+(h*s-a*o)*l,e.y=r*l*c+-n*l*u+(-h*r+a*n)*l,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,s=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}appendFrom(t,e){const r=t.a,n=t.b,i=t.c,s=t.d,o=t.tx,a=t.ty,h=e.a,l=e.b,u=e.c,c=e.d;return this.a=r*h+n*u,this.b=r*l+n*c,this.c=i*h+s*u,this.d=i*l+s*c,this.tx=o*h+a*u+e.tx,this.ty=o*l+a*c+e.ty,this}setTransform(t,e,r,n,i,s,o,a,h){return this.a=Math.cos(o+h)*i,this.b=Math.sin(o+h)*i,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,r=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,i=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-i,s),h=Math.atan2(r,e),l=Math.abs(a+h);return l<1e-5||Math.abs(n.TO-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+s*s),t.position.x=this.tx+(o.x*e+o.y*i),t.position.y=this.ty+(o.x*r+o.y*s),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,s=t*n-e*r;return this.a=n/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-n*i)/s,this.ty=-(t*this.ty-e*i)/s,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return a.identity()}static get shared(){return o.identity()}}const o=new s,a=new s},2079:(t,e,r)=>{"use strict";r.d(e,{E:()=>c});var n=r(9313);const i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],o=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],h=[],l=[],u=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];h.push(e);for(let r=0;r<16;r++){const n=u(i[t]*i[r]+o[t]*s[r]),h=u(s[t]*i[r]+a[t]*s[r]),l=u(i[t]*o[r]+o[t]*a[r]),c=u(s[t]*o[r]+a[t]*a[r]);for(let t=0;t<16;t++)if(i[t]===n&&s[t]===h&&o[t]===l&&a[t]===c){e.push(t);break}}}for(let t=0;t<16;t++){const e=new n.u;e.set(i[t],s[t],o[t],a[t],0,0),l.push(e)}}();const c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>i[t],uY:t=>s[t],vX:t=>o[t],vY:t=>a[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>h[t][e],sub:(t,e)=>h[t][c.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?c.S:c.N:2*Math.abs(e)<=Math.abs(t)?t>0?c.E:c.W:e>0?t>0?c.SE:c.SW:t>0?c.NE:c.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=l[c.inv(e)];i.tx=r,i.ty=n,t.append(i)}}},1652:(t,e,r)=>{"use strict";r.d(e,{TO:()=>n,Td:()=>s,bO:()=>i});const n=2*Math.PI,i=180/Math.PI,s=Math.PI/180},9939:(t,e,r)=>{"use strict";function n(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)}function i(t){return!(t&t-1||!t)}function s(t){let e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,r=((t>>>=r)>15?1:0)<<2,e|=r,r=((t>>>=r)>3?1:0)<<1,e|=r,e|(t>>>=r)>>1}r.d(e,{U5:()=>n,f3:()=>i,p6:()=>s})},2505:(t,e,r)=>{"use strict";function n(t,e,r,n,i,s){const o=i-r,a=s-n,h=o*o+a*a;let l,u,c=-1;0!==h&&(c=((t-r)*o+(e-n)*a)/h),c<0?(l=r,u=n):c>1?(l=i,u=s):(l=r+c*o,u=n+c*a);const d=t-l,p=e-u;return d*d+p*p}r.d(e,{z:()=>n})},2812:(t,e,r)=>{"use strict";r.d(e,{o:()=>n});class n{constructor(t,e,r){this._x=e||0,this._y=r||0,this._observer=t}clone(t){return new n(t??this._observer,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}},5101:(t,e,r)=>{"use strict";r.d(e,{b:()=>n});class n{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new n(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return i.x=0,i.y=0,i}}const i=new n},6125:(t,e,r)=>{"use strict";r.d(e,{j:()=>i});var n=r(9252);class i{constructor(t=0,e=0,r=0){this.type="circle",this.x=t,this.y=e,this.radius=r}clone(){return new i(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r}strokeContains(t,e,r,n=.5){if(0===this.radius)return!1;const i=this.x-t,s=this.y-e,o=this.radius,a=(1-n)*r,h=Math.sqrt(i*i+s*s);return h<=o+a&&h>o-(r-a)}getBounds(t){return t||(t=new n.M),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}},2853:(t,e,r)=>{"use strict";r.d(e,{P:()=>i});var n=r(9252);class i{constructor(t=0,e=0,r=0,n=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=r,this.halfHeight=n}clone(){return new i(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(t-this.x)/this.halfWidth,n=(e-this.y)/this.halfHeight;return r*=r,n*=n,r+n<=1}strokeContains(t,e,r,n=.5){const{halfWidth:i,halfHeight:s}=this;if(i<=0||s<=0)return!1;const o=r*(1-n),a=r-o,h=i-a,l=s-a,u=i+o,c=s+o,d=t-this.x,p=e-this.y;return d*d/(h*h)+p*p/(l*l)>1&&d*d/(u*u)+p*p/(c*c)<=1}getBounds(t){return t||(t=new n.M),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=2*this.halfWidth,t.height=2*this.halfHeight,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}},9389:(t,e,r)=>{"use strict";r.d(e,{t:()=>s});var n=r(2505),i=r(9252);class s{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r].x,e[r].y);e=t}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new s(t);return e.closePath=this.closePath,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let i=0,s=n-1;i<n;s=i++){const n=this.points[2*i],o=this.points[2*i+1],a=this.points[2*s],h=this.points[2*s+1];o>e!=h>e&&t<(e-o)/(h-o)*(a-n)+n&&(r=!r)}return r}strokeContains(t,e,r,i=.5){const s=r*r,o=s*(1-i),a=s-o,{points:h}=this,l=h.length-(this.closePath?0:2);for(let r=0;r<l;r+=2){const i=h[r],s=h[r+1],l=h[(r+2)%h.length],u=h[(r+3)%h.length];if((0,n.z)(t,e,i,s,l,u)<=(Math.sign((l-i)*(e-s)-(u-s)*(t-i))<0?a:o))return!0}return!1}getBounds(t){t||(t=new i.M);const e=this.points;let r=1/0,n=-1/0,s=1/0,o=-1/0;for(let t=0,i=e.length;t<i;t+=2){const i=e[t],a=e[t+1];r=i<r?i:r,n=i>n?i:n,s=a<s?a:s,o=a>o?a:o}return t.x=r,t.width=n-r,t.y=s,t.height=o-s,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce(((t,e)=>`${t}, ${e}`),"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}},9252:(t,e,r)=>{"use strict";r.d(e,{M:()=>s});var n=r(5101);const i=[new n.b,new n.b,new n.b,new n.b];class s{constructor(t=0,e=0,r=0,n=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new s(0,0,0,0)}clone(){return new s(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,r,n=.5){const{width:i,height:s}=this;if(i<=0||s<=0)return!1;const o=this.x,a=this.y,h=r*(1-n),l=r-h;return t>=o-h&&t<=o+i+h&&e>=a-h&&e<=a+s+h&&!(t>o+l&&t<o+i-l&&e>a+l&&e<a+s-l)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}const r=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=r||o<=s)return!1;const a=i[0].set(t.left,t.top),h=i[1].set(t.left,t.bottom),l=i[2].set(t.right,t.top),u=i[3].set(t.right,t.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(0===c)return!1;if(e.apply(a,a),e.apply(h,h),e.apply(l,l),e.apply(u,u),Math.max(a.x,h.x,l.x,u.x)<=r||Math.min(a.x,h.x,l.x,u.x)>=n||Math.max(a.y,h.y,l.y,u.y)<=s||Math.min(a.y,h.y,l.y,u.y)>=o)return!1;const d=c*(h.y-a.y),p=c*(a.x-h.x),f=d*r+p*s,m=d*n+p*s,g=d*r+p*o,_=d*n+p*o;if(Math.max(f,m,g,_)<=d*a.x+p*a.y||Math.min(f,m,g,_)>=d*u.x+p*u.y)return!1;const b=c*(a.y-l.y),x=c*(l.x-a.x),v=b*r+x*s,y=b*n+x*s,C=b*r+x*o,T=b*n+x*o;return!(Math.max(v,y,C,T)<=b*a.x+x*a.y||Math.min(v,y,C,T)>=b*u.x+x*u.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this}getBounds(t){return t||(t=new s),t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}},4863:(t,e,r)=>{"use strict";r.d(e,{T:()=>s});var n=r(9252);const i=(t,e,r,n,i,s,o)=>{const a=t-r,h=e-n,l=Math.sqrt(a*a+h*h);return l>=i-s&&l<=i+o};class s{constructor(t=0,e=0,r=0,n=0,i=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i}getBounds(t){return t||(t=new n.M),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new s(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=e-(this.y+r);const s=r*r;if(n*n+i*i<=s)return!0;if(n=t-(this.x+this.width-r),n*n+i*i<=s)return!0;if(i=e-(this.y+this.height-r),n*n+i*i<=s)return!0;if(n=t-(this.x+r),n*n+i*i<=s)return!0}return!1}strokeContains(t,e,r,n=.5){const{x:s,y:o,width:a,height:h,radius:l}=this,u=r*(1-n),c=r-u,d=s+l,p=o+l,f=s+a,m=o+h;return(t>=s-u&&t<=s+c||t>=f-c&&t<=f+u)&&e>=p&&e<=p+(h-2*l)||(e>=o-u&&e<=o+c||e>=m-c&&e<=m+u)&&t>=d&&t<=d+(a-2*l)||t<d&&e<p&&i(t,e,d,p,l,c,u)||t>f-l&&e<p&&i(t,e,f-l,p,l,c,u)||t>f-l&&e>m-l&&i(t,e,f-l,m-l,l,c,u)||t<d&&e>m-l&&i(t,e,d,m-l,l,c,u)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}},2439:(t,e,r)=>{"use strict";r.d(e,{t:()=>s});var n=r(8507),i=r(7547);class s{constructor(){this._tempState=i.U.for2d(),this._didUploadHash={}}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(t,e,r){const n=t.renderer,i=this._didUploadHash[r.uid];n.shader.bind(r,i),i||(this._didUploadHash[r.uid]=!0),n.shader.updateUniformGroup(n.globalUniforms.uniformGroup),n.geometry.bind(e,r.glProgram)}execute(t,e){const r=t.renderer;this._tempState.blendMode=e.blendMode,r.state.set(this._tempState);const n=e.textures.textures;for(let t=0;t<e.textures.count;t++)r.texture.bind(n[t],t);r.geometry.draw(e.topology,e.size,e.start)}}s.extension={type:[n.Ag.WebGLPipesAdaptor],name:"batch"}},6512:(t,e,r)=>{"use strict";r.d(e,{u:()=>s});const n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function i(t){let e="";for(let r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function s(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const s=n.replace(/%forloop%/gi,i(t));if(e.shaderSource(r,s),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}}finally{e.deleteShader(r)}return t}},9271:(t,e,r)=>{"use strict";r.d(e,{a:()=>o});var n=r(3804),i=r(6512);let s=null;function o(){if(s)return s;const t=(0,n.W)();return s=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),s=(0,i.u)(s,t),t.getExtension("WEBGL_lose_context")?.loseContext(),s}},6915:(t,e,r)=>{"use strict";r.d(e,{E:()=>a});var n=r(8507),i=r(7547),s=r(341);const o=i.U.for2d();class a{start(t,e,r){const n=t.renderer,i=n.encoder,s=r.gpuProgram;this._shader=r,this._geometry=e,i.setGeometry(e,s),o.blendMode="normal",n.pipeline.getPipeline(e,s,o);const a=n.globalUniforms.bindGroup;i.resetBindGroup(1),i.setBindGroup(0,a,s)}execute(t,e){const r=this._shader.gpuProgram,n=t.renderer,i=n.encoder;if(!e.bindGroup){const t=e.textures;e.bindGroup=(0,s.w)(t.textures,t.count)}o.blendMode=e.blendMode;const a=n.bindGroup.getBindGroup(e.bindGroup,r,1),h=n.pipeline.getPipeline(this._geometry,r,o,e.topology);e.bindGroup._touch(n.textureGC.count),i.setPipeline(h),i.renderPassEncoder.setBindGroup(1,a),i.renderPassEncoder.drawIndexed(e.size,1,e.start)}}a.extension={type:[n.Ag.WebGPUPipesAdaptor],name:"batch"}},341:(t,e,r)=>{"use strict";r.d(e,{w:()=>a});var n=r(3513),i=r(4503),s=r(9271);const o={};function a(t,e){let r=2166136261;for(let n=0;n<e;n++)r^=t[n].uid,r=Math.imul(r,16777619),r>>>=0;return o[r]||function(t,e,r){const a={};let l=0;h||(h=(0,s.a)());for(let r=0;r<h;r++){const n=r<e?t[r]:i.g.EMPTY.source;a[l++]=n.source,a[l++]=n.style}const u=new n.T(a);return o[r]=u,u}(t,e,r)}let h=0},1617:(t,e,r)=>{"use strict";r.d(e,{J:()=>h});var n=r(949),i=r(1132),s=r(3681);const o=new Float32Array(1),a=new Uint32Array(1);class h extends s.V{constructor(){const t=new n.h({data:o,label:"attribute-batch-buffer",usage:i.S.VERTEX|i.S.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:24,offset:0},aUV:{buffer:t,format:"float32x2",stride:24,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:24,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:24,offset:20}},indexBuffer:new n.h({data:a,label:"index-batch-buffer",usage:i.S.INDEX|i.S.COPY_DST,shrinkToFit:!1})})}}},5217:(t,e,r)=>{"use strict";r.d(e,{L:()=>n});class n{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}},1936:(t,e,r)=>{"use strict";r.d(e,{i:()=>g,l:()=>l});var n=r(133),i=r(1460),s=r(6736),o=r(8639),a=r(9271),h=r(5217);class l{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new h.L,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const u=[];let c=0;function d(){return c>0?u[--c]:new l}function p(t){u[c++]=t}let f=0;const m=class t{constructor(e={}){this.uid=(0,n.L)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t.defaultOptions.maxTextures=t.defaultOptions.maxTextures??(0,a.a)(),e={...t.defaultOptions,...e};const{maxTextures:r,attributesInitialSize:s,indicesInitialSize:o}=e;this.attributeBuffer=new i.u(4*s),this.indexBuffer=new Uint16Array(o),this.maxTextures=r}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)p(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const r=t._batch.textures.ids[e._source.uid];return!(!r&&0!==r||(t._textureId=r,t.texture=e,0))}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let r=d(),n=r.textures;n.clear();const i=e[this.elementStart];let s=(0,o.i)(i.blendMode,i.texture._source),a=i.topology;4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const h=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer;let c=this._batchIndexSize,p=this._batchIndexStart,m="startBatch";const g=this.maxTextures;for(let i=this.elementStart;i<this.elementSize;++i){const _=e[i];e[i]=null;const b=_.texture._source,x=(0,o.i)(_.blendMode,b),v=s!==x||a!==_.topology;b._batchTick!==f||v?(b._batchTick=f,(n.count>=g||v)&&(this._finishBatch(r,p,c-p,n,s,a,t,m),m="renderBatch",p=c,s=x,a=_.topology,r=d(),n=r.textures,n.clear(),++f),_._textureId=b._textureBindLocation=n.count,n.ids[b.uid]=n.count,n.textures[n.count++]=b,_._batch=r,c+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,h,l,_._attributeStart,_._textureId),this.packQuadIndex(u,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,h,l,_._attributeStart,_._textureId),this.packIndex(_,u,_._indexStart,_._attributeStart/this.vertexSize))):(_._textureId=b._textureBindLocation,c+=_.indexSize,_.packAsQuad?(this.packQuadAttributes(_,h,l,_._attributeStart,_._textureId),this.packQuadIndex(u,_._indexStart,_._attributeStart/this.vertexSize)):(this.packAttributes(_,h,l,_._attributeStart,_._textureId),this.packIndex(_,u,_._indexStart,_._attributeStart/this.vertexSize)),_._batch=r)}n.count>0&&(this._finishBatch(r,p,c-p,n,s,a,t,m),p=c,++f),this.elementStart=this.elementSize,this._batchIndexStart=p,this._batchIndexSize=c}_finishBatch(t,e,r,n,i,s,o,a){t.gpuBindGroup=null,t.bindGroup=null,t.action=a,t.batcher=this,t.textures=n,t.blendMode=i,t.topology=s,t.start=e,t.size=r,++f,this.batches[this.batchIndex++]=t,o.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){4*t<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*t)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,2*this.attributeBuffer.size),r=new i.u(e);(0,s.W)(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(t){const e=this.indexBuffer;let r=Math.max(t,1.5*e.length);r+=r%2;const n=r>65535?new Uint32Array(r):new Uint16Array(r);if(n.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let t=0;t<e.length;t++)n[t]=e[t];else(0,s.W)(e.buffer,n.buffer);this.indexBuffer=n}packQuadIndex(t,e,r){t[e]=r+0,t[e+1]=r+1,t[e+2]=r+2,t[e+3]=r+0,t[e+4]=r+2,t[e+5]=r+3}packIndex(t,e,r,n){const i=t.indices,s=t.indexSize,o=t.indexOffset,a=t.attributeOffset;for(let t=0;t<s;t++)e[r++]=n+i[t+o]-a}destroy(){for(let t=0;t<this.batches.length;t++)p(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};m.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let g=m},780:(t,e,r)=>{"use strict";r.d(e,{s:()=>a});var n=r(8507),i=r(7547),s=r(6987);const o=class t{constructor(t,e){this.state=i.U.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init?.(this)}static getBatcher(t){return new this._availableBatchers[t]}buildStart(t){let e=this._batchersByInstructionSet[t.uid];e||(e=this._batchersByInstructionSet[t.uid]=Object.create(null),e.default||(e.default=new s.J)),this._activeBatches=e,this._activeBatch=this._activeBatches.default;for(const t in this._activeBatches)this._activeBatches[t].begin()}addToBatch(e,r){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(r);let n=this._activeBatches[e.batcherName];n||(n=this._activeBatches[e.batcherName]=t.getBatcher(e.batcherName),n.begin()),this._activeBatch=n}this._activeBatch.add(e)}break(t){this._activeBatch.break(t)}buildEnd(t){this._activeBatch.break(t);const e=this._activeBatches;for(const t in e){const r=e[t],n=r.geometry;n.indexBuffer.setDataWithSize(r.indexBuffer,r.indexSize,!0),n.buffers[0].setDataWithSize(r.attributeBuffer.float32View,r.attributeSize,!1)}}upload(t){const e=this._batchersByInstructionSet[t.uid];for(const t in e){const r=e[t],n=r.geometry;r.dirty&&(r.dirty=!1,n.buffers[0].update(4*r.attributeSize))}}execute(t){if("startBatch"===t.action){const e=t.batcher,r=e.geometry,n=e.shader;this._adaptor.start(this,r,n)}this._adaptor.execute(this,t)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const t in this._activeBatches)this._activeBatches[t].destroy();this._activeBatches=null}};o.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"batch"},o._availableBatchers=Object.create(null);let a=o;n.XO.handleByMap(n.Ag.Batcher,a._availableBatchers),n.XO.add(s.J)},6987:(t,e,r)=>{"use strict";r.d(e,{J:()=>l});var n=r(8507),i=r(1936),s=r(1617),o=r(9269);let a=null;const h=class t extends i.i{constructor(){super(...arguments),this.geometry=new s.J,this.shader=a||(a=new o.$(this.maxTextures)),this.name=t.extension.name,this.vertexSize=6}packAttributes(t,e,r,n,i){const s=i<<16|65535&t.roundPixels,o=t.transform,a=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,d=o.ty,{positions:p,uvs:f}=t,m=t.color,g=t.attributeOffset,_=g+t.attributeSize;for(let t=g;t<_;t++){const i=2*t,o=p[i],g=p[i+1];e[n++]=a*o+l*g+c,e[n++]=u*g+h*o+d,e[n++]=f[i],e[n++]=f[i+1],r[n++]=m,r[n++]=s}}packQuadAttributes(t,e,r,n,i){const s=t.texture,o=t.transform,a=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,d=o.ty,p=t.bounds,f=p.maxX,m=p.minX,g=p.maxY,_=p.minY,b=s.uvs,x=t.color,v=i<<16|65535&t.roundPixels;e[n+0]=a*m+l*_+c,e[n+1]=u*_+h*m+d,e[n+2]=b.x0,e[n+3]=b.y0,r[n+4]=x,r[n+5]=v,e[n+6]=a*f+l*_+c,e[n+7]=u*_+h*f+d,e[n+8]=b.x1,e[n+9]=b.y1,r[n+10]=x,r[n+11]=v,e[n+12]=a*f+l*g+c,e[n+13]=u*g+h*f+d,e[n+14]=b.x2,e[n+15]=b.y2,r[n+16]=x,r[n+17]=v,e[n+18]=a*m+l*g+c,e[n+19]=u*g+h*m+d,e[n+20]=b.x3,e[n+21]=b.y3,r[n+22]=x,r[n+23]=v}};h.extension={type:[n.Ag.Batcher],name:"default"};let l=h},9269:(t,e,r)=>{"use strict";r.d(e,{$:()=>l});var n=r(8587),i=r(4459),s=r(4e3),o=r(6665),a=r(6040),h=r(8475);class l extends h.M{constructor(t){super({glProgram:(0,n.I)({name:"batch",bits:[i.a,(0,s.P)(t),o.m]}),gpuProgram:(0,n.v)({name:"batch",bits:[i.F,(0,s._)(t),o.b]}),resources:{batchSamplers:(0,a.n)(t)}})}}},8587:(t,e,r)=>{"use strict";r.d(e,{I:()=>l,v:()=>h});var n=r(9657),i=r(1595),s=r(5188),o=r(3589),a=r(6632);function h({bits:t,name:e}){const r=(0,s.h)({template:{fragment:o.xl,vertex:o.Tp},bits:[a.EU,...t]});return i.B.from({name:e,vertex:{source:r.vertex,entryPoint:"main"},fragment:{source:r.fragment,entryPoint:"main"}})}function l({bits:t,name:e}){return new n.M({name:e,...(0,s.Q)({template:{vertex:o.sS,fragment:o._g},bits:[a.jv,...t]})})}},5188:(t,e,r)=>{"use strict";r.d(e,{Q:()=>d,h:()=>c});var n=r(7879),i=r(931),s=r(7962),o=r(2141),a=r(2677);const h=Object.create(null),l=new Map;let u=0;function c({template:t,bits:e}){const r=p(t,e);if(h[r])return h[r];const{vertex:n,fragment:i}=function(t,e){const r=e.map((t=>t.vertex)).filter((t=>!!t)),n=e.map((t=>t.fragment)).filter((t=>!!t));let i=(0,s.j)(r,t.vertex,!0);return i=(0,o.Q)(r,i),{vertex:i,fragment:(0,s.j)(n,t.fragment,!0)}}(t,e);return h[r]=f(n,i,e),h[r]}function d({template:t,bits:e}){const r=p(t,e);return h[r]||(h[r]=f(t.vertex,t.fragment,e)),h[r]}function p(t,e){return e.map((t=>(l.has(t)||l.set(t,u++),l.get(t)))).sort(((t,e)=>t-e)).join("-")+t.vertex+t.fragment}function f(t,e,r){const s=(0,i.w)(t),o=(0,i.w)(e);return r.forEach((t=>{(0,n.u)(t.vertex,s,t.name),(0,n.u)(t.fragment,o,t.name)})),{vertex:(0,a.q)(t,s),fragment:(0,a.q)(e,o)}}},7879:(t,e,r)=>{"use strict";r.d(e,{u:()=>i});var n=r(268);function i(t,e,r){if(t)for(const i in t){const s=e[i.toLocaleLowerCase()];if(s){let e=t[i];"header"===i&&(e=e.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),r&&s.push(`//----${r}----//`),s.push(e)}else(0,n.R)(`${i} placement hook does not exist in shader`)}}},931:(t,e,r)=>{"use strict";r.d(e,{a:()=>n,w:()=>i});const n=/\{\{(.*?)\}\}/g;function i(t){const e={};return(t.match(n)?.map((t=>t.replace(/[{()}]/g,"")))??[]).forEach((t=>{e[t]=[]})),e}},7962:(t,e,r)=>{"use strict";function n(t,e){let r;const n=/@in\s+([^;]+);/g;for(;null!==(r=n.exec(t));)e.push(r[1])}function i(t,e,r=!1){const i=[];n(e,i),t.forEach((t=>{t.header&&n(t.header,i)}));const s=i;r&&s.sort();const o=s.map(((t,e)=>`       @location(${e}) ${t},`)).join("\n");let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`\n${o}\n`),a}r.d(e,{j:()=>i})},2141:(t,e,r)=>{"use strict";function n(t,e){let r;const n=/@out\s+([^;]+);/g;for(;null!==(r=n.exec(t));)e.push(r[1])}function i(t,e){const r=[];n(e,r),t.forEach((t=>{t.header&&n(t.header,r)}));let i=0;const s=r.sort().map((t=>t.indexOf("builtin")>-1?t:`@location(${i++}) ${t}`)).join(",\n"),o=r.sort().map((t=>{return`       var ${e=t,e.replace(/@.*?\s+/g,"")};`;var e})).join("\n"),a=`return VSOutput(\n            ${r.sort().map((t=>` ${function(t){const e=/\b(\w+)\s*:/g.exec(t);return e?e[1]:""}(t)}`)).join(",\n")});`;let h=e.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`\n${s}\n`),h=h.replace("{{start}}",`\n${o}\n`),h=h.replace("{{return}}",`\n${a}\n`),h}r.d(e,{Q:()=>i})},2677:(t,e,r)=>{"use strict";function n(t,e){let r=t;for(const t in e){const n=e[t];r=n.join("\n").length?r.replace(`{{${t}}}`,`//-----${t} START-----//\n${n.join("\n")}\n//----${t} FINISH----//`):r.replace(`{{${t}}}`,"")}return r}r.d(e,{q:()=>n})},3589:(t,e,r)=>{"use strict";r.d(e,{Tp:()=>n,_g:()=>o,sS:()=>s,xl:()=>i});const n="\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n        \n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n       \n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n",i="\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n   \n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n        \n        {{start}}\n\n        var outColor:vec4<f32>;\n      \n        {{main}}\n        \n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n",s="\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n        \n        {{start}}\n        \n        vColor = vec4(1.);\n        \n        {{main}}\n        \n        vUV = uv;\n        \n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n",o="\n   \n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n        \n        {{start}}\n\n        vec4 outColor;\n      \n        {{main}}\n        \n        finalColor = outColor * vColor;\n        \n        {{end}}\n    }\n"},4459:(t,e,r)=>{"use strict";r.d(e,{F:()=>n,a:()=>i});const n={name:"color-bit",vertex:{header:"\n            @in aColor: vec4<f32>;\n        ",main:"\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        "}},i={name:"color-bit",vertex:{header:"\n            in vec4 aColor;\n        ",main:"\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        "}}},4e3:(t,e,r)=>{"use strict";r.d(e,{P:()=>l,_:()=>o});const n={};function i(t){const e=[];if(1===t)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let r=0;for(let n=0;n<t;n++)e.push(`@group(1) @binding(${r++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${r++}) var textureSampler${n+1}: sampler;`)}return e.join("\n")}function s(t){const e=[];if(1===t)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let r=0;r<t;r++)r===t-1?e.push("  default:{"):e.push(`  case ${r}:{`),e.push(`      outColor = textureSampleGrad(textureSource${r+1}, textureSampler${r+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join("\n")}function o(t){return n[t]||(n[t]={name:"texture-batch-bit",vertex:{header:"\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            "},fragment:{header:`\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${i(t)}\n            `,main:`\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${s(t)}\n            `}}),n[t]}const a={};function h(t){const e=[];for(let r=0;r<t;r++)r>0&&e.push("else"),r<t-1&&e.push(`if(vTextureId < ${r}.5)`),e.push("{"),e.push(`\toutColor = texture(uTextures[${r}], vUV);`),e.push("}");return e.join("\n")}function l(t){return a[t]||(a[t]={name:"texture-batch-bit",vertex:{header:"\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            "},fragment:{header:`\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${t}];\n\n            `,main:`\n\n                ${h(t)}\n            `}}),a[t]}},6632:(t,e,r)=>{"use strict";r.d(e,{EU:()=>n,hF:()=>i,jv:()=>s});const n={name:"global-uniforms-bit",vertex:{header:"\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        "}},i={name:"global-uniforms-ubo-bit",vertex:{header:"\n          uniform globalUniforms {\n            mat3 uProjectionMatrix;\n            mat3 uWorldTransformMatrix;\n            vec4 uWorldColorAlpha;\n            vec2 uResolution;\n          };\n        "}},s={name:"global-uniforms-bit",vertex:{header:"\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        "}}},2067:(t,e,r)=>{"use strict";r.d(e,{Ls:()=>n,_Q:()=>i,mA:()=>s});const n={name:"local-uniform-bit",vertex:{header:"\n\n            struct LocalUniforms {\n                uTransformMatrix:mat3x3<f32>,\n                uColor:vec4<f32>,\n                uRound:f32,\n            }\n\n            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        ",main:"\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        ",end:"\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        "}},i={...n,vertex:{...n.vertex,header:n.vertex.header.replace("group(1)","group(2)")}},s={name:"local-uniform-bit",vertex:{header:"\n\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        ",main:"\n            vColor *= uColor;\n            modelMatrix = uTransformMatrix;\n        ",end:"\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        "}}},6665:(t,e,r)=>{"use strict";r.d(e,{b:()=>n,m:()=>i});const n={name:"round-pixels-bit",vertex:{header:"\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> \n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}},i={name:"round-pixels-bit",vertex:{header:"   \n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {       \n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}}},3391:(t,e,r)=>{"use strict";r.d(e,{R:()=>n,m:()=>i});const n={name:"texture-bit",vertex:{header:"\n\n        struct TextureUniforms {\n            uTextureMatrix:mat3x3<f32>,\n        }\n\n        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;\n        ",main:"\n            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;\n        "},fragment:{header:"\n            @group(2) @binding(0) var uTexture: texture_2d<f32>;\n            @group(2) @binding(1) var uSampler: sampler;\n\n         \n        ",main:"\n            outColor = textureSample(uTexture, uSampler, vUV);\n        "}},i={name:"texture-bit",vertex:{header:"\n            uniform mat3 uTextureMatrix;\n        ",main:"\n            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;\n        "},fragment:{header:"\n        uniform sampler2D uTexture;\n\n         \n        ",main:"\n            outColor = texture(uTexture, vUV);\n        "}}},7801:(t,e,r)=>{"use strict";var n=r(8507),i=r(911),s=r(8263),o=r(7687),a=r(4195),h=r(4884),l=r(8293),u=r(6139);r(6557),n.XO.add(i.Z,s.W,o.r,u.$,l.b,h.q,a.P)},7790:(t,e,r)=>{"use strict";r.d(e,{B:()=>o,H:()=>s});var n=r(8507),i=r(8218);class s{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach((t=>{this.add({test:t.test,maskClass:t})})))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const r=this._tests[e];if(r.test(t))return i.Z.get(r.maskClass,t)}return t}returnMaskEffect(t){i.Z.return(t)}}const o=new s;n.XO.handleByList(n.Ag.MaskEffect,o._effectClasses)},911:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(8507),i=r(6844),s=r(474),o=r(5473);class a{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof i.k),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||(0,s.d)(this.mask,t,e)}addLocalBounds(t,e){(0,o.U)(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof i.k}}a.extension=n.Ag.MaskEffect},7923:(t,e,r)=>{"use strict";r.d(e,{z:()=>m});var n=r(8507),i=r(9049),s=r(2329),o=r(9636),a=r(9443),h=r(6844),l=r(8218),u=r(4503),c=r(2437),d=r(5099);const p=new o.c;class f extends i.a{constructor(){super(),this.filters=[new s.L({sprite:new h.k(u.g.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}}class m{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,r){const n=this._renderer;if(n.renderPipes.batch.break(r),r.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){const e=t.mask;e.includeInBuild=!0,e.collectRenderables(r,n,null),e.includeInBuild=!1}n.renderPipes.batch.break(r),r.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,r){this._renderer.renderPipes.batch.break(r),r.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){const e=this._renderer,r=t.mask.renderMaskToTexture;if("pushMaskBegin"===t.action){const n=l.Z.get(f);if(n.inverse=t.inverse,r){t.mask.mask.measurable=!0;const r=(0,a.fB)(t.mask.mask,!0,p);t.mask.mask.measurable=!1,r.ceil();const i=e.renderTarget.renderTarget.colorTexture.source,s=c.W.getOptimalTexture(r.width,r.height,i._resolution,i.antialias);e.renderTarget.push(s,!0),e.globalUniforms.push({offset:r,worldColor:4294967295});const o=n.sprite;o.texture=s,o.worldTransform.tx=r.minX,o.worldTransform.ty=r.minY,this._activeMaskStage.push({filterEffect:n,maskedContainer:t.maskedContainer,filterTexture:s})}else n.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:n,maskedContainer:t.maskedContainer})}else if("pushMaskEnd"===t.action){const t=this._activeMaskStage[this._activeMaskStage.length-1];r&&(e.type===d.W.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:t.maskedContainer,filterEffect:t.filterEffect,canBundle:!1})}else if("popMaskEnd"===t.action){e.filter.pop();const t=this._activeMaskStage.pop();r&&c.W.returnTexture(t.filterTexture),l.Z.return(t.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}m.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"alphaMask"}},8263:(t,e,r)=>{"use strict";r.d(e,{W:()=>i});var n=r(8507);class i{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"==typeof t}}i.extension=n.Ag.MaskEffect},2187:(t,e,r)=>{"use strict";r.d(e,{u:()=>i});var n=r(8507);class i{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,r){this._renderer.renderPipes.batch.break(r);const n=this._colorStack;n[this._colorStackIndex]=n[this._colorStackIndex-1]&t.mask;const i=this._colorStack[this._colorStackIndex];i!==this._currentColor&&(this._currentColor=i,r.add({renderPipeId:"colorMask",colorMask:i,canBundle:!1})),this._colorStackIndex++}pop(t,e,r){this._renderer.renderPipes.batch.break(r);const n=this._colorStack;this._colorStackIndex--;const i=n[this._colorStackIndex-1];i!==this._currentColor&&(this._currentColor=i,r.add({renderPipeId:"colorMask",colorMask:i,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._colorStack=null}}i.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"colorMask"}},7687:(t,e,r)=>{"use strict";r.d(e,{r:()=>a});var n=r(8507),i=r(4980),s=r(474),o=r(5473);class a{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){(0,s.d)(this.mask,t,e)}addLocalBounds(t,e){(0,o.U)(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof i.mc}}a.extension=n.Ag.MaskEffect},2139:(t,e,r)=>{"use strict";r.d(e,{j:()=>o});var n=r(8507),i=r(1257),s=r(1957);class o{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,r){var n;const i=t,s=this._renderer;s.renderPipes.batch.break(r),s.renderPipes.blendMode.setBlendMode(i.mask,"none",r),r.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const o=i.mask;o.includeInBuild=!0,this._maskHash.has(i)||this._maskHash.set(i,{instructionsStart:0,instructionsLength:0});const a=this._maskHash.get(i);a.instructionsStart=r.instructionSize,o.collectRenderables(r,s,null),o.includeInBuild=!1,s.renderPipes.batch.break(r),r.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const h=r.instructionSize-a.instructionsStart-1;a.instructionsLength=h;const l=s.renderTarget.renderTarget.uid;(n=this._maskStackHash)[l]??(n[l]=0)}pop(t,e,r){const n=t,i=this._renderer;i.renderPipes.batch.break(r),i.renderPipes.blendMode.setBlendMode(n.mask,"none",r),r.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});const s=this._maskHash.get(t);for(let t=0;t<s.instructionsLength;t++)r.instructions[r.instructionSize++]=r.instructions[s.instructionsStart++];r.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;const r=this._renderer,n=r.renderTarget.renderTarget.uid;let o=(e=this._maskStackHash)[n]??(e[n]=0);"pushMaskBegin"===t.action?(r.renderTarget.ensureDepthStencil(),r.stencil.setStencilMode(s.K.RENDERING_MASK_ADD,o),o++,r.colorMask.setMask(0)):"pushMaskEnd"===t.action?(t.inverse?r.stencil.setStencilMode(s.K.INVERSE_MASK_ACTIVE,o):r.stencil.setStencilMode(s.K.MASK_ACTIVE,o),r.colorMask.setMask(15)):"popMaskBegin"===t.action?(r.colorMask.setMask(0),0!==o?r.stencil.setStencilMode(s.K.RENDERING_MASK_REMOVE,o):(r.renderTarget.clear(null,i.u.STENCIL),r.stencil.setStencilMode(s.K.DISABLED,o)),o--):"popMaskEnd"===t.action&&(t.inverse?r.stencil.setStencilMode(s.K.INVERSE_MASK_ACTIVE,o):r.stencil.setStencilMode(s.K.MASK_ACTIVE,o),r.colorMask.setMask(15)),this._maskStackHash[n]=o}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}o.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"stencilMask"}},474:(t,e,r)=>{"use strict";r.d(e,{d:()=>o});var n=r(9636),i=r(9443);const s=new n.c;function o(t,e,r){const n=s;t.measurable=!0,(0,i.fB)(t,r,n),e.addBoundsMask(n),t.measurable=!1}},5473:(t,e,r)=>{"use strict";r.d(e,{D:()=>a,U:()=>o});var n=r(7269),i=r(2208),s=r(268);function o(t,e,r){const s=i.o.get();t.measurable=!0;const o=i.u.get().identity(),h=a(t,r,o);(0,n.n)(t,s,h),t.measurable=!1,e.addBoundsMask(s),i.u.return(o),i.o.return(s)}function a(t,e,r){return t?(t!==e&&(a(t.parent,e,r),t.updateLocalTransform(),r.append(t.localTransform)),r):((0,s.R)("Mask bounds, renderable is not inside the root container"),r)}},8377:(t,e,r)=>{"use strict";r.d(e,{q:()=>p});var n=r(8507),i=r(268),s=r(3681),o=r(8475),a=r(7547),h=r(583),l=r(4503),u=r(9657);const c=new s.V({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),d=class t{constructor(t){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=t}init(e={}){const{useBackBuffer:r,antialias:n}={...t.defaultOptions,...e};this.useBackBuffer=r,this._antialias=n,this._renderer.context.supports.msaa||((0,i.R)("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=a.U.for2d();const s=new u.M({vertex:"\n                attribute vec2 aPosition;\n                out vec2 vUv;\n\n                void main() {\n                    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n                    vUv = (aPosition + 1.0) / 2.0;\n\n                    // flip dem UVs\n                    vUv.y = 1.0 - vUv.y;\n                }",fragment:"\n                in vec2 vUv;\n                out vec4 finalColor;\n\n                uniform sampler2D uTexture;\n\n                void main() {\n                    finalColor = texture(uTexture, vUv);\n                }",name:"big-triangle"});this._bigTriangleShader=new o.M({glProgram:s,resources:{uTexture:l.g.WHITE.source}})}renderStart(t){const e=this._renderer.renderTarget.getRenderTarget(t.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!e.isRoot,this._useBackBufferThisRender){const e=this._renderer.renderTarget.getRenderTarget(t.target);this._targetTexture=e.colorTexture,t.target=this._getBackBufferTexture(e.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const t=this._renderer;t.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(t.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,t.encoder.draw({geometry:c,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(t){return this._backBufferTexture=this._backBufferTexture||new l.g({source:new h.v({width:t.width,height:t.height,resolution:t._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(t.width,t.height,t._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};d.extension={type:[n.Ag.WebGLSystem],name:"backBuffer",priority:1},d.defaultOptions={useBackBuffer:!1};let p=d},8013:(t,e,r)=>{"use strict";r.d(e,{U:()=>i});var n=r(8507);class i{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(8&t),!!(4&t),!!(2&t),!!(1&t)))}}i.extension={type:[n.Ag.WebGLSystem],name:"colorMask"}},4220:(t,e,r)=>{"use strict";r.d(e,{X:()=>i});var n=r(8507);class i{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){const e=this._renderer,{geometry:r,shader:n,state:i,skipSync:s,topology:o,size:a,start:h,instanceCount:l}=t;e.shader.bind(n,s),e.geometry.bind(r,e.shader._activeProgram),i&&e.state.set(i),e.geometry.draw(o,a,h,l??r.instanceCount)}destroy(){this._renderer=null}}i.extension={type:[n.Ag.WebGLSystem],name:"encoder"}},6550:(t,e,r)=>{"use strict";r.d(e,{N:()=>n});class n{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}},48:(t,e,r)=>{"use strict";r.d(e,{P:()=>o});var n=r(8507),i=r(1172),s=r(1957);class o{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:s.K.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=s.K.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:s.K.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){const r=this._renderTargetStencilState[this._activeRenderTarget.uid],n=this._gl,o=i.g[t],a=this._stencilCache;r.stencilMode=t,r.stencilReference=e,t!==s.K.DISABLED?(this._stencilCache.enabled||(this._stencilCache.enabled=!0,n.enable(n.STENCIL_TEST)),t===a.stencilMode&&a.stencilReference===e||(a.stencilMode=t,a.stencilReference=e,n.stencilFunc(this._comparisonFuncMapping[o.stencilBack.compare],e,255),n.stencilOp(n.KEEP,n.KEEP,this._stencilOpsMapping[o.stencilBack.passOp]))):this._stencilCache.enabled&&(this._stencilCache.enabled=!1,n.disable(n.STENCIL_TEST))}}o.extension={type:[n.Ag.WebGLSystem],name:"stencil"}},7816:(t,e,r)=>{"use strict";r.d(e,{z:()=>a});var n=r(8507),i=r(7047),s=r(7718),o=r(3412);class a extends i.W{constructor(){super({createUboElements:s.l,generateUboSync:o.N})}}a.extension={type:[n.Ag.WebGLSystem],name:"ubo"}},4794:(t,e,r)=>{"use strict";r.d(e,{WebGLRenderer:()=>L});var n=r(8507),i=r(7326),s=r(7586),o=r(2439),a=r(2855),h=r(511),l=r(5099),u=r(2277),c=r(8397),d=r(5313),p=r(8377),f=r(8013),m=r(4220),g=r(48),_=r(7816),b=r(331),x=r(2915),v=r(7361),y=r(5277),C=r(1757);const T=[...h.i,_.z,p.q,c.q,u.h,C._,b.E,d.r,v.e,x.S,m.X,y.u,g.P,f.U],S=[...h.f],w=[o.t,s.S,i.k],A=[],M=[],E=[];n.XO.handleByNamedList(n.Ag.WebGLSystem,A),n.XO.handleByNamedList(n.Ag.WebGLPipes,M),n.XO.handleByNamedList(n.Ag.WebGLPipesAdaptor,E),n.XO.add(...T,...S,...w);class L extends a.k{constructor(){super({name:"webgl",type:l.W.WEBGL,systems:A,renderPipes:M,renderPipeAdaptors:E})}}},5902:(t,e,r)=>{"use strict";r.d(e,{i:()=>n});class n{constructor(t,e){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}},2277:(t,e,r)=>{"use strict";r.d(e,{h:()=>a});var n=r(8507),i=r(1132),s=r(9202),o=r(5902);class a{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){const t=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=t.MAX_UNIFORM_BUFFER_BINDINGS?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){const{_gl:e}=this,r=this.getGlBuffer(t);e.bindBuffer(r.type,r.buffer)}bindBufferBase(t,e){const{_gl:r}=this;this._boundBufferBases[e]!==t&&(this._boundBufferBases[e]=t,t._lastBindBaseLocation=e,r.bindBufferBase(r.UNIFORM_BUFFER,e,t.buffer))}nextBindBase(t){this._bindCallId++,this._minBaseLocation=0,t&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(t){let e=this.getLastBindBaseLocation(t);if(e>=this._minBaseLocation)return t._lastBindCallId=this._bindCallId,e;let r=0,n=this._nextBindBaseIndex;for(;r<2;){n>=this._maxBindings&&(n=this._minBaseLocation,r++);const t=this._boundBufferBases[n];if(!t||t._lastBindCallId!==this._bindCallId)break;n++}return e=n,this._nextBindBaseIndex=n+1,r>=2?-1:(t._lastBindCallId=this._bindCallId,this._boundBufferBases[e]=null,e)}getLastBindBaseLocation(t){const e=t._lastBindBaseLocation;return this._boundBufferBases[e]===t?e:-1}bindBufferRange(t,e,r,n){const{_gl:i}=this;r||(r=0),e||(e=0),this._boundBufferBases[e]=null,i.bindBufferRange(i.UNIFORM_BUFFER,e||0,t.buffer,256*r,n||256)}updateBuffer(t){const{_gl:e}=this,r=this.getGlBuffer(t);if(t._updateID===r.updateID)return r;r.updateID=t._updateID,e.bindBuffer(r.type,r.buffer);const n=t.data,s=t.descriptor.usage&i.S.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;return n?r.byteLength>=n.byteLength?e.bufferSubData(r.type,0,n,0,t._updateSize/n.BYTES_PER_ELEMENT):(r.byteLength=n.byteLength,e.bufferData(r.type,n,s)):(r.byteLength=t.descriptor.size,e.bufferData(r.type,r.byteLength,s)),r}destroyAll(){const t=this._gl;for(const e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){const r=this._gpuBuffers[t.uid],n=this._gl;e||n.deleteBuffer(r.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){const{_gl:e}=this;let r=s.y.ARRAY_BUFFER;t.descriptor.usage&i.S.INDEX?r=s.y.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&i.S.UNIFORM&&(r=s.y.UNIFORM_BUFFER);const n=new o.i(e.createBuffer(),r);return this._gpuBuffers[t.uid]=n,t.on("destroy",this.onBufferDestroy,this),n}resetState(){this._boundBufferBases=Object.create(null)}}a.extension={type:[n.Ag.WebGLSystem],name:"buffer"}},9202:(t,e,r)=>{"use strict";r.d(e,{y:()=>n});var n=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(n||{})},1257:(t,e,r)=>{"use strict";r.d(e,{u:()=>n});var n=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(n||{})},8397:(t,e,r)=>{"use strict";r.d(e,{q:()=>a});var n=r(3751),i=r(8507),s=r(268);const o=class t{constructor(t){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=t,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this._renderer.gl=t}init(e){e={...t.defaultOptions,...e};let r=this.multiView=e.multiView;if(e.context&&r&&((0,s.R)("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),r=!1),this.canvas=r?n.e.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const t=this._renderer.background.alpha<1,r=e.premultipliedAlpha??!0,n=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:t,premultipliedAlpha:r,antialias:n,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(t){if(!this.multiView)return void(t!==this.canvas&&(0,s.R)("multiView is disabled, but targetCanvas is not the main canvas"));const{canvas:e}=this;(e.width<t.width||e.height<t.height)&&(e.width=Math.max(t.width,t.width),e.height=Math.max(t.height,t.height))}initFromContext(t){this.gl=t,this.webGLVersion=t instanceof n.e.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(t),this._renderer.runners.contextChange.emit(t);const e=this._renderer.view.canvas;e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(t,e){let r;const n=this.canvas;if(2===t&&(r=n.getContext("webgl2",e)),!r&&(r=n.getContext("webgl",e),!r))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=r,this.initFromContext(this.gl)}getExtensions(){const{gl:t}=this,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc"),rgtc:t.getExtension("EXT_texture_compression_rgtc"),loseContext:t.getExtension("WEBGL_lose_context")};if(1===this.webGLVersion)this.extensions={...e,drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:t.getExtension("ANGLE_instanced_arrays"),srgb:t.getExtension("EXT_sRGB")};else{this.extensions={...e,colorBufferFloat:t.getExtension("EXT_color_buffer_float")};const r=t.getExtension("WEBGL_provoking_vertex");r&&r.provokingVertexWEBGL(r.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(t){t.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()}),0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(t){const e=t.getContextAttributes();e&&!e.stencil&&(0,s.R)("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=this.supports,n=2===this.webGLVersion,i=this.extensions;r.uint32Indices=n||!!i.uint32ElementIndex,r.uniformBufferObject=n,r.vertexArrayObject=n||!!i.vertexArrayObject,r.srgbTextures=n||!!i.srgb,r.nonPowOf2wrapping=n,r.nonPowOf2mipmaps=n,r.msaa=n,r.uint32Indices||(0,s.R)("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};o.extension={type:[i.Ag.WebGLSystem],name:"context"},o.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let a=o},5313:(t,e,r)=>{"use strict";r.d(e,{r:()=>h});var n=r(8507),i=r(8306),s=r(7084),o=r(643);const a={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class h{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t));const r=this._renderer.context.extensions.vertexAttribDivisorANGLE;r&&(t.drawArraysInstanced=(t,e,n,i)=>{r.drawArraysInstancedANGLE(t,e,n,i)},t.drawElementsInstanced=(t,e,n,i,s)=>{r.drawElementsInstancedANGLE(t,e,n,i,s)},t.vertexAttribDivisor=(t,e)=>r.vertexAttribDivisorANGLE(t,e)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){const r=this.gl;this._activeGeometry=t;const n=this.getVao(t,e);this._activeVao!==n&&(this._activeVao=n,r.bindVertexArray(n)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this._renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];e.updateBuffer(n)}}checkCompatibility(t,e){const r=t.attributes,n=e._attributeData;for(const t in n)if(!r[t])throw new Error(`shader and geometry incompatible, geometry missing the "${t}" attribute`)}getSignature(t,e){const r=t.attributes,n=e._attributeData,i=["g",t.uid];for(const t in r)n[t]&&i.push(t,n[t].location);return i.join("-")}getVao(t,e){return this._geometryVaoHash[t.uid]?.[e._key]||this.initGeometryVao(t,e)}initGeometryVao(t,e,r=!0){const n=this._renderer.gl,i=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);const o=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));const a=this._geometryVaoHash[t.uid];let h=a[o];if(h)return a[e._key]=h,h;(0,s.q)(t,e._attributeData);const l=t.buffers;h=n.createVertexArray(),n.bindVertexArray(h);for(let t=0;t<l.length;t++){const e=l[t];i.bind(e)}return this.activateVao(t,e),a[e._key]=h,a[o]=h,n.bindVertexArray(null),h}onGeometryDestroy(t,e){const r=this._geometryVaoHash[t.uid],n=this.gl;if(r){if(e)for(const t in r)this._activeVao!==r[t]&&this.unbind(),n.deleteVertexArray(r[t]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){const e=this.gl;for(const r in this._geometryVaoHash){if(t)for(const t in this._geometryVaoHash[r]){const n=this._geometryVaoHash[r];this._activeVao!==n&&this.unbind(),e.deleteVertexArray(n[t])}this._geometryVaoHash[r]=null}}activateVao(t,e){const r=this._renderer.gl,n=this._renderer.buffer,s=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let a=null;for(const t in s){const h=s[t],l=h.buffer,u=n.getGlBuffer(l),c=e._attributeData[t];if(c){a!==u&&(n.bind(l),a=u);const t=c.location;r.enableVertexAttribArray(t);const e=(0,i.m)(h.format),s=(0,o.L)(h.format);if("int"===c.format?.substring(1,4)?r.vertexAttribIPointer(t,e.size,s,h.stride,h.offset):r.vertexAttribPointer(t,e.size,s,e.normalised,h.stride,h.offset),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");{const e=h.divisor??1;r.vertexAttribDivisor(t,e)}}}}}draw(t,e,r,n){const{gl:i}=this._renderer,s=this._activeGeometry,o=a[t||s.topology];if(n??(n=s.instanceCount),s.indexBuffer){const t=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===t?i.UNSIGNED_SHORT:i.UNSIGNED_INT;n>1?i.drawElementsInstanced(o,e||s.indexBuffer.data.length,a,(r||0)*t,n):i.drawElements(o,e||s.indexBuffer.data.length,a,(r||0)*t)}else n>1?i.drawArraysInstanced(o,r||0,e||s.getSize(),n):i.drawArrays(o,r||0,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}h.extension={type:[n.Ag.WebGLSystem],name:"geometry"}},643:(t,e,r)=>{"use strict";r.d(e,{L:()=>s});var n=r(2669);const i={uint8x2:n.Yr.UNSIGNED_BYTE,uint8x4:n.Yr.UNSIGNED_BYTE,sint8x2:n.Yr.BYTE,sint8x4:n.Yr.BYTE,unorm8x2:n.Yr.UNSIGNED_BYTE,unorm8x4:n.Yr.UNSIGNED_BYTE,snorm8x2:n.Yr.BYTE,snorm8x4:n.Yr.BYTE,uint16x2:n.Yr.UNSIGNED_SHORT,uint16x4:n.Yr.UNSIGNED_SHORT,sint16x2:n.Yr.SHORT,sint16x4:n.Yr.SHORT,unorm16x2:n.Yr.UNSIGNED_SHORT,unorm16x4:n.Yr.UNSIGNED_SHORT,snorm16x2:n.Yr.SHORT,snorm16x4:n.Yr.SHORT,float16x2:n.Yr.HALF_FLOAT,float16x4:n.Yr.HALF_FLOAT,float32:n.Yr.FLOAT,float32x2:n.Yr.FLOAT,float32x3:n.Yr.FLOAT,float32x4:n.Yr.FLOAT,uint32:n.Yr.UNSIGNED_INT,uint32x2:n.Yr.UNSIGNED_INT,uint32x3:n.Yr.UNSIGNED_INT,uint32x4:n.Yr.UNSIGNED_INT,sint32:n.Yr.INT,sint32x2:n.Yr.INT,sint32x3:n.Yr.INT,sint32x4:n.Yr.INT};function s(t){return i[t]??i.float32}},1731:(t,e,r)=>{"use strict";r.d(e,{q:()=>h});var n=r(9252),i=r(268),s=r(4884),o=r(1257),a=r(6550);class h{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new n.M}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new n.M}copyToTexture(t,e,r,n,i){const s=this._renderTargetSystem,o=this._renderer,a=s.getGpuRenderTarget(t),h=o.gl;return this.finishRenderPass(t),h.bindFramebuffer(h.FRAMEBUFFER,a.resolveTargetFramebuffer),o.texture.bind(e,0),h.copyTexSubImage2D(h.TEXTURE_2D,0,i.x,i.y,r.x,r.y,n.width,n.height),e}startRenderPass(t,e=!0,r,n){const i=this._renderTargetSystem,s=t.colorTexture,o=i.getGpuRenderTarget(t);let a=n.y;t.isRoot&&(a=s.pixelHeight-n.height),t.colorTextures.forEach((t=>{this._renderer.texture.unbind(t)}));const h=this._renderer.gl;h.bindFramebuffer(h.FRAMEBUFFER,o.framebuffer);const l=this._viewPortCache;l.x===n.x&&l.y===a&&l.width===n.width&&l.height===n.height||(l.x=n.x,l.y=a,l.width=n.width,l.height=n.height,h.viewport(n.x,a,n.width,n.height)),o.depthStencilRenderBuffer||!t.stencil&&!t.depth||this._initStencil(o),this.clear(t,e,r)}finishRenderPass(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);if(!e.msaa)return;const r=this._renderer.gl;r.bindFramebuffer(r.FRAMEBUFFER,e.resolveTargetFramebuffer),r.bindFramebuffer(r.READ_FRAMEBUFFER,e.framebuffer),r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,r.COLOR_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffer)}initGpuRenderTarget(t){const e=this._renderer,r=e.gl,n=new a.N;return t.colorTexture.resource===e.canvas?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),n.framebuffer=null,n):(this._initColor(t,n),r.bindFramebuffer(r.FRAMEBUFFER,null),n)}destroyGpuRenderTarget(t){const e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach((t=>{e.deleteRenderbuffer(t)})),t.msaaRenderBuffer=null}clear(t,e,r){if(!e)return;const n=this._renderTargetSystem;"boolean"==typeof e&&(e=e?o.u.ALL:o.u.NONE);const i=this._renderer.gl;if(e&o.u.COLOR){r??(r=n.defaultClearColor);const t=this._clearColorCache,e=r;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],i.clearColor(e[0],e[1],e[2],e[3]))}i.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;const e=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,e),(t.stencil||t.depth)&&this._resizeStencil(e)}_initColor(t,e){const r=this._renderer,n=r.gl,s=n.createFramebuffer();if(e.resolveTargetFramebuffer=s,n.bindFramebuffer(n.FRAMEBUFFER,s),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach(((t,s)=>{const o=t.source;o.antialias&&(r.context.supports.msaa?e.msaa=!0:(0,i.R)("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),r.texture.bindSource(o,0);const a=r.texture.getGlSource(o).texture;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,3553,a,0)})),e.msaa){const r=n.createFramebuffer();e.framebuffer=r,n.bindFramebuffer(n.FRAMEBUFFER,r),t.colorTextures.forEach(((t,r)=>{const i=n.createRenderbuffer();e.msaaRenderBuffer[r]=i}))}else e.framebuffer=s;this._resizeColor(t,e)}_resizeColor(t,e){const r=t.colorTexture.source;if(e.width=r.pixelWidth,e.height=r.pixelHeight,t.colorTextures.forEach(((t,e)=>{0!==e&&t.source.resize(r.width,r.height,r._resolution)})),e.msaa){const r=this._renderer,n=r.gl,i=e.framebuffer;n.bindFramebuffer(n.FRAMEBUFFER,i),t.colorTextures.forEach(((t,i)=>{const s=t.source;r.texture.bindSource(s,0);const o=r.texture.getGlSource(s).internalFormat,a=e.msaaRenderBuffer[i];n.bindRenderbuffer(n.RENDERBUFFER,a),n.renderbufferStorageMultisample(n.RENDERBUFFER,4,o,s.pixelWidth,s.pixelHeight),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+i,n.RENDERBUFFER,a)}))}}_initStencil(t){if(null===t.framebuffer)return;const e=this._renderer.gl,r=e.createRenderbuffer();t.depthStencilRenderBuffer=r,e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r),this._resizeStencil(t)}_resizeStencil(t){const e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,2===this._renderer.context.webGLVersion?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}prerender(t){const e=t.colorTexture.resource;this._renderer.context.multiView&&s.q.test(e)&&this._renderer.context.ensureCanvasSize(e)}postrender(t){if(this._renderer.context.multiView&&s.q.test(t.colorTexture.resource)){const e=this._renderer.context.canvas,r=t.colorTexture;r.context2D.drawImage(e,0,r.pixelHeight-e.height)}}}},331:(t,e,r)=>{"use strict";r.d(e,{E:()=>o});var n=r(8507),i=r(3032),s=r(1731);class o extends i.l{constructor(t){super(t),this.adaptor=new s.q,this.adaptor.init(t,this)}}o.extension={type:[n.Ag.WebGLSystem],name:"renderTarget"}},4998:(t,e,r)=>{"use strict";r.d(e,{$:()=>o});var n=r(581),i=r(9921),s=r(583);function o(t,e){const r=[],o=["\n        var g = s.groups;\n        var sS = r.shader;\n        var p = s.glProgram;\n        var ugS = r.uniformGroup;\n        var resources;\n    "];let a=!1,h=0;const l=e._getProgramData(t.glProgram);for(const u in t.groups){const c=t.groups[u];r.push(`\n            resources = g[${u}].resources;\n        `);for(const d in c.resources){const p=c.resources[d];if(p instanceof i.k)if(p.ubo){const e=t._uniformBindMap[u][Number(d)];r.push(`\n                        sS.bindUniformBlock(\n                            resources[${d}],\n                            '${e}',\n                            ${t.glProgram._uniformBlockData[e].index}\n                        );\n                    `)}else r.push(`\n                        ugS.updateUniformGroup(resources[${d}], p, sD);\n                    `);else if(p instanceof n.d){const e=t._uniformBindMap[u][Number(d)];r.push(`\n                    sS.bindUniformBlock(\n                        resources[${d}],\n                        '${e}',\n                        ${t.glProgram._uniformBlockData[e].index}\n                    );\n                `)}else if(p instanceof s.v){const n=t._uniformBindMap[u][d],i=l.uniformData[n];i&&(a||(a=!0,o.push("\n                        var tS = r.texture;\n                        ")),e._gl.uniform1i(i.location,h),r.push(`\n                        tS.bind(resources[${d}], ${h});\n                    `),h++)}}}const u=[...o,...r].join("\n");return new Function("r","s","sD",u)}},9657:(t,e,r)=>{"use strict";r.d(e,{M:()=>d});var n=r(7952),i=r(7489),s=r(6735),o=r(2496),a=r(2395),h=r(4907);const l={stripVersion:r(8528).h,ensurePrecision:o.V,addProgramDefines:s.U,setProgramName:h.k,insertVersion:a.W},u=Object.create(null),c=class t{constructor(e){const r=-1!==(e={...t.defaultOptions,...e}).fragment.indexOf("#version 300 es"),s={stripVersion:r,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:(0,i.$)()},setProgramName:{name:e.name},addProgramDefines:r,insertVersion:r};let o=e.fragment,a=e.vertex;Object.keys(l).forEach((t=>{const e=s[t];o=l[t](o,e,!0),a=l[t](a,e,!1)})),this.fragment=o,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=(0,n.X)(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const r=`${e.vertex}:${e.fragment}`;return u[r]||(u[r]=new t(e)),u[r]}};c.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let d=c},4905:(t,e,r)=>{"use strict";r.d(e,{W:()=>i,n:()=>n});class n{}class i{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}},2915:(t,e,r)=>{"use strict";r.d(e,{S:()=>h});var n=r(8507),i=r(9271),s=r(4998),o=r(1180);const a={textureCount:0,blockIndex:0};class h{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=(0,i.a)()}bind(t,e){if(this._setProgram(t.glProgram),e)return;a.textureCount=0,a.blockIndex=0;let r=this._shaderSyncFunctions[t.glProgram._key];r||(r=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),this._renderer.buffer.nextBindBase(!!t.glProgram.transformFeedbackVaryings),r(this._renderer,t,a)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,a)}bindUniformBlock(t,e,r=0){const n=this._renderer.buffer,i=this._getProgramData(this._activeProgram),s=t._bufferResource;s||this._renderer.ubo.updateUniformGroup(t);const o=t.buffer,a=n.updateBuffer(o),h=n.freeLocationForBufferBase(a);if(s){const{offset:e,size:r}=t;0===e&&r===o.data.byteLength?n.bindBufferBase(a,h):n.bindBufferRange(a,h,e)}else n.getLastBindBaseLocation(a)!==h&&n.bindBufferBase(a,h);const l=this._activeProgram._uniformBlockData[e].index;i.uniformBlockBindings[r]!==h&&(i.uniformBlockBindings[r]=h,this._renderer.gl.uniformBlockBinding(i.program,l,h))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;const e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){const e=t._key;return this._programDataHash[e]=(0,o.C)(this._gl,t),this._programDataHash[e]}destroy(){for(const t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null}_generateShaderSync(t,e){return(0,s.$)(t,e)}resetState(){this._activeProgram=null}}h.extension={type:[n.Ag.WebGLSystem],name:"shader"}},7361:(t,e,r)=>{"use strict";r.d(e,{e:()=>s});var n=r(8507),i=r(2712);class s{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,r){const n=this._renderer.shader._getProgramData(e);t.isStatic&&t._dirtyId===n.uniformDirtyGroups[t.uid]||(n.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(n.uniformData,t.uniforms,this._renderer,r))}_getUniformSyncFunction(t,e){return this._uniformGroupSyncHash[t._signature]?.[e._key]||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){const r=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),n=this._getSignature(t,e._uniformData,"u");return this._cache[n]||(this._cache[n]=this._generateUniformsSync(t,e._uniformData)),r[e._key]=this._cache[n],r[e._key]}_generateUniformsSync(t,e){return(0,i.U)(t,e)}_getSignature(t,e,r){const n=t.uniforms,i=[`${r}-`];for(const t in n)i.push(t),e[t]&&i.push(e[t].type);return i.join("-")}destroy(){this._renderer=null,this._cache=null}}s.extension={type:[n.Ag.WebGLSystem],name:"uniformGroup"}},6040:(t,e,r)=>{"use strict";r.d(e,{n:()=>s});var n=r(9921);const i={};function s(t){let e=i[t];if(e)return e;const r=new Int32Array(t);for(let e=0;e<t;e++)r[e]=e;return e=i[t]=new n.k({uTextures:{value:r,type:"i32",size:t}},{isStatic:!0}),e}},7031:(t,e,r)=>{"use strict";function n(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}r.d(e,{R:()=>n})},8535:(t,e,r)=>{"use strict";function n(t){const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=!1;return e}function i(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}r.d(e,{J:()=>i})},7084:(t,e,r)=>{"use strict";r.d(e,{q:()=>s});var n=r(268),i=r(8306);function s(t,e){for(const r in t.attributes){const i=t.attributes[r],s=e[r];s?(i.format??(i.format=s.format),i.offset??(i.offset=s.offset),i.instance??(i.instance=s.instance)):(0,n.R)(`Attribute ${r} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}!function(t){const{buffers:e,attributes:r}=t,n={},s={};for(const t in e){const r=e[t];n[r.uid]=0,s[r.uid]=0}for(const t in r){const e=r[t];n[e.buffer.uid]+=(0,i.m)(e.format).stride}for(const t in r){const e=r[t];e.stride??(e.stride=n[e.buffer.uid]),e.start??(e.start=s[e.buffer.uid]),s[e.buffer.uid]+=(0,i.m)(e.format).stride}}(t)}},3258:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var n=r(8306),i=r(1145);function s(t,e,r=!1){const s={},o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<o;r++){const o=e.getActiveAttrib(t,r);if(o.name.startsWith("gl_"))continue;const a=(0,i.E)(e,o.type);s[o.name]={location:0,format:a,stride:(0,n.m)(a).stride,offset:0,instance:!1,start:0}}const a=Object.keys(s);if(r){a.sort(((t,e)=>t>e?1:-1));for(let r=0;r<a.length;r++)s[a[r]].location=r,e.bindAttribLocation(t,r,a[r]);e.linkProgram(t)}else for(let r=0;r<a.length;r++)s[a[r]].location=e.getAttribLocation(t,a[r]);return s}},1180:(t,e,r)=>{"use strict";r.d(e,{C:()=>c});var n=r(268),i=r(4905),s=r(7031),o=r(8535),a=r(3258),h=r(7217),l=r(4289),u=r(4231);function c(t,e){const r=(0,s.R)(t,t.VERTEX_SHADER,e.vertex),c=(0,s.R)(t,t.FRAGMENT_SHADER,e.fragment),d=t.createProgram();t.attachShader(d,r),t.attachShader(d,c);const p=e.transformFeedbackVaryings;p&&("function"!=typeof t.transformFeedbackVaryings?(0,n.R)("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(d,p.names,"separate"===p.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(d),t.getProgramParameter(d,t.LINK_STATUS)||(0,u.$)(t,d,r,c),e._attributeData=(0,a.A)(d,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=(0,l.L)(d,t),e._uniformBlockData=(0,h.X)(d,t),t.deleteShader(r),t.deleteShader(c);const f={};for(const r in e._uniformData){const n=e._uniformData[r];f[r]={location:t.getUniformLocation(d,r),value:(0,o.J)(n.type,n.size)}}return new i.W(d,f)}},7489:(t,e,r)=>{"use strict";r.d(e,{$:()=>s});var n=r(3804);let i;function s(){if(!i){i="mediump";const t=(0,n.W)();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);i=e.precision?"highp":"mediump"}}return i}},3804:(t,e,r)=>{"use strict";r.d(e,{W:()=>s});var n=r(3751);let i;function s(){if(!i||i?.isContextLost()){const t=n.e.get().createCanvas();i=t.getContext("webgl",{})}return i}},7217:(t,e,r)=>{"use strict";function n(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let i=0;i<n;i++){const n=e.getActiveUniformBlockName(t,i),s=e.getUniformBlockIndex(t,n),o=e.getActiveUniformBlockParameter(t,i,e.UNIFORM_BLOCK_DATA_SIZE);r[n]={name:n,index:s,size:o}}return r}r.d(e,{X:()=>n})},4289:(t,e,r)=>{"use strict";r.d(e,{L:()=>s});var n=r(8535),i=r(1145);function s(t,e){const r={},s=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<s;o++){const s=e.getActiveUniform(t,o),a=s.name.replace(/\[.*?\]$/,""),h=!!s.name.match(/\[.*?\]$/),l=(0,i.H)(e,s.type);r[a]={name:a,index:o,type:l,size:s.size,isArray:h,value:(0,n.J)(l,s.size)}}return r}},4231:(t,e,r)=>{"use strict";function n(t,e){const r=t.getShaderSource(e).split("\n").map(((t,e)=>`${e}: ${t}`)),n=t.getShaderInfoLog(e).split("\n"),i={},s=n.map((t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((t=>!(!t||i[t]||(i[t]=!0,0)))),o=[""];s.forEach((t=>{r[t-1]=`%c${r[t-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const a=r.join("\n");o[0]=a}function i(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||n(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||n(t,i),t.getProgramInfoLog(e))}r.d(e,{$:()=>i})},1145:(t,e,r)=>{"use strict";r.d(e,{E:()=>a,H:()=>o});let n=null;const i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},s={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function o(t,e){if(!n){const e=Object.keys(i);n={};for(let r=0;r<e.length;++r){const s=e[r];n[t[s]]=i[s]}}return n[e]}function a(t,e){const r=o(t,e);return s[r]||"float32"}},6735:(t,e,r)=>{"use strict";function n(t,e,r){return e?t:r?`\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${t=t.replace("out vec4 finalColor;","")}\n        `:`\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${t}\n        `}r.d(e,{U:()=>n})},2496:(t,e,r)=>{"use strict";function n(t,e,r){const n=r?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if("precision"!==t.substring(0,9)){let i=r?e.requestedFragmentPrecision:e.requestedVertexPrecision;return"highp"===i&&"highp"!==n&&(i="mediump"),`precision ${i} float;\n${t}`}return"highp"!==n&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}r.d(e,{V:()=>n})},2395:(t,e,r)=>{"use strict";function n(t,e){return e?`#version 300 es\n${t}`:t}r.d(e,{W:()=>n})},4907:(t,e,r)=>{"use strict";r.d(e,{k:()=>s});const n={},i={};function s(t,{name:e="pixi-program"},r=!0){e=e.replace(/\s+/g,"-");const s=r?n:i;return s[e+=r?"-fragment":"-vertex"]?(s[e]++,e+=`-${s[e]}`):s[e]=1,-1!==t.indexOf("#define SHADER_NAME")?t:`#define SHADER_NAME ${e}\n${t}`}},8528:(t,e,r)=>{"use strict";function n(t,e){return e?t.replace("#version 300 es",""):t}r.d(e,{h:()=>n})},7718:(t,e,r)=>{"use strict";r.d(e,{K:()=>n,l:()=>i});const n={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function i(t){const e=t.map((t=>({data:t,offset:0,size:0})));let r=0,i=0;for(let t=0;t<e.length;t++){const s=e[t];if(r=n[s.data.type],!r)throw new Error(`Unknown type ${s.data.type}`);s.data.size>1&&(r=Math.max(r,16)*s.data.size);const o=12===r?16:r;s.size=r;const a=i%16;i+=a>0&&16-a<o?(16-a)%16:(r-a%r)%r,s.offset=i,i+=r}return i=16*Math.ceil(i/16),{uboElements:e,size:i}}},3412:(t,e,r)=>{"use strict";r.d(e,{N:()=>o});var n=r(6423),i=r(1266),s=r(8696);function o(t){return(0,n.E)(t,"uboStd40",s.D,i.g)}},8696:(t,e,r)=>{"use strict";r.d(e,{D:()=>i});var n=r(7718);function i(t,e){const r=Math.max(n.K[t.data.type]/16,1),i=t.data.value.length/t.data.size,s=(4-i%4)%4,o=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`\n        v = uv.${t.data.name};\n        offset += ${e};\n\n        arrayOffset = offset;\n\n        t = 0;\n\n        for(var i=0; i < ${t.data.size*r}; i++)\n        {\n            for(var j = 0; j < ${i}; j++)\n            {\n                ${o}[arrayOffset++] = v[t++];\n            }\n            ${0!==s?`arrayOffset += ${s};`:""}\n        }\n    `}},2712:(t,e,r)=>{"use strict";r.d(e,{U:()=>a});var n=r(581),i=r(9921),s=r(8166),o=r(5442);function a(t,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n        var name = null;\n    "];for(const a in t.uniforms){if(!e[a]){t.uniforms[a]instanceof i.k?t.uniforms[a].ubo?r.push(`\n                        renderer.shader.bindUniformBlock(uv.${a}, "${a}");\n                    `):r.push(`\n                        renderer.shader.updateUniformGroup(uv.${a});\n                    `):t.uniforms[a]instanceof n.d&&r.push(`\n                        renderer.shader.bindBufferResource(uv.${a}, "${a}");\n                    `);continue}const h=t.uniformStructures[a];let l=!1;for(let t=0;t<s.$.length;t++){const e=s.$[t];if(h.type===e.type&&e.test(h)){r.push(`name = "${a}";`,s.$[t].uniform),l=!0;break}}if(!l){const t=(1===h.size?o.v:o.e)[h.type].replace("location",`ud["${a}"].location`);r.push(`\n            cu = ud["${a}"];\n            cv = cu.value;\n            v = uv["${a}"];\n            ${t};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}},5442:(t,e,r)=>{"use strict";r.d(e,{e:()=>i,v:()=>n});const n={f32:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1f(location, v);\n        }","vec2<f32>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2f(location, v[0], v[1]);\n        }","vec3<f32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3f(location, v[0], v[1], v[2]);\n        }","vec4<f32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n        }",i32:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }","vec2<i32>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }","vec3<i32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }","vec4<i32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }",u32:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1ui(location, v);\n        }","vec2<u32>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2ui(location, v[0], v[1]);\n        }","vec3<u32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3ui(location, v[0], v[1], v[2]);\n        }","vec4<u32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n        }",bool:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }","vec2<bool>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }","vec3<bool>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }","vec4<bool>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},i={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}},5277:(t,e,r)=>{"use strict";r.d(e,{u:()=>a});var n=r(8507),i=r(7547),s=r(8891);const o=class t{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=i.U.for2d()}contextChange(t){this.gl=t,this.blendModesMap=(0,s.Y)(t),this.resetState()}set(t){if(t||(t=this.defaultState),this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t||(t=this.defaultState);for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(e){this._updateCheck(t._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(t._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(this.blendModesMap[t]||(t="normal"),t===this.blendMode)return;this.blendMode=t;const e=this.blendModesMap[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(t,e){const r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)}static _checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static _checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};o.extension={type:[n.Ag.WebGLSystem],name:"state"};let a=o},8891:(t,e,r)=>{"use strict";r.d(e,{Y:()=>i});var n=r(3751);function i(t){const e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],t instanceof n.e.get().getWebGLRenderingContext()){const r=t.getExtension("EXT_blend_minmax");r&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,r.MIN_EXT,r.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,r.MAX_EXT,r.MAX_EXT])}else e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];return e}},7270:(t,e,r)=>{"use strict";r.d(e,{P:()=>i});var n=r(2669);class i{constructor(t){this.target=n.FT.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=n.Yr.UNSIGNED_BYTE,this.internalFormat=n.bH.RGBA,this.format=n.bH.RGBA,this.samplerType=0}}},1757:(t,e,r)=>{"use strict";r.d(e,{_:()=>m});var n=r(3751),i=r(8507),s=r(4503),o=r(7270),a=r(5163),h=r(8018),l=r(7061),u=r(5359),c=r(5569),d=r(8390),p=r(9454),f=r(5539);class m{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:l.a,buffer:a.e,video:u._,compressed:h.B},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=(0,p.Y)(t,this._renderer.context.extensions),this._mapFormatToType=(0,f.o)(t),this._mapFormatToFormat=(0,d.R)(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(s.g.EMPTY,t)}initSource(t){this.bind(t)}bind(t,e=0){const r=t.source;t?(this.bindSource(r,e),this._useSeparateSamplers&&this._bindSampler(r.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){const r=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t||(t=s.g.EMPTY.source);const n=this.getGlSource(t);r.bindTexture(n.target,n.texture)}}_bindSampler(t,e=0){const r=this._gl;if(!t)return this._boundSamplers[e]=null,void r.bindSampler(e,null);const n=this._getGlSampler(t);this._boundSamplers[e]!==n&&(this._boundSamplers[e]=n,r.bindSampler(e,n))}unbind(t){const e=t.source,r=this._boundTextures,n=this._gl;for(let t=0;t<r.length;t++)if(r[t]===e){this._activateLocation(t);const i=this.getGlSource(e);n.bindTexture(i.target,null),r[t]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){const e=this._gl,r=new o.P(e.createTexture());if(r.type=this._mapFormatToType[t.format],r.internalFormat=this._mapFormatToInternalFormat[t.format],r.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){const e=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(e))+1}return this._glTextures[t.uid]=r,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),r}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){const r=this._gl,n=this.getGlSource(t);r.bindTexture(r.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=t,(0,c.m)(t.style,r,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",r.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){const e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){const e=this._gl,r=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=t;const n="premultiply-alpha-on-upload"===t.alphaMode;this._premultiplyAlpha!==n&&(this._premultiplyAlpha=n,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n)),this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,r,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);const r=this.getGlSource(t);this._gl.generateMipmap(r.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){const e=this._gl,r=this._gl.createSampler();return this._glSamplers[t._resourceId]=r,(0,c.m)(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",r,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){const{pixels:e,width:r,height:i}=this.getPixels(t),s=n.e.get().createCanvas();s.width=r,s.height=i;const o=s.getContext("2d");if(o){const t=o.createImageData(r,i);t.data.set(e),o.putImageData(t,0,0)}return s}getPixels(t){const e=t.source.resolution,r=t.frame,n=Math.max(Math.round(r.width*e),1),i=Math.max(Math.round(r.height*e),1),s=new Uint8Array(4*n*i),o=this._renderer,a=o.renderTarget.getRenderTarget(t),h=o.renderTarget.getGpuRenderTarget(a),l=o.gl;return l.bindFramebuffer(l.FRAMEBUFFER,h.resolveTargetFramebuffer),l.readPixels(Math.round(r.x*e),Math.round(r.y*e),n,i,l.RGBA,l.UNSIGNED_BYTE,s),{pixels:new Uint8ClampedArray(s.buffer),width:n,height:i}}destroy(){this.managedTextures.slice().forEach((t=>this.onSourceDestroy(t))),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(s.g.EMPTY.source),this._boundSamplers=Object.create(null)}}m.extension={type:[i.Ag.WebGLSystem],name:"texture"}},2669:(t,e,r)=>{"use strict";r.d(e,{FT:()=>i,I7:()=>s,Yr:()=>o,bH:()=>n});var n=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(n||{}),i=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(i||{}),s=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(s||{}),o=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(o||{})},5163:(t,e,r)=>{"use strict";r.d(e,{e:()=>n});const n={id:"buffer",upload(t,e,r){e.width===t.width||e.height===t.height?r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):r.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}}},8018:(t,e,r)=>{"use strict";r.d(e,{B:()=>i});const n={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},i={id:"compressed",upload(t,e,r){r.pixelStorei(r.UNPACK_ALIGNMENT,4);let i=t.pixelWidth,s=t.pixelHeight;const o=!!n[t.format];for(let n=0;n<t.resource.length;n++){const a=t.resource[n];o?r.compressedTexImage2D(r.TEXTURE_2D,n,e.internalFormat,i,s,0,a):r.texImage2D(r.TEXTURE_2D,n,e.internalFormat,i,s,0,e.format,e.type,a),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}}},7061:(t,e,r)=>{"use strict";r.d(e,{a:()=>n});const n={id:"image",upload(t,e,r,n){const i=e.width,s=e.height,o=t.pixelWidth,a=t.pixelHeight,h=t.resourceWidth,l=t.resourceHeight;h<o||l<a?(i===o&&s===a||r.texImage2D(e.target,0,e.internalFormat,o,a,0,e.format,e.type,null),2===n?r.texSubImage2D(r.TEXTURE_2D,0,0,0,h,l,e.format,e.type,t.resource):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):i===o||s===a?r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):2===n?r.texImage2D(e.target,0,e.internalFormat,o,a,0,e.format,e.type,t.resource):r.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=o,e.height=a}}},5359:(t,e,r)=>{"use strict";r.d(e,{_:()=>i});var n=r(7061);const i={id:"video",upload(t,e,r,i){t.isValid?n.a.upload(t,e,r,i):r.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null)}}},5569:(t,e,r)=>{"use strict";r.d(e,{m:()=>i});var n=r(4281);function i(t,e,r,i,s,o,a,h){const l=o;if(!h||"repeat"!==t.addressModeU||"repeat"!==t.addressModeV||"repeat"!==t.addressModeW){const r=n.AJ[a?"clamp-to-edge":t.addressModeU],i=n.AJ[a?"clamp-to-edge":t.addressModeV],o=n.AJ[a?"clamp-to-edge":t.addressModeW];e[s](l,e.TEXTURE_WRAP_S,r),e[s](l,e.TEXTURE_WRAP_T,i),e.TEXTURE_WRAP_R&&e[s](l,e.TEXTURE_WRAP_R,o)}if(h&&"linear"===t.magFilter||e[s](l,e.TEXTURE_MAG_FILTER,n.wq[t.magFilter]),r){if(!h||"linear"!==t.mipmapFilter){const r=n.yT[t.minFilter][t.mipmapFilter];e[s](l,e.TEXTURE_MIN_FILTER,r)}}else e[s](l,e.TEXTURE_MIN_FILTER,n.wq[t.minFilter]);if(i&&t.maxAnisotropy>1){const r=Math.min(t.maxAnisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[s](l,i.TEXTURE_MAX_ANISOTROPY_EXT,r)}t.compare&&e[s](l,e.TEXTURE_COMPARE_FUNC,n.am[t.compare])}},8390:(t,e,r)=>{"use strict";function n(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}r.d(e,{R:()=>n})},9454:(t,e,r)=>{"use strict";r.d(e,{Y:()=>i});var n=r(3751);function i(t,e){let r={},i=t.RGBA;return t instanceof n.e.get().getWebGLRenderingContext()?e.srgb&&(r={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(r={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},i=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...r,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:i,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}},5539:(t,e,r)=>{"use strict";function n(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}r.d(e,{o:()=>n})},4281:(t,e,r)=>{"use strict";r.d(e,{AJ:()=>s,am:()=>o,wq:()=>n,yT:()=>i});const n={linear:9729,nearest:9728},i={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},s={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},o={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}},8090:(t,e,r)=>{"use strict";r.d(e,{g:()=>i});var n=r(8507);class i{constructor(t){this._hash=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(t){this._gpu=t}getBindGroup(t,e,r){return t._updateKey(),this._hash[t._key]||this._createBindGroup(t,e,r)}_createBindGroup(t,e,r){const n=this._gpu.device,i=e.layout[r],s=[],o=this._renderer;for(const e in i){const r=t.resources[e]??t.resources[i[e]];let n;if("uniformGroup"===r._resourceType){const t=r;o.ubo.updateUniformGroup(t);const e=t.buffer;n={buffer:o.buffer.getGPUBuffer(e),offset:0,size:e.descriptor.size}}else if("buffer"===r._resourceType){const t=r;n={buffer:o.buffer.getGPUBuffer(t),offset:0,size:t.descriptor.size}}else if("bufferResource"===r._resourceType){const t=r;n={buffer:o.buffer.getGPUBuffer(t.buffer),offset:t.offset,size:t.size}}else if("textureSampler"===r._resourceType){const t=r;n=o.texture.getGpuSampler(t)}else if("textureSource"===r._resourceType){const t=r;n=o.texture.getGpuSource(t).createView({})}s.push({binding:i[e],resource:n})}const a=o.shader.getProgramData(e).bindGroups[r],h=n.createBindGroup({layout:a,entries:s});return this._hash[t._key]=h,h}destroy(){for(const t of Object.keys(this._hash))this._hash[t]=null;this._hash=null,this._renderer=null}}i.extension={type:[n.Ag.WebGPUSystem],name:"bindGroup"}},2193:(t,e,r)=>{"use strict";r.d(e,{l:()=>i});var n=r(8507);class i{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.pipeline.setColorMask(t))}destroy(){this._renderer=null,this._colorMaskCache=null}}i.extension={type:[n.Ag.WebGPUSystem],name:"colorMask"}},7004:(t,e,r)=>{"use strict";r.d(e,{O:()=>s});var n=r(3751),i=r(8507);class s{constructor(t){this._renderer=t}async init(t){return this._initPromise||(this._initPromise=this._createDeviceAndAdaptor(t).then((t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}))),this._initPromise}contextChange(t){this._renderer.gpu=t}async _createDeviceAndAdaptor(t){const e=await n.e.get().getNavigator().gpu.requestAdapter({powerPreference:t.powerPreference,forceFallbackAdapter:t.forceFallbackAdapter}),r=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter((t=>e.features.has(t))),i=await e.requestDevice({requiredFeatures:r});return{adapter:e,device:i}}destroy(){this.gpu=null,this._renderer=null}}s.extension={type:[i.Ag.WebGPUSystem],name:"device"},s.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1}},632:(t,e,r)=>{"use strict";r.d(e,{_:()=>i});var n=r(8507);class i{constructor(t){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=t}renderStart(){this.commandFinished=new Promise((t=>{this._resolveCommandFinished=t})),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(t){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(t.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(t){this.renderPassEncoder.setViewport(t.x,t.y,t.width,t.height,0,1)}setPipelineFromGeometryProgramAndState(t,e,r,n){const i=this._renderer.pipeline.getPipeline(t,e,r,n);this.setPipeline(i)}setPipeline(t){this._boundPipeline!==t&&(this._boundPipeline=t,this.renderPassEncoder.setPipeline(t))}_setVertexBuffer(t,e){this._boundVertexBuffer[t]!==e&&(this._boundVertexBuffer[t]=e,this.renderPassEncoder.setVertexBuffer(t,this._renderer.buffer.updateBuffer(e)))}_setIndexBuffer(t){if(this._boundIndexBuffer===t)return;this._boundIndexBuffer=t;const e=2===t.data.BYTES_PER_ELEMENT?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(t),e)}resetBindGroup(t){this._boundBindGroup[t]=null}setBindGroup(t,e,r){if(this._boundBindGroup[t]===e)return;this._boundBindGroup[t]=e,e._touch(this._renderer.textureGC.count);const n=this._renderer.bindGroup.getBindGroup(e,r,t);this.renderPassEncoder.setBindGroup(t,n)}setGeometry(t,e){const r=this._renderer.pipeline.getBufferNamesToBind(t,e);for(const e in r)this._setVertexBuffer(e,t.attributes[r[e]].buffer);t.indexBuffer&&this._setIndexBuffer(t.indexBuffer)}_setShaderBindGroups(t,e){for(const r in t.groups){const n=t.groups[r];e||this._syncBindGroup(n),this.setBindGroup(r,n,t.gpuProgram)}}_syncBindGroup(t){for(const e in t.resources){const r=t.resources[e];r.isUniformGroup&&this._renderer.ubo.updateUniformGroup(r)}}draw(t){const{geometry:e,shader:r,state:n,topology:i,size:s,start:o,instanceCount:a,skipSync:h}=t;this.setPipelineFromGeometryProgramAndState(e,r.gpuProgram,n,i),this.setGeometry(e,r.gpuProgram),this._setShaderBindGroups(r,h),e.indexBuffer?this.renderPassEncoder.drawIndexed(s||e.indexBuffer.data.length,a??e.instanceCount,o||0):this.renderPassEncoder.draw(s||e.getSize(),a??e.instanceCount,o||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const t=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);const e=this._boundPipeline,r={...this._boundVertexBuffer},n=this._boundIndexBuffer,i={...this._boundBindGroup};this._clearCache();const s=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(s.x,s.y,s.width,s.height,0,1),this.setPipeline(e);for(const t in r)this._setVertexBuffer(t,r[t]);for(const t in i)this.setBindGroup(t,i[t],null);this._setIndexBuffer(n)}_clearCache(){for(let t=0;t<16;t++)this._boundBindGroup[t]=null,this._boundVertexBuffer[t]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(t){this._gpu=t}}i.extension={type:[n.Ag.WebGPUSystem],name:"encoder",priority:1}},3652:(t,e,r)=>{"use strict";r.d(e,{k:()=>s});var n=r(8507),i=r(1957);class s{constructor(t){this._renderTargetStencilState=Object.create(null),this._renderer=t,t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:i.K.DISABLED,stencilReference:0}),this._activeRenderTarget=t,this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){const r=this._renderTargetStencilState[this._activeRenderTarget.uid];r.stencilMode=t,r.stencilReference=e;const n=this._renderer;n.pipeline.setStencilMode(t),n.encoder.renderPassEncoder.setStencilReference(e)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}s.extension={type:[n.Ag.WebGPUSystem],name:"stencil"}},3644:(t,e,r)=>{"use strict";r.d(e,{u:()=>a});var n=r(8507),i=r(7047),s=r(3397),o=r(7995);class a extends i.W{constructor(){super({createUboElements:s.V,generateUboSync:o.v})}}a.extension={type:[n.Ag.WebGPUSystem],name:"ubo"}},7185:(t,e,r)=>{"use strict";r.d(e,{T:()=>u});var n=r(8507),i=r(949),s=r(581),o=r(1132),a=r(3862),h=r(3513);const l=128;class u{constructor(t){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new a.Z({minUniformOffsetAlignment:l});for(let t=0;t<2;t++){let e=o.S.UNIFORM|o.S.COPY_DST;0===t&&(e|=o.S.COPY_SRC),this._buffers.push(new i.h({data:this._batchBuffer.data,usage:e}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const t in this._bindGroupHash)this._bindGroupHash[t]=null;this._batchBuffer.clear()}getUniformBindGroup(t,e){if(!e&&this._bindGroupHash[t.uid])return this._bindGroupHash[t.uid];this._renderer.ubo.ensureUniformGroup(t);const r=t.buffer.data,n=this._batchBuffer.addEmptyGroup(r.length);return this._renderer.ubo.syncUniformGroup(t,this._batchBuffer.data,n/4),this._bindGroupHash[t.uid]=this._getBindGroup(n/l),this._bindGroupHash[t.uid]}getUboResource(t){this._renderer.ubo.updateUniformGroup(t);const e=t.buffer.data,r=this._batchBuffer.addGroup(e);return this._getBufferResource(r/l)}getArrayBindGroup(t){const e=this._batchBuffer.addGroup(t);return this._getBindGroup(e/l)}getArrayBufferResource(t){const e=this._batchBuffer.addGroup(t)/l;return this._getBufferResource(e)}_getBufferResource(t){if(!this._bufferResources[t]){const e=this._buffers[t%2];this._bufferResources[t]=new s.d({buffer:e,offset:256*(t/2|0),size:l})}return this._bufferResources[t]}_getBindGroup(t){if(!this._bindGroups[t]){const e=new h.T({0:this._getBufferResource(t)});this._bindGroups[t]=e}return this._bindGroups[t]}_uploadBindGroups(){const t=this._renderer.buffer,e=this._buffers[0];e.update(this._batchBuffer.byteIndex),t.updateBuffer(e);const r=this._renderer.gpu.device.createCommandEncoder();for(let n=1;n<this._buffers.length;n++){const i=this._buffers[n];r.copyBufferToBuffer(t.getGPUBuffer(e),l,t.getGPUBuffer(i),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([r.finish()])}destroy(){for(let t=0;t<this._bindGroups.length;t++)this._bindGroups[t].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let t=0;t<this._buffers.length;t++)this._buffers[t].destroy();this._buffers=null;for(let t=0;t<this._bufferResources.length;t++)this._bufferResources[t].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}u.extension={type:[n.Ag.WebGPUPipes],name:"uniformBatch"}},2196:(t,e,r)=>{"use strict";r.d(e,{WebGPURenderer:()=>L});var n=r(8507),i=r(7858),s=r(2448),o=r(6915),a=r(2855),h=r(511),l=r(5099),u=r(8090),c=r(2021),d=r(2193),p=r(7004),f=r(632),m=r(3652),g=r(3644),_=r(7185),b=r(3163),x=r(2593),v=r(2561),y=r(933),C=r(561);const T=[...h.i,g.u,f._,p.O,c.C,C.P,x.p,v.x,y.$,b.A,d.l,m.k,u.g],S=[...h.f,_.T],w=[o.E,s.F,i.r],A=[],M=[],E=[];n.XO.handleByNamedList(n.Ag.WebGPUSystem,A),n.XO.handleByNamedList(n.Ag.WebGPUPipes,M),n.XO.handleByNamedList(n.Ag.WebGPUPipesAdaptor,E),n.XO.add(...T,...S,...w);class L extends a.k{constructor(){super({name:"webgpu",type:l.W.WEBGPU,systems:A,renderPipes:M,renderPipeAdaptors:E})}}},2021:(t,e,r)=>{"use strict";r.d(e,{C:()=>s});var n=r(8507),i=r(6736);class s{constructor(t){this._gpuBuffers=Object.create(null),this._managedBuffers=[],t.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(t){this._gpu=t}getGPUBuffer(t){return this._gpuBuffers[t.uid]||this.createGPUBuffer(t)}updateBuffer(t){const e=this._gpuBuffers[t.uid]||this.createGPUBuffer(t),r=t.data;return t._updateID&&r&&(t._updateID=0,this._gpu.device.queue.writeBuffer(e,0,r.buffer,0,(t._updateSize||r.byteLength)+3&-4)),e}destroyAll(){for(const t in this._gpuBuffers)this._gpuBuffers[t].destroy();this._gpuBuffers={}}createGPUBuffer(t){this._gpuBuffers[t.uid]||(t.on("update",this.updateBuffer,this),t.on("change",this.onBufferChange,this),t.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(t));const e=this._gpu.device.createBuffer(t.descriptor);return t._updateID=0,t.data&&((0,i.W)(t.data.buffer,e.getMappedRange()),e.unmap()),this._gpuBuffers[t.uid]=e,e}onBufferChange(t){this._gpuBuffers[t.uid].destroy(),t._updateID=0,this._gpuBuffers[t.uid]=this.createGPUBuffer(t)}onBufferDestroy(t){this._managedBuffers.splice(this._managedBuffers.indexOf(t),1),this._destroyBuffer(t)}destroy(){this._managedBuffers.forEach((t=>this._destroyBuffer(t))),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(t){this._gpuBuffers[t.uid].destroy(),t.off("update",this.updateBuffer,this),t.off("change",this.onBufferChange,this),t.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[t.uid]=null}}s.extension={type:[n.Ag.WebGPUSystem],name:"buffer"}},3862:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});class n{constructor({minUniformOffsetAlignment:t}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=t,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(t){if(t>this._minUniformOffsetAlignment/4)throw new Error("UniformBufferBatch: array is too large: "+4*t);const e=this.byteIndex;let r=e+4*t;if(r=Math.ceil(r/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,r>4*this.data.length)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=r,e}addGroup(t){const e=this.addEmptyGroup(t.length);for(let r=0;r<t.length;r++)this.data[e/4+r]=t[r];return e}destroy(){this.data=null}}},3163:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var n=r(8507),i=r(268),s=r(7084),o=r(1957),a=r(7952),h=r(1172);const l={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};class u{constructor(t){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=t}contextChange(t){this._gpu=t,this.setStencilMode(o.K.DISABLED),this._updatePipeHash()}setMultisampleCount(t){this._multisampleCount!==t&&(this._multisampleCount=t,this._updatePipeHash())}setRenderTarget(t){this._multisampleCount=t.msaaSamples,this._depthStencilAttachment=t.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(t){this._colorMask!==t&&(this._colorMask=t,this._updatePipeHash())}setStencilMode(t){this._stencilMode!==t&&(this._stencilMode=t,this._stencilState=h.g[t],this._updatePipeHash())}setPipeline(t,e,r,n){const i=this.getPipeline(t,e,r);n.setPipeline(i)}getPipeline(t,e,r,n){t._layoutKey||((0,s.q)(t,e.attributeData),this._generateBufferKey(t)),n||(n=t.topology);const i=function(t,e,r,n,i){return t<<24|e<<16|r<<10|n<<5|i}(t._layoutKey,e._layoutKey,r.data,r._blendModeId,l[n]);return this._pipeCache[i]||(this._pipeCache[i]=this._createPipeline(t,e,r,n)),this._pipeCache[i]}_createPipeline(t,e,r,n){const i=this._gpu.device,s=this._createVertexBufferLayouts(t,e),a=this._renderer.state.getColorTargets(r);a[0].writeMask=this._stencilMode===o.K.RENDERING_MASK_ADD?0:this._colorMask;const h=this._renderer.shader.getProgramData(e).pipeline,l={vertex:{module:this._getModule(e.vertex.source),entryPoint:e.vertex.entryPoint,buffers:s},fragment:{module:this._getModule(e.fragment.source),entryPoint:e.fragment.entryPoint,targets:a},primitive:{topology:n,cullMode:r.cullMode},layout:h,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(l.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:r.depthTest,depthCompare:r.depthTest?"less":"always"}),i.createRenderPipeline(l)}_getModule(t){return this._moduleCache[t]||this._createModule(t)}_createModule(t){const e=this._gpu.device;return this._moduleCache[t]=e.createShaderModule({code:t}),this._moduleCache[t]}_generateBufferKey(t){const e=[];let r=0;const n=Object.keys(t.attributes).sort();for(let i=0;i<n.length;i++){const s=t.attributes[n[i]];e[r++]=s.offset,e[r++]=s.format,e[r++]=s.stride,e[r++]=s.instance}const i=e.join("|");return t._layoutKey=(0,a.X)(i,"geometry"),t._layoutKey}_generateAttributeLocationsKey(t){const e=[];let r=0;const n=Object.keys(t.attributeData).sort();for(let i=0;i<n.length;i++){const s=t.attributeData[n[i]];e[r++]=s.location}const i=e.join("|");return t._attributeLocationsKey=(0,a.X)(i,"programAttributes"),t._attributeLocationsKey}getBufferNamesToBind(t,e){const r=t._layoutKey<<16|e._attributeLocationsKey;if(this._bindingNamesCache[r])return this._bindingNamesCache[r];const n=this._createVertexBufferLayouts(t,e),i=Object.create(null),s=e.attributeData;for(let t=0;t<n.length;t++){const e=Object.values(n[t].attributes)[0].shaderLocation;for(const r in s)if(s[r].location===e){i[t]=r;break}}return this._bindingNamesCache[r]=i,i}_createVertexBufferLayouts(t,e){e._attributeLocationsKey||this._generateAttributeLocationsKey(e);const r=t._layoutKey<<16|e._attributeLocationsKey;if(this._bufferLayoutsCache[r])return this._bufferLayoutsCache[r];const n=[];return t.buffers.forEach((r=>{const s={arrayStride:0,stepMode:"vertex",attributes:[]},o=s.attributes;for(const n in e.attributeData){const a=t.attributes[n];1!==(a.divisor??1)&&(0,i.R)(`Attribute ${n} has an invalid divisor value of '${a.divisor}'. WebGPU only supports a divisor value of 1`),a.buffer===r&&(s.arrayStride=a.stride,s.stepMode=a.instance?"instance":"vertex",o.push({shaderLocation:e.attributeData[n].location,offset:a.offset,format:a.format}))}o.length&&n.push(s)})),this._bufferLayoutsCache[r]=n,n}_updatePipeHash(){const t=(e=this._stencilMode,r=this._multisampleCount,this._colorMask<<6|e<<3|this._depthStencilAttachment<<1|r);var e,r;this._pipeStateCaches[t]||(this._pipeStateCaches[t]=Object.create(null)),this._pipeCache=this._pipeStateCaches[t]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}u.extension={type:[n.Ag.WebGPUSystem],name:"pipeline"}},7634:(t,e,r)=>{"use strict";r.d(e,{M:()=>n});class n{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}},4541:(t,e,r)=>{"use strict";r.d(e,{$:()=>a});var n=r(1257),i=r(4884),s=r(583),o=r(7634);class a{init(t,e){this._renderer=t,this._renderTargetSystem=e}copyToTexture(t,e,r,n,i){const s=this._renderer,o=this._getGpuColorTexture(t),a=s.texture.getGpuSource(e.source);return s.encoder.commandEncoder.copyTextureToTexture({texture:o,origin:r},{texture:a,origin:i},n),e}startRenderPass(t,e=!0,r,n){const i=this._renderTargetSystem.getGpuRenderTarget(t),s=this.getDescriptor(t,e,r);i.descriptor=s,this._renderer.pipeline.setRenderTarget(i),this._renderer.encoder.beginRenderPass(i),this._renderer.encoder.setViewport(n)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);return e.contexts[0]?e.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(t.colorTextures[0].source)}getDescriptor(t,e,r){"boolean"==typeof e&&(e=e?n.u.ALL:n.u.NONE);const i=this._renderTargetSystem,s=i.getGpuRenderTarget(t),o=t.colorTextures.map(((t,o)=>{const a=s.contexts[o];let h,l;h=a?a.getCurrentTexture().createView():this._renderer.texture.getGpuSource(t).createView({mipLevelCount:1}),s.msaaTextures[o]&&(l=h,h=this._renderer.texture.getTextureView(s.msaaTextures[o]));const u=e&n.u.COLOR?"clear":"load";return r??(r=i.defaultClearColor),{view:h,resolveTarget:l,clearValue:r,storeOp:"store",loadOp:u}}));let a;if(!t.stencil&&!t.depth||t.depthStencilTexture||(t.ensureDepthStencilTexture(),t.depthStencilTexture.source.sampleCount=s.msaa?4:1),t.depthStencilTexture){const r=e&n.u.STENCIL?"clear":"load",i=e&n.u.DEPTH?"clear":"load";a={view:this._renderer.texture.getGpuSource(t.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:r,depthClearValue:1,depthLoadOp:i,depthStoreOp:"store"}}return{colorAttachments:o,depthStencilAttachment:a}}clear(t,e=!0,r,n){if(!e)return;const{gpu:i,encoder:s}=this._renderer,o=i.device;if(null===s.commandEncoder){const i=o.createCommandEncoder(),s=this.getDescriptor(t,e,r),a=i.beginRenderPass(s);a.setViewport(n.x,n.y,n.width,n.height,0,1),a.end();const h=i.finish();o.queue.submit([h])}else this.startRenderPass(t,e,r,n)}initGpuRenderTarget(t){t.isRoot=!0;const e=new o.M;return t.colorTextures.forEach(((t,r)=>{if(i.q.test(t.resource)){const n=t.resource.getContext("webgpu"),i=t.transparent?"premultiplied":"opaque";try{n.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:i})}catch(t){}e.contexts[r]=n}if(e.msaa=t.source.antialias,t.source.antialias){const t=new s.v({width:0,height:0,sampleCount:4});e.msaaTextures[r]=t}})),e.msaa&&(e.msaaSamples=4,t.depthStencilTexture&&(t.depthStencilTexture.source.sampleCount=4)),e}destroyGpuRenderTarget(t){t.contexts.forEach((t=>{t.unconfigure()})),t.msaaTextures.forEach((t=>{t.destroy()})),t.msaaTextures.length=0,t.contexts.length=0}ensureDepthStencilTexture(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);t.depthStencilTexture&&e.msaa&&(t.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);e.width=t.width,e.height=t.height,e.msaa&&t.colorTextures.forEach(((t,r)=>{const n=e.msaaTextures[r];n?.resize(t.source.width,t.source.height,t.source._resolution)}))}}},2593:(t,e,r)=>{"use strict";r.d(e,{p:()=>o});var n=r(8507),i=r(3032),s=r(4541);class o extends i.l{constructor(t){super(t),this.adaptor=new s.$,this.adaptor.init(t,this)}}o.extension={type:[n.Ag.WebGPUSystem],name:"renderTarget"}},7868:(t,e,r)=>{"use strict";function n(t,e,r,n,i,s){const o=s?1:-1;return t.identity(),t.a=1/n*2,t.d=o*(1/i*2),t.tx=-1-e*t.a,t.ty=-o-r*t.d,t}r.d(e,{s:()=>n})},3513:(t,e,r)=>{"use strict";r.d(e,{T:()=>n});class n{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const r in t){const n=t[r];this.setResource(n,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const r in this.resources)t[e++]=this.resources[r]._resourceId;this._key=t.join("|")}setResource(t,e){const r=this.resources[e];t!==r&&(r&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const r in e)e[r]._touched=t}destroy(){const t=this.resources;for(const e in t){const r=t[e];r.off?.("change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const r in e)e[r]===t&&(e[r]=null)}else this._updateKey()}}},1595:(t,e,r)=>{"use strict";r.d(e,{B:()=>u});var n=r(7952),i=r(3015),s=r(5788),o=r(5230),a=r(1088),h=r(1422);const l=Object.create(null);class u{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:r,layout:n,gpuLayout:i,name:l}=t;if(this.name=l,this.fragment=e,this.vertex=r,e.source===r.source){const t=(0,s.G)(e.source);this.structsAndGroups=t}else{const t=(0,s.G)(r.source),n=(0,s.G)(e.source);this.structsAndGroups=(0,h.A)(t,n)}this.layout=n??(0,a.y)(this.structsAndGroups),this.gpuLayout=i??(0,o.W)(this.structsAndGroups),this.autoAssignGlobalUniforms=!(void 0===this.layout[0]?.globalUniforms),this.autoAssignLocalUniforms=!(void 0===this.layout[1]?.localUniforms),this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,r=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=(0,n.X)(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=(0,i.N)(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return l[e]||(l[e]=new u(t)),l[e]}}},2561:(t,e,r)=>{"use strict";r.d(e,{x:()=>i});var n=r(8507);class i{constructor(){this._gpuProgramData=Object.create(null)}contextChange(t){this._gpu=t,this.maxTextures=t.device.limits.maxSampledTexturesPerShaderStage}getProgramData(t){return this._gpuProgramData[t._layoutKey]||this._createGPUProgramData(t)}_createGPUProgramData(t){const e=this._gpu.device,r=t.gpuLayout.map((t=>e.createBindGroupLayout({entries:t}))),n={bindGroupLayouts:r};return this._gpuProgramData[t._layoutKey]={bindGroups:r,pipeline:e.createPipelineLayout(n)},this._gpuProgramData[t._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}i.extension={type:[n.Ag.WebGPUSystem],name:"shader"}},3397:(t,e,r)=>{"use strict";r.d(e,{V:()=>i,f:()=>n});const n={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function i(t){const e=t.map((t=>({data:t,offset:0,size:0})));let r=0;for(let t=0;t<e.length;t++){const i=e[t];let s=n[i.data.type].size;const o=n[i.data.type].align;if(!n[i.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${i.data.type}`);i.data.size>1&&(s=Math.max(s,o)*i.data.size),r=Math.ceil(r/o)*o,i.size=s,i.offset=r,r+=s}return r=16*Math.ceil(r/16),{uboElements:e,size:r}}},7995:(t,e,r)=>{"use strict";r.d(e,{v:()=>o});var n=r(6423),i=r(1266),s=r(1579);function o(t){return(0,n.E)(t,"uboWgsl",s.T,i._)}},3015:(t,e,r)=>{"use strict";r.d(e,{N:()=>s});var n=r(8306);const i={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function s({source:t,entryPoint:e}){const r={},s=t.indexOf(`fn ${e}`);if(-1!==s){const e=t.indexOf("->",s);if(-1!==e){const o=t.substring(s,e),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;null!==(h=a.exec(o));){const t=i[h[3]]??"float32";r[h[2]]={location:parseInt(h[1],10),format:t,stride:(0,n.m)(t).stride,offset:0,instance:!1,start:0}}}}return r}},5788:(t,e,r)=>{"use strict";function n(t){const e=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,n=/var(<[^>]+>)? (\w+)/,i=/:\s*(\w+)/,s=/(\w+)\s*:\s*([\w\<\>]+)/g,o=/struct\s+(\w+)/,a=t.match(/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g)?.map((t=>({group:parseInt(t.match(e)[1],10),binding:parseInt(t.match(r)[1],10),name:t.match(n)[2],isUniform:"<uniform>"===t.match(n)[1],type:t.match(i)[1]})));if(!a)return{groups:[],structs:[]};const h=t.match(/struct\s+(\w+)\s*{([^}]+)}/g)?.map((t=>{const e=t.match(o)[1],r=t.match(s).reduce(((t,e)=>{const[r,n]=e.split(":");return t[r.trim()]=n.trim(),t}),{});return r?{name:e,members:r}:null})).filter((({name:t})=>a.some((e=>e.type===t))))??[];return{groups:a,structs:h}}r.d(e,{G:()=>n})},1579:(t,e,r)=>{"use strict";r.d(e,{T:()=>i});var n=r(3397);function i(t,e){const{size:r,align:i}=n.f[t.data.type],s=(i-r)/4,o=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`\n         v = uv.${t.data.name};\n         ${0!==e?`offset += ${e};`:""}\n\n         arrayOffset = offset;\n\n         t = 0;\n\n         for(var i=0; i < ${t.data.size*(r/4)}; i++)\n         {\n             for(var j = 0; j < ${r/4}; j++)\n             {\n                 ${o}[arrayOffset++] = v[t++];\n             }\n             ${0!==s?`arrayOffset += ${s};`:""}\n         }\n     `}},5230:(t,e,r)=>{"use strict";r.d(e,{W:()=>i});var n=r(8985);function i({groups:t}){const e=[];for(let r=0;r<t.length;r++){const i=t[r];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:n.q.VERTEX|n.q.FRAGMENT,buffer:{type:"uniform"}}):"sampler"===i.type?e[i.group].push({binding:i.binding,visibility:n.q.FRAGMENT,sampler:{type:"filtering"}}):"texture_2d"===i.type&&e[i.group].push({binding:i.binding,visibility:n.q.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}},1088:(t,e,r)=>{"use strict";function n({groups:t}){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}r.d(e,{y:()=>n})},1422:(t,e,r)=>{"use strict";function n(t,e){const r=new Set,n=new Set;return{structs:[...t.structs,...e.structs].filter((t=>!r.has(t.name)&&(r.add(t.name),!0))),groups:[...t.groups,...e.groups].filter((t=>{const e=`${t.name}-${t.binding}`;return!n.has(e)&&(n.add(e),!0)}))}}r.d(e,{A:()=>n})},3627:(t,e,r)=>{"use strict";r.d(e,{X:()=>n});const n={normal:{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},add:{alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},multiply:{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},screen:{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},overlay:{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},none:{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},"normal-npm":{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},"add-npm":{alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},"screen-npm":{alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},erase:{alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},min:{alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},max:{alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}}}},933:(t,e,r)=>{"use strict";r.d(e,{$:()=>o});var n=r(8507),i=r(7547),s=r(3627);class o{constructor(){this.defaultState=new i.U,this.defaultState.blend=!0}contextChange(t){this.gpu=t}getColorTargets(t){return[{format:"bgra8unorm",writeMask:0,blend:s.X[t.blendMode]||s.X.normal}]}destroy(){this.gpu=null}}o.extension={type:[n.Ag.WebGPUSystem],name:"state"}},1172:(t,e,r)=>{"use strict";r.d(e,{g:()=>i});var n=r(1957);const i=[];i[n.K.NONE]=void 0,i[n.K.DISABLED]={stencilWriteMask:0,stencilReadMask:0},i[n.K.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},i[n.K.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},i[n.K.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},i[n.K.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}}},561:(t,e,r)=>{"use strict";r.d(e,{P:()=>p});var n=r(3751),i=r(8507),s=r(9921),o=r(7608),a=r(3513),h=r(9291),l=r(8338),u=r(2946),c=r(1416),d=r(3350);class p{constructor(t){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:u.d,buffer:h.j,video:c.h,compressed:l._},this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuSources"),t.renderableGC.addManagedHash(this,"_gpuSamplers"),t.renderableGC.addManagedHash(this,"_bindGroupHash"),t.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(t){this._gpu=t}initSource(t){if(t.autoGenerateMipmaps){const e=Math.max(t.pixelWidth,t.pixelHeight);t.mipLevelCount=Math.floor(Math.log2(e))+1}let e=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;"compressed"!==t.uploadMethodId&&(e|=GPUTextureUsage.RENDER_ATTACHMENT,e|=GPUTextureUsage.COPY_SRC);const r=l.w[t.format]||{blockBytes:4,blockWidth:1,blockHeight:1},n=Math.ceil(t.pixelWidth/r.blockWidth)*r.blockWidth,i=Math.ceil(t.pixelHeight/r.blockHeight)*r.blockHeight,s={label:t.label,size:{width:n,height:i},format:t.format,sampleCount:t.sampleCount,mipLevelCount:t.mipLevelCount,dimension:t.dimension,usage:e},o=this._gpu.device.createTexture(s);return this._gpuSources[t.uid]=o,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceResize,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),o}onSourceUpdate(t){const e=this.getGpuSource(t);e&&(this._uploads[t.uploadMethodId]&&this._uploads[t.uploadMethodId].upload(t,e,this._gpu),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t))}onSourceUnload(t){const e=this._gpuSources[t.uid];e&&(this._gpuSources[t.uid]=null,e.destroy())}onUpdateMipmaps(t){this._mipmapGenerator||(this._mipmapGenerator=new d.o(this._gpu.device));const e=this.getGpuSource(t);this._mipmapGenerator.generateMipmap(e)}onSourceDestroy(t){t.off("update",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("destroy",this.onSourceDestroy,this),t.off("resize",this.onSourceResize,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}onSourceResize(t){const e=this._gpuSources[t.uid];e?e.width===t.pixelWidth&&e.height===t.pixelHeight||(this._textureViewHash[t.uid]=null,this._bindGroupHash[t.uid]=null,this.onSourceUnload(t),this.initSource(t)):this.initSource(t)}_initSampler(t){return this._gpuSamplers[t._resourceId]=this._gpu.device.createSampler(t),this._gpuSamplers[t._resourceId]}getGpuSampler(t){return this._gpuSamplers[t._resourceId]||this._initSampler(t)}getGpuSource(t){return this._gpuSources[t.uid]||this.initSource(t)}getTextureBindGroup(t){return this._bindGroupHash[t.uid]??this._createTextureBindGroup(t)}_createTextureBindGroup(t){const e=t.source;return this._bindGroupHash[t.uid]=new a.T({0:e,1:e.style,2:new s.k({uTextureMatrix:{type:"mat3x3<f32>",value:t.textureMatrix.mapCoord}})}),this._bindGroupHash[t.uid]}getTextureView(t){const e=t.source;return this._textureViewHash[e.uid]??this._createTextureView(e)}_createTextureView(t){return this._textureViewHash[t.uid]=this.getGpuSource(t).createView(),this._textureViewHash[t.uid]}generateCanvas(t){const e=this._renderer,r=e.gpu.device.createCommandEncoder(),i=n.e.get().createCanvas();i.width=t.source.pixelWidth,i.height=t.source.pixelHeight;const s=i.getContext("webgpu");return s.configure({device:e.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:n.e.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),r.copyTextureToTexture({texture:e.texture.getGpuSource(t.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:i.width,height:i.height}),e.gpu.device.queue.submit([r.finish()]),i}getPixels(t){const e=this.generateCanvas(t),r=o.N.getOptimalCanvasAndContext(e.width,e.height),n=r.context;n.drawImage(e,0,0);const{width:i,height:s}=e,a=n.getImageData(0,0,i,s),h=new Uint8ClampedArray(a.data.buffer);return o.N.returnCanvasAndContext(r),{pixels:h,width:i,height:s}}destroy(){this.managedTextures.slice().forEach((t=>this.onSourceDestroy(t))),this.managedTextures=null;for(const t of Object.keys(this._bindGroupHash)){const e=Number(t),r=this._bindGroupHash[e];r?.destroy(),this._bindGroupHash[e]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}p.extension={type:[i.Ag.WebGPUSystem],name:"texture"}},9291:(t,e,r)=>{"use strict";r.d(e,{j:()=>n});const n={type:"image",upload(t,e,r){const n=t.resource,i=(0|t.pixelWidth)*(0|t.pixelHeight),s=n.byteLength/i;r.device.queue.writeTexture({texture:e},n,{offset:0,rowsPerImage:t.pixelHeight,bytesPerRow:t.pixelHeight*s},{width:t.pixelWidth,height:t.pixelHeight,depthOrArrayLayers:1})}}},8338:(t,e,r)=>{"use strict";r.d(e,{_:()=>s,w:()=>n});const n={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},i={blockBytes:4,blockWidth:1,blockHeight:1},s={type:"compressed",upload(t,e,r){let s=t.pixelWidth,o=t.pixelHeight;const a=n[t.format]||i;for(let n=0;n<t.resource.length;n++){const i=t.resource[n],h=Math.ceil(s/a.blockWidth)*a.blockBytes;r.device.queue.writeTexture({texture:e,mipLevel:n},i,{offset:0,bytesPerRow:h},{width:Math.ceil(s/a.blockWidth)*a.blockWidth,height:Math.ceil(o/a.blockHeight)*a.blockHeight,depthOrArrayLayers:1}),s=Math.max(s>>1,1),o=Math.max(o>>1,1)}}}},2946:(t,e,r)=>{"use strict";r.d(e,{d:()=>n});const n={type:"image",upload(t,e,r){const n=t.resource;if(!n)return;const i=Math.min(e.width,t.resourceWidth||t.pixelWidth),s=Math.min(e.height,t.resourceHeight||t.pixelHeight),o="premultiply-alpha-on-upload"===t.alphaMode;r.device.queue.copyExternalImageToTexture({source:n},{texture:e,premultipliedAlpha:o},{width:i,height:s})}}},1416:(t,e,r)=>{"use strict";r.d(e,{h:()=>i});var n=r(2946);const i={type:"video",upload(t,e,r){n.d.upload(t,e,r)}}},3350:(t,e,r)=>{"use strict";r.d(e,{o:()=>n});class n{constructor(t){this.device=t,this.sampler=t.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(t){let e=this.pipelines[t];return e||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:"\n                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(\n                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));\n\n                        struct VertexOutput {\n                        @builtin(position) position : vec4<f32>,\n                        @location(0) texCoord : vec2<f32>,\n                        };\n\n                        @vertex\n                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {\n                        var output : VertexOutput;\n                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);\n                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);\n                        return output;\n                        }\n\n                        @group(0) @binding(0) var imgSampler : sampler;\n                        @group(0) @binding(1) var img : texture_2d<f32>;\n\n                        @fragment\n                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {\n                        return textureSample(img, imgSampler, texCoord);\n                        }\n                    "})),e=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:t}]}}),this.pipelines[t]=e),e}generateMipmap(t){const e=this._getMipmapPipeline(t.format);if("3d"===t.dimension||"1d"===t.dimension)throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let r=t;const n=t.depthOrArrayLayers||1,i=t.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!i){const e={size:{width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:n},format:t.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:t.mipLevelCount-1};r=this.device.createTexture(e)}const s=this.device.createCommandEncoder({}),o=e.getBindGroupLayout(0);for(let a=0;a<n;++a){let n=t.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:a,arrayLayerCount:1}),h=i?1:0;for(let i=1;i<t.mipLevelCount;++i){const t=r.createView({baseMipLevel:h++,mipLevelCount:1,dimension:"2d",baseArrayLayer:a,arrayLayerCount:1}),i=s.beginRenderPass({colorAttachments:[{view:t,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),l=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.sampler},{binding:1,resource:n}]});i.setPipeline(e),i.setBindGroup(0,l),i.draw(3,1,0,0),i.end(),n=t}}if(!i){const e={width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:n};for(let n=1;n<t.mipLevelCount;++n)s.copyTextureToTexture({texture:r,mipLevel:n-1},{texture:t,mipLevel:n},e),e.width=Math.ceil(e.width/2),e.height=Math.ceil(e.height/2)}return this.device.queue.submit([s.finish()]),i||r.destroy(),t}}},5814:(t,e,r)=>{"use strict";r.d(e,{F:()=>o});var n=r(8507),i=r(8567);let s=1;class o{constructor(){this._tasks=[],this._offset=0}init(){i.R.system.add(this._update,this)}repeat(t,e,r=!0){const n=s++;let i=0;return r&&(this._offset+=1e3,i=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:i,last:performance.now(),repeat:!0,id:n}),n}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t)return void this._tasks.splice(e,1)}_update(){const t=performance.now();for(let e=0;e<this._tasks.length;e++){const r=this._tasks[e];if(t-r.offset-r.last>=r.duration){const e=t-r.start;r.func(e),r.last=t}}}destroy(){i.R.system.remove(this._update,this),this._tasks.length=0}}o.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem,n.Ag.CanvasSystem],name:"scheduler",priority:0}},7978:(t,e,r)=>{"use strict";r.d(e,{s:()=>o});var n=r(2577),i=r(8507);const s=class t{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new n.Q(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...t.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};s.extension={type:[i.Ag.WebGLSystem,i.Ag.WebGPUSystem,i.Ag.CanvasSystem],name:"background",priority:0},s.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let o=s},360:(t,e,r)=>{"use strict";r.d(e,{j:()=>a});var n=r(8507),i=r(9049),s=r(268);const o={};n.XO.handle(n.Ag.BlendMode,(t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");o[t.name]=t.ref}),(t=>{delete o[t.name]}));class a{constructor(t){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t}setBlendMode(t,e,r){this._activeBlendMode!==e?(this._activeBlendMode=e,this._isAdvanced&&this._endAdvancedBlendMode(r),this._isAdvanced=!!o[e],this._isAdvanced&&(this._beginAdvancedBlendMode(r),this._renderableList.push(t))):this._isAdvanced&&this._renderableList.push(t)}_beginAdvancedBlendMode(t){this._renderer.renderPipes.batch.break(t);const e=this._activeBlendMode;if(!o[e])return void(0,s.R)(`Unable to assign BlendMode: '${e}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);let r=this._filterHash[e];r||(r=this._filterHash[e]=new i.a,r.filters=[new o[e]]);const n={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:r,canBundle:!1};this._renderableList=n.renderables,t.add(n)}_endAdvancedBlendMode(t){this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(const t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}}a.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"blendMode"}},949:(t,e,r)=>{"use strict";r.d(e,{h:()=>o});var n=r(4486),i=r(133),s=r(1132);class o extends n.A{constructor(t){let{data:e,size:r}=t;const{usage:n,label:s,shrinkToFit:o}=t;super(),this.uid=(0,i.L)("buffer"),this._resourceType="buffer",this._resourceId=(0,i.L)("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,r??(r=e?.byteLength);const a=!!e;this.descriptor={size:r,usage:n,mappedAtCreation:a,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&s.S.STATIC)}set static(t){t?this.descriptor.usage|=s.S.STATIC:this.descriptor.usage&=~s.S.STATIC}setDataWithSize(t,e,r){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t)return void(r&&this.emit("update",this));const n=this._data;this._data=t,this._dataInt32=null,n&&n.length===t.length||!this.shrinkToFit&&n&&t.byteLength<n.byteLength?r&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=(0,i.L)("resource"),this.emit("change",this))}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}},581:(t,e,r)=>{"use strict";r.d(e,{d:()=>s});var n=r(4486),i=r(133);class s extends n.A{constructor({buffer:t,offset:e,size:r}){super(),this.uid=(0,i.L)("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=(0,i.L)("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=0|e,this.size=r,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=(0,i.L)("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}},1132:(t,e,r)=>{"use strict";r.d(e,{S:()=>n});var n=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(n||{})},6736:(t,e,r)=>{"use strict";function n(t,e){const r=t.byteLength/8|0,n=new Float64Array(t,0,r);new Float64Array(e,0,r).set(n);const i=t.byteLength-8*r;if(i>0){const n=new Uint8Array(t,8*r,i);new Uint8Array(e,8*r,i).set(n)}}r.d(e,{W:()=>n})},4736:(t,e,r)=>{"use strict";r.d(e,{h:()=>h});var n=r(8507),i=r(4980),s=r(4503);const o={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},a=class t{constructor(t){this._renderer=t}_normalizeOptions(t,e={}){return t instanceof i.mc||t instanceof s.g?{target:t,...e}:{...e,...t}}async image(t){const e=new Image;return e.src=await this.base64(t),e}async base64(e){e=this._normalizeOptions(e,t.defaultImageOptions);const{format:r,quality:n}=e,i=this.canvas(e);if(void 0!==i.toBlob)return new Promise(((t,e)=>{i.toBlob((r=>{if(!r)return void e(new Error("ICanvas.toBlob failed!"));const n=new FileReader;n.onload=()=>t(n.result),n.onerror=e,n.readAsDataURL(r)}),o[r],n)}));if(void 0!==i.toDataURL)return i.toDataURL(o[r],n);if(void 0!==i.convertToBlob){const t=await i.convertToBlob({type:o[r],quality:n});return new Promise(((e,r)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=r,n.readAsDataURL(t)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t){const e=(t=this._normalizeOptions(t)).target,r=this._renderer;if(e instanceof s.g)return r.texture.generateCanvas(e);const n=r.textureGenerator.generateTexture(t),i=r.texture.generateCanvas(n);return n.destroy(!0),i}pixels(t){const e=(t=this._normalizeOptions(t)).target,r=this._renderer,n=e instanceof s.g?e:r.textureGenerator.generateTexture(t),o=r.texture.getPixels(n);return e instanceof i.mc&&n.destroy(!0),o}texture(t){return(t=this._normalizeOptions(t)).target instanceof s.g?t.target:this._renderer.textureGenerator.generateTexture(t)}download(t){t=this._normalizeOptions(t);const e=this.canvas(t),r=document.createElement("a");r.download=t.filename??"image.png",r.href=e.toDataURL("image/png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}log(t){const e=t.width??200;t=this._normalizeOptions(t),["font-size: 1px;",`padding: ${e}px 300px;`,`background: url(${this.canvas(t).toDataURL()}) no-repeat;`,"background-size: contain;"].join(" ")}destroy(){this._renderer=null}};a.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"extract"},a.defaultImageOptions={format:"png",quality:1};let h=a},1709:(t,e,r)=>{"use strict";r.d(e,{y:()=>f});var n=r(2577),i=r(8507),s=r(9313),o=r(9252),a=r(9636),h=r(7269),l=r(4980),u=r(4167);const c=new o.M,d=new a.c,p=[0,0,0,0];class f{constructor(t){this._renderer=t}generateTexture(t){t instanceof l.mc&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});const e=t.resolution||this._renderer.resolution,r=t.antialias||this._renderer.view.antialias,i=t.target;let o=t.clearColor;o=o?Array.isArray(o)&&4===o.length?o:n.Q.shared.setValue(o).toArray():p;const a=t.frame?.copyTo(c)||(0,h.n)(i,d).rectangle;a.width=0|Math.max(a.width,1/e),a.height=0|Math.max(a.height,1/e);const f=u.Y.create({...t.textureSourceOptions,width:a.width,height:a.height,resolution:e,antialias:r}),m=s.u.shared.translate(-a.x,-a.y);return this._renderer.render({container:i,transform:m,target:f,clearColor:o}),f.source.updateMipmaps(),f}destroy(){this._renderer=null}}f.extension={type:[i.Ag.WebGLSystem,i.Ag.WebGPUSystem],name:"textureGenerator"}},3681:(t,e,r)=>{"use strict";r.d(e,{V:()=>l});var n=r(4486),i=r(9636),s=r(133),o=r(949),a=r(7751),h=r(7262);class l extends n.A{constructor(t={}){super(),this.uid=(0,s.L)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new i.c,this._boundsDirty=!0;const{attributes:e,indexBuffer:r,topology:n}=t;if(this.buffers=[],this.attributes={},e)for(const t in e)this.addAttribute(t,e[t]);this.instanceCount=t.instanceCount??1,r&&this.addIndex(r),this.topology=n||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const r=function(t){return(t instanceof o.h||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=(0,a.b)(t.buffer,!1),t}(e);-1===this.buffers.indexOf(r.buffer)&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=r}addIndex(t){this.indexBuffer=(0,a.b)(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,(0,h.U)(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach((t=>t.destroy())),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}},3759:(t,e,r)=>{"use strict";function n(t,e,r,n,i,s,o,a=null){let h=0;r*=e,i*=s;const l=a.a,u=a.b,c=a.c,d=a.d,p=a.tx,f=a.ty;for(;h<o;){const o=t[r],a=t[r+1];n[i]=l*o+c*a+p,n[i+1]=u*o+d*a+f,i+=s,r+=e,h++}}function i(t,e,r,n){let i=0;for(e*=r;i<n;)t[e]=0,t[e+1]=0,e+=r,i++}r.d(e,{D:()=>i,X:()=>n})},7751:(t,e,r)=>{"use strict";r.d(e,{b:()=>s});var n=r(949),i=r(1132);function s(t,e){if(!(t instanceof n.h)){let r=e?i.S.INDEX:i.S.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),r=i.S.INDEX|i.S.COPY_DST):(t=new Float32Array(t),r=i.S.VERTEX|i.S.COPY_DST)),t=new n.h({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:r})}return t}},8306:(t,e,r)=>{"use strict";r.d(e,{m:()=>i});const n={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function i(t){return n[t]??n.float32}},7262:(t,e,r)=>{"use strict";function n(t,e,r){const n=t.getAttribute(e);if(!n)return r.minX=0,r.minY=0,r.maxX=0,r.maxY=0,r;const i=n.buffer.data;let s=1/0,o=1/0,a=-1/0,h=-1/0;const l=i.BYTES_PER_ELEMENT,u=(n.offset||0)/l,c=(n.stride||8)/l;for(let t=u;t<i.length;t+=c){const e=i[t],r=i[t+1];e>a&&(a=e),r>h&&(h=r),e<s&&(s=e),r<o&&(o=r)}return r.minX=s,r.minY=o,r.maxX=a,r.maxY=h,r}r.d(e,{U:()=>n})},9888:(t,e,r)=>{"use strict";function n(t,e,r,n,i){const s=e.a,o=e.b,a=e.c,h=e.d,l=e.tx,u=e.ty;r||(r=0),n||(n=2),i||(i=t.length/n-r);let c=r*n;for(let e=0;e<i;e++){const e=t[c],r=t[c+1];t[c]=s*e+a*r+l,t[c+1]=o*e+h*r+u,c+=n}}r.d(e,{s:()=>n})},848:(t,e,r)=>{"use strict";r.d(e,{L:()=>i});var n=r(133);class i{constructor(){this.uid=(0,n.L)("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize}}},2428:(t,e,r)=>{"use strict";r.d(e,{J:()=>u});var n=r(8507),i=r(9313),s=r(5101),o=r(2760),a=r(3513),h=r(5099),l=r(9921);class u{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:r,worldColor:n,offset:h}){const l=this._renderer.renderTarget.renderTarget,u=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:l,worldTransformMatrix:new i.u,worldColor:4294967295,offset:new s.b},c={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||l.size,worldTransformMatrix:r||u.worldTransformMatrix,worldColor:n||u.worldColor,offset:h||u.offset,bindGroup:null},d=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(d);const p=d.uniforms;let f;p.uProjectionMatrix=c.projectionMatrix,p.uResolution=c.resolution,p.uWorldTransformMatrix.copyFrom(c.worldTransformMatrix),p.uWorldTransformMatrix.tx-=c.offset.x,p.uWorldTransformMatrix.ty-=c.offset.y,(0,o.V)(c.worldColor,p.uWorldColorAlpha,0),d.update(),this._renderer.renderPipes.uniformBatch?f=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(d,!1):(f=this._bindGroupPool.pop()||new a.T,this._activeBindGroups.push(f),f.setResource(d,0)),c.bindGroup=f,this._currentGlobalUniformData=c}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===h.W.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new l.k({uProjectionMatrix:{value:new i.u,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new i.u,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}u.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem,n.Ag.CanvasSystem],name:"globalUniforms"}},279:(t,e,r)=>{"use strict";r.d(e,{O:()=>a});var n=r(133),i=r(583),s=r(4503);const o=class t{constructor(e={}){if(this.uid=(0,n.L)("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...t.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,"number"==typeof e.colorTextures){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new i.v({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map((t=>t.source))];const t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof s.g||e.depthStencilTexture instanceof i.v?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const t=this._size;return t[0]=this.pixelWidth,t[1]=this.pixelHeight,t}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(t){this.resize(t.width,t.height,t._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new i.v({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(t,e,r=this.resolution,n=!1){this.dirtyId++,this.colorTextures.forEach(((i,s)=>{n&&0===s||i.source.resize(t,e,r)})),this.depthStencilTexture&&this.depthStencilTexture.source.resize(t,e,r)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach((t=>{t.destroy()})),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};o.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let a=o},3032:(t,e,r)=>{"use strict";r.d(e,{l:()=>f});var n=r(9313),i=r(9252),s=r(1257),o=r(7868),a=r(7729),h=r(4884),l=r(583),u=r(4503),c=r(8725),d=r(6071),p=r(279);class f{constructor(t){this.rootViewPort=new i.M,this.viewport=new i.M,this.onRenderTargetChange=new a.C("onRenderTargetChange"),this.projectionMatrix=new n.u,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:r,frame:n}){this._renderTargetStack.length=0,this.push(t,e,r,n),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=(0,d.A)(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(t,e=!0,r,n){const i=this.getRenderTarget(t),s=this.renderTarget!==i;this.renderTarget=i,this.renderSurface=t;const a=this.getGpuRenderTarget(i);i.pixelWidth===a.width&&i.pixelHeight===a.height||(this.adaptor.resizeGpuRenderTarget(i),a.width=i.pixelWidth,a.height=i.pixelHeight);const h=i.colorTexture,l=this.viewport,c=h.pixelWidth,d=h.pixelHeight;if(!n&&t instanceof u.g&&(n=t.frame),n){const t=h._resolution;l.x=n.x*t+.5|0,l.y=n.y*t+.5|0,l.width=n.width*t+.5|0,l.height=n.height*t+.5|0}else l.x=0,l.y=0,l.width=c,l.height=d;return(0,o.s)(this.projectionMatrix,0,0,l.width/h.resolution,l.height/h.resolution,!i.isRoot),this.adaptor.startRenderPass(i,e,r,l),s&&this.onRenderTargetChange.emit(i),i}clear(t,e=s.u.ALL,r){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,r,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=s.u.ALL,r,n){const i=this.bind(t,e,r,n);return this._renderTargetStack.push({renderTarget:i,frame:n}),i}pop(){this._renderTargetStack.pop();const t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,r,n,i){r.x<0&&(n.width+=r.x,i.x-=r.x,r.x=0),r.y<0&&(n.height+=r.y,i.y-=r.y,r.y=0);const{pixelWidth:s,pixelHeight:o}=t;return n.width=Math.min(n.width,s-r.x),n.height=Math.min(n.height,o-r.y),this.adaptor.copyToTexture(t,e,r,n,i)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach(((t,e)=>{t!==e&&t.destroy()})),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return h.q.test(t)&&(t=(0,c.c)(t).source),t instanceof p.O?e=t:t instanceof l.v&&(e=new p.O({colorTextures:[t]}),h.q.test(t.source.resource)&&(e.isRoot=!0),t.once("destroy",(()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);const r=this._gpuRenderTargetHash[e.uid];r&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(r))}))),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}resetState(){this.renderTarget=null,this.renderSurface=null}}},6071:(t,e,r)=>{"use strict";function n(t){const e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}r.d(e,{A:()=>n})},8475:(t,e,r)=>{"use strict";r.d(e,{M:()=>u});var n=r(4486),i=r(9657),s=r(3513),o=r(1595),a=r(5099),h=r(9921),l=r(133);class u extends n.A{constructor(t){super(),this.uid=(0,l.L)("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:r,groups:n,resources:i,compatibleRenderers:o,groupMap:u}=t;this.gpuProgram=e,this.glProgram=r,void 0===o&&(o=0,e&&(o|=a.W.WEBGPU),r&&(o|=a.W.WEBGL)),this.compatibleRenderers=o;const c={};if(i||n||(i={}),i&&n)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&n&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&n&&u)for(const t in u)for(const e in u[t]){const r=u[t][e];c[r]={group:t,binding:e,name:r}}else if(e&&n&&!u){const t=e.structsAndGroups.groups;u={},t.forEach((t=>{u[t.group]=u[t.group]||{},u[t.group][t.binding]=t.name,c[t.name]=t}))}else if(i){n={},u={},e&&e.structsAndGroups.groups.forEach((t=>{u[t.group]=u[t.group]||{},u[t.group][t.binding]=t.name,c[t.name]=t}));let t=0;for(const e in i)c[e]||(n[99]||(n[99]=new s.T,this._ownedBindGroups.push(n[99])),c[e]={group:99,binding:t,name:e},u[99]=u[99]||{},u[99][t]=e,t++);for(const t in i){const e=t;let r=i[t];r.source||r._resourceType||(r=new h.k(r));const o=c[e];o&&(n[o.group]||(n[o.group]=new s.T,this._ownedBindGroups.push(n[o.group])),n[o.group].setResource(r,o.binding))}}this.groups=n,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(n,c)}addResource(t,e,r){var n,i;(n=this._uniformBindMap)[e]||(n[e]={}),(i=this._uniformBindMap[e])[r]||(i[r]=t),this.groups[e]||(this.groups[e]=new s.T,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const r={};for(const n in e){const i=e[n];Object.defineProperty(r,i.name,{get:()=>t[i.group].getResource(i.binding),set(e){t[i.group].setResource(e,i.binding)}})}return r}destroy(t=!1){this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach((t=>{t.destroy()})),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:r,...n}=t;let s,a;return e&&(s=o.B.from(e)),r&&(a=i.M.from(r)),new u({gpuProgram:s,glProgram:a,...n})}}},7047:(t,e,r)=>{"use strict";r.d(e,{W:()=>o});var n=r(4577),i=r(949),s=r(1132);class o{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!(0,n.f)())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){const e=this.getUniformGroupData(t);t.buffer||(t.buffer=new i.h({data:new Float32Array(e.layout.size/4),usage:s.S.UNIFORM|s.S.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){const e=t._signature;let r=this._syncFunctionHash[e];if(!r){const n=Object.keys(t.uniformStructures).map((e=>t.uniformStructures[e])),i=this._adaptor.createUboElements(n),s=this._generateUboSync(i.uboElements);r=this._syncFunctionHash[e]={layout:i,syncFunction:s}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,r){const n=this.getUniformGroupData(t);t.buffer||(t.buffer=new i.h({data:new Float32Array(n.layout.size/4),usage:s.S.UNIFORM|s.S.COPY_DST}));let o=null;return e||(e=t.buffer.data,o=t.buffer.dataInt32),r||(r=0),n.syncFunction(t.uniforms,e,o,r),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;const e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}},9921:(t,e,r)=>{"use strict";r.d(e,{k:()=>h});var n=r(133),i=r(7952),s=r(1867),o=r(8726);const a=class t{constructor(e,r){this._touched=0,this.uid=(0,n.L)("uniform"),this._resourceType="uniformGroup",this._resourceId=(0,n.L)("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,r={...t.defaultOptions,...r},this.uniformStructures=e;const a={};for(const t in e){const r=e[t];if(r.name=t,r.size=r.size??1,!s._[r.type])throw new Error(`Uniform type ${r.type} is not supported. Supported uniform types are: ${s.q.join(", ")}`);r.value??(r.value=(0,o.p)(r.type,r.size)),a[t]=r.value}this.uniforms=a,this._dirtyId=1,this.ubo=r.ubo,this.isStatic=r.isStatic,this._signature=(0,i.X)(Object.keys(a).map((t=>`${t}-${e[t].type}`)).join("-"),"uniform-group")}update(){this._dirtyId++}};a.defaultOptions={ubo:!1,isStatic:!1};let h=a},8985:(t,e,r)=>{"use strict";r.d(e,{q:()=>n});var n=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(n||{})},1867:(t,e,r)=>{"use strict";r.d(e,{_:()=>i,q:()=>n});const n=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],i=n.reduce(((t,e)=>(t[e]=!0,t)),{})},6423:(t,e,r)=>{"use strict";r.d(e,{E:()=>i});var n=r(8166);function i(t,e,r,i){const s=["\n        var v = null;\n        var v2 = null;\n        var t = 0;\n        var index = 0;\n        var name = null;\n        var arrayOffset = null;\n    "];let o=0;for(let a=0;a<t.length;a++){const h=t[a],l=h.data.name;let u=!1,c=0;for(let t=0;t<n.$.length;t++)if(n.$[t].test(h.data)){c=h.offset/4,s.push(`name = "${l}";`,`offset += ${c-o};`,n.$[t][e]||n.$[t].ubo),u=!0;break}if(!u)if(h.data.size>1)c=h.offset/4,s.push(r(h,c-o));else{const t=i[h.data.type];c=h.offset/4,s.push(`\n                    v = uv.${l};\n                    offset += ${c-o};\n                    ${t};\n                `)}o=c}const a=s.join("\n");return new Function("uv","data","dataInt32","offset",a)}},8726:(t,e,r)=>{"use strict";function n(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}r.d(e,{p:()=>n})},1266:(t,e,r)=>{"use strict";function n(t,e){return`\n        for (let i = 0; i < ${t*e}; i++) {\n            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];\n        }\n    `}r.d(e,{_:()=>s,g:()=>i});const i={f32:"\n        data[offset] = v;",i32:"\n        dataInt32[offset] = v;","vec2<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];","vec3<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];","vec4<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];","vec2<i32>":"\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];","vec3<i32>":"\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];\n        dataInt32[offset + 2] = v[2];","vec4<i32>":"\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];\n        dataInt32[offset + 2] = v[2];\n        dataInt32[offset + 3] = v[3];","mat2x2<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 4] = v[2];\n        data[offset + 5] = v[3];","mat3x3<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];","mat4x4<f32>":"\n        for (let i = 0; i < 16; i++) {\n            data[offset + i] = v[i];\n        }","mat3x2<f32>":n(3,2),"mat4x2<f32>":n(4,2),"mat2x3<f32>":n(2,3),"mat4x3<f32>":n(4,3),"mat2x4<f32>":n(2,4),"mat3x4<f32>":n(3,4)},s={...i,"mat2x2<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];\n    "}},8166:(t,e,r)=>{"use strict";r.d(e,{$:()=>n});const n=[{type:"mat3x3<f32>",test:t=>void 0!==t.value.a,ubo:"\n            var matrix = uv[name].toArray(true);\n            data[offset] = matrix[0];\n            data[offset + 1] = matrix[1];\n            data[offset + 2] = matrix[2];\n            data[offset + 4] = matrix[3];\n            data[offset + 5] = matrix[4];\n            data[offset + 6] = matrix[5];\n            data[offset + 8] = matrix[6];\n            data[offset + 9] = matrix[7];\n            data[offset + 10] = matrix[8];\n        ",uniform:"\n            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));\n        "},{type:"vec4<f32>",test:t=>"vec4<f32>"===t.type&&1===t.size&&void 0!==t.value.width,ubo:"\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n            data[offset + 2] = v.width;\n            data[offset + 3] = v.height;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                cv[2] = v.width;\n                cv[3] = v.height;\n                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);\n            }\n        "},{type:"vec2<f32>",test:t=>"vec2<f32>"===t.type&&1===t.size&&void 0!==t.value.x,ubo:"\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                gl.uniform2f(ud[name].location, v.x, v.y);\n            }\n        "},{type:"vec4<f32>",test:t=>"vec4<f32>"===t.type&&1===t.size&&void 0!==t.value.red,ubo:"\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n            data[offset + 3] = v.alpha;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                cv[3] = v.alpha;\n                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);\n            }\n        "},{type:"vec3<f32>",test:t=>"vec3<f32>"===t.type&&1===t.size&&void 0!==t.value.red,ubo:"\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);\n            }\n        "}]},435:(t,e,r)=>{"use strict";r.d(e,{U:()=>o});var n=r(8507),i=r(7081),s=r(5099);class o{constructor(t){this._renderer=t}init(t){if(t.hello){let t=this._renderer.name;this._renderer.type===s.W.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),(0,i.e)(t)}}}o.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem,n.Ag.CanvasSystem],name:"hello",priority:-2},o.defaultOptions={hello:!1}},7547:(t,e,r)=>{"use strict";r.d(e,{U:()=>s});const n={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},i=class t{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(t){!!(1&this.data)!==t&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(t){!!(2&this.data)!==t&&(this.data^=2)}set cullMode(t){"none"!==t?(this.culling=!0,this.clockwiseFrontFace="front"===t):this.culling=!1}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(4&this.data)}set culling(t){!!(4&this.data)!==t&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(t){!!(8&this.data)!==t&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(t){!!(32&this.data)!==t&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(t){!!(16&this.data)!==t&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(t){this.blend="none"!==t,this._blendMode=t,this._blendModeId=n[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new t;return e.depthTest=!1,e.blend=!0,e}};i.default2d=i.for2d();let s=i},1957:(t,e,r)=>{"use strict";r.d(e,{K:()=>i,Q:()=>n});const n={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var i=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(i||{})},8639:(t,e,r)=>{"use strict";r.d(e,{i:()=>i});var n=r(1957);function i(t,e){return"no-premultiply-alpha"===e.alphaMode&&n.Q[t]||t}},2855:(t,e,r)=>{"use strict";r.d(e,{k:()=>p});var n=r(2577),i=r(7385),s=r(4980),o=r(4577),a=r(4670),h=r(1257),l=r(7729),u=r(4486);const c=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],d=class t extends u.A{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...c,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(e={}){const r=!0===e.skipExtensionImports||!1===e.manageImports;await(0,i.W)(r),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...t.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(t,e){let r=t;if(r instanceof s.mc&&(r={container:r},e&&((0,a.t6)(a.lj,"passing a second argument is deprecated, please use render options instead"),r.target=e.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor??(r.clearColor=this.background.colorRgba),r.clear??(r.clear=this.background.clearBeforeRender)),r.clearColor){const t=Array.isArray(r.clearColor)&&4===r.clearColor.length;r.clearColor=t?r.clearColor:n.Q.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(t,e,r){const n=this.view.resolution;this.view.resize(t,e,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),void 0!==r&&r!==n&&this.runners.resolutionChange.emit(r)}clear(t={}){t.target||(t.target=this.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=h.u.ALL);const{clear:e,clearColor:r,target:i}=t;n.Q.shared.setValue(r??this.background.colorRgba),this.renderTarget.clear(i,e,n.Q.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach((t=>{this.runners[t]=new l.C(t)}))}_addSystems(t){let e;for(e in t){const r=t[e];this._addSystem(r.value,r.name)}}_addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const t in this.runners)this.runners[t].add(r);return this}_addPipes(t,e){const r=e.reduce(((t,e)=>(t[e.name]=e.value,t)),{});t.forEach((t=>{const e=t.value,n=t.name,i=r[n];this.renderPipes[n]=new e(this,i?new i:null)}))}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!(0,o.f)())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};d.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let p=d},511:(t,e,r)=>{"use strict";r.d(e,{f:()=>T,i:()=>C});var n=r(594),i=r(1160),s=r(779),o=r(3136),a=r(7073),h=r(780),l=r(7923),u=r(2187),c=r(2139),d=r(7978),p=r(360),f=r(4736),m=r(1709),g=r(2428),_=r(5814),b=r(435),x=r(3871),v=r(3818),y=r(548);const C=[d.s,g.J,b.U,y.v,s.b,v.l,m.y,f.h,a.d,x.M,_.F],T=[p.j,h.s,o.k,i.a,l.z,c.j,u.u,n._]},7729:(t,e,r)=>{"use strict";r.d(e,{C:()=>n});class n{constructor(t){this.items=[],this._name=t}emit(t,e,r,n,i,s,o,a){const{name:h,items:l}=this;for(let u=0,c=l.length;u<c;u++)l[u][h](t,e,r,n,i,s,o,a);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&this.items.splice(e,1),this}contains(t){return-1!==this.items.indexOf(t)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}},7608:(t,e,r)=>{"use strict";r.d(e,{N:()=>o,V:()=>s});var n=r(3751),i=r(9939);class s{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const r=n.e.get().createCanvas();r.width=t,r.height=e;const i=r.getContext("2d");return{canvas:r,context:i}}getOptimalCanvasAndContext(t,e,r=1){t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6);const n=((t=(0,i.U5)(t))<<17)+((e=(0,i.U5)(e))<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let s=this._canvasPool[n].pop();return s||(s=this._createCanvasAndContext(t,e)),s}returnCanvasAndContext(t){const e=t.canvas,{width:r,height:n}=e,i=(r<<17)+(n<<1);t.context.clearRect(0,0,r,n),this._canvasPool[i].push(t)}clear(){this._canvasPool={}}}const o=new s},4167:(t,e,r)=>{"use strict";r.d(e,{Y:()=>s});var n=r(583),i=r(4503);class s extends i.g{static create(t){return new s({source:new n.v(t)})}resize(t,e,r){return this.source.resize(t,e,r),this}}},3871:(t,e,r)=>{"use strict";r.d(e,{M:()=>a});var n=r(8507),i=r(1448);let s=0;const o=class t{constructor(t){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=t}init(e){e={...t.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(t){this.enabled!==t&&(t?(this._handler=this._renderer.scheduler.repeat((()=>this.run()),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat((()=>{for(const t of this._managedHashes)t.context[t.hash]=(0,i.s)(t.context[t.hash])}),this._frequency),this._arrayHandler=this._renderer.scheduler.repeat((()=>{for(const t of this._managedArrays)(0,i.t)(t.context[t.hash])}),this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(t,e){this._managedHashes.push({context:t,hash:e})}addManagedArray(t,e){this._managedArrays.push({context:t,hash:e})}prerender({container:t}){this._now=performance.now(),t.renderGroup.gcTick=s++,this._updateInstructionGCTick(t.renderGroup,t.renderGroup.gcTick)}addRenderable(t){this.enabled&&(-1===t._lastUsed&&(this._managedRenderables.push(t),t.once("destroyed",this._removeRenderable,this)),t._lastUsed=this._now)}run(){const t=this._now,e=this._managedRenderables,r=this._renderer.renderPipes;let n=0;for(let i=0;i<e.length;i++){const s=e[i];if(null===s){n++;continue}const o=s.renderGroup??s.parentRenderGroup,a=o?.instructionSet?.gcTick??-1;if((o?.gcTick??0)===a&&(s._lastUsed=t),t-s._lastUsed>this.maxUnusedTime){if(!s.destroyed){const t=r;o&&(o.structureDidChange=!0),t[s.renderPipeId].destroyRenderable(s)}s._lastUsed=-1,n++,s.off("destroyed",this._removeRenderable,this)}else e[i-n]=s}e.length-=n}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(t){const e=this._managedRenderables.indexOf(t);e>=0&&(t.off("destroyed",this._removeRenderable,this),this._managedRenderables[e]=null)}_updateInstructionGCTick(t,e){t.instructionSet.gcTick=e;for(const r of t.renderGroupChildren)this._updateInstructionGCTick(r,e)}};o.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"renderableGC",priority:0},o.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let a=o},4503:(t,e,r)=>{"use strict";r.d(e,{g:()=>d});var n=r(4486),i=r(2079),s=r(9252),o=r(133),a=r(4670),h=r(1549),l=r(4195),u=r(583),c=r(1196);class d extends n.A{constructor({source:t,label:e,frame:r,orig:n,trim:i,defaultAnchor:a,defaultBorders:h,rotate:l,dynamic:c}={}){if(super(),this.uid=(0,o.L)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new s.M,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new u.v,this.noFrame=!r,r)this.frame.copyFrom(r);else{const{width:t,height:e}=this._source;this.frame.width=t,this.frame.height=e}this.orig=n||this.frame,this.trim=i,this.rotate=l??0,this.defaultAnchor=a,this.defaultBorders=h,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new c.N(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:r,height:n}=this._source,s=e.x/r,o=e.y/n,a=e.width/r,h=e.height/n;let l=this.rotate;if(l){const e=a/2,r=h/2,n=s+e,u=o+r;l=i.E.add(l,i.E.NW),t.x0=n+e*i.E.uX(l),t.y0=u+r*i.E.uY(l),l=i.E.add(l,2),t.x1=n+e*i.E.uX(l),t.y1=u+r*i.E.uY(l),l=i.E.add(l,2),t.x2=n+e*i.E.uX(l),t.y2=u+r*i.E.uY(l),l=i.E.add(l,2),t.x3=n+e*i.E.uX(l),t.y3=u+r*i.E.uY(l)}else t.x0=s,t.y0=o,t.x1=s+a,t.y1=o,t.x2=s+a,t.y2=o+h,t.x3=s,t.y3=o+h}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,a.t6)(a.lj,"Texture.baseTexture is now Texture.source"),this._source}}d.EMPTY=new d({label:"EMPTY",source:new u.v({label:"EMPTY"})}),d.EMPTY.destroy=h.t,d.WHITE=new d({source:new l.P({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),d.WHITE.destroy=h.t},3818:(t,e,r)=>{"use strict";r.d(e,{l:()=>s});var n=r(8507);const i=class t{constructor(t){this._renderer=t,this.count=0,this.checkCount=0}init(e){e={...t.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this._renderer.texture.managedTextures;for(let e=0;e<t.length;e++){const r=t[e];r.autoGarbageCollect&&r.resource&&r._touched>-1&&this.count-r._touched>this.maxIdle&&(r._touched=-1,r.unload())}}destroy(){this._renderer=null}};i.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"textureGC"},i.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};let s=i},1196:(t,e,r)=>{"use strict";r.d(e,{N:()=>s});var n=r(9313);const i=new n.u;class s{constructor(t,e){this.mapCoord=new n.u,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?t.width<10?0:.5:e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){void 0===e&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],s=t[n+1];e[n]=i*r.a+s*r.c+r.tx,e[n+1]=i*r.b+s*r.d+r.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const r=t.orig,n=t.trim;n&&(i.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(i));const s=t.source,o=this.uClampFrame,a=this.clampMargin/s._resolution,h=this.clampOffset/s._resolution;return o[0]=(t.frame.x+a+h)/s.width,o[1]=(t.frame.y+a+h)/s.height,o[2]=(t.frame.x+t.frame.width-a+h)/s.width,o[3]=(t.frame.y+t.frame.height-a+h)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=t.frame.width===s.width&&t.frame.height===s.height&&0===t.rotate,!0}}},2437:(t,e,r)=>{"use strict";r.d(e,{M:()=>a,W:()=>h});var n=r(9939),i=r(583),s=r(4503);let o=0;class a{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,r){const n=new i.v({...this.textureOptions,width:t,height:e,resolution:1,antialias:r,autoGarbageCollect:!1});return new s.g({source:n,label:"texturePool_"+o++})}getOptimalTexture(t,e,r=1,i){let s=Math.ceil(t*r-1e-6),o=Math.ceil(e*r-1e-6);s=(0,n.U5)(s),o=(0,n.U5)(o);const a=(s<<17)+(o<<1)+(i?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let h=this._texturePool[a].pop();return h||(h=this.createTexture(s,o,i)),h.source._resolution=r,h.source.width=s/r,h.source.height=o/r,h.source.pixelWidth=s,h.source.pixelHeight=o,h.frame.x=0,h.frame.y=0,h.frame.width=t,h.frame.height=e,h.updateUvs(),this._poolKeyHash[h.uid]=a,h}getSameSizeTexture(t,e=!1){const r=t.source;return this.getOptimalTexture(t.width,t.height,r._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=!1!==t)for(const t in this._texturePool){const e=this._texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this._texturePool={}}}const h=new a},218:(t,e,r)=>{"use strict";r.d(e,{n:()=>h});var n=r(4486),i=r(133),s=r(4670);const o=Object.create(null),a=class t extends n.A{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...t.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){(0,s.t6)(s.lj,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=function(t){const e=o[t];return void 0===e&&(o[t]=(0,i.L)("resource")),e}(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};a.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let h=a},4195:(t,e,r)=>{"use strict";r.d(e,{P:()=>s});var n=r(8507),i=r(583);class s extends i.v{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let r=t.format;r||(r=e instanceof Float32Array?"rgba32float":e instanceof Int32Array||e instanceof Uint32Array?"rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?"rgba16uint":(Int8Array,"bgra8unorm")),super({...t,resource:e,format:r}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}s.extension=n.Ag.TextureSource},4884:(t,e,r)=>{"use strict";r.d(e,{q:()=>o});var n=r(3751),i=r(8507),s=r(583);class o extends s.v{constructor(t){t.resource||(t.resource=n.e.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),this.resource.width===this.pixelWidth&&this.resource.height===this.pixelHeight||(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,r=this._resolution){const n=super.resize(t,e,r);return n&&this.resizeCanvas(),n}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}o.extension=i.Ag.TextureSource},8293:(t,e,r)=>{"use strict";r.d(e,{b:()=>a});var n=r(3751),i=r(8507),s=r(268),o=r(583);class a extends o.v{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=n.e.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,(0,s.R)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}a.extension=i.Ag.TextureSource},583:(t,e,r)=>{"use strict";r.d(e,{v:()=>l});var n=r(4486),i=r(9939),s=r(2698),o=r(133),a=r(218);const h=class t extends n.A{constructor(e={}){super(),this.options=e,this.uid=(0,o.L)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,o.L)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...t.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new a.n((0,s.S)(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,o.L)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,r){r||(r=this._resolution),t||(t=this.width),e||(e=this.height);const n=Math.round(t*r),i=Math.round(e*r);return this.width=n/r,this.height=i/r,this._resolution=r,(this.pixelWidth!==n||this.pixelHeight!==i)&&(this._refreshPOT(),this.pixelWidth=n,this.pixelHeight=i,this.emit("resize",this),this._resourceId=(0,o.L)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,i.f3)(this.pixelWidth)&&(0,i.f3)(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};h.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let l=h},6139:(t,e,r)=>{"use strict";r.d(e,{$:()=>h});var n=r(8507),i=r(8567),s=r(6858),o=r(583);const a=class t extends o.v{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...t.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==e.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=i.R.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await(0,s.C)(),this._load=new Promise(((r,n)=>{this.isValid?r(this):(this._resolve=r,this._reject=n,void 0!==e.preloadTimeoutMs&&(this._preloadTimeout=setTimeout((()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))}))),t.load())})),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(i.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(i.R.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(i.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};a.extension=n.Ag.TextureSource,a.defaultOptions={...o.v.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},a.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let h=a},8725:(t,e,r)=>{"use strict";r.d(e,{c:()=>o,i:()=>a});var n=r(4884),i=r(4503);const s=new Map;function o(t,e){if(!s.has(t)){const r=new i.g({source:new n.q({resource:t,...e})}),o=()=>{s.get(t)===r&&s.delete(t)};r.once("destroy",o),r.source.once("destroy",o),s.set(t,r)}return s.get(t)}function a(t){return s.has(t)}},6557:(t,e,r)=>{"use strict";r.d(e,{_:()=>h,_4:()=>c,tx:()=>u});var n=r(1979),i=r(8507),s=r(583),o=r(4503);const a=[];function h(t={}){return l(t)}function l(t={}){const e=t&&t.resource,r=e?t.resource:t,n=e?t:{resource:t};for(let t=0;t<a.length;t++){const e=a[t];if(e.test(r))return new e(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function u(t={},e=!1){const r=t&&t.resource,i=r?t.resource:t,s=r?t:{resource:t};if(!e&&n.l.has(i))return n.l.get(i);const a=new o.g({source:l(s)});return a.on("destroy",(()=>{n.l.has(i)&&n.l.remove(i)})),e||n.l.set(i,a),a}function c(t,e=!1){return"string"==typeof t?n.l.get(t):t instanceof s.v?new o.g({source:t}):u(t,e)}i.XO.handleByList(i.Ag.TextureSource,a),o.g.from=c,s.v.from=l},7952:(t,e,r)=>{"use strict";r.d(e,{X:()=>s});const n=Object.create(null),i=Object.create(null);function s(t,e){let r=i[t];return void 0===r&&(void 0===n[e]&&(n[e]=1),i[t]=r=n[e]++),r}},548:(t,e,r)=>{"use strict";r.d(e,{v:()=>u});var n=r(3751),i=r(8507),s=r(9252),o=r(4670),a=r(279),h=r(8725);const l=class t{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(t){this.texture.source.autoDensity=t}get resolution(){return this.texture.source._resolution}set resolution(t){this.texture.source.resize(this.texture.source.width,this.texture.source.height,t)}init(e){(e={...t.defaultOptions,...e}).view&&((0,o.t6)(o.lj,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new s.M(0,0,e.width,e.height),this.canvas=e.canvas||n.e.get().createCanvas(),this.antialias=!!e.antialias,this.texture=(0,h.c)(this.canvas,e),this.renderTarget=new a.O({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(t,e,r){this.texture.source.resize(t,e,r),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(t=!1){("boolean"==typeof t?t:t?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};l.extension={type:[i.Ag.WebGLSystem,i.Ag.WebGPUSystem,i.Ag.CanvasSystem],name:"view",priority:0},l.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let u=l},5099:(t,e,r)=>{"use strict";r.d(e,{W:()=>n});var n=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(n||{})},4980:(t,e,r)=>{"use strict";r.d(e,{fR:()=>R,ig:()=>E,mc:()=>B,ne:()=>P,u:()=>L});var n=r(4486),i=r(2577),s=r(992),o=r(9313),a=r(1652),h=r(2812),l=r(133),u=r(4670),c=r(8218),d=r(8636),p=r(2094),f=r(6190),m=r(7219),g=r(3358),_=r(3629),b=r(198),x=r(37),v=r(4116),y=r(5713),C=r(1638),T=r(3284),S=r(6216);const w=new h.o(null),A=new h.o(null),M=new h.o(null,1,1),E=1,L=2,R=4,P=8;class B extends n.A{constructor(t={}){super(),this.uid=(0,l.L)("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new o.u,this.relativeGroupTransform=new o.u,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new h.o(this,0,0),this._scale=M,this._pivot=A,this._skew=w,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],(0,S.s)(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach((t=>this.addChild(t))),t.parent?.addChild(this)}static mixin(t){Object.defineProperties(B.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=4095&t}get _didChangeId(){return 4095&this._didContainerChangeTick|(4095&this._didViewChangeTick)<<12}addChild(...t){if(this.allowChildren||(0,u.t6)(u.lj,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let e=0;e<t.length;e++)this.addChild(t[e]);return t[0]}const e=t[0],r=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),r&&(r.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,r&&r.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,0!==e._zIndex&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let e=0;e<t.length;e++)this.removeChild(t[e]);return t[0]}const e=t[0],r=this.children.indexOf(e);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,r),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,this.didChange||(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=c.Z.get(T.m,this),this.groupTransform=o.u.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),c.Z.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new o.u),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*a.bO}set angle(t){this.rotation=t*a.Td}get pivot(){return this._pivot===A&&(this._pivot=new h.o(this,0,0)),this._pivot}set pivot(t){this._pivot===A&&(this._pivot=new h.o(this,0,0)),"number"==typeof t?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===w&&(this._skew=new h.o(this,0,0)),this._skew}set skew(t){this._skew===w&&(this._skew=new h.o(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===M&&(this._scale=new h.o(this,1,1)),this._scale}set scale(t){this._scale===M&&(this._scale=new h.o(this,0,0)),"number"==typeof t?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const r=this.getLocalBounds();"object"==typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,r.width),void 0!==e&&this._setHeight(e,r.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set("number"==typeof t.x?t.x:this.position.x,"number"==typeof t.y?t.y:this.position.y),this.scale.set("number"==typeof t.scaleX?t.scaleX||1:this.scale.x,"number"==typeof t.scaleY?t.scaleY||1:this.scale.y),this.rotation="number"==typeof t.rotation?t.rotation:this.rotation,this.skew.set("number"==typeof t.skewX?t.skewX:this.skew.x,"number"==typeof t.skewY?t.skewY:this.skew.y),this.pivot.set("number"==typeof t.pivotX?t.pivotX:this.pivot.x,"number"==typeof t.pivotY?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,r=this._scale,n=this._pivot,i=this._position,s=r._x,o=r._y,a=n._x,h=n._y;e.a=this._cx*s,e.b=this._sx*s,e.c=this._cy*o,e.d=this._sy*o,e.tx=i._x-(a*e.a+h*e.c),e.ty=i._y-(a*e.b+h*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=E,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const e=i.Q.shared.setValue(t??16777215).toBgrNumber();e!==this.localColor&&(this.localColor=e,this._updateFlags|=E,this._onUpdate())}get tint(){return(0,b.D)(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=L,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(t){const e=t?2:0;(2&this.localDisplayStatus)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=R,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(t){const e=t?0:4;(4&this.localDisplayStatus)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=R,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(t){const e=t?1:0;(1&this.localDisplayStatus)!==e&&(this._updateFlags|=R,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;let e;if(this.destroyed=!0,this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),("boolean"==typeof t?t:t?.children)&&e)for(let r=0;r<e.length;++r)e[r].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}B.mixin(p.l),B.mixin(_.Y),B.mixin(C.P),B.mixin(v.D),B.mixin(x.i),B.mixin(m.m),B.mixin(g.t),B.mixin(y.I),B.mixin(s.E),B.mixin(d.b),B.mixin(b.R),B.mixin(f.J)},594:(t,e,r)=>{"use strict";r.d(e,{_:()=>i});var n=r(8507);class i{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}}i.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"customRender"}},3284:(t,e,r)=>{"use strict";r.d(e,{m:()=>o});var n=r(9313),i=r(848),s=r(2437);class o{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new n.u,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new i.L,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let t=0;t<e.length;t++){const r=e[t];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(s.W.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup)return void this.addRenderGroupChild(t.renderGroup);t._onRender&&this.addOnRender(t);const e=t.children;for(let t=0;t<e.length;t++)this.addChild(e[t])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup)return void this._removeRenderGroupChild(t.renderGroup);const e=t.children;for(let t=0;t<e.length;t++)this.removeChild(e[t])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let r=0;r<e.length;r++)this._getChildren(e[r],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const r=t.children;for(let t=0;t<r.length;t++)this._getChildren(r[t],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return 1&this._matrixDirty?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new n.u),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return 2&this._matrixDirty?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new n.u),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(4&this._matrixDirty))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new n.u),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}},1160:(t,e,r)=>{"use strict";r.d(e,{a:()=>l});var n=r(8507),i=r(9313),s=r(8218),o=r(8422),a=r(433);const h=new i.u;class l{constructor(t){this._renderer=t}addRenderGroup(t,e){t.isCachedAsTexture?this._addRenderableCacheAsTexture(t,e):this._addRenderableDirect(t,e)}execute(t){t.isRenderable&&(t.isCachedAsTexture?this._executeCacheAsTexture(t):this._executeDirect(t))}destroy(){this._renderer=null}_addRenderableDirect(t,e){this._renderer.renderPipes.batch.break(e),t._batchableRenderGroup&&(s.Z.return(t._batchableRenderGroup),t._batchableRenderGroup=null),e.add(t)}_addRenderableCacheAsTexture(t,e){const r=t._batchableRenderGroup??(t._batchableRenderGroup=s.Z.get(o.K));r.renderable=t.root,r.transform=t.root.relativeGroupTransform,r.texture=t.texture,r.bounds=t._textureBounds,e.add(t),this._renderer.renderPipes.batch.addToBatch(r,e)}_executeCacheAsTexture(t){if(t.textureNeedsUpdate){t.textureNeedsUpdate=!1;const e=h.identity().translate(-t._textureBounds.x,-t._textureBounds.y);this._renderer.renderTarget.push(t.texture,!0,null,t.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:e,worldColor:4294967295}),(0,a.j)(t,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}t._batchableRenderGroup._batcher.updateElement(t._batchableRenderGroup),t._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(t){this._renderer.globalUniforms.push({worldTransformMatrix:t.inverseParentTextureTransform,worldColor:t.worldColorAlpha}),(0,a.j)(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}l.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"renderGroup"}},779:(t,e,r)=>{"use strict";r.d(e,{b:()=>d});var n=r(8507),i=r(9313),s=r(2437),o=r(9636),a=r(9320),h=r(433),l=r(6584),u=r(8386);const c=new i.u;class d{constructor(t){this._renderer=t}render({container:t,transform:e}){const r=t.parent,n=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;const i=this._renderer;let s=c;e&&(s=s.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));const o=i.renderPipes;this._updateCachedRenderGroups(t.renderGroup,null),this._updateRenderGroups(t.renderGroup),i.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),(0,h.j)(t.renderGroup,o),o.uniformBatch&&o.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(s),t.parent=r,t.renderGroup.renderGroupParent=n}destroy(){this._renderer=null}_updateCachedRenderGroups(t,e){if(t.isCachedAsTexture){if(!t.updateCacheTexture)return;e=t}t._parentCacheAsTextureRenderGroup=e;for(let r=t.renderGroupChildren.length-1;r>=0;r--)this._updateCachedRenderGroups(t.renderGroupChildren[r],e);if(t.invalidateMatrices(),t.isCachedAsTexture){if(t.textureNeedsUpdate){const e=t.root.getLocalBounds();e.ceil();const r=t.texture;t.texture&&s.W.returnTexture(t.texture);const n=this._renderer,i=t.textureOptions.resolution||n.view.resolution,a=t.textureOptions.antialias??n.view.antialias;t.texture=s.W.getOptimalTexture(e.width,e.height,i,a),t._textureBounds||(t._textureBounds=new o.c),t._textureBounds.copyFrom(e),r!==t.texture&&t.renderGroupParent&&(t.renderGroupParent.structureDidChange=!0)}}else t.texture&&(s.W.returnTexture(t.texture),t.texture=null)}_updateRenderGroups(t){const e=this._renderer,r=e.renderPipes;if(t.runOnRender(e),t.instructionSet.renderPipes=r,t.structureDidChange?(0,a.a)(t.childrenRenderablesToUpdate.list,0):(0,u.G)(t,r),(0,l.s8)(t),t.structureDidChange?(t.structureDidChange=!1,this._buildInstructions(t,e)):this._updateRenderables(t),t.childrenRenderablesToUpdate.index=0,e.renderPipes.batch.upload(t.instructionSet),!t.isCachedAsTexture||t.textureNeedsUpdate)for(let e=0;e<t.renderGroupChildren.length;e++)this._updateRenderGroups(t.renderGroupChildren[e])}_updateRenderables(t){const{list:e,index:r}=t.childrenRenderablesToUpdate;for(let n=0;n<r;n++){const r=e[n];r.didViewUpdate&&t.updateRenderable(r)}(0,a.a)(e,r)}_buildInstructions(t,e){const r=t.root,n=t.instructionSet;n.reset();const i=e.renderPipes?e:e.batch.renderer,s=i.renderPipes;s.batch.buildStart(n),s.blendMode.buildStart(),s.colorMask.buildStart(),r.sortableChildren&&r.sortChildren(),r.collectRenderablesWithEffects(n,i,null),s.batch.buildEnd(n),s.blendMode.buildEnd(n)}}d.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem,n.Ag.CanvasSystem],name:"renderGroup"}},9636:(t,e,r)=>{"use strict";r.d(e,{c:()=>o});var n=r(9313),i=r(9252);const s=new n.u;class o{constructor(t=1/0,e=1/0,r=-1/0,n=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=s,this.minX=t,this.minY=e,this.maxX=r,this.maxY=n}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new i.M);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=s,this}set(t,e,r,n){this.minX=t,this.minY=e,this.maxX=r,this.maxY=n}addFrame(t,e,r,n,i){i||(i=this.matrix);const s=i.a,o=i.b,a=i.c,h=i.d,l=i.tx,u=i.ty;let c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=s*t+a*e+l,g=o*t+h*e+u;m<c&&(c=m),g<d&&(d=g),m>p&&(p=m),g>f&&(f=g),m=s*r+a*e+l,g=o*r+h*e+u,m<c&&(c=m),g<d&&(d=g),m>p&&(p=m),g>f&&(f=g),m=s*t+a*n+l,g=o*t+h*n+u,m<c&&(c=m),g<d&&(d=g),m>p&&(p=m),g>f&&(f=g),m=s*r+a*n+l,g=o*r+h*n+u,m<c&&(c=m),g<d&&(d=g),m>p&&(p=m),g>f&&(f=g),this.minX=c,this.minY=d,this.maxX=p,this.maxY=f}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,{a:s,b:o,c:a,d:h,tx:l,ty:u}=t;let c=s*e+a*r+l,d=o*e+h*r+u;this.minX=c,this.minY=d,this.maxX=c,this.maxY=d,c=s*n+a*r+l,d=o*n+h*r+u,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY,c=s*e+a*i+l,d=o*e+h*i+u,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY,c=s*n+a*i+l,d=o*n+h*i+u,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,r,n){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<r&&(this.minY=r),this.maxY>n&&(this.maxY=n),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new o(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;n||(n=this.matrix);const h=n.a,l=n.b,u=n.c,c=n.d,d=n.tx,p=n.ty;for(let n=e;n<r;n+=2){const e=t[n],r=t[n+1],f=h*e+u*r+d,m=l*e+c*r+p;i=f<i?f:i,s=m<s?m:s,o=f>o?f:o,a=m>a?m:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}},9443:(t,e,r)=>{"use strict";r.d(e,{Ek:()=>a,U3:()=>o,fB:()=>s});var n=r(9313),i=r(2208);function s(t,e,r){let s,h;return r.clear(),t.parent?e?s=t.parent.worldTransform:(h=i.u.get().identity(),s=a(t,h)):s=n.u.IDENTITY,o(t,r,s,e),h&&i.u.return(h),r.isValid||r.set(0,0,0,0),r}function o(t,e,r,s){if(!t.visible||!t.measurable)return;let a;s?a=t.worldTransform:(t.updateLocalTransform(),a=i.u.get(),a.appendFrom(t.localTransform,r));const h=e,l=!!t.effects.length;if(l&&(e=i.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{t.bounds&&(e.matrix=a,e.addBounds(t.bounds));for(let r=0;r<t.children.length;r++)o(t.children[r],e,a,s)}if(l){for(let r=0;r<t.effects.length;r++)t.effects[r].addBounds?.(e);h.addBounds(e,n.u.IDENTITY),i.o.return(e)}s||i.u.return(a)}function a(t,e){const r=t.parent;return r&&(a(r,e),r.updateLocalTransform(),e.append(r.localTransform)),e}},7269:(t,e,r)=>{"use strict";r.d(e,{P:()=>h,n:()=>o});var n=r(9313),i=r(268),s=r(2208);function o(t,e,r){return e.clear(),r||(r=n.u.IDENTITY),a(t,e,r,t,!0),e.isValid||e.set(0,0,0,0),e}function a(t,e,r,i,o){let h;if(o)h=s.u.get(),h=r.copyTo(h);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const e=t.localTransform;h=s.u.get(),h.appendFrom(e,r)}const l=e,u=!!t.effects.length;if(u&&(e=s.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,h);else{t.renderPipeId&&(e.matrix=h,e.addBounds(t.bounds));const r=t.children;for(let t=0;t<r.length;t++)a(r[t],e,h,i,!1)}if(u){for(let r=0;r<t.effects.length;r++)t.effects[r].addLocalBounds?.(e,i);l.addBounds(e,n.u.IDENTITY),s.o.return(e)}s.u.return(h)}function h(t,e,r){const n=t.parent;n?n!==e&&(h(n,e,r),n.updateLocalTransform(),r.append(n.localTransform)):(0,i.R)("Item is not inside the root container")}},5462:(t,e,r)=>{"use strict";function n(t,e){e.clear();const r=e.matrix;for(let r=0;r<t.length;r++){const n=t[r];n.globalDisplayStatus<7||(e.matrix=n.worldTransform,e.addBounds(n.bounds))}return e.matrix=r,e}r.d(e,{L:()=>n})},2208:(t,e,r)=>{"use strict";r.d(e,{o:()=>a,u:()=>o});var n=r(9313),i=r(8425),s=r(9636);const o=new i.b(n.u),a=new i.b(s.c)},8636:(t,e,r)=>{"use strict";r.d(e,{b:()=>i});var n=r(4670);const i={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){"boolean"==typeof t&&!1===t?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(!0===t?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){(0,n.t6)("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}}},2094:(t,e,r)=>{"use strict";r.d(e,{l:()=>s});var n=r(9903),i=r(4670);const s={allowChildren:!0,removeChildren(t=0,e){const r=e??this.children.length,i=r-t,s=[];if(i>0&&i<=r){for(let e=r-1;e>=t;e--){const t=this.children[e];t&&(s.push(t),t.parent=null)}(0,n.d)(this.children,t,r);const e=this.renderGroup||this.parentRenderGroup;e&&e.removeChildren(s);for(let t=0;t<s.length;++t)this.emit("childRemoved",s[t],this,t),s[t].emit("removed",this);return s}if(0===i&&0===this.children.length)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||(0,i.t6)(i.lj,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:r}=this;if(e<0||e>r.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${r.length}`);if(t.parent){const r=t.parent.children.indexOf(t);if(t.parent===this&&r===e)return t;-1!==r&&t.parent.children.splice(r,1)}e===r.length?r.push(t):r.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...t){return 1===t.length?this.reparentChildAt(t[0],this.children.length):(t.forEach((t=>this.reparentChildAt(t,this.children.length))),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const r=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const n=this.worldTransform.clone();return n.invert(),r.prepend(n),t.setFromMatrix(r),t}}},6190:(t,e,r)=>{"use strict";r.d(e,{J:()=>n});const n={collectRenderables(t,e,r){this.parentRenderLayer&&this.parentRenderLayer!==r||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,r):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,r))},collectRenderablesSimple(t,e,r){const n=this.children,i=n.length;for(let s=0;s<i;s++)n[s].collectRenderables(t,e,r)},collectRenderablesWithEffects(t,e,r){const{renderPipes:n}=e;for(let e=0;e<this.effects.length;e++){const r=this.effects[e];n[r.pipe].push(r,this,t)}this.collectRenderablesSimple(t,e,r);for(let e=this.effects.length-1;e>=0;e--){const r=this.effects[e];n[r.pipe].pop(r,this,t)}}}},7219:(t,e,r)=>{"use strict";r.d(e,{m:()=>s});var n=r(9049),i=r(7790);const s={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){-1===this.effects.indexOf(t)&&(this.effects.push(t),this.effects.sort(((t,e)=>t.priority-e.priority)),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);-1!==e&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),i.B.returnMaskEffect(e),this._maskEffect=null),null!=t&&(this._maskEffect=i.B.getMaskEffect(t),this.addEffect(this._maskEffect)))},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},get mask(){return this._maskEffect?.mask},set filters(t){!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new n.a),r=t?.length>0,i=r!==e.filters?.length>0;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),i&&(r?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new n.a),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}}},3358:(t,e,r)=>{"use strict";r.d(e,{t:()=>i});var n=r(4670);const i={label:null,get name(){return(0,n.t6)(n.lj,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){(0,n.t6)(n.lj,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const r=this.children;for(let e=0;e<r.length;e++){const n=r[e];if(n.label===t||t instanceof RegExp&&t.test(n.label))return n}if(e)for(let e=0;e<r.length;e++){const n=r[e].getChildByLabel(t,!0);if(n)return n}return null},getChildrenByLabel(t,e=!1,r=[]){const n=this.children;for(let e=0;e<n.length;e++){const i=n[e];(i.label===t||t instanceof RegExp&&t.test(i.label))&&r.push(i)}if(e)for(let e=0;e<n.length;e++)n[e].getChildrenByLabel(t,!0,r);return r}}},3629:(t,e,r)=>{"use strict";r.d(e,{Y:()=>a});var n=r(9313),i=r(9636),s=r(2208);const o=new n.u,a={getFastGlobalBounds(t,e){e||(e=new i.c),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const r=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(r.worldTransform),e},_getGlobalBoundsRecursive(t,e,r){let n=e;if(t&&this.parentRenderLayer!==r)return;if(7!==this.localDisplayStatus||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(n=s.o.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const t=this.bounds;n.addFrame(t.minX,t.minY,t.maxX,t.maxY,this.groupTransform)}const e=this.children;for(let i=0;i<e.length;i++)e[i]._getGlobalBoundsRecursive(t,n,r)}if(i){let t=!1;const r=this.renderGroup||this.parentRenderGroup;for(let e=0;e<this.effects.length;e++)this.effects[e].addBounds&&(t||(t=!0,n.applyMatrix(r.worldTransform)),this.effects[e].addBounds(n,!0));t&&(n.applyMatrix(r.worldTransform.copyTo(o).invert()),e.addBounds(n,this.relativeGroupTransform)),e.addBounds(n),s.o.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),s.o.return(n))}}},198:(t,e,r)=>{"use strict";r.d(e,{D:()=>o,R:()=>a});var n=r(9443),i=r(2208),s=r(753);function o(t){return((255&t)<<16)+(65280&t)+(t>>16&255)}const a={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,r=this.parent;for(;r;)e*=r.alpha,r=r.parent;return e},getGlobalTransform(t,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const r=(0,n.Ek)(this,i.u.get().identity());return t.appendFrom(this.localTransform,r),i.u.return(r),t},getGlobalTint(t){if(t)return this.renderGroup?o(this.renderGroup.worldColor):this.parentRenderGroup?o((0,s.j)(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,r=this.parent;for(;r;)e=(0,s.j)(e,r.localColor),r=r.parent;return o(e)}}},37:(t,e,r)=>{"use strict";r.d(e,{i:()=>l});var n=r(9313),i=r(9636),s=r(9443),o=r(7269),a=r(1761);const h=new n.u,l={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const r=Math.sign(this.scale.x)||1;this.scale.x=0!==e?t/e*r:r},_setHeight(t,e){const r=Math.sign(this.scale.y)||1;this.scale.y=0!==e?t/e*r:r},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new i.c});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),(0,a.l)(this,t),t.didChange&&(0,o.n)(this,t.localBounds,h),t.localBounds},getBounds(t,e){return(0,s.fB)(this,t,e||new i.c)}}},4116:(t,e,r)=>{"use strict";r.d(e,{D:()=>n});const n={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t)return this._onRender&&e?.removeOnRender(this),void(this._onRender=null);this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}}},5713:(t,e,r)=>{"use strict";r.d(e,{I:()=>n});const n={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(i))}};function i(t,e){return t._zIndex-e._zIndex}},1638:(t,e,r)=>{"use strict";r.d(e,{P:()=>s});var n=r(5101),i=r(2208);const s={getGlobalPosition(t=new n.b,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,r=!1){const n=this.getGlobalTransform(i.u.get(),r);return e=n.apply(t,e),i.u.return(n),e},toLocal(t,e,r,n){e&&(t=e.toGlobal(t,r,n));const s=this.getGlobalTransform(i.u.get(),n);return r=s.applyInverse(t,r),i.u.return(s),r}}},6216:(t,e,r)=>{"use strict";function n(t,e,r={}){for(const n in e)r[n]||void 0===e[n]||(t[n]=e[n])}r.d(e,{s:()=>n})},1761:(t,e,r)=>{"use strict";function n(t,e){const r=t.children;for(let t=0;t<r.length;t++){const i=r[t],s=i.uid,o=(65535&i._didViewChangeTick)<<16|65535&i._didContainerChangeTick,a=e.index;e.data[a]===s&&e.data[a+1]===o||(e.data[e.index]=s,e.data[e.index+1]=o,e.didChange=!0),e.index=a+2,i.children.length&&n(i,e)}return e.didChange}r.d(e,{l:()=>n})},9320:(t,e,r)=>{"use strict";function n(t,e){e||(e=0);for(let r=e;r<t.length&&t[r];r++)t[r]=null}r.d(e,{a:()=>n})},2698:(t,e,r)=>{"use strict";function n(t){const e={};for(const r in t)void 0!==t[r]&&(e[r]=t[r]);return e}r.d(e,{S:()=>n})},433:(t,e,r)=>{"use strict";function n(t,e){const r=t.instructionSet,n=r.instructions;for(let t=0;t<r.instructionSize;t++){const r=n[t];e[r.renderPipeId].execute(r)}}r.d(e,{j:()=>n})},753:(t,e,r)=>{"use strict";r.d(e,{j:()=>s});var n=r(4676);const i=16777215;function s(t,e){return t===i?e:e===i?t:(0,n.u)(t,e)}},4676:(t,e,r)=>{"use strict";function n(t,e){return 16777215!==t&&e?16777215!==e&&t?((t>>16&255)*(e>>16&255)/255<<16)+((t>>8&255)*(e>>8&255)/255<<8)+((255&t)*(255&e)/255|0):t:e}r.d(e,{u:()=>n})},6584:(t,e,r)=>{"use strict";r.d(e,{T1:()=>l,e9:()=>u,s8:()=>h});var n=r(4980),i=r(9320),s=r(753);const o=new n.mc,a=n.fR|n.ig|n.u;function h(t,e=!1){l(t);const r=t.childrenToUpdate,n=t.updateTick++;for(const e in r){const s=Number(e),o=r[e],a=o.list,h=o.index;for(let e=0;e<h;e++){const r=a[e];r.parentRenderGroup===t&&r.relativeRenderGroupDepth===s&&u(r,n,0)}(0,i.a)(a,h),o.index=0}if(e)for(let r=0;r<t.renderGroupChildren.length;r++)h(t.renderGroupChildren[r],e)}function l(t){const e=t.root;let r;if(t.renderGroupParent){const n=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,n.worldTransform),t.worldColor=(0,s.j)(e.groupColor,n.worldColor),r=e.groupAlpha*n.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,r=e.localAlpha;r=r<0?0:r>1?1:r,t.worldAlpha=r,t.worldColorAlpha=t.worldColor+(255*r<<24)}function u(t,e,r){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;const n=t.localTransform;t.updateLocalTransform();const i=t.parent;if(i&&!i.renderGroup?(r|=t._updateFlags,t.relativeGroupTransform.appendFrom(n,i.relativeGroupTransform),r&a&&c(t,i,r)):(r=t._updateFlags,t.relativeGroupTransform.copyFrom(n),r&a&&c(t,o,r)),!t.renderGroup){const n=t.children,i=n.length;for(let t=0;t<i;t++)u(n[t],e,r);const s=t.parentRenderGroup,o=t;o.renderPipeId&&!s.structureDidChange&&s.updateRenderable(o)}}function c(t,e,r){if(r&n.ig){t.groupColor=(0,s.j)(t.localColor,e.groupColor);let r=t.localAlpha*e.groupAlpha;r=r<0?0:r>1?1:r,t.groupAlpha=r,t.groupColorAlpha=t.groupColor+(255*r<<24)}r&n.u&&(t.groupBlendMode="inherit"===t.localBlendMode?e.groupBlendMode:t.localBlendMode),r&n.fR&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}},8386:(t,e,r)=>{"use strict";function n(t,e){const{list:r,index:n}=t.childrenRenderablesToUpdate;let i=!1;for(let t=0;t<n;t++){const n=r[t];if(i=e[n.renderPipeId].validateRenderable(n),i)break}return t.structureDidChange=i,i}r.d(e,{G:()=>n})},7326:(t,e,r)=>{"use strict";r.d(e,{k:()=>f});var n=r(8507),i=r(9313),s=r(9271),o=r(8587),a=r(4459),h=r(4e3),l=r(2067),u=r(6665),c=r(6040),d=r(8475),p=r(9921);class f{init(){const t=new p.k({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new i.u,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),e=(0,s.a)(),r=(0,o.I)({name:"graphics",bits:[a.a,(0,h.P)(e),l.mA,u.m]});this.shader=new d.M({glProgram:r,resources:{localUniforms:t,batchSamplers:(0,c.n)(e)}})}execute(t,e){const r=e.context,n=r.customShader||this.shader,i=t.renderer,s=i.graphicsContext,{batcher:o,instructions:a}=s.getContextRenderData(r);n.groups[0]=i.globalUniforms.bindGroup,i.state.set(t.state),i.shader.bind(n),i.geometry.bind(o.geometry,n.glProgram);const h=a.instructions;for(let t=0;t<a.instructionSize;t++){const e=h[t];if(e.size){for(let t=0;t<e.textures.count;t++)i.texture.bind(e.textures.textures[t],t);i.geometry.draw(e.topology,e.size,e.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}f.extension={type:[n.Ag.WebGLPipesAdaptor],name:"graphics"}},7858:(t,e,r)=>{"use strict";r.d(e,{r:()=>f});var n=r(8507),i=r(9313),s=r(9271),o=r(341),a=r(8587),h=r(4459),l=r(4e3),u=r(2067),c=r(6665),d=r(8475),p=r(9921);class f{init(){const t=new p.k({uTransformMatrix:{value:new i.u,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),e=(0,a.v)({name:"graphics",bits:[h.F,(0,l._)((0,s.a)()),u._Q,c.b]});this.shader=new d.M({gpuProgram:e,resources:{localUniforms:t}})}execute(t,e){const r=e.context,n=r.customShader||this.shader,i=t.renderer,s=i.graphicsContext,{batcher:a,instructions:h}=s.getContextRenderData(r),l=i.encoder;l.setGeometry(a.geometry,n.gpuProgram);const u=i.globalUniforms.bindGroup;l.setBindGroup(0,u,n.gpuProgram);const c=i.renderPipes.uniformBatch.getUniformBindGroup(n.resources.localUniforms,!0);l.setBindGroup(2,c,n.gpuProgram);const d=h.instructions;let p=null;for(let e=0;e<h.instructionSize;e++){const r=d[e];if(r.topology!==p&&(p=r.topology,l.setPipelineFromGeometryProgramAndState(a.geometry,n.gpuProgram,t.state,r.topology)),n.groups[1]=r.bindGroup,!r.gpuBindGroup){const t=r.textures;r.bindGroup=(0,o.w)(t.textures,t.count),r.gpuBindGroup=i.bindGroup.getBindGroup(r.bindGroup,n.gpuProgram,1)}l.setBindGroup(1,r.bindGroup,n.gpuProgram),l.renderPassEncoder.drawIndexed(r.size,1,r.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}f.extension={type:[n.Ag.WebGPUPipesAdaptor],name:"graphics"}},2760:(t,e,r)=>{"use strict";function n(t,e,r,n){r[n++]=(t>>16&255)/255,r[n++]=(t>>8&255)/255,r[n++]=(255&t)/255,r[n++]=e}function i(t,e,r){const n=(t>>24&255)/255;e[r++]=(255&t)/255*n,e[r++]=(t>>8&255)/255*n,e[r++]=(t>>16&255)/255*n,e[r++]=n}r.d(e,{$:()=>n,V:()=>i})},6954:(t,e,r)=>{"use strict";r.d(e,{G:()=>o});var n=r(9313),i=r(4676);const s=new n.u;class o{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|65280&t|(255&t)<<16,r=this.renderable;return r?(0,i.u)(e,r.groupColor)+(this.alpha*r.groupAlpha*255<<24):e+(255*this.alpha<<24)}get transform(){return this.renderable?.groupTransform||s}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}},9408:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(4670),i=r(4985),s=r(5801);class o extends i.l{constructor(t){t instanceof s.T&&(t={context:t});const{context:e,roundPixels:r,...n}=t||{};super({label:"Graphics",...n}),this.renderPipeId="graphics",this._context=e||(this._ownedContext=new s.T),this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=r??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):!0!==t&&!0!==t?.context||this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new o(this._context.clone()):(this._ownedContext=null,new o(this._context))}lineStyle(t,e,r){(0,n.t6)(n.lj,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const i={};return t&&(i.width=t),e&&(i.color=e),r&&(i.alpha=r),this.context.strokeStyle=i,this}beginFill(t,e){(0,n.t6)(n.lj,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const r={};return void 0!==t&&(r.color=t),void 0!==e&&(r.alpha=e),this.context.fillStyle=r,this}endFill(){(0,n.t6)(n.lj,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return t.width===s.T.defaultStrokeStyle.width&&t.color===s.T.defaultStrokeStyle.color&&t.alpha===s.T.defaultStrokeStyle.alpha||this.context.stroke(),this}drawCircle(...t){return(0,n.t6)(n.lj,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return(0,n.t6)(n.lj,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return(0,n.t6)(n.lj,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return(0,n.t6)(n.lj,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return(0,n.t6)(n.lj,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return(0,n.t6)(n.lj,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}},5801:(t,e,r)=>{"use strict";r.d(e,{T:()=>_});var n=r(4486),i=r(2577),s=r(9313),o=r(5101),a=r(4503),h=r(133),l=r(4670),u=r(9636),c=r(7571),d=r(110),p=r(990);const f=new o.b,m=new s.u,g=class t extends n.A{constructor(){super(...arguments),this.uid=(0,h.L)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new c.n,this._transform=new s.u,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new u.c,this._boundsDirty=!0}clone(){const e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=(0,p.w)(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=(0,p.T)(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=(0,p.w)(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=(0,p.w)(e,t.defaultStrokeStyle),this}texture(t,e,r,n,s,o){return this.instructions.push({action:"texture",data:{image:t,dx:r||0,dy:n||0,dw:s||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?i.Q.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new c.n,this}fill(e,r){let n;const i=this.instructions[this.instructions.length-1];return n=0===this._tick&&i&&"stroke"===i.action?i.data.path:this._activePath.clone(),n?(null!=e&&(void 0!==r&&"number"==typeof e&&((0,l.t6)(l.lj,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:r}),this._fillStyle=(0,p.w)(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(o.b.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let r;const n=this.instructions[this.instructions.length-1];return r=0===this._tick&&n&&"fill"===n.action?n.data.path:this._activePath.clone(),r?(null!=e&&(this._strokeStyle=(0,p.T)(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],r=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(!e.data.hole){e.data.hole=r;break}e.data.hole.addPath(r)}}return this._initNextPathLocation(),this}arc(t,e,r,n,i,s){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,r,n,i,s),this}arcTo(t,e,r,n,i){this._tick++;const s=this._transform;return this._activePath.arcTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty,s.a*r+s.c*n+s.tx,s.b*r+s.d*n+s.ty,i),this}arcToSvg(t,e,r,n,i,s,o){this._tick++;const a=this._transform;return this._activePath.arcToSvg(t,e,r,n,i,a.a*s+a.c*o+a.tx,a.b*s+a.d*o+a.ty),this}bezierCurveTo(t,e,r,n,i,s,o){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*r+a.c*n+a.tx,a.b*r+a.d*n+a.ty,a.a*i+a.c*s+a.tx,a.b*i+a.d*s+a.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,r,n){return this._tick++,this._activePath.ellipse(t,e,r,n,this._transform.clone()),this}circle(t,e,r){return this._tick++,this._activePath.circle(t,e,r,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const r=this._transform;return this._activePath.lineTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty),this}moveTo(t,e){this._tick++;const r=this._transform,n=this._activePath.instructions,i=r.a*t+r.c*e+r.tx,s=r.b*t+r.d*e+r.ty;return 1===n.length&&"moveTo"===n[0].action?(n[0].data[0]=i,n[0].data[1]=s,this):(this._activePath.moveTo(i,s),this)}quadraticCurveTo(t,e,r,n,i){this._tick++;const s=this._transform;return this._activePath.quadraticCurveTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty,s.a*r+s.c*n+s.tx,s.b*r+s.d*n+s.ty,i),this}rect(t,e,r,n){return this._tick++,this._activePath.rect(t,e,r,n,this._transform.clone()),this}roundRect(t,e,r,n,i){return this._tick++,this._activePath.roundRect(t,e,r,n,i,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,r,n,i=0,s){return this._tick++,this._activePath.regularPoly(t,e,r,n,i,s),this}roundPoly(t,e,r,n,i,s){return this._tick++,this._activePath.roundPoly(t,e,r,n,i,s),this}roundShape(t,e,r,n){return this._tick++,this._activePath.roundShape(t,e,r,n),this}filletRect(t,e,r,n,i){return this._tick++,this._activePath.filletRect(t,e,r,n,i),this}chamferRect(t,e,r,n,i,s){return this._tick++,this._activePath.chamferRect(t,e,r,n,i,s),this}star(t,e,r,n,i=0,s=0){return this._tick++,this._activePath.star(t,e,r,n,i,s,this._transform.clone()),this}svg(t){return this._tick++,(0,d.u)(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,r,n,i,o){return t instanceof s.u?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,r,n,i,o),this)}transform(t,e,r,n,i,o){return t instanceof s.u?(this._transform.append(t),this):(m.set(t,e,r,n,i,o),this._transform.append(m),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const r=this.instructions[e],n=r.action;if("fill"===n){const e=r.data;t.addBounds(e.path.bounds)}else if("texture"===n){const e=r.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===n){const e=r.data,n=e.style.alignment,i=e.style.width*(1-n),s=e.path.bounds;t.addFrame(s.minX-i,s.minY-i,s.maxX+i,s.maxY+i)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let r=!1;for(let n=0;n<e.length;n++){const i=e[n],s=i.data,o=s.path;if(!i.action||!o)continue;const a=s.style,h=o.shapePath.shapePrimitives;for(let e=0;e<h.length;e++){const n=h[e].shape;if(!a||!n)continue;const o=h[e].transform,l=o?o.applyInverse(t,f):t;if("fill"===i.action)r=n.contains(l.x,l.y);else{const t=a;r=n.strokeContains(l.x,l.y,t.width,t.alignment)}const u=s.hole;if(u){const t=u.shapePath?.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(l.x,l.y)&&(r=!1)}if(r)return!0}}return r}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};g.defaultFillStyle={color:16777215,alpha:1,texture:a.g.WHITE,matrix:null,fill:null},g.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:a.g.WHITE,matrix:null,fill:null,pixelLine:!1};let _=g},378:(t,e,r)=>{"use strict";r.d(e,{$i:()=>c,GH:()=>p,HW:()=>u});var n=r(8507),i=r(341),s=r(6987),o=r(848),a=r(4670),h=r(8218),l=r(6668);class u{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class c{constructor(){this.batcher=new s.J,this.instructions=new o.L}init(){this.instructions.reset()}get geometry(){return(0,a.t6)(a.Ek,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const d=class t{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){t.defaultOptions.bezierSmoothness=e?.bezierSmoothness??t.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),(0,l.M)(t,e);const r=t.batchMode;t.customShader||"no-batch"===r?e.isBatchable=!1:"auto"===r&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=h.Z.get(c),{batches:r,geometryData:n}=this._gpuContextHash[t.uid],s=n.vertices.length,o=n.indices.length;for(let t=0;t<r.length;t++)r[t].applyTransform=!1;const a=e.batcher;a.ensureAttributeBuffer(s),a.ensureIndexBuffer(o),a.begin();for(let t=0;t<r.length;t++){const e=r[t];a.add(e)}a.finish(e.instructions);const l=a.geometry;l.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),l.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const u=a.batches;for(let t=0;t<u.length;t++){const e=u[t];e.bindGroup=(0,i.w)(e.textures.textures,e.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new u;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(h.Z.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach((t=>{h.Z.return(t)}))}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};d.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem,n.Ag.CanvasSystem],name:"graphicsContext"},d.defaultOptions={bezierSmoothness:.5};let p=d},9260:(t,e,r)=>{"use strict";r.d(e,{S:()=>h});var n=r(8507),i=r(7547),s=r(8218),o=r(2760),a=r(6954);class h{constructor(t,e){this.state=i.U.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=t,this._adaptor=e,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(t){const e=t.context,r=!!this._graphicsBatchesHash[t.uid],n=this.renderer.graphicsContext.updateGpuContext(e);return!(!n.isBatchable&&r===n.isBatchable)}addRenderable(t,e){const r=this.renderer.graphicsContext.updateGpuContext(t.context);t.didViewUpdate&&this._rebuild(t),r.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){const e=this._graphicsBatchesHash[t.uid];if(e)for(let t=0;t<e.length;t++){const r=e[t];r._batcher.updateElement(r)}}destroyRenderable(t){this._graphicsBatchesHash[t.uid]&&this._removeBatchForRenderable(t.uid),t.off("destroyed",this._destroyRenderableBound)}execute(t){if(!t.isRenderable)return;const e=this.renderer,r=t.context;if(!e.graphicsContext.getGpuContext(r).batches.length)return;const n=r.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;const i=n.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=e._roundPixels|t._roundPixels,(0,o.V)(t.groupColorAlpha,i.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){const e=!!this._graphicsBatchesHash[t.uid],r=this.renderer.graphicsContext.updateGpuContext(t.context);e&&this._removeBatchForRenderable(t.uid),r.isBatchable&&this._initBatchesForRenderable(t),t.batched=r.isBatchable}_addToBatcher(t,e){const r=this.renderer.renderPipes.batch,n=this._getBatchesForRenderable(t);for(let t=0;t<n.length;t++){const i=n[t];r.addToBatch(i,e)}}_getBatchesForRenderable(t){return this._graphicsBatchesHash[t.uid]||this._initBatchesForRenderable(t)}_initBatchesForRenderable(t){const e=t.context,r=this.renderer.graphicsContext.getGpuContext(e),n=this.renderer._roundPixels|t._roundPixels,i=r.batches.map((e=>{const r=s.Z.get(a.G);return e.copyTo(r),r.renderable=t,r.roundPixels=n,r}));return void 0===this._graphicsBatchesHash[t.uid]&&t.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[t.uid]=i,i}_removeBatchForRenderable(t){this._graphicsBatchesHash[t].forEach((t=>{s.Z.return(t)})),this._graphicsBatchesHash[t]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(const t in this._graphicsBatchesHash)this._removeBatchForRenderable(t);this._graphicsBatchesHash=null}}h.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"graphics"}},593:(t,e,r)=>{"use strict";r.d(e,{M:()=>u});var n=r(378);const i=8,s=1.1920929e-7,o=1,a=.01,h=0,l=0;function u(t,e,r,i,s,a,h,l,u,d){const p=Math.min(.99,Math.max(0,d??n.GH.defaultOptions.bezierSmoothness));let f=(o-p)/1;return f*=f,function(t,e,r,n,i,s,o,a,h,l){c(t,e,r,n,i,s,o,a,h,l,0),h.push(o,a)}(e,r,i,s,a,h,l,u,t,f),t}function c(t,e,r,n,o,u,d,p,f,m,g){if(g>i)return;const _=Math.PI,b=(t+r)/2,x=(e+n)/2,v=(r+o)/2,y=(n+u)/2,C=(o+d)/2,T=(u+p)/2,S=(b+v)/2,w=(x+y)/2,A=(v+C)/2,M=(y+T)/2,E=(S+A)/2,L=(w+M)/2;if(g>0){let i=d-t,c=p-e;const g=Math.abs((r-d)*c-(n-p)*i),b=Math.abs((o-d)*c-(u-p)*i);let x,v;if(g>s&&b>s){if((g+b)*(g+b)<=m*(i*i+c*c)){if(h<a)return void f.push(E,L);const i=Math.atan2(u-n,o-r);if(x=Math.abs(i-Math.atan2(n-e,r-t)),v=Math.abs(Math.atan2(p-u,d-o)-i),x>=_&&(x=2*_-x),v>=_&&(v=2*_-v),x+v<h)return void f.push(E,L);if(0!==l){if(x>l)return void f.push(r,n);if(v>l)return void f.push(o,u)}}}else if(g>s){if(g*g<=m*(i*i+c*c)){if(h<a)return void f.push(E,L);if(x=Math.abs(Math.atan2(u-n,o-r)-Math.atan2(n-e,r-t)),x>=_&&(x=2*_-x),x<h)return f.push(r,n),void f.push(o,u);if(0!==l&&x>l)return void f.push(r,n)}}else if(b>s){if(b*b<=m*(i*i+c*c)){if(h<a)return void f.push(E,L);if(x=Math.abs(Math.atan2(p-u,d-o)-Math.atan2(u-n,o-r)),x>=_&&(x=2*_-x),x<h)return f.push(r,n),void f.push(o,u);if(0!==l&&x>l)return void f.push(o,u)}}else if(i=E-(t+d)/2,c=L-(e+p)/2,i*i+c*c<=m)return void f.push(E,L)}c(t,e,b,x,S,w,E,L,f,m,g+1),c(E,L,A,M,C,T,d,p,f,m,g+1)}},7986:(t,e,r)=>{"use strict";r.d(e,{T:()=>l});var n=r(378);const i=8,s=1.1920929e-7,o=1,a=.01,h=0;function l(t,e,r,i,s,a,h,l){const c=Math.min(.99,Math.max(0,l??n.GH.defaultOptions.bezierSmoothness));let d=(o-c)/1;return d*=d,function(t,e,r,n,i,s,o,a){u(o,t,e,r,n,i,s,a,0),o.push(i,s)}(e,r,i,s,a,h,t,d),t}function u(t,e,r,n,o,l,c,d,p){if(p>i)return;const f=Math.PI,m=(e+n)/2,g=(r+o)/2,_=(n+l)/2,b=(o+c)/2,x=(m+_)/2,v=(g+b)/2;let y=l-e,C=c-r;const T=Math.abs((n-l)*C-(o-c)*y);if(T>s){if(T*T<=d*(y*y+C*C)){if(h<a)return void t.push(x,v);let i=Math.abs(Math.atan2(c-o,l-n)-Math.atan2(o-r,n-e));if(i>=f&&(i=2*f-i),i<h)return void t.push(x,v)}}else if(y=x-(e+l)/2,C=v-(r+c)/2,y*y+C*C<=d)return void t.push(x,v);u(t,e,r,m,g,x,v,d,p+1),u(t,x,v,_,b,l,c,d,p+1)}},4026:(t,e,r)=>{"use strict";function n(t,e,r,n,i,s,o,a){let h=Math.abs(i-s);(!o&&i>s||o&&s>i)&&(h=2*Math.PI-h),a||(a=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(h/Math.PI))));let l=h/(a=Math.max(a,3)),u=i;l*=o?-1:1;for(let i=0;i<a+1;i++){const i=e+Math.cos(u)*n,s=r+Math.sin(u)*n;t.push(i,s),u+=l}}r.d(e,{t:()=>n})},9513:(t,e,r)=>{"use strict";r.d(e,{I:()=>i});var n=r(4026);function i(t,e,r,i,s,o){const a=t[t.length-2],h=t[t.length-1]-r,l=a-e,u=s-r,c=i-e,d=Math.abs(h*c-l*u);if(d<1e-8||0===o)return void(t[t.length-2]===e&&t[t.length-1]===r||t.push(e,r));const p=h*h+l*l,f=u*u+c*c,m=h*u+l*c,g=o*Math.sqrt(p)/d,_=o*Math.sqrt(f)/d,b=g*m/p,x=_*m/f,v=g*c+_*l,y=g*u+_*h,C=l*(_+b),T=h*(_+b),S=c*(g+x),w=u*(g+x),A=Math.atan2(T-y,C-v),M=Math.atan2(w-y,S-v);(0,n.t)(t,v+e,y+r,o,A,M,l*u>c*h)}},269:(t,e,r)=>{"use strict";r.d(e,{W:()=>u});var n=r(593);const i=2*Math.PI,s={centerX:0,centerY:0,ang1:0,ang2:0},o=({x:t,y:e},r,n,i,s,o,a,h)=>{const l=i*(t*=r)-s*(e*=n),u=s*t+i*e;return h.x=l+o,h.y=u+a,h};function a(t,e){const r=-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),n=1.5707963267948966===e?.551915024494:r,i=Math.cos(t),s=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:i-s*n,y:s+i*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]}const h=(t,e,r,n)=>{let i=t*r+e*n;return i>1&&(i=1),i<-1&&(i=-1),(t*n-e*r<0?-1:1)*Math.acos(i)},l=(t,e,r,n,s,o,a,l,u,c,d,p,f)=>{const m=Math.pow(s,2),g=Math.pow(o,2),_=Math.pow(d,2),b=Math.pow(p,2);let x=m*g-m*b-g*_;x<0&&(x=0),x/=m*b+g*_,x=Math.sqrt(x)*(a===l?-1:1);const v=x*s/o*p,y=x*-o/s*d,C=c*v-u*y+(t+r)/2,T=u*v+c*y+(e+n)/2,S=(d-v)/s,w=(p-y)/o,A=(-d-v)/s,M=(-p-y)/o,E=h(1,0,S,w);let L=h(S,w,A,M);0===l&&L>0&&(L-=i),1===l&&L<0&&(L+=i),f.centerX=C,f.centerY=T,f.ang1=E,f.ang2=L};function u(t,e,r,h,u,c,d,p=0,f=0,m=0){if(0===c||0===d)return;const g=Math.sin(p*i/360),_=Math.cos(p*i/360),b=_*(e-h)/2+g*(r-u)/2,x=-g*(e-h)/2+_*(r-u)/2;if(0===b&&0===x)return;c=Math.abs(c),d=Math.abs(d);const v=Math.pow(b,2)/Math.pow(c,2)+Math.pow(x,2)/Math.pow(d,2);v>1&&(c*=Math.sqrt(v),d*=Math.sqrt(v)),l(e,r,h,u,c,d,f,m,g,_,b,x,s);let{ang1:y,ang2:C}=s;const{centerX:T,centerY:S}=s;let w=Math.abs(C)/(i/4);Math.abs(1-w)<1e-7&&(w=1);const A=Math.max(Math.ceil(w),1);C/=A;let M=t[t.length-2],E=t[t.length-1];const L={x:0,y:0};for(let e=0;e<A;e++){const e=a(y,C),{x:r,y:i}=o(e[0],c,d,_,g,T,S,L),{x:s,y:h}=o(e[1],c,d,_,g,T,S,L),{x:l,y:u}=o(e[2],c,d,_,g,T,S,L);(0,n.M)(t,M,E,r,i,s,h,l,u),M=l,E=u,y+=C}}},382:(t,e,r)=>{"use strict";r.d(e,{$S:()=>i,RH:()=>n,nZ:()=>s});const n={extension:{type:r(8507).Ag.ShapeBuilder,name:"circle"},build(t,e){let r,n,i,s,o,a;if("circle"===t.type){const e=t;r=e.x,n=e.y,o=a=e.radius,i=s=0}else if("ellipse"===t.type){const e=t;r=e.x,n=e.y,o=e.halfWidth,a=e.halfHeight,i=s=0}else{const e=t,h=e.width/2,l=e.height/2;r=e.x+h,n=e.y+l,o=a=Math.max(0,Math.min(e.radius,Math.min(h,l))),i=h-o,s=l-a}if(!(o>=0&&a>=0&&i>=0&&s>=0))return e;const h=Math.ceil(2.3*Math.sqrt(o+a)),l=8*h+(i?4:0)+(s?4:0);if(0===l)return e;if(0===h)return e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s,e;let u=0,c=4*h+(i?2:0)+2,d=c,p=l,f=i+o,m=s,g=r+f,_=r-f,b=n+m;if(e[u++]=g,e[u++]=b,e[--c]=b,e[--c]=_,s){const t=n-m;e[d++]=_,e[d++]=t,e[--p]=t,e[--p]=g}for(let t=1;t<h;t++){const l=Math.PI/2*(t/h),f=i+Math.cos(l)*o,m=s+Math.sin(l)*a,g=r+f,_=r-f,b=n+m,x=n-m;e[u++]=g,e[u++]=b,e[--c]=b,e[--c]=_,e[d++]=_,e[d++]=x,e[--p]=x,e[--p]=g}f=i,m=s+a,g=r+f,_=r-f,b=n+m;const x=n-m;return e[u++]=g,e[u++]=b,e[--p]=x,e[--p]=g,i&&(e[u++]=_,e[u++]=b,e[--p]=x,e[--p]=_),e},triangulate(t,e,r,n,i,s){if(0===t.length)return;let o=0,a=0;for(let e=0;e<t.length;e+=2)o+=t[e],a+=t[e+1];o/=t.length/2,a/=t.length/2;let h=n;e[h*r]=o,e[h*r+1]=a;const l=h++;for(let n=0;n<t.length;n+=2)e[h*r]=t[n],e[h*r+1]=t[n+1],n>0&&(i[s++]=h,i[s++]=l,i[s++]=h-1),h++;i[s++]=l+1,i[s++]=l,i[s++]=h-1}},i={...n,extension:{...n.extension,name:"ellipse"}},s={...n,extension:{...n.extension,name:"roundedRectangle"}}},4724:(t,e,r)=>{"use strict";r.d(e,{h:()=>h});var n=r(5101),i=r(4928),s=r(4549);function o(t,e,r,n,i,s,o,a){let h,l;o?(h=n,l=-r):(h=-n,l=r);const u=t-r*i+h,c=e-n*i+l,d=t+r*s+h,p=e+n*s+l;return a.push(u,c),a.push(d,p),2}function a(t,e,r,n,i,s,o,a){const h=r-t,l=n-e;let u=Math.atan2(h,l),c=Math.atan2(i-t,s-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);let d=u;const p=c-u,f=Math.abs(p),m=Math.sqrt(h*h+l*l),g=1+(15*f*Math.sqrt(m)/Math.PI|0),_=p/g;if(d+=_,a){o.push(t,e),o.push(r,n);for(let r=1,n=d;r<g;r++,n+=_)o.push(t,e),o.push(t+Math.sin(n)*m,e+Math.cos(n)*m);o.push(t,e),o.push(i,s)}else{o.push(r,n),o.push(t,e);for(let r=1,n=d;r<g;r++,n+=_)o.push(t+Math.sin(n)*m,e+Math.cos(n)*m),o.push(t,e);o.push(i,s),o.push(t,e)}return 2*g}function h(t,e,r,h,l,u){const c=i.B;if(0===t.length)return;const d=e;let p=d.alignment;if(.5!==e.alignment){let e=(0,s.v)(t);r&&(e*=-1),p=(p-.5)*e+.5}const f=new n.b(t[0],t[1]),m=new n.b(t[t.length-2],t[t.length-1]),g=h,_=Math.abs(f.x-m.x)<c&&Math.abs(f.y-m.y)<c;if(g){t=t.slice(),_&&(t.pop(),t.pop(),m.set(t[t.length-2],t[t.length-1]));const e=.5*(f.x+m.x),r=.5*(m.y+f.y);t.unshift(e,r),t.push(e,r)}const b=l,x=t.length/2;let v=t.length;const y=b.length/2,C=d.width/2,T=C*C,S=d.miterLimit*d.miterLimit;let w=t[0],A=t[1],M=t[2],E=t[3],L=0,R=0,P=-(A-E),B=w-M,O=0,I=0,D=Math.sqrt(P*P+B*B);P/=D,B/=D,P*=C,B*=C;const F=2*(1-p),G=2*p;g||("round"===d.cap?v+=a(w-P*(F-G)*.5,A-B*(F-G)*.5,w-P*F,A-B*F,w+P*G,A+B*G,b,!0)+2:"square"===d.cap&&(v+=o(w,A,P,B,F,G,!0,b))),b.push(w-P*F,A-B*F),b.push(w+P*G,A+B*G);for(let e=1;e<x-1;++e){w=t[2*(e-1)],A=t[2*(e-1)+1],M=t[2*e],E=t[2*e+1],L=t[2*(e+1)],R=t[2*(e+1)+1],P=-(A-E),B=w-M,D=Math.sqrt(P*P+B*B),P/=D,B/=D,P*=C,B*=C,O=-(E-R),I=M-L,D=Math.sqrt(O*O+I*I),O/=D,I/=D,O*=C,I*=C;const r=M-w,n=A-E,i=M-L,s=R-E,o=r*i+n*s,h=n*i-s*r,l=h<0;if(Math.abs(h)<.001*Math.abs(o)){b.push(M-P*F,E-B*F),b.push(M+P*G,E+B*G),o>=0&&("round"===d.join?v+=a(M,E,M-P*F,E-B*F,M-O*F,E-I*F,b,!1)+4:v+=2,b.push(M-O*G,E-I*G),b.push(M+O*F,E+I*F));continue}const u=(-P+w)*(-B+E)-(-P+M)*(-B+A),c=(-O+L)*(-I+E)-(-O+M)*(-I+R),p=(r*c-i*u)/h,f=(s*u-n*c)/h,m=(p-M)*(p-M)+(f-E)*(f-E),g=M+(p-M)*F,_=E+(f-E)*F,x=M-(p-M)*G,y=E-(f-E)*G,k=l?F:G;m<=Math.min(r*r+n*n,i*i+s*s)+k*k*T?"bevel"===d.join||m/T>S?(l?(b.push(g,_),b.push(M+P*G,E+B*G),b.push(g,_),b.push(M+O*G,E+I*G)):(b.push(M-P*F,E-B*F),b.push(x,y),b.push(M-O*F,E-I*F),b.push(x,y)),v+=2):"round"===d.join?l?(b.push(g,_),b.push(M+P*G,E+B*G),v+=a(M,E,M+P*G,E+B*G,M+O*G,E+I*G,b,!0)+4,b.push(g,_),b.push(M+O*G,E+I*G)):(b.push(M-P*F,E-B*F),b.push(x,y),v+=a(M,E,M-P*F,E-B*F,M-O*F,E-I*F,b,!1)+4,b.push(M-O*F,E-I*F),b.push(x,y)):(b.push(g,_),b.push(x,y)):(b.push(M-P*F,E-B*F),b.push(M+P*G,E+B*G),"round"===d.join?v+=l?a(M,E,M+P*G,E+B*G,M+O*G,E+I*G,b,!0)+2:a(M,E,M-P*F,E-B*F,M-O*F,E-I*F,b,!1)+2:"miter"===d.join&&m/T<=S&&(l?(b.push(x,y),b.push(x,y)):(b.push(g,_),b.push(g,_)),v+=2),b.push(M-O*F,E-I*F),b.push(M+O*G,E+I*G),v+=2)}w=t[2*(x-2)],A=t[2*(x-2)+1],M=t[2*(x-1)],E=t[2*(x-1)+1],P=-(A-E),B=w-M,D=Math.sqrt(P*P+B*B),P/=D,B/=D,P*=C,B*=C,b.push(M-P*F,E-B*F),b.push(M+P*G,E+B*G),g||("round"===d.cap?v+=a(M-P*(F-G)*.5,E-B*(F-G)*.5,M-P*F,E-B*F,M+P*G,E+B*G,b,!1)+2:"square"===d.cap&&(v+=o(M,E,P,B,F,G,!1,b)));const k=i.I*i.I;for(let t=y;t<v+y-2;++t)w=b[2*t],A=b[2*t+1],M=b[2*(t+1)],E=b[2*(t+1)+1],L=b[2*(t+2)],R=b[2*(t+2)+1],Math.abs(w*(E-R)+M*(R-A)+L*(A-E))<k||u.push(t,t+1,t+2)}},5236:(t,e,r)=>{"use strict";r.d(e,{D:()=>i});var n=r(4928);function i(t,e,r,i){const s=n.B;if(0===t.length)return;const o=t[0],a=t[1],h=t[t.length-2],l=t[t.length-1],u=e||Math.abs(o-h)<s&&Math.abs(a-l)<s,c=r,d=t.length/2,p=c.length/2;for(let e=0;e<d;e++)c.push(t[2*e]),c.push(t[2*e+1]);for(let t=0;t<d-1;t++)i.push(p+t,p+t+1);u&&i.push(p+d-1,p)}},2304:(t,e,r)=>{"use strict";r.d(e,{h:()=>o});var n=r(8507),i=r(310);const s=[],o={extension:{type:n.Ag.ShapeBuilder,name:"polygon"},build(t,e){for(let r=0;r<t.points.length;r++)e[r]=t.points[r];return e},triangulate(t,e,r,n,o,a){(0,i.U)(t,s,e,r,n,o,a)}}},2765:(t,e,r)=>{"use strict";r.d(e,{a:()=>n});const n={extension:{type:r(8507).Ag.ShapeBuilder,name:"rectangle"},build(t,e){const r=t,n=r.x,i=r.y,s=r.width,o=r.height;return s>=0&&o>=0?(e[0]=n,e[1]=i,e[2]=n+s,e[3]=i,e[4]=n+s,e[5]=i+o,e[6]=n,e[7]=i+o,e):e},triangulate(t,e,r,n,i,s){let o=0;e[(n*=r)+o]=t[0],e[n+o+1]=t[1],o+=r,e[n+o]=t[2],e[n+o+1]=t[3],o+=r,e[n+o]=t[6],e[n+o+1]=t[7],o+=r,e[n+o]=t[4],e[n+o+1]=t[5],o+=r;const a=n/r;i[s++]=a,i[s++]=a+1,i[s++]=a+2,i[s++]=a+1,i[s++]=a+3,i[s++]=a+2}}},6422:(t,e,r)=>{"use strict";r.d(e,{b:()=>n});const n={extension:{type:r(8507).Ag.ShapeBuilder,name:"triangle"},build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e),triangulate(t,e,r,n,i,s){let o=0;e[(n*=r)+o]=t[0],e[n+o+1]=t[1],o+=r,e[n+o]=t[2],e[n+o+1]=t[3],o+=r,e[n+o]=t[4],e[n+o+1]=t[5];const a=n/r;i[s++]=a,i[s++]=a+1,i[s++]=a+2}}},4928:(t,e,r)=>{"use strict";r.d(e,{B:()=>n,I:()=>i});const n=1e-4,i=1e-4},7276:(t,e,r)=>{"use strict";r.d(e,{_:()=>u});var n=r(2577),i=r(3751),s=r(9313),o=r(8293),a=r(4503),h=r(133);const l=class t{constructor(t,e,r,n){this.uid=(0,h.L)("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=r,this.y1=n}addColorStop(t,e){return this.gradientStops.push({offset:t,color:n.Q.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;const e=t.defaultTextureSize,{gradientStops:r}=this,n=i.e.get().createCanvas();n.width=e,n.height=e;const h=n.getContext("2d"),l=h.createLinearGradient(0,0,t.defaultTextureSize,1);for(let t=0;t<r.length;t++){const e=r[t];l.addColorStop(e.offset,e.color)}h.fillStyle=l,h.fillRect(0,0,e,e),this.texture=new a.g({source:new o.b({resource:n,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:u,y0:c,x1:d,y1:p}=this,f=new s.u,m=d-u,g=p-c,_=Math.sqrt(m*m+g*g),b=Math.atan2(g,m);f.translate(-u,-c),f.scale(1/e,1/e),f.rotate(-b),f.scale(256/_,1),this.transform=f,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map((t=>`${t.offset}-${t.color}`)).join("-"),e=this.texture.uid,r=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${r}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};l.defaultTextureSize=256;let u=l},2806:(t,e,r)=>{"use strict";r.d(e,{m:()=>o});var n=r(9313),i=r(133);const s={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class o{constructor(t,e){this.uid=(0,i.L)("fillPattern"),this.transform=new n.u,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=s[e].addressModeU,t.source.style.addressModeV=s[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey||(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`),this._styleKey}}},7571:(t,e,r)=>{"use strict";r.d(e,{n:()=>h});var n=r(5101),i=r(133),s=r(268),o=r(8837),a=r(1633);class h{constructor(t){this.instructions=[],this.uid=(0,i.L)("graphicsPath"),this._dirty=!0,"string"==typeof t?(0,o.w)(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new a.L(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,r,i,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(n.b.shared);let h=0,l=0;if(o&&"bezierCurveTo"===o.action){h=o.data[2],l=o.data[3];const t=a.x,e=a.y;h=t+(t-h),l=e+(e-l)}else h=a.x,l=a.y;return this.instructions.push({action:"bezierCurveTo",data:[h,l,t,e,r,i,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,r){const i=this.instructions[this.instructions.length-1],s=this.getLastPoint(n.b.shared);let o=0,a=0;if(i&&"quadraticCurveTo"===i.action){o=i.data[0],a=i.data[1];const t=s.x,e=s.y;o=t+(t-o),a=e+(e-a)}else o=s.x,a=s.y;return this.instructions.push({action:"quadraticCurveTo",data:[o,a,t,e,r]}),this._dirty=!0,this}rect(t,e,r,n,i){return this.instructions.push({action:"rect",data:[t,e,r,n,i]}),this._dirty=!0,this}circle(t,e,r,n){return this.instructions.push({action:"circle",data:[t,e,r,n]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,r,n,i,s,o){i||(i=n/2);const a=-1*Math.PI/2+s,h=2*r,l=2*Math.PI/h,u=[];for(let r=0;r<h;r++){const s=r%2?i:n,o=r*l+a;u.push(t+s*Math.cos(o),e+s*Math.sin(o))}return this.poly(u,!0,o),this}clone(t=!1){const e=new h;if(t)for(let t=0;t<this.instructions.length;t++){const r=this.instructions[t];e.instructions.push({action:r.action,data:r.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,r=t.b,n=t.c,i=t.d,o=t.tx,a=t.ty;let h=0,u=0,c=0,d=0,p=0,f=0,m=0,g=0;for(let _=0;_<this.instructions.length;_++){const b=this.instructions[_],x=b.data;switch(b.action){case"moveTo":case"lineTo":h=x[0],u=x[1],x[0]=e*h+n*u+o,x[1]=r*h+i*u+a;break;case"bezierCurveTo":c=x[0],d=x[1],p=x[2],f=x[3],h=x[4],u=x[5],x[0]=e*c+n*d+o,x[1]=r*c+i*d+a,x[2]=e*p+n*f+o,x[3]=r*p+i*f+a,x[4]=e*h+n*u+o,x[5]=r*h+i*u+a;break;case"quadraticCurveTo":c=x[0],d=x[1],h=x[2],u=x[3],x[0]=e*c+n*d+o,x[1]=r*c+i*d+a,x[2]=e*h+n*u+o,x[3]=r*h+i*u+a;break;case"arcToSvg":h=x[5],u=x[6],m=x[0],g=x[1],x[0]=e*m+n*g,x[1]=r*m+i*g,x[5]=e*h+n*u+o,x[6]=r*h+i*u+a;break;case"circle":x[4]=l(x[3],t);break;case"rect":x[4]=l(x[4],t);break;case"ellipse":x[8]=l(x[8],t);break;case"roundRect":x[5]=l(x[5],t);break;case"addPath":x[0].transform(t);break;case"poly":x[2]=l(x[2],t);break;default:(0,s.R)("unknown transform action",b.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,r=this.instructions[e];if(!r)return t.x=0,t.y=0,t;for(;"closePath"===r.action;){if(e--,e<0)return t.x=0,t.y=0,t;r=this.instructions[e]}switch(r.action){case"moveTo":case"lineTo":t.x=r.data[0],t.y=r.data[1];break;case"quadraticCurveTo":t.x=r.data[2],t.y=r.data[3];break;case"bezierCurveTo":t.x=r.data[4],t.y=r.data[5];break;case"arc":case"arcToSvg":t.x=r.data[5],t.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(t)}return t}}function l(t,e){return t?t.prepend(e):e.clone()}},1633:(t,e,r)=>{"use strict";r.d(e,{L:()=>g});var n=r(6125),i=r(2853),s=r(9389),o=r(9252),a=r(4863),h=r(9636),l=r(593),u=r(7986),c=r(4026),d=r(9513),p=r(269),f=r(6466);const m=new o.M;class g{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new h.c,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const r=this._currentPoly.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this}arc(t,e,r,n,i,s){this._ensurePoly(!1);const o=this._currentPoly.points;return(0,c.t)(o,t,e,r,n,i,s),this}arcTo(t,e,r,n,i){this._ensurePoly();const s=this._currentPoly.points;return(0,d.I)(s,t,e,r,n,i),this}arcToSvg(t,e,r,n,i,s,o){const a=this._currentPoly.points;return(0,p.W)(a,this._currentPoly.lastX,this._currentPoly.lastY,s,o,t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,s,o){this._ensurePoly();const a=this._currentPoly;return(0,l.M)(this._currentPoly.points,a.lastX,a.lastY,t,e,r,n,i,s,o),this}quadraticCurveTo(t,e,r,n,i){this._ensurePoly();const s=this._currentPoly;return(0,u.T)(this._currentPoly.points,s.lastX,s.lastY,t,e,r,n,i),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);for(let e=0;e<t.instructions.length;e++){const r=t.instructions[e];this[r.action](...r.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,r,n,i){return this.drawShape(new o.M(t,e,r,n),i),this}circle(t,e,r,i){return this.drawShape(new n.j(t,e,r),i),this}poly(t,e,r){const n=new s.t(t);return n.closePath=e,this.drawShape(n,r),this}regularPoly(t,e,r,n,i=0,s){n=Math.max(0|n,3);const o=-1*Math.PI/2+i,a=2*Math.PI/n,h=[];for(let i=0;i<n;i++){const n=o-i*a;h.push(t+r*Math.cos(n),e+r*Math.sin(n))}return this.poly(h,!0,s),this}roundPoly(t,e,r,n,i,s=0,o){if(n=Math.max(0|n,3),i<=0)return this.regularPoly(t,e,r,n,s);const a=r*Math.sin(Math.PI/n)-.001;i=Math.min(i,a);const h=-1*Math.PI/2+s,l=2*Math.PI/n,u=(n-2)*Math.PI/n/2;for(let s=0;s<n;s++){const n=s*l+h,a=t+r*Math.cos(n),c=e+r*Math.sin(n),d=n+Math.PI+u,p=n-Math.PI-u,f=a+i*Math.cos(d),m=c+i*Math.sin(d),g=a+i*Math.cos(p),_=c+i*Math.sin(p);0===s?this.moveTo(f,m):this.lineTo(f,m),this.quadraticCurveTo(a,c,g,_,o)}return this.closePath()}roundShape(t,e,r=!1,n){return t.length<3?this:(r?(0,f.q)(this,t,e,n):(0,f.X)(this,t,e),this.closePath())}filletRect(t,e,r,n,i){if(0===i)return this.rect(t,e,r,n);const s=Math.min(r,n)/2,o=Math.min(s,Math.max(-s,i)),a=t+r,h=e+n,l=o<0?-o:0,u=Math.abs(o);return this.moveTo(t,e+u).arcTo(t+l,e+l,t+u,e,u).lineTo(a-u,e).arcTo(a-l,e+l,a,e+u,u).lineTo(a,h-u).arcTo(a-l,h-l,t+r-u,h,u).lineTo(t+u,h).arcTo(t+l,h-l,t,h-u,u).closePath()}chamferRect(t,e,r,n,i,s){if(i<=0)return this.rect(t,e,r,n);const o=Math.min(i,Math.min(r,n)/2),a=t+r,h=e+n,l=[t+o,e,a-o,e,a,e+o,a,h-o,a-o,h,t+o,h,t,h-o,t,e+o];for(let t=l.length-1;t>=2;t-=2)l[t]===l[t-2]&&l[t-1]===l[t-3]&&l.splice(t-1,2);return this.poly(l,!0,s)}ellipse(t,e,r,n,s){return this.drawShape(new i.P(t,e,r,n),s),this}roundRect(t,e,r,n,i,s){return this.drawShape(new a.T(t,e,r,n,i),s),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let r=this._currentPoly;return r&&this.endPoly(),r=new s.t,r.points.push(t,e),this._currentPoly=r,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new s.t,t)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,r=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const n=t.transform,i=e;e=n.a*e+n.c*r+n.tx,r=n.b*i+n.d*r+n.ty}this._currentPoly.points.push(e,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const r=t.instructions[e];this[r.action](...r.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let r=0;r<e.length;r++){const n=e[r],i=n.shape.getBounds(m);n.transform?t.addRect(i,n.transform):t.addRect(i)}return t}}},6466:(t,e,r)=>{"use strict";function n(t,e,r){const n=(t,e)=>{const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);return{len:i,nx:r/i,ny:n/i}},i=(e,r)=>{0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y)};let s=e[e.length-1];for(let o=0;o<e.length;o++){const a=e[o%e.length],h=a.radius??r;if(h<=0){i(o,a),s=a;continue}const l=e[(o+1)%e.length],u=n(a,s),c=n(a,l);if(u.len<1e-4||c.len<1e-4){i(o,a),s=a;continue}let d=Math.asin(u.nx*c.ny-u.ny*c.nx),p=1,f=!1;u.nx*c.nx-u.ny*-c.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,p=-1,f=!0):d>0&&(p=-1,f=!0);const m=d/2;let g,_=Math.abs(Math.cos(m)*h/Math.sin(m));_>Math.min(u.len/2,c.len/2)?(_=Math.min(u.len/2,c.len/2),g=Math.abs(_*Math.sin(m)/Math.cos(m))):g=h;const b=a.x+c.nx*_+-c.ny*g*p,x=a.y+c.ny*_+c.nx*g*p,v=Math.atan2(u.ny,u.nx)+Math.PI/2*p,y=Math.atan2(c.ny,c.nx)-Math.PI/2*p;0===o&&t.moveTo(b+Math.cos(v)*g,x+Math.sin(v)*g),t.arc(b,x,g,v,y,f),s=a}}function i(t,e,r,n){const i=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),s=(t,e,r)=>({x:t.x+(e.x-t.x)*r,y:t.y+(e.y-t.y)*r}),o=e.length;for(let a=0;a<o;a++){const h=e[(a+1)%o],l=h.radius??r;if(l<=0){0===a?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);continue}const u=e[a],c=e[(a+2)%o],d=i(u,h);let p;p=d<1e-4?h:s(h,u,Math.min(d/2,l)/d);const f=i(c,h);let m;m=f<1e-4?h:s(h,c,Math.min(f/2,l)/f),0===a?t.moveTo(p.x,p.y):t.lineTo(p.x,p.y),t.quadraticCurveTo(h.x,h.y,m.x,m.y,n)}}r.d(e,{X:()=>n,q:()=>i})},110:(t,e,r)=>{"use strict";r.d(e,{u:()=>s});var n=r(2577),i=r(7571);function s(t,e){if("string"==typeof t){const e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}return o(t,{context:e,path:new i.n},null,null),e}function o(t,e,r,s){const h=t.children,{fillStyle:l,strokeStyle:u}=function(t){const e=t.getAttribute("style"),r={},i={};let s=!1,o=!1;if(e){const t=e.split(";");for(let e=0;e<t.length;e++){const a=t[e],[h,l]=a.split(":");switch(h){case"stroke":"none"!==l&&(r.color=n.Q.shared.setValue(l).toNumber(),o=!0);break;case"stroke-width":r.width=Number(l);break;case"fill":"none"!==l&&(s=!0,i.color=n.Q.shared.setValue(l).toNumber());break;case"fill-opacity":i.alpha=Number(l);break;case"stroke-opacity":r.alpha=Number(l);break;case"opacity":i.alpha=Number(l),r.alpha=Number(l)}}}else{const e=t.getAttribute("stroke");e&&"none"!==e&&(o=!0,r.color=n.Q.shared.setValue(e).toNumber(),r.width=a(t,"stroke-width",1));const h=t.getAttribute("fill");h&&"none"!==h&&(s=!0,i.color=n.Q.shared.setValue(h).toNumber())}return{strokeStyle:o?r:null,fillStyle:s?i:null}}(t);let c,d,p,f,m,g,_,b,x,v,y,C,T,S,w,A,M;switch(l&&r?r={...r,...l}:l&&(r=l),u&&s?s={...s,...u}:u&&(s=u),e.context.fillStyle=r,e.context.strokeStyle=s,t.nodeName.toLowerCase()){case"path":S=t.getAttribute("d"),w=new i.n(S),e.context.path(w),r&&e.context.fill(),s&&e.context.stroke();break;case"circle":_=a(t,"cx",0),b=a(t,"cy",0),x=a(t,"r",0),e.context.ellipse(_,b,x,x),r&&e.context.fill(),s&&e.context.stroke();break;case"rect":c=a(t,"x",0),d=a(t,"y",0),A=a(t,"width",0),M=a(t,"height",0),v=a(t,"rx",0),y=a(t,"ry",0),v||y?e.context.roundRect(c,d,A,M,v||y):e.context.rect(c,d,A,M),r&&e.context.fill(),s&&e.context.stroke();break;case"ellipse":_=a(t,"cx",0),b=a(t,"cy",0),v=a(t,"rx",0),y=a(t,"ry",0),e.context.beginPath(),e.context.ellipse(_,b,v,y),r&&e.context.fill(),s&&e.context.stroke();break;case"line":p=a(t,"x1",0),f=a(t,"y1",0),m=a(t,"x2",0),g=a(t,"y2",0),e.context.beginPath(),e.context.moveTo(p,f),e.context.lineTo(m,g),s&&e.context.stroke();break;case"polygon":T=t.getAttribute("points"),C=T.match(/\d+/g).map((t=>parseInt(t,10))),e.context.poly(C,!0),r&&e.context.fill(),s&&e.context.stroke();break;case"polyline":T=t.getAttribute("points"),C=T.match(/\d+/g).map((t=>parseInt(t,10))),e.context.poly(C,!1),s&&e.context.stroke()}for(let t=0;t<h.length;t++)o(h[t],e,r,s)}function a(t,e,r){const n=t.getAttribute(e);return n?Number(n):r}},8837:(t,e,r)=>{"use strict";r.d(e,{w:()=>s});var n=r(8133),i=r(268);function s(t,e){const r=n(t),s=[];let o=null,a=0,h=0;for(let t=0;t<r.length;t++){const n=r[t],l=n[0],u=n;switch(l){case"M":a=u[1],h=u[2],e.moveTo(a,h);break;case"m":a+=u[1],h+=u[2],e.moveTo(a,h);break;case"H":a=u[1],e.lineTo(a,h);break;case"h":a+=u[1],e.lineTo(a,h);break;case"V":h=u[1],e.lineTo(a,h);break;case"v":h+=u[1],e.lineTo(a,h);break;case"L":a=u[1],h=u[2],e.lineTo(a,h);break;case"l":a+=u[1],h+=u[2],e.lineTo(a,h);break;case"C":a=u[5],h=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],a,h);break;case"c":e.bezierCurveTo(a+u[1],h+u[2],a+u[3],h+u[4],a+u[5],h+u[6]),a+=u[5],h+=u[6];break;case"S":a=u[3],h=u[4],e.bezierCurveToShort(u[1],u[2],a,h);break;case"s":e.bezierCurveToShort(a+u[1],h+u[2],a+u[3],h+u[4]),a+=u[3],h+=u[4];break;case"Q":a=u[3],h=u[4],e.quadraticCurveTo(u[1],u[2],a,h);break;case"q":e.quadraticCurveTo(a+u[1],h+u[2],a+u[3],h+u[4]),a+=u[3],h+=u[4];break;case"T":a=u[1],h=u[2],e.quadraticCurveToShort(a,h);break;case"t":a+=u[1],h+=u[2],e.quadraticCurveToShort(a,h);break;case"A":a=u[6],h=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],a,h);break;case"a":a+=u[6],h+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],a,h);break;case"Z":case"z":e.closePath(),s.length>0&&(o=s.pop(),o?(a=o.startX,h=o.startY):(a=0,h=0)),o=null;break;default:(0,i.R)(`Unknown SVG path command: ${l}`)}"Z"!==l&&"z"!==l&&null===o&&(o={startX:a,startY:h},s.push(o))}return e}},6668:(t,e,r)=>{"use strict";r.d(e,{M:()=>x,y:()=>_});var n=r(8507),i=r(9252),s=r(3759),o=r(9888),a=r(4503),h=r(8218),l=r(6954),u=r(382),c=r(4724),d=r(5236),p=r(2304),f=r(2765),m=r(6422),g=r(310);const _={};n.XO.handleByMap(n.Ag.ShapeBuilder,_),n.XO.add(f.a,p.h,m.b,u.RH,u.$S,u.nZ);const b=new i.M;function x(t,e){const{geometryData:r,batches:n}=e;n.length=0,r.indices.length=0,r.vertices.length=0,r.uvs.length=0;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];if("texture"===i.action)v(i.data,n,r);else if("fill"===i.action||"stroke"===i.action){const t="stroke"===i.action,e=i.data.path.shapePath,s=i.data.style,o=i.data.hole;t&&o&&y(o.shapePath,s,null,!0,n,r),y(e,s,o,t,n,r)}}}function v(t,e,r){const{vertices:n,uvs:i,indices:s}=r,a=s.length,u=n.length/2,c=[],d=_.rectangle,p=b,f=t.image;p.x=t.dx,p.y=t.dy,p.width=t.dw,p.height=t.dh;const m=t.transform;d.build(p,c),m&&(0,o.s)(c,m),d.triangulate(c,n,2,u,s,a);const g=f.uvs;i.push(g.x0,g.y0,g.x1,g.y1,g.x3,g.y3,g.x2,g.y2);const x=h.Z.get(l.G);x.indexOffset=a,x.indexSize=s.length-a,x.attributeOffset=u,x.attributeSize=n.length/2-u,x.baseColor=t.style,x.alpha=t.alpha,x.texture=f,x.geometryData=r,e.push(x)}function y(t,e,r,n,i,u){const{vertices:p,uvs:f,indices:m}=u,b=t.shapePrimitives.length-1;t.shapePrimitives.forEach((({shape:t,transform:x},v)=>{const y=m.length,C=p.length/2,T=[],S=_[t.type];let w="triangle-list";if(S.build(t,T),x&&(0,o.s)(T,x),n){const r=t.closePath??!0,n=e;n.pixelLine?((0,d.D)(T,r,p,m),w="line-list"):(0,c.h)(T,n,!1,r,p,m)}else if(r&&b===v){const t=[],e=T.slice(),n=function(t){if(!t)return[];const e=t.shapePrimitives,r=[];for(let t=0;t<e.length;t++){const n=e[t].shape,i=[];_[n.type].build(n,i),r.push(i)}return r}(r.shapePath);n.forEach((r=>{t.push(e.length/2),e.push(...r)})),(0,g.U)(e,t,p,2,C,m,y)}else S.triangulate(T,p,2,C,m,y);const A=f.length/2,M=e.texture;if(M!==a.g.WHITE){const t=e.matrix;t&&(x&&t.append(x.clone().invert()),(0,s.X)(p,2,C,f,A,2,p.length/2-C,t))}else(0,s.D)(f,A,2,p.length/2-C);const E=h.Z.get(l.G);E.indexOffset=y,E.indexSize=m.length-y,E.attributeOffset=C,E.attributeSize=p.length/2-C,E.baseColor=e.color,E.alpha=e.alpha,E.texture=M,E.geometryData=u,E.topology=w,i.push(E)}))}},990:(t,e,r)=>{"use strict";r.d(e,{T:()=>p,w:()=>d});var n=r(2577),i=r(9313),s=r(4503),o=r(7276),a=r(2806);function h(t){return t instanceof a.m}function l(t){return t instanceof o._}function u(t,e,r){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...r,...t}}function c(t,e,r){return e.buildLinearGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...r,...t}}function d(t,e){if(null==t)return null;const r={},o=t;return function(t){return n.Q.isColorLike(t)}(t)?function(t,e,r){const i=n.Q.shared.setValue(e??0);return t.color=i.toNumber(),t.alpha=1===i.alpha?r.alpha:i.alpha,t.texture=s.g.WHITE,{...r,...t}}(r,t,e):h(t)?u(r,t,e):l(t)?c(r,t,e):o.fill&&h(o.fill)?u(o,o.fill,e):o.fill&&l(o.fill)?c(o,o.fill,e):function(t,e){const r={...e,...t};if(r.texture){if(r.texture!==s.g.WHITE){const t=r.matrix?.clone().invert()||new i.u;t.translate(r.texture.frame.x,r.texture.frame.y),t.scale(1/r.texture.source.width,1/r.texture.source.height),r.matrix=t}const t=r.texture.source.style;"clamp-to-edge"===t.addressMode&&(t.addressMode="repeat",t.update())}const o=n.Q.shared.setValue(r.color);return r.alpha*=o.alpha,r.color=o.toNumber(),r.matrix=r.matrix?r.matrix.clone():null,r}(o,e)}function p(t,e){const{width:r,alignment:n,miterLimit:i,cap:s,join:o,pixelLine:a,...h}=e,l=d(t,h);return l?{width:r,alignment:n,miterLimit:i,cap:s,join:o,pixelLine:a,...l}:null}},4549:(t,e,r)=>{"use strict";function n(t){const e=t.length;if(e<6)return 1;let r=0;for(let n=0,i=t[e-2],s=t[e-1];n<e;n+=2){const e=t[n],o=t[n+1];r+=(e-i)*(o+s),i=e,s=o}return r<0?-1:1}r.d(e,{v:()=>n})},310:(t,e,r)=>{"use strict";r.d(e,{U:()=>i});var n=r(6570);function i(t,e,r,i,s,o,a){const h=n(t,e,2);if(!h)return;for(let t=0;t<h.length;t+=3)o[a++]=h[t]+s,o[a++]=h[t+1]+s,o[a++]=h[t+2]+s;let l=s*i;for(let e=0;e<t.length;e+=2)r[l]=t[e],r[l+1]=t[e+1],l+=i}},3266:(t,e,r)=>{"use strict";r.d(e,{b:()=>o});var n=r(4670),i=r(5060);const s=class t extends i.u{constructor(...t){super({});let e=t[0]??{};"number"==typeof e&&((0,n.t6)(n.lj,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),e={width:e,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(e)}build(e){e={...t.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const r=this.verticesX*this.verticesY,n=[],i=[],s=[],o=this.verticesX-1,a=this.verticesY-1,h=this.width/o,l=this.height/a;for(let t=0;t<r;t++){const e=t%this.verticesX,r=t/this.verticesX|0;n.push(e*h,r*l),i.push(e/o,r/a)}const u=o*a;for(let t=0;t<u;t++){const e=t%o,r=t/o|0,n=r*this.verticesX+e,i=r*this.verticesX+e+1,a=(r+1)*this.verticesX+e,h=(r+1)*this.verticesX+e+1;s.push(n,i,a,i,h,a)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};s.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let o=s},7586:(t,e,r)=>{"use strict";r.d(e,{S:()=>d});var n=r(8507),i=r(9313),s=r(8587),o=r(2067),a=r(6665),h=r(3391),l=r(8475),u=r(4503),c=r(268);class d{init(){const t=(0,s.I)({name:"mesh",bits:[o.mA,h.m,a.m]});this._shader=new l.M({glProgram:t,resources:{uTexture:u.g.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new i.u}}}})}execute(t,e){const r=t.renderer;let n=e._shader;if(n){if(!n.glProgram)return void(0,c.R)("Mesh shader has no glProgram",e.shader)}else{n=this._shader;const t=e.texture,r=t.source;n.resources.uTexture=r,n.resources.uSampler=r.style,n.resources.textureUniforms.uniforms.uTextureMatrix=t.textureMatrix.mapCoord}n.groups[100]=r.globalUniforms.bindGroup,n.groups[101]=t.localUniformsBindGroup,r.encoder.draw({geometry:e._geometry,shader:n,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}d.extension={type:[n.Ag.WebGLPipesAdaptor],name:"mesh"}},2448:(t,e,r)=>{"use strict";r.d(e,{F:()=>d});var n=r(8507),i=r(9313),s=r(8587),o=r(2067),a=r(6665),h=r(3391),l=r(8475),u=r(4503),c=r(268);class d{init(){const t=(0,s.v)({name:"mesh",bits:[o.Ls,h.R,a.b]});this._shader=new l.M({gpuProgram:t,resources:{uTexture:u.g.EMPTY._source,uSampler:u.g.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new i.u}}}})}execute(t,e){const r=t.renderer;let n=e._shader;if(n){if(!n.gpuProgram)return void(0,c.R)("Mesh shader has no gpuProgram",e.shader)}else n=this._shader,n.groups[2]=r.texture.getTextureBindGroup(e.texture);const i=n.gpuProgram;if(i.autoAssignGlobalUniforms&&(n.groups[0]=r.globalUniforms.bindGroup),i.autoAssignLocalUniforms){const e=t.localUniforms;n.groups[1]=r.renderPipes.uniformBatch.getUniformBindGroup(e,!0)}r.encoder.draw({geometry:e._geometry,shader:n,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}d.extension={type:[n.Ag.WebGPUPipesAdaptor],name:"mesh"}},8734:(t,e,r)=>{"use strict";r.d(e,{U:()=>n});class n{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(t){this._topology=t}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get uvs(){const t=this.geometry.getBuffer("aUV"),e=t.data;let r=e;const n=this.texture.textureMatrix;return n.isSimple||(r=this._transformedUvs,this._textureMatrixUpdateId===n._updateID&&this._uvUpdateId===t._updateID||((!r||r.length<e.length)&&(r=this._transformedUvs=new Float32Array(e.length)),this._textureMatrixUpdateId=n._updateID,this._uvUpdateId=t._updateID,n.multiplyUvs(e,r))),r}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}},5060:(t,e,r)=>{"use strict";r.d(e,{u:()=>h});var n=r(949),i=r(1132),s=r(3681),o=r(4670);const a=class t extends s.V{constructor(...e){let r=e[0]??{};r instanceof Float32Array&&((0,o.t6)(o.lj,"use new MeshGeometry({ positions, uvs, indices }) instead"),r={positions:r,uvs:e[1],indices:e[2]}),r={...t.defaultOptions,...r};const s=r.positions||new Float32Array([0,0,1,0,1,1,0,1]),a=r.uvs||new Float32Array([0,0,1,0,1,1,0,1]),h=r.indices||new Uint32Array([0,1,2,0,2,3]),l=r.shrinkBuffersToFit;super({attributes:{aPosition:{buffer:new n.h({data:s,label:"attribute-mesh-positions",shrinkToFit:l,usage:i.S.VERTEX|i.S.COPY_DST}),format:"float32x2",stride:8,offset:0},aUV:{buffer:new n.h({data:a,label:"attribute-mesh-uvs",shrinkToFit:l,usage:i.S.VERTEX|i.S.COPY_DST}),format:"float32x2",stride:8,offset:0}},indexBuffer:new n.h({data:h,label:"index-mesh-buffer",shrinkToFit:l,usage:i.S.INDEX|i.S.COPY_DST}),topology:r.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};a.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let h=a},1892:(t,e,r)=>{"use strict";r.d(e,{G:()=>c});var n=r(8507),i=r(9313),s=r(3513),o=r(9921),a=r(8639),h=r(8218),l=r(2760),u=r(8734);class c{constructor(t,e){this.localUniforms=new o.k({uTransformMatrix:{value:new i.u,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new s.T({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=t,this._adaptor=e,this._adaptor.init(),t.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),t.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(t){const e=this._getMeshData(t),r=e.batched,n=t.batched;if(e.batched=n,r!==n)return!0;if(n){const r=t._geometry;if(r.indices.length!==e.indexSize||r.positions.length!==e.vertexSize)return e.indexSize=r.indices.length,e.vertexSize=r.positions.length,!0;const n=this._getBatchableMesh(t);return!n._batcher.checkAndUpdateTexture(n,t.texture)}return!1}addRenderable(t,e){const r=this.renderer.renderPipes.batch,{batched:n}=this._getMeshData(t);if(n){const n=this._getBatchableMesh(t);n.texture=t._texture,n.geometry=t._geometry,r.addToBatch(n,e)}else r.break(e),e.add(t)}updateRenderable(t){if(t.batched){const e=this._gpuBatchableMeshHash[t.uid];e.texture=t._texture,e.geometry=t._geometry,e._batcher.updateElement(e)}}destroyRenderable(t){this._meshDataHash[t.uid]=null;const e=this._gpuBatchableMeshHash[t.uid];e&&(h.Z.return(e),this._gpuBatchableMeshHash[t.uid]=null),t.off("destroyed",this._destroyRenderableBound)}execute(t){if(!t.isRenderable)return;t.state.blendMode=(0,a.i)(t.groupBlendMode,t.texture._source);const e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),(0,l.V)(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){return this._meshDataHash[t.uid]||this._initMeshData(t)}_initMeshData(t){return this._meshDataHash[t.uid]={batched:t.batched,indexSize:t._geometry.indices?.length,vertexSize:t._geometry.positions?.length},t.on("destroyed",this._destroyRenderableBound),this._meshDataHash[t.uid]}_getBatchableMesh(t){return this._gpuBatchableMeshHash[t.uid]||this._initBatchableMesh(t)}_initBatchableMesh(t){const e=h.Z.get(u.U);return e.renderable=t,e.texture=t._texture,e.transform=t.groupTransform,e.roundPixels=this.renderer._roundPixels|t._roundPixels,this._gpuBatchableMeshHash[t.uid]=e,e}destroy(){for(const t in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[t]&&h.Z.return(this._gpuBatchableMeshHash[t]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}c.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"mesh"}},9909:(t,e,r)=>{"use strict";r.d(e,{C:()=>n});class n{execute(t,e){const r=t.state,n=t.renderer,i=e.shader||t.defaultShader;i.resources.uTexture=e.texture._source,i.resources.uniforms=t.localUniforms;const s=n.gl,o=t.getBuffers(e);n.shader.bind(i),n.state.set(r),n.geometry.bind(o.geometry,i.glProgram);const a=2===o.geometry.indexBuffer.data.BYTES_PER_ELEMENT?s.UNSIGNED_SHORT:s.UNSIGNED_INT;s.drawElements(s.TRIANGLES,6*e.particleChildren.length,a,0)}}},9473:(t,e,r)=>{"use strict";r.d(e,{h:()=>n});class n{execute(t,e){const r=t.renderer,n=e.shader||t.defaultShader;n.groups[0]=r.renderPipes.uniformBatch.getUniformBindGroup(t.localUniforms,!0),n.groups[1]=r.texture.getTextureBindGroup(e.texture);const i=t.state,s=t.getBuffers(e);r.encoder.draw({geometry:s.geometry,shader:e.shader||t.defaultShader,state:i,size:6*e.particleChildren.length})}}},6756:(t,e,r)=>{"use strict";r.d(e,{D:()=>o});var n=r(8507),i=r(9909),s=r(6447);class o extends s.m{constructor(t){super(t,new i.C)}}o.extension={type:[n.Ag.WebGLPipes],name:"particle"}},4325:(t,e,r)=>{"use strict";r.d(e,{C:()=>o});var n=r(8507),i=r(9473),s=r(6447);class o extends s.m{constructor(t){super(t,new i.h)}}o.extension={type:[n.Ag.WebGPUPipes],name:"particle"}},5864:(t,e,r)=>{"use strict";r.d(e,{h:()=>u});var n=r(949),i=r(1132),s=r(3681),o=r(8306),a=r(1460),h=r(434),l=r(8850);class u{constructor(t){this._size=0,this._generateParticleUpdateCache={};const e=this._size=t.size??1e3,r=t.properties;let l=0,u=0;for(const t in r){const e=r[t],n=(0,o.m)(e.format);e.dynamic?u+=n.stride:l+=n.stride}this._dynamicStride=u/4,this._staticStride=l/4,this.staticAttributeBuffer=new a.u(4*e*l),this.dynamicAttributeBuffer=new a.u(4*e*u),this.indexBuffer=(0,h.L)(e);const c=new s.V;let d=0,p=0;this._staticBuffer=new n.h({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:i.S.VERTEX|i.S.COPY_DST}),this._dynamicBuffer=new n.h({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:i.S.VERTEX|i.S.COPY_DST});for(const t in r){const e=r[t],n=(0,o.m)(e.format);e.dynamic?(c.addAttribute(e.attributeName,{buffer:this._dynamicBuffer,stride:4*this._dynamicStride,offset:4*d,format:e.format}),d+=n.size):(c.addAttribute(e.attributeName,{buffer:this._staticBuffer,stride:4*this._staticStride,offset:4*p,format:e.format}),p+=n.size)}c.addIndex(this.indexBuffer);const f=this.getParticleUpdate(r);this._dynamicUpload=f.dynamicUpdate,this._staticUpload=f.staticUpdate,this.geometry=c}getParticleUpdate(t){const e=function(t){const e=[];for(const r in t){const n=t[r];e.push(r,n.code,n.dynamic?"d":"s")}return e.join("_")}(t);return this._generateParticleUpdateCache[e]||(this._generateParticleUpdateCache[e]=this.generateParticleUpdate(t)),this._generateParticleUpdateCache[e]}generateParticleUpdate(t){return(0,l.N)(t)}update(t,e){t.length>this._size&&(e=!0,this._size=Math.max(t.length,1.5*this._size|0),this.staticAttributeBuffer=new a.u(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new a.u(this._size*this._dynamicStride*4*4),this.indexBuffer=(0,h.L)(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const r=this.dynamicAttributeBuffer;if(this._dynamicUpload(t,r.float32View,r.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,t.length*this._dynamicStride*4,!0),e){const e=this.staticAttributeBuffer;this._staticUpload(t,e.float32View,e.uint32View),this._staticBuffer.setDataWithSize(e.float32View,t.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}},6447:(t,e,r)=>{"use strict";r.d(e,{m:()=>u});var n=r(9313),i=r(9921),s=r(8639),o=r(7547),a=r(2760),h=r(5864),l=r(1855);class u{constructor(t,e){this.state=o.U.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new i.k({uTranslationMatrix:{value:new n.u,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=t,this.adaptor=e,this.defaultShader=new l.E,this.state=o.U.for2d()}validateRenderable(t){return!1}addRenderable(t,e){this.renderer.renderPipes.batch.break(e),e.add(t)}getBuffers(t){return this._gpuBufferHash[t.uid]||this._initBuffer(t)}_initBuffer(t){return this._gpuBufferHash[t.uid]=new h.h({size:t.particleChildren.length,properties:t._properties}),t.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[t.uid]}updateRenderable(t){}destroyRenderable(t){this._gpuBufferHash[t.uid].destroy(),this._gpuBufferHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}execute(t){const e=t.particleChildren;if(0===e.length)return;const r=this.renderer,n=this.getBuffers(t);t.texture||(t.texture=e[0].texture);const i=this.state;n.update(e,t._childrenDirty),t._childrenDirty=!1,i.blendMode=(0,s.i)(t.blendMode,t.texture._source);const o=this.localUniforms.uniforms,h=o.uTranslationMatrix;t.worldTransform.copyTo(h),h.prepend(r.globalUniforms.globalUniformData.projectionMatrix),o.uResolution=r.globalUniforms.globalUniformData.resolution,o.uRound=r._roundPixels|t._roundPixels,(0,a.V)(t.groupColorAlpha,o.uColor,0),this.adaptor.execute(this,t)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}},1855:(t,e,r)=>{"use strict";r.d(e,{E:()=>p});var n=r(2577),i=r(9313),s=r(9657),o=r(1595),a=r(8475),h=r(4503),l=r(218),u=r(9415),c=r(3730),d=r(4120);class p extends a.M{constructor(){super({glProgram:s.M.from({vertex:c.A,fragment:u.A}),gpuProgram:o.B.from({fragment:{source:d.A,entryPoint:"mainFragment"},vertex:{source:d.A,entryPoint:"mainVertex"}}),resources:{uTexture:h.g.WHITE.source,uSampler:new l.n({}),uniforms:{uTranslationMatrix:{value:new i.u,type:"mat3x3<f32>"},uColor:{value:new n.Q(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}},9415:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var n="varying vec2 vUV;\nvarying vec4 vColor;\n\nuniform sampler2D uTexture;\n\nvoid main(void){\n    vec4 color = texture2D(uTexture, vUV) * vColor;\n    gl_FragColor = color;\n}"},3730:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var n="attribute vec2 aVertex;\nattribute vec2 aUV;\nattribute vec4 aColor;\n\nattribute vec2 aPosition;\nattribute float aRotation;\n\nuniform mat3 uTranslationMatrix;\nuniform float uRound;\nuniform vec2 uResolution;\nuniform vec4 uColor;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\n\nvec2 roundPixels(vec2 position, vec2 targetSize)\n{       \n    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n}\n\nvoid main(void){\n    float cosRotation = cos(aRotation);\n    float sinRotation = sin(aRotation);\n    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;\n    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;\n\n    vec2 v = vec2(x, y);\n    v = v + aPosition;\n\n    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    if(uRound == 1.0)\n    {\n        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n    }\n\n    vUV = aUV;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;\n}\n"},4120:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var n="\nstruct ParticleUniforms {\n  uProjectionMatrix:mat3x3<f32>,\n  uColor:vec4<f32>,\n  uResolution:vec2<f32>,\n  uRoundPixels:f32,\n};\n\n@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;\n\n@group(1) @binding(0) var uTexture: texture_2d<f32>;\n@group(1) @binding(1) var uSampler : sampler;\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>,\n    @location(1) color : vec4<f32>,\n  };\n@vertex\nfn mainVertex(\n  @location(0) aVertex: vec2<f32>,\n  @location(1) aPosition: vec2<f32>,\n  @location(2) aUV: vec2<f32>,\n  @location(3) aColor: vec4<f32>,\n  @location(4) aRotation: f32,\n) -> VSOutput {\n  \n   let v = vec2(\n       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),\n       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)\n   ) + aPosition;\n\n   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;\n\n  return VSOutput(\n   position,\n   aUV,\n   vColor,\n  );\n}\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n  @location(1) color: vec4<f32>,\n  @builtin(position) position: vec4<f32>,\n) -> @location(0) vec4<f32> {\n\n    var sample = textureSample(uTexture, uSampler, uv) * color;\n   \n    return sample;\n}"},434:(t,e,r)=>{"use strict";function n(t,e=null){const r=6*t;if(r>65535?e||(e=new Uint32Array(r)):e||(e=new Uint16Array(r)),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let t=0,n=0;t<r;t+=6,n+=4)e[t+0]=n+0,e[t+1]=n+1,e[t+2]=n+2,e[t+3]=n+0,e[t+4]=n+2,e[t+5]=n+3;return e}r.d(e,{L:()=>n})},8850:(t,e,r)=>{"use strict";r.d(e,{N:()=>i});var n=r(8306);function i(t){return{dynamicUpdate:s(t,!0),staticUpdate:s(t,!1)}}function s(t,e){const r=[];r.push("\n      \n        var index = 0;\n\n        for (let i = 0; i < ps.length; ++i)\n        {\n            const p = ps[i];\n\n            ");let i=0;for(const s in t){const o=t[s];e===o.dynamic&&(r.push(`offset = index + ${i}`),r.push(o.code),i+=(0,n.m)(o.format).stride/4)}r.push("\n            index += stride * 4;\n        }\n    "),r.unshift(`\n        var stride = ${i};\n    `);const s=r.join("\n");return new Function("ps","f32v","u32v",s)}},7523:(t,e,r)=>{"use strict";r.d(e,{P:()=>s});var n=r(3266);const i=class t extends n.b{constructor(e={}){super({width:(e={...t.defaultOptions,...e}).width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(t){this.width=t.width??this.width,this.height=t.height??this.height,this._originalWidth=t.originalWidth??this._originalWidth,this._originalHeight=t.originalHeight??this._originalHeight,this._leftWidth=t.leftWidth??this._leftWidth,this._rightWidth=t.rightWidth??this._rightWidth,this._topHeight=t.topHeight??this._topHeight,this._bottomHeight=t.bottomHeight??this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){const t=this.positions,e=this._leftWidth+this._rightWidth,r=this.width>e?1:this.width/e,n=this._topHeight+this._bottomHeight,i=this.height>n?1:this.height/n,s=Math.min(r,i);t[9]=t[11]=t[13]=t[15]=this._topHeight*s,t[17]=t[19]=t[21]=t[23]=this.height-this._bottomHeight*s,t[25]=t[27]=t[29]=t[31]=this.height,t[2]=t[10]=t[18]=t[26]=this._leftWidth*s,t[4]=t[12]=t[20]=t[28]=this.width-this._rightWidth*s,t[6]=t[14]=t[22]=t[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){const t=this.uvs;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1;const e=1/this._originalWidth,r=1/this._originalHeight;t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.getBuffer("aUV").update()}};i.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let s=i},6880:(t,e,r)=>{"use strict";r.d(e,{e:()=>a});var n=r(8507),i=r(8218),s=r(8734),o=r(7523);class a{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){const r=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,r),this._renderer.renderPipes.batch.addToBatch(r,e)}updateRenderable(t){const e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}destroyRenderable(t){const e=this._gpuSpriteHash[t.uid];i.Z.return(e.geometry),i.Z.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.geometry.update(t),e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=i.Z.get(s.U);return e.geometry=i.Z.get(o.P),e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.didViewUpdate||this._updateBatchableSprite(t,e),t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(const t in this._gpuSpriteHash)this._gpuSpriteHash[t].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}}a.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"nineSliceSprite"}},5773:(t,e,r)=>{"use strict";r.d(e,{x:()=>m});var n=r(8507),i=r(8639),s=r(7547),o=r(5099),a=r(2760),h=r(8734),l=r(5060),u=r(3558),c=r(4592),d=r(9933),p=r(5049);const f=new c.m;class m{constructor(t){this._state=s.U.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(t){const e=this._getTilingSpriteData(t),r=e.canBatch;this._updateCanBatch(t);const n=e.canBatch;if(n&&n===r){const{batchableMesh:r}=e;return!r._batcher.checkAndUpdateTexture(r,t.texture)}return r!==n}addRenderable(t,e){const r=this._renderer.renderPipes.batch;this._updateCanBatch(t);const n=this._getTilingSpriteData(t),{geometry:i,canBatch:s}=n;if(s){n.batchableMesh||(n.batchableMesh=new h.U);const s=n.batchableMesh;t.didViewUpdate&&(this._updateBatchableMesh(t),s.geometry=i,s.renderable=t,s.transform=t.groupTransform,s.texture=t._texture),s.roundPixels=this._renderer._roundPixels|t._roundPixels,r.addToBatch(s,e)}else r.break(e),n.shader||(n.shader=new u.S),this.updateRenderable(t),e.add(t)}execute(t){const{shader:e}=this._tilingSpriteDataHash[t.uid];e.groups[0]=this._renderer.globalUniforms.bindGroup;const r=e.resources.localUniforms.uniforms;r.uTransformMatrix=t.groupTransform,r.uRound=this._renderer._roundPixels|t._roundPixels,(0,a.V)(t.groupColorAlpha,r.uColor,0),this._state.blendMode=(0,i.i)(t.groupBlendMode,t.texture._source),this._renderer.encoder.draw({geometry:f,shader:e,state:this._state})}updateRenderable(t){const e=this._getTilingSpriteData(t),{canBatch:r}=e;if(r){const{batchableMesh:r}=e;t.didViewUpdate&&this._updateBatchableMesh(t),r._batcher.updateElement(r)}else if(t.didViewUpdate){const{shader:r}=e;r.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}}destroyRenderable(t){const e=this._getTilingSpriteData(t);e.batchableMesh=null,e.shader?.destroy(),this._tilingSpriteDataHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(t){return this._tilingSpriteDataHash[t.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){const e=new l.u({indices:f.indices,positions:f.positions.slice(),uvs:f.uvs.slice()});return this._tilingSpriteDataHash[t.uid]={canBatch:!0,renderable:t,geometry:e},t.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[t.uid]}_updateBatchableMesh(t){const e=this._getTilingSpriteData(t),{geometry:r}=e,n=t.texture.source.style;"repeat"!==n.addressMode&&(n.addressMode="repeat",n.update()),(0,p.X)(t,r.uvs),(0,d.t)(t,r.positions)}destroy(){for(const t in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[t].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(t){const e=this._getTilingSpriteData(t),r=t.texture;let n=!0;return this._renderer.type===o.W.WEBGL&&(n=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=r.textureMatrix.isSimple&&(n||r.source.isPowerOfTwo),e.canBatch}}m.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"tilingSprite"}},3558:(t,e,r)=>{"use strict";r.d(e,{S:()=>p});var n=r(9313),i=r(8587),s=r(2067),o=r(6665),a=r(8475),h=r(9921),l=r(4503),u=r(9315);let c,d;class p extends a.M{constructor(){c??(c=(0,i.v)({name:"tiling-sprite-shader",bits:[s.Ls,u.R,o.b]})),d??(d=(0,i.I)({name:"tiling-sprite-shader",bits:[s.mA,u.c,o.m]}));const t=new h.k({uMapCoord:{value:new n.u,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new n.u,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:d,gpuProgram:c,resources:{localUniforms:new h.k({uTransformMatrix:{value:new n.u,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:t,uTexture:l.g.EMPTY.source,uSampler:l.g.EMPTY.source.style}})}updateUniforms(t,e,r,n,i,s){const o=this.resources.tilingUniforms,a=s.width,h=s.height,l=s.textureMatrix,u=o.uniforms.uTextureTransform;u.set(r.a*a/t,r.b*a/e,r.c*h/t,r.d*h/e,r.tx/t,r.ty/e),u.invert(),o.uniforms.uMapCoord=l.mapCoord,o.uniforms.uClampFrame=l.uClampFrame,o.uniforms.uClampOffset=l.uClampOffset,o.uniforms.uTextureTransform=u,o.uniforms.uSizeAnchor[0]=t,o.uniforms.uSizeAnchor[1]=e,o.uniforms.uSizeAnchor[2]=n,o.uniforms.uSizeAnchor[3]=i,s&&(this.resources.uTexture=s.source,this.resources.uSampler=s.source.style)}}},9315:(t,e,r)=>{"use strict";r.d(e,{R:()=>n,c:()=>i});const n={name:"tiling-bit",vertex:{header:"\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        ",main:"\n            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;\n\n            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;\n        "},fragment:{header:"\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        ",main:"\n\n            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);\n            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;\n            var unclamped = coord;\n            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);\n\n            var bias = 0.;\n\n            if(unclamped.x == coord.x && unclamped.y == coord.y)\n            {\n                bias = -32.;\n            } \n\n            outColor = textureSampleBias(uTexture, uSampler, coord, bias);\n        "}},i={name:"tiling-bit",vertex:{header:"\n            uniform mat3 uTextureTransform;\n            uniform vec4 uSizeAnchor;\n        \n        ",main:"\n            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;\n\n            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;\n        "},fragment:{header:"\n            uniform sampler2D uTexture;\n            uniform mat3 uMapCoord;\n            uniform vec4 uClampFrame;\n            uniform vec2 uClampOffset;\n        ",main:"\n\n        vec2 coord = vUV + ceil(uClampOffset - vUV);\n        coord = (uMapCoord * vec3(coord, 1.0)).xy;\n        vec2 unclamped = coord;\n        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n        \n        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0\n    \n        "}}},4592:(t,e,r)=>{"use strict";r.d(e,{m:()=>i});var n=r(5060);class i extends n.u{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}},4852:(t,e,r)=>{"use strict";function n(t,e,r,n){let i=0;const s=t.length/(e||2),o=n.a,a=n.b,h=n.c,l=n.d,u=n.tx,c=n.ty;for(r*=e;i<s;){const n=t[r],s=t[r+1];t[r]=o*n+h*s+u,t[r+1]=a*n+l*s+c,r+=e,i++}}r.d(e,{Y:()=>n})},9933:(t,e,r)=>{"use strict";function n(t,e){const r=t.anchor.x,n=t.anchor.y;e[0]=-r*t.width,e[1]=-n*t.height,e[2]=(1-r)*t.width,e[3]=-n*t.height,e[4]=(1-r)*t.width,e[5]=(1-n)*t.height,e[6]=-r*t.width,e[7]=(1-n)*t.height}r.d(e,{t:()=>n})},5049:(t,e,r)=>{"use strict";r.d(e,{X:()=>s});var n=r(9313),i=r(4852);function s(t,e){const r=t.texture,s=r.frame.width,o=r.frame.height;let a=0,h=0;t.applyAnchorToTexture&&(a=t.anchor.x,h=t.anchor.y),e[0]=e[6]=-a,e[2]=e[4]=1-a,e[1]=e[3]=-h,e[5]=e[7]=1-h;const l=n.u.shared;l.copyFrom(t._tileTransform.matrix),l.tx/=t.width,l.ty/=t.height,l.invert(),l.scale(t.width/s,t.height/o),(0,i.Y)(e,2,0,l)}},8422:(t,e,r)=>{"use strict";r.d(e,{K:()=>n});class n{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}},6844:(t,e,r)=>{"use strict";r.d(e,{k:()=>h});var n=r(2812),i=r(4503),s=r(2048),o=r(4670),a=r(4985);class h extends a.l{constructor(t=i.g.EMPTY){t instanceof i.g&&(t={texture:t});const{texture:e=i.g.EMPTY,anchor:r,roundPixels:s,width:o,height:a,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new n.o({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=s??!1,void 0!==o&&(this.width=o),void 0!==a&&(this.height=a)}static from(t,e=!1){return t instanceof i.g?new h(t):new h(i.g.from(t,e))}set texture(t){t||(t=i.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return(0,s.y)(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return(0,o.t6)("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,r=this._bounds,{width:n,height:i}=e.orig;r.minX=-t._x*n,r.maxX=r.minX+n,r.minY=-t._y*i,r.maxY=r.minY+i}destroy(t=!1){if(super.destroy(t),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._texture.destroy(e)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){"object"==typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,this._texture.orig.width),void 0!==e&&this._setHeight(e,this._texture.orig.height)}}},3136:(t,e,r)=>{"use strict";r.d(e,{k:()=>o});var n=r(8507),i=r(8218),s=r(8422);class o{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){const r=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,r),this._renderer.renderPipes.batch.addToBatch(r,e)}updateRenderable(t){const e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}destroyRenderable(t){const e=this._gpuSpriteHash[t.uid];i.Z.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.bounds=t.visualBounds,e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=i.Z.get(s.K);return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.visualBounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(const t in this._gpuSpriteHash)i.Z.return(this._gpuSpriteHash[t]);this._gpuSpriteHash=null,this._renderer=null}}o.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"sprite"}},1849:(t,e,r)=>{"use strict";r.d(e,{v:()=>s});var n=r(4486),i=r(4670);class s extends n.A{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return(0,i.t6)(i.lj,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return(0,i.t6)(i.lj,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return(0,i.t6)(i.lj,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return(0,i.t6)(i.lj,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return(0,i.t6)(i.lj,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,t&&(this.pages.forEach((t=>t.texture.destroy(!0))),this.pages=null)}}},6204:(t,e,r)=>{"use strict";r.d(e,{c:()=>c});var n=r(1979),i=r(4670),s=r(268),o=r(8291),a=r(678),h=r(2763),l=r(6653);let u=0;const c=new class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){let r=`${e.fontFamily}-bitmap`,i=!0;if(e._fill.fill&&!e._stroke)r+=e._fill.fill.styleKey,i=!1;else if(e._stroke||e.dropShadow){let t=e.styleKey;t=t.substring(0,t.lastIndexOf("-")),r=`${t}-bitmap`,i=!1}if(!n.l.has(r)){const t=new a.u({style:e,overrideFill:i,overrideSize:!0,...this.defaultOptions});u++,u>50&&(0,s.R)("BitmapText",`You have dynamically created ${u} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),t.once("destroy",(()=>{u--,n.l.remove(r)})),n.l.set(r,t)}const o=n.l.get(r);return o.ensureCharacters?.(t),o}getLayout(t,e,r=!0){const n=this.getFont(t,e);return(0,h.Z)([...t],e,n,r)}measureText(t,e,r=!0){return this.getLayout(t,e,r)}install(...t){let e=t[0];"string"==typeof e&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},(0,i.t6)(i.lj,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const r=e?.name;if(!r)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const s=e.style,h=s instanceof o.x?s:new o.x(s),u=null!==h._fill.fill&&void 0!==h._fill.fill,c=new a.u({style:h,overrideFill:u,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),d=(0,l.D)(e.chars);return c.ensureCharacters(d.join("")),n.l.set(`${r}-bitmap`,c),c.once("destroy",(()=>n.l.remove(`${r}-bitmap`))),c}uninstall(t){const e=`${t}-bitmap`,r=n.l.get(e);r&&r.destroy()}}},661:(t,e,r)=>{"use strict";r.d(e,{n:()=>u});var n=r(1979),i=r(8507),s=r(8218),o=r(9408),a=r(7018),h=r(6204),l=r(2763);class u{constructor(t){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(t){const e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){const r=this._getGpuBitmapText(t);c(t,r),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,r)),this._renderer.renderPipes.graphics.addRenderable(r,e),r.context.customShader&&this._updateDistanceField(t)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(t.uid)}_destroyRenderableByUid(t){const e=this._gpuBitmapText[t].context;e.customShader&&(s.Z.return(e.customShader),e.customShader=null),s.Z.return(this._gpuBitmapText[t]),this._gpuBitmapText[t]=null}updateRenderable(t){const e=this._getGpuBitmapText(t);c(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){const{context:r}=e,n=h.c.getFont(t.text,t._style);r.clear(),"none"!==n.distanceField.type&&(r.customShader||(r.customShader=s.Z.get(a.$)));const i=Array.from(t.text),o=t._style;let u=n.baseLineOffset;const c=(0,l.Z)(i,o,n,!0);let d=0;const p=o.padding,f=c.scale;let m=c.width,g=c.height+c.offsetY;o._stroke&&(m+=o._stroke.width/f,g+=o._stroke.width/f),r.translate(-t._anchor._x*m-p,-t._anchor._y*g-p).scale(f,f);const _=n.applyFillAsTint?o._fill.color:16777215;for(let t=0;t<c.lines.length;t++){const e=c.lines[t];for(let t=0;t<e.charPositions.length;t++){const s=i[d++],o=n.chars[s];o?.texture&&r.texture(o.texture,_||"black",Math.round(e.charPositions[t]+o.xOffset),Math.round(u+o.yOffset))}u+=n.lineHeight}}_getGpuBitmapText(t){return this._gpuBitmapText[t.uid]||this.initGpuText(t)}initGpuText(t){const e=s.Z.get(o.A);return this._gpuBitmapText[t.uid]=e,this._updateContext(t,e),t.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[t.uid]}_updateDistanceField(t){const e=this._getGpuBitmapText(t).context,r=t._style.fontFamily,i=n.l.get(`${r}-bitmap`),{a:s,b:o,c:a,d:h}=t.groupTransform,l=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+h*h),c=(Math.abs(l)+Math.abs(u))/2,d=i.baseRenderedFontSize/t._style.fontSize,p=c*i.distanceField.range*(1/d);e.customShader.resources.localUniforms.uniforms.uDistance=p}destroy(){for(const t in this._gpuBitmapText)this._destroyRenderableByUid(t);this._gpuBitmapText=null,this._renderer=null}}function c(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}u.extension={type:[i.Ag.WebGLPipes,i.Ag.WebGPUPipes,i.Ag.CanvasPipes],name:"bitmapText"}},678:(t,e,r)=>{"use strict";r.d(e,{u:()=>g});var n=r(2577),i=r(9252),s=r(7608),o=r(8293),a=r(4503),h=r(4670),l=r(4016),u=r(1242),c=r(3548),d=r(8291),p=r(1849),f=r(6653);const m=class t extends p.v{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const r={...t.defaultOptions,...e};this._textureSize=r.textureSize,this._mipmap=r.mipmap;const n=r.style.clone();r.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=a.g.WHITE,n._fill.fill=null),this.applyFillAsTint=r.overrideFill;const i=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const s=(0,u.Z)(n);r.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/i):n.fontSize=this.baseRenderedFontSize=i,this._style=n,this._skipKerning=r.skipKerning??!1,this.resolution=r.resolution??1,this._padding=r.padding??4,this.fontMetrics=l.P.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(t){const e=(0,f.D)(t).filter((t=>!this._currentChars.includes(t))).filter(((t,e,r)=>r.indexOf(t)===e));if(!e.length)return;let r;this._currentChars=[...this._currentChars,...e],r=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex];let{canvas:n,context:s}=r.canvasAndContext,o=r.texture.source;const h=this._style;let u=this._currentX,c=this._currentY;const d=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*d;let m=0,g=!1;const _=n.width/this.resolution,b=n.height/this.resolution;for(let t=0;t<e.length;t++){const r=e[t],f=l.P.measureText(r,h,n,!1);f.lineHeight=f.height;const x=f.width*d,v=Math.ceil(("italic"===h.fontStyle?2:1)*x)+2*p,y=f.height*d+2*p;if(g=!1,"\n"!==r&&"\r"!==r&&"\t"!==r&&" "!==r&&(g=!0,m=Math.ceil(Math.max(y,m))),u+v>_&&(c+=m,m=y,u=0,c+m>b)){o.update();const t=this._nextPage();n=t.canvasAndContext.canvas,s=t.canvasAndContext.context,o=t.texture.source,c=0}const C=x/d-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[r]={id:r.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:C,kerning:{}},g){this._drawGlyph(s,f,u+p,c+p,d,h);const t=o.width*d,e=o.height*d,n=new i.M(u/t*o.width,c/e*o.height,v/t*o.width,y/e*o.height);this.chars[r].texture=new a.g({source:o,frame:n}),u+=Math.ceil(v)}}o.update(),this._currentX=u,this._currentY=c,this._skipKerning&&this._applyKerning(e,s)}get pageTextures(){return(0,h.t6)(h.lj,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const r=this._measureCache;for(let n=0;n<t.length;n++){const i=t[n];for(let t=0;t<this._currentChars.length;t++){const n=this._currentChars[t];let s=r[i];s||(s=r[i]=e.measureText(i).width);let o=r[n];o||(o=r[n]=e.measureText(n).width);let a=e.measureText(i+n).width,h=a-(s+o);h&&(this.chars[i].kerning[n]=h),a=e.measureText(i+n).width,h=a-(s+o),h&&(this.chars[n].kerning[i]=h)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=s.N.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const r=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),n={canvasAndContext:e,texture:new a.g({source:new o.b({resource:e.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})})};return this.pages[this._currentPageIndex]=n,n}_setupContext(t,e,r){e.fontSize=this.baseRenderedFontSize,t.scale(r,r),t.font=(0,u.Z)(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const i=e._stroke,s=i?.width??0;if(i&&(t.lineWidth=s,t.lineJoin=i.join,t.miterLimit=i.miterLimit,t.strokeStyle=(0,c.r)(i,t)),e._fill&&(t.fillStyle=(0,c.r)(e._fill,t)),e.dropShadow){const i=e.dropShadow,s=n.Q.shared.setValue(i.color).toArray(),o=i.blur*r,a=i.distance*r;t.shadowColor=`rgba(${255*s[0]},${255*s[1]},${255*s[2]},${i.alpha})`,t.shadowBlur=o,t.shadowOffsetX=Math.cos(i.angle)*a,t.shadowOffsetY=Math.sin(i.angle)*a}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,r,n,i,s){const o=e.text,a=e.fontProperties,h=s._stroke,l=(h?.width??0)*i,u=r+l/2,c=n-l/2,d=a.descent*i,p=e.lineHeight*i;s.stroke&&l&&t.strokeText(o,u,c+p-d),s._fill&&t.fillText(o,u,c+p-d)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:r}=this.pages[t];s.N.returnCanvasAndContext(e),r.destroy(!0)}this.pages=null}};m.defaultOptions={textureSize:512,style:new d.x,mipmap:!0};let g=m},2763:(t,e,r)=>{"use strict";function n(t,e,r,n){const i={width:0,height:0,offsetY:0,scale:e.fontSize/r.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=r.baseLineOffset;let s=i.lines[0],o=null,a=!0;const h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=t=>{const e=s.width;for(let r=0;r<h.index;r++){const n=t.positions[r];s.chars.push(t.chars[r]),s.charPositions.push(n+e)}s.width+=t.width,a=!1,h.width=0,h.index=0,h.chars.length=0},u=()=>{let t=s.chars.length-1;if(n){let e=s.chars[t];for(;" "===e;)s.width-=r.chars[e].xAdvance,e=s.chars[--t]}i.width=Math.max(i.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,i.lines.push(s),i.height+=r.lineHeight},c=r.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*c,p=e.wordWrapWidth*c;for(let n=0;n<t.length+1;n++){let i;const c=n===t.length;c||(i=t[n]);const f=r.chars[i]||r.chars[" "];if(/(?:\s)/.test(i)||"\r"===i||"\n"===i||c){if(!a&&e.wordWrap&&s.width+h.width-d>p?(u(),l(h),c||s.charPositions.push(0)):(h.start=s.width,l(h),c||s.charPositions.push(0)),"\r"===i||"\n"===i)0!==s.width&&u();else if(!c){const t=f.xAdvance+(f.kerning[o]||0)+d;s.width+=t,s.spaceWidth=t,s.spacesIndex.push(s.charPositions.length),s.chars.push(i)}}else{const t=f.kerning[o]||0,e=f.xAdvance+t+d;h.positions[h.index++]=h.width+t,h.chars.push(i),h.width+=e}o=i}return u(),"center"===e.align?function(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],n=t.width/2-r.width/2;for(let t=0;t<r.charPositions.length;t++)r.charPositions[t]+=n}}(i):"right"===e.align?function(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],n=t.width-r.width;for(let t=0;t<r.charPositions.length;t++)r.charPositions[t]+=n}}(i):"justify"===e.align&&function(t){const e=t.width;for(let r=0;r<t.lines.length;r++){const n=t.lines[r];let i=0,s=n.spacesIndex[i++],o=0;const a=n.spacesIndex.length,h=(e-n.width)/a;for(let t=0;t<n.charPositions.length;t++)t===s&&(s=n.spacesIndex[i++],o+=h),n.charPositions[t]+=o}}(i),i}r.d(e,{Z:()=>n})},6653:(t,e,r)=>{"use strict";function n(t){if(""===t)return[];"string"==typeof t&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);if(0===n[0].length||0===n[1].length)throw new Error("[BitmapFont]: Invalid character delimiter.");const t=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<t)throw new Error("[BitmapFont]: Invalid character range.");for(let n=t,i=r;n<=i;n++)e.push(String.fromCharCode(n))}else e.push(...Array.from(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}r.d(e,{D:()=>n})},6829:(t,e,r)=>{"use strict";r.d(e,{n:()=>h});var n=r(8507),i=r(4503),s=r(8218),o=r(8422),a=r(2289);class h{constructor(t){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(const t in this._gpuText){const e=this._gpuText[t];if(!e)continue;const r=e.batchableSprite.renderable;r._autoResolution&&(r._resolution=this._renderer.resolution,r.onViewUpdate())}}validateRenderable(t){const e=this._getGpuText(t),r=t._getKey();return e.textureNeedsUploading?(e.textureNeedsUploading=!1,!0):e.currentKey!==r}addRenderable(t,e){const r=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(r,e)}updateRenderable(t){const e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e._batcher.updateElement(e)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(t.uid)}_destroyRenderableById(t){const e=this._gpuText[t];this._renderer.htmlText.decreaseReferenceCount(e.currentKey),s.Z.return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){const e=t._getKey(),r=this._getGpuText(t),n=r.batchableSprite;r.currentKey!==e&&this._updateGpuText(t).catch((t=>{})),t._didTextUpdate=!1,(0,a.s)(n,t)}async _updateGpuText(t){t._didTextUpdate=!1;const e=this._getGpuText(t);if(e.generatingTexture)return;const r=t._getKey();this._renderer.htmlText.decreaseReferenceCount(e.currentKey),e.generatingTexture=!0,e.currentKey=r;const n=t.resolution??this._renderer.resolution,i=await this._renderer.htmlText.getManagedTexture(t.text,n,t._style,t._getKey()),s=e.batchableSprite;s.texture=e.texture=i,e.generatingTexture=!1,e.textureNeedsUploading=!0,t.onViewUpdate(),(0,a.s)(s,t)}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){const e={texture:i.g.EMPTY,currentKey:"--",batchableSprite:s.Z.get(o.K),textureNeedsUploading:!1,generatingTexture:!1},r=e.batchableSprite;return r.renderable=t,r.transform=t.groupTransform,r.texture=i.g.EMPTY,r.bounds={minX:0,maxX:1,minY:0,maxY:0},r.roundPixels=this._renderer._roundPixels|t._roundPixels,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,this._gpuText[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(const t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}}h.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"htmlText"}},5337:(t,e,r)=>{"use strict";r.d(e,{e8:()=>n,hv:()=>i,pF:()=>s});const n="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xhtml";class s{constructor(){this.svgRoot=document.createElementNS(n,"svg"),this.foreignObject=document.createElementNS(n,"foreignObject"),this.domElement=document.createElementNS(i,"div"),this.styleElement=document.createElementNS(i,"style"),this.image=new Image;const{foreignObject:t,svgRoot:e,styleElement:r,domElement:s}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(r),t.appendChild(s)}}},7676:(t,e,r)=>{"use strict";r.d(e,{I:()=>a});var n=r(268),i=r(8291),s=r(8011),o=r(2157);class a extends i.x{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=t.cssOverrides),this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=(0,s.V)(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=(0,o.n)(this)),this._cssStyle}addOverride(...t){const e=t.filter((t=>!this.cssOverrides.includes(t)));e.length>0&&(this.cssOverrides.push(...e),this.update())}removeOverride(...t){const e=t.filter((t=>this.cssOverrides.includes(t)));e.length>0&&(this.cssOverrides=this.cssOverrides.filter((t=>!e.includes(t))),this.update())}set fill(t){"string"!=typeof t&&"number"!=typeof t&&(0,n.R)("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&"string"!=typeof t&&"number"!=typeof t&&(0,n.R)("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}},7602:(t,e,r)=>{"use strict";r.d(e,{Q:()=>x});var n=r(8507),i=r(7608),s=r(2437),o=r(5099),a=r(4897),h=r(268),l=r(8218),u=r(2558),c=r(5337),d=r(7676),p=r(6783),f=r(4117),m=r(7382),g=r(6347),_=r(7988),b=r(2073);class x{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===o.W.WEBGPU}getTexture(t){return this._buildTexturePromise(t.text,t.resolution,t.style)}getManagedTexture(t,e,r,n){if(this._activeTextures[n])return this._increaseReferenceCount(n),this._activeTextures[n].promise;const i=this._buildTexturePromise(t,e,r).then((t=>(this._activeTextures[n].texture=t,t)));return this._activeTextures[n]={texture:null,promise:i,usageCount:1},i}async _buildTexturePromise(t,e,r){const n=l.Z.get(c.pF),s=(0,p.F)(t,r),o=await(0,f.Z)(s,r,d.I.defaultTextStyle),h=(0,b.r)(t,r,o,n),x=Math.ceil(Math.ceil(Math.max(1,h.width)+2*r.padding)*e),v=Math.ceil(Math.ceil(Math.max(1,h.height)+2*r.padding)*e),y=n.image;y.width=2+(0|x),y.height=2+(0|v);const C=(0,m.e)(t,r,e,o,n);await(0,_.c)(y,C,(0,a.n)()&&s.length>0);const T=y;let S;this._createCanvas&&(S=(0,g.J)(y,e));const w=(0,u.M)(S?S.canvas:T,y.width-2,y.height-2,e);return this._createCanvas&&(this._renderer.texture.initSource(w.source),i.N.returnCanvasAndContext(S)),l.Z.return(n),w}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){const e=this._activeTextures[t];e&&(e.usageCount--,0===e.usageCount&&(e.texture?this._cleanUp(e):e.promise.then((t=>{e.texture=t,this._cleanUp(e)})).catch((()=>{(0,h.R)("HTMLTextSystem: Failed to clean texture")})),this._activeTextures[t]=null))}_cleanUp(t){s.W.returnTexture(t.texture),t.texture.source.resource=null,t.texture.source.uploadMethodId="unknown"}getReferenceCount(t){return this._activeTextures[t].usageCount}destroy(){this._activeTextures=null}}x.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem,n.Ag.CanvasSystem],name:"htmlText"},x.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"}},6783:(t,e,r)=>{"use strict";function n(t,e){const r=e.fontFamily,n=[],i={},s=t.match(/font-family:([^;"\s]+)/g);function o(t){i[t]||(n.push(t),i[t]=!0)}if(Array.isArray(r))for(let t=0;t<r.length;t++)o(r[t]);else o(r);s&&s.forEach((t=>{o(t.split(":")[1].trim())}));for(const t in e.tagStyles)o(e.tagStyles[t].fontFamily);return n}r.d(e,{F:()=>n})},4117:(t,e,r)=>{"use strict";r.d(e,{G:()=>s,Z:()=>o});var n=r(1979),i=r(9995);const s=new Map;async function o(t,e,r){const o=t.filter((t=>n.l.has(`${t}-and-url`))).map(((t,o)=>{if(!s.has(t)){const{url:a}=n.l.get(`${t}-and-url`);0===o?s.set(t,(0,i.f)({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:t},a)):s.set(t,(0,i.f)({fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontFamily:t},a))}return s.get(t)}));return(await Promise.all(o)).join("\n")}},7382:(t,e,r)=>{"use strict";function n(t,e,r,n,i){const{domElement:s,styleElement:o,svgRoot:a}=i;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${t}</div>`,s.setAttribute("style",`transform: scale(${r});transform-origin: top left; display: inline-block`),o.textContent=n;const{width:h,height:l}=i.image;return a.setAttribute("width",h.toString()),a.setAttribute("height",l.toString()),(new XMLSerializer).serializeToString(a)}r.d(e,{e:()=>n})},6347:(t,e,r)=>{"use strict";r.d(e,{J:()=>i});var n=r(7608);function i(t,e){const r=n.N.getOptimalCanvasAndContext(t.width,t.height,e),{context:i}=r;return i.clearRect(0,0,t.width,t.height),i.drawImage(t,0,0),r}},6555:(t,e,r)=>{"use strict";r.d(e,{x:()=>i});var n=r(3751);async function i(t){const e=await n.e.get().fetch(t),r=await e.blob(),i=new FileReader;return await new Promise(((t,e)=>{i.onloadend=()=>t(i.result),i.onerror=e,i.readAsDataURL(r)}))}},9995:(t,e,r)=>{"use strict";r.d(e,{f:()=>i});var n=r(6555);async function i(t,e){const r=await(0,n.x)(e);return`@font-face {\n        font-family: "${t.fontFamily}";\n        src: url('${r}');\n        font-weight: ${t.fontWeight};\n        font-style: ${t.fontStyle};\n    }`}},7988:(t,e,r)=>{"use strict";function n(t,e,r){return new Promise((async n=>{r&&await new Promise((t=>setTimeout(t,100))),t.onload=()=>{n()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"}))}r.d(e,{c:()=>n})},2073:(t,e,r)=>{"use strict";r.d(e,{r:()=>s});var n=r(5337);let i;function s(t,e,r,s){s||(s=i||(i=new n.pF));const{domElement:o,styleElement:a,svgRoot:h}=s;o.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${t}</div>`,o.setAttribute("style","transform-origin: top left; display: inline-block"),r&&(a.textContent=r),document.body.appendChild(h);const l=o.getBoundingClientRect();h.remove();const u=2*e.padding;return{width:l.width-u,height:l.height-u}}},2157:(t,e,r)=>{"use strict";r.d(e,{n:()=>i});var n=r(2577);function i(t){const e=t._stroke,r=t._fill,i=[`div { ${[`color: ${n.Q.shared.setValue(r.color).toHex()}`,`font-size: ${t.fontSize}px`,`font-family: ${t.fontFamily}`,`font-weight: ${t.fontWeight}`,`font-style: ${t.fontStyle}`,`font-variant: ${t.fontVariant}`,`letter-spacing: ${t.letterSpacing}px`,`text-align: ${t.align}`,`padding: ${t.padding}px`,`white-space: ${"pre"===t.whiteSpace&&t.wordWrap?"pre-wrap":t.whiteSpace}`,...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?["word-wrap: "+(t.breakWords?"break-all":"break-word"),`max-width: ${t.wordWrapWidth}px`]:[],...e?[o(e)]:[],...t.dropShadow?[s(t.dropShadow)]:[],...t.cssOverrides].join(";")} }`];return function(t,e){for(const r in t){const n=t[r],i=[];for(const t in n)h[t]?i.push(h[t](n[t])):a[t]&&i.push(a[t].replace("{{VALUE}}",n[t]));e.push(`${r} { ${i.join(";")} }`)}}(t.tagStyles,i),i.join(" ")}function s(t){const e=n.Q.shared.setValue(t.color).setAlpha(t.alpha).toHexa(),r=`${Math.round(Math.cos(t.angle)*t.distance)}px ${Math.round(Math.sin(t.angle)*t.distance)}px`;return t.blur>0?`text-shadow: ${r} ${t.blur}px ${e}`:`text-shadow: ${r} ${e}`}function o(t){return[`-webkit-text-stroke-width: ${t.width}px`,`-webkit-text-stroke-color: ${n.Q.shared.setValue(t.color).toHex()}`,`text-stroke-width: ${t.width}px`,`text-stroke-color: ${n.Q.shared.setValue(t.color).toHex()}`,"paint-order: stroke"].join(";")}const a={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},h={fill:t=>`color: ${n.Q.shared.setValue(t).toHex()}`,breakWords:t=>"word-wrap: "+(t?"break-all":"break-word"),stroke:o,dropShadow:s}},8291:(t,e,r)=>{"use strict";r.d(e,{x:()=>d});var n=r(4486),i=r(2577),s=r(4670),o=r(7276),a=r(2806),h=r(5801),l=r(990),u=r(8011);const c=class t extends n.A{constructor(e={}){super(),function(t){const e=t;if("boolean"==typeof e.dropShadow&&e.dropShadow){const r=d.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??r.alpha,angle:e.dropShadowAngle??r.angle,blur:e.dropShadowBlur??r.blur,color:e.dropShadowColor??r.color,distance:e.dropShadowDistance??r.distance}}if(void 0!==e.strokeThickness){(0,s.t6)(s.lj,"strokeThickness is now a part of stroke");const r=e.stroke;let n={};if(i.Q.isColorLike(r))n.color=r;else if(r instanceof o._||r instanceof a.m)n.fill=r;else{if(!Object.hasOwnProperty.call(r,"color")&&!Object.hasOwnProperty.call(r,"fill"))throw new Error("Invalid stroke value.");n=r}t.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){let r;(0,s.t6)(s.lj,"gradient fill is now a fill pattern: `new FillGradient(...)`"),null==t.fontSize?t.fontSize=d.defaultTextStyle.fontSize:r="string"==typeof t.fontSize?parseInt(t.fontSize,10):t.fontSize;const n=new o._(0,0,0,1.7*r),a=e.fillGradientStops.map((t=>i.Q.shared.setValue(t).toNumber()));a.forEach(((t,e)=>{const r=e/(a.length-1);n.addColorStop(r,t)})),t.fill={fill:n}}}(e);const r={...t.defaultTextStyle,...e};for(const t in r)this[t]=r[t];this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow=null!==e&&"object"==typeof e?this._createProxy({...t.defaultDropShadow,...e}):e?this._createProxy({...t.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize="string"==typeof t?parseInt(t,10):t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...h.T.defaultFillStyle,...t},(()=>{this._fill=(0,l.w)({...this._originalFill},h.T.defaultFillStyle)}))),this._fill=(0,l.w)(0===t?"black":t,h.T.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...h.T.defaultStrokeStyle,...t},(()=>{this._stroke=(0,l.T)({...this._originalStroke},h.T.defaultStrokeStyle)}))),this._stroke=(0,l.T)(t,h.T.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,u.V)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=t.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){if(this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(e),this._originalFill?.texture&&this._originalFill.texture.destroy(e),this._stroke?.texture&&this._stroke.texture.destroy(e),this._originalStroke?.texture&&this._originalStroke.texture.destroy(e)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(t,r,n)=>(t[r]=n,e?.(r,n),this.update(),!0)})}_isFillStyle(t){return null!==(t??null)&&!(i.Q.isColorLike(t)||t instanceof o._||t instanceof a.m)}};c.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},c.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let d=c},4016:(t,e,r)=>{"use strict";r.d(e,{P:()=>a});var n=r(3751),i=r(1242);const s={willReadFrequently:!0},o=class t{static get experimentalLetterSpacingSupported(){let e=t._experimentalLetterSpacingSupported;if(void 0!==e){const r=n.e.get().getCanvasRenderingContext2D().prototype;e=t._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(t,e,r,n,i,s,o,a,h){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}static measureText(e=" ",r,n=t._canvas,s=r.wordWrap){const o=`${e}:${r.styleKey}`;if(t._measurementCache[o])return t._measurementCache[o];const a=(0,i.Z)(r),h=t.measureFont(a);0===h.fontSize&&(h.fontSize=r.fontSize,h.ascent=r.fontSize);const l=t.__context;l.font=a;const u=(s?t._wordWrap(e,r,n):e).split(/(?:\r\n|\r|\n)/),c=new Array(u.length);let d=0;for(let e=0;e<u.length;e++){const n=t._measureText(u[e],r.letterSpacing,l);c[e]=n,d=Math.max(d,n)}const p=r._stroke?.width||0;let f=d+p;r.dropShadow&&(f+=r.dropShadow.distance);const m=r.lineHeight||h.fontSize;let g=Math.max(m,h.fontSize+p)+(u.length-1)*(m+r.leading);return r.dropShadow&&(g+=r.dropShadow.distance),new t(e,r,f,g,u,c,m+r.leading,d,h)}static _measureText(e,r,n){let i=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const s=n.measureText(e);let o=s.width;const a=-s.actualBoundingBoxLeft;let h=s.actualBoundingBoxRight-a;if(o>0)if(i)o-=r,h-=r;else{const n=(t.graphemeSegmenter(e).length-1)*r;o+=n,h+=n}return Math.max(o,h)}static _wordWrap(e,r,n=t._canvas){const i=n.getContext("2d",s);let o=0,a="",h="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=r,d=t._collapseSpaces(c),p=t._collapseNewlines(c);let f=!d;const m=r.wordWrapWidth+u,g=t._tokenize(e);for(let e=0;e<g.length;e++){let n=g[e];if(t._isNewline(n)){if(!p){h+=t._addLine(a),f=!d,a="",o=0;continue}n=" "}if(d){const e=t.isBreakingSpace(n),r=t.isBreakingSpace(a[a.length-1]);if(e&&r)continue}const s=t._getFromCache(n,u,l,i);if(s>m)if(""!==a&&(h+=t._addLine(a),a="",o=0),t.canBreakWords(n,r.breakWords)){const e=t.wordWrapSplit(n);for(let s=0;s<e.length;s++){let c=e[s],d=c,p=1;for(;e[s+p];){const i=e[s+p];if(t.canBreakChars(d,i,n,s,r.breakWords))break;c+=i,d=i,p++}s+=p-1;const g=t._getFromCache(c,u,l,i);g+o>m&&(h+=t._addLine(a),f=!1,a="",o=0),a+=c,o+=g}}else{a.length>0&&(h+=t._addLine(a),a="",o=0);const r=e===g.length-1;h+=t._addLine(n,!r),f=!1,a="",o=0}else s+o>m&&(f=!1,h+=t._addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(n)||f)&&(a+=n,o+=s)}return h+=t._addLine(a,!1),h}static _addLine(e,r=!0){return e=t._trimRight(e),r?`${e}\n`:e}static _getFromCache(e,r,n,i){let s=n[e];return"number"!=typeof s&&(s=t._measureText(e,r,i)+r,n[e]=s),s}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"==typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return"string"==typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const r=[];let n="";if("string"!=typeof e)return r;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];t.isBreakingSpace(s,o)||t._isNewline(s)?(""!==n&&(r.push(n),n=""),r.push(s)):n+=s}return""!==n&&r.push(n),r}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,i){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];const r=t._context;r.font=e;const n=r.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),i={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return t._fonts[e]=i,i}static clearMetrics(e=""){e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let e;try{const r=new OffscreenCanvas(0,0),i=r.getContext("2d",s);if(i?.measureText)return t.__canvas=r,r;e=n.e.get().createCanvas()}catch(t){e=n.e.get().createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",s)),t.__context}};o.METRICS_STRING="|ÉqÅ",o.BASELINE_SYMBOL="M",o.BASELINE_MULTIPLIER=1.4,o.HEIGHT_MULTIPLIER=2,o.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map((t=>t.segment))}return t=>[...t]})(),o.experimentalLetterSpacing=!1,o._fonts={},o._newlines=[10,13],o._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],o._measurementCache={};let a=o},5369:(t,e,r)=>{"use strict";r.d(e,{e:()=>a});var n=r(8507),i=r(8218),s=r(8422),o=r(2289);class a{constructor(t){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(const t in this._gpuText){const e=this._gpuText[t];if(!e)continue;const r=e.batchableSprite.renderable;r._autoResolution&&(r._resolution=this._renderer.resolution,r.onViewUpdate())}}validateRenderable(t){const e=this._getGpuText(t),r=t._getKey();return e.currentKey!==r}addRenderable(t,e){const r=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(r,e)}updateRenderable(t){const e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e._batcher.updateElement(e)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(t.uid)}_destroyRenderableById(t){const e=this._gpuText[t];this._renderer.canvasText.decreaseReferenceCount(e.currentKey),i.Z.return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){const e=t._getKey(),r=this._getGpuText(t),n=r.batchableSprite;r.currentKey!==e&&this._updateGpuText(t),t._didTextUpdate=!1,(0,o.s)(n,t)}_updateGpuText(t){const e=this._getGpuText(t),r=e.batchableSprite;e.texture&&this._renderer.canvasText.decreaseReferenceCount(e.currentKey),e.texture=r.texture=this._renderer.canvasText.getManagedTexture(t),e.currentKey=t._getKey(),r.texture=e.texture}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){const e={texture:null,currentKey:"--",batchableSprite:i.Z.get(s.K)};return e.batchableSprite.renderable=t,e.batchableSprite.transform=t.groupTransform,e.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},e.batchableSprite.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,this._updateText(t),t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(const t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}}a.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"text"}},7278:(t,e,r)=>{"use strict";r.d(e,{p:()=>m});var n=r(2577),i=r(8507),s=r(9939),o=r(7608),a=r(2437),h=r(1222),l=r(4670),u=r(8291),c=r(2558),d=r(4016),p=r(1242),f=r(3548);class m{constructor(t){this._activeTextures={},this._renderer=t}getTextureSize(t,e,r){const n=d.P.measureText(t||" ",r);let i=Math.ceil(Math.ceil(Math.max(1,n.width)+2*r.padding)*e),o=Math.ceil(Math.ceil(Math.max(1,n.height)+2*r.padding)*e);return i=Math.ceil(i-1e-6),o=Math.ceil(o-1e-6),i=(0,s.U5)(i),o=(0,s.U5)(o),{width:i,height:o}}getTexture(t,e,r,n){"string"==typeof t&&((0,l.t6)("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),t={text:t,style:r,resolution:e}),t.style instanceof u.x||(t.style=new u.x(t.style));const{texture:i,canvasAndContext:s}=this.createTextureAndCanvas(t);return this._renderer.texture.initSource(i._source),o.N.returnCanvasAndContext(s),i}createTextureAndCanvas(t){const{text:e,style:r}=t,n=t.resolution??this._renderer.resolution,i=d.P.measureText(e||" ",r),s=Math.ceil(Math.ceil(Math.max(1,i.width)+2*r.padding)*n),a=Math.ceil(Math.ceil(Math.max(1,i.height)+2*r.padding)*n),l=o.N.getOptimalCanvasAndContext(s,a),{canvas:u}=l;this.renderTextToCanvas(e,r,n,l);const p=(0,c.M)(u,s,a,n);if(r.trim){const t=(0,h.m)(u,n);p.frame.copyFrom(t),p.updateUvs()}return{texture:p,canvasAndContext:l}}getManagedTexture(t){t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;const e=t._getKey();if(this._activeTextures[e])return this._increaseReferenceCount(e),this._activeTextures[e].texture;const{texture:r,canvasAndContext:n}=this.createTextureAndCanvas(t);return this._activeTextures[e]={canvasAndContext:n,texture:r,usageCount:1},r}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){const e=this._activeTextures[t];if(e.usageCount--,0===e.usageCount){o.N.returnCanvasAndContext(e.canvasAndContext),a.W.returnTexture(e.texture);const r=e.texture.source;r.resource=null,r.uploadMethodId="unknown",r.alphaMode="no-premultiply-alpha",this._activeTextures[t]=null}}getReferenceCount(t){return this._activeTextures[t].usageCount}renderTextToCanvas(t,e,r,i){const{canvas:s,context:o}=i,a=(0,p.Z)(e),h=d.P.measureText(t||" ",e),l=h.lines,u=h.lineHeight,c=h.lineWidths,m=h.maxLineWidth,g=h.fontProperties,_=s.height;if(o.resetTransform(),o.scale(r,r),o.textBaseline=e.textBaseline,e._stroke?.width){const t=e._stroke;o.lineWidth=t.width,o.miterLimit=t.miterLimit,o.lineJoin=t.join,o.lineCap=t.cap}let b,x;o.font=a;const v=e.dropShadow?2:1;for(let t=0;t<v;++t){const s=e.dropShadow&&0===t,a=s?Math.ceil(Math.max(1,_)+2*e.padding):0,h=a*r;if(s){o.fillStyle="black",o.strokeStyle="black";const t=e.dropShadow,i=t.color,s=t.alpha;o.shadowColor=n.Q.shared.setValue(i).setAlpha(s).toRgbaString();const a=t.blur*r,l=t.distance*r;o.shadowBlur=a,o.shadowOffsetX=Math.cos(t.angle)*l,o.shadowOffsetY=Math.sin(t.angle)*l+h}else o.fillStyle=e._fill?(0,f.r)(e._fill,o):null,e._stroke?.width&&(o.strokeStyle=(0,f.r)(e._stroke,o)),o.shadowColor="black";let d=(u-g.fontSize)/2;u-g.fontSize<0&&(d=0);const p=e._stroke?.width??0;for(let t=0;t<l.length;t++)b=p/2,x=p/2+t*u+g.ascent+d,"right"===e.align?b+=m-c[t]:"center"===e.align&&(b+=(m-c[t])/2),e._stroke?.width&&this._drawLetterSpacing(l[t],e,i,b+e.padding,x+e.padding-a,!0),void 0!==e._fill&&this._drawLetterSpacing(l[t],e,i,b+e.padding,x+e.padding-a)}}_drawLetterSpacing(t,e,r,n,i,s=!1){const{context:o}=r,a=e.letterSpacing;let h=!1;if(d.P.experimentalLetterSpacingSupported&&(d.P.experimentalLetterSpacing?(o.letterSpacing=`${a}px`,o.textLetterSpacing=`${a}px`,h=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),0===a||h)return void(s?o.strokeText(t,n,i):o.fillText(t,n,i));let l=n;const u=d.P.graphemeSegmenter(t);let c=o.measureText(t).width,p=0;for(let t=0;t<u.length;++t){const e=u[t];s?o.strokeText(e,l,i):o.fillText(e,l,i);let r="";for(let e=t+1;e<u.length;++e)r+=u[e];p=o.measureText(r).width,l+=c-p+a,c=p}}destroy(){this._activeTextures=null}}m.extension={type:[i.Ag.WebGLSystem,i.Ag.WebGPUSystem,i.Ag.CanvasSystem],name:"canvasText"}},1242:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const n=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function i(t){const e="number"==typeof t.fontSize?`${t.fontSize}px`:t.fontSize;let r=t.fontFamily;Array.isArray(t.fontFamily)||(r=t.fontFamily.split(","));for(let t=r.length-1;t>=0;t--){let e=r[t].trim();/([\"\'])[^\'\"]+\1/.test(e)||n.includes(e)||(e=`"${e}"`),r[t]=e}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${r.join(",")}`}},3548:(t,e,r)=>{"use strict";r.d(e,{r:()=>l});var n=r(2577),i=r(9313),s=r(4503),o=r(268),a=r(7276),h=r(2806);function l(t,e){if(t.texture===s.g.WHITE&&!t.fill)return n.Q.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(!t.fill){const r=e.createPattern(t.texture.source.resource,"repeat"),n=t.matrix.copyTo(i.u.shared);return n.scale(t.texture.frame.width,t.texture.frame.height),r.setTransform(n),r}if(t.fill instanceof h.m){const r=t.fill,n=e.createPattern(r.texture.source.resource,"repeat"),s=r.transform.copyTo(i.u.shared);return s.scale(r.texture.frame.width,r.texture.frame.height),n.setTransform(s),n}if(t.fill instanceof a._){const r=t.fill;if("linear"===r.type){const t=e.createLinearGradient(r.x0,r.y0,r.x1,r.y1);return r.gradientStops.forEach((e=>{t.addColorStop(e.offset,n.Q.shared.setValue(e.color).toHex())})),t}}return(0,o.R)("FillStyle not recognised",t),"red"}},7018:(t,e,r)=>{"use strict";r.d(e,{$:()=>g});var n=r(9313),i=r(9271),s=r(8587),o=r(4459),a=r(4e3),h=r(6665),l=r(6040),u=r(8475),c=r(9921),d=r(8747),p=r(9750);let f,m;class g extends u.M{constructor(){const t=new c.k({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new n.u,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),e=(0,i.a)();f??(f=(0,s.v)({name:"sdf-shader",bits:[o.F,(0,a._)(e),d.D,p._,h.b]})),m??(m=(0,s.I)({name:"sdf-shader",bits:[o.a,(0,a.P)(e),d.C,p.Z,h.m]})),super({glProgram:m,gpuProgram:f,resources:{localUniforms:t,batchSamplers:(0,l.n)(e)}})}}},8747:(t,e,r)=>{"use strict";r.d(e,{C:()=>i,D:()=>n});const n={name:"local-uniform-msdf-bit",vertex:{header:"\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32,\n                uRound:f32,\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        ",main:"\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        ",end:"\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        "},fragment:{header:"\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n         ",main:" \n            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));\n        "}},i={name:"local-uniform-msdf-bit",vertex:{header:"\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        ",main:"\n            vColor *= uColor;\n            modelMatrix *= uTransformMatrix;\n        ",end:"\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        "},fragment:{header:"\n            uniform float uDistance;\n         ",main:" \n            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));\n        "}}},9750:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i,_:()=>n});const n={name:"msdf-bit",fragment:{header:"\n            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {\n                \n                // MSDF\n                var median = msdfColor.r + msdfColor.g + msdfColor.b -\n                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n            \n                // SDF\n                median = min(median, msdfColor.a);\n\n                var screenPxDistance = distance * (median - 0.5);\n                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));\n                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);\n                var coverage: f32 = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n             \n            }\n        "}},i={name:"msdf-bit",fragment:{header:"\n            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {\n                \n                // MSDF\n                float median = msdfColor.r + msdfColor.g + msdfColor.b -\n                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n               \n                // SDF\n                median = min(median, msdfColor.a);\n            \n                float screenPxDistance = distance * (median - 0.5);\n                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n           \n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));\n                float gamma = mix(1.0, 1.0 / 2.2, luma);\n                float coverage = pow(shapeColor.a * alpha, gamma);  \n              \n                return coverage;\n            }\n        "}}},8011:(t,e,r)=>{"use strict";r.d(e,{V:()=>s});var n=r(2577);const i=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function s(t){const e=[];let r=0;for(let n=0;n<i.length;n++){const s=`_${i[n]}`;e[r++]=t[s]}return r=o(t._fill,e,r),r=function(t,e,r){return t?(r=o(t,e,r),e[r++]=t.width,e[r++]=t.alignment,e[r++]=t.cap,e[r++]=t.join,e[r++]=t.miterLimit,r):r}(t._stroke,e,r),r=function(t,e,r){return t?(e[r++]=t.alpha,e[r++]=t.angle,e[r++]=t.blur,e[r++]=t.distance,e[r++]=n.Q.shared.setValue(t.color).toNumber(),r):r}(t.dropShadow,e,r),e.join("-")}function o(t,e,r){return t?(e[r++]=t.color,e[r++]=t.alpha,e[r++]=t.fill?.styleKey,r):r}},2558:(t,e,r)=>{"use strict";r.d(e,{M:()=>s});var n=r(2437);const i=new(r(9636).c);function s(t,e,r,s){const o=i;o.minX=0,o.minY=0,o.maxX=t.width/s|0,o.maxY=t.height/s|0;const a=n.W.getOptimalTexture(o.width,o.height,s,!1);return a.source.uploadMethodId="image",a.source.resource=t,a.source.alphaMode="premultiply-alpha-on-upload",a.frame.width=e/s,a.frame.height=r/s,a.source.emit("update",a.source),a.updateUvs(),a}},2289:(t,e,r)=>{"use strict";r.d(e,{s:()=>i});var n=r(2048);function i(t,e){const{texture:r,bounds:i}=t;(0,n.y)(i,e._anchor,r);const s=e._style.padding;i.minX-=s,i.minY-=s,i.maxX-=s,i.maxY-=s}},4985:(t,e,r)=>{"use strict";r.d(e,{l:()=>s});var n=r(9636),i=r(4980);class s extends i.mc{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new n.c(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:r,y:n}=t;return r>=e.minX&&r<=e.maxX&&n>=e.minY&&n<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,r){const{renderPipes:n,renderableGC:i}=e;n.blendMode.setBlendMode(this,this.groupBlendMode,t),n[this.renderPipeId].addRenderable(this,t),i.addRenderable(this),this.didViewUpdate=!1;const s=this.children,o=s.length;for(let n=0;n<o;n++)s[n].collectRenderables(t,e,r)}}},397:(t,e,r)=>{"use strict";r.d(e,{z:()=>o});var n=r(9252),i=r(4503);const s=class t{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof i.g?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const r=parseFloat(e.meta.scale);r?(this.resolution=r,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise((e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(e){let r=e;const s=t.BATCH_SIZE;for(;r-e<s&&r<this._frameKeys.length;){const t=this._frameKeys[r],e=this._frames[t],s=e.frame;if(s){let r=null,o=null;const a=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,h=new n.M(0,0,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution);r=e.rotated?new n.M(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new n.M(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(o=new n.M(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[t]=new i.g({source:this.textureSource,frame:r,orig:h,trim:o,rotate:e.rotated?2:0,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}r++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(t=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};s.BATCH_SIZE=1e3;let o=s},6197:(t,e,r)=>{"use strict";var n=r(8507),i=r(3059);n.XO.add(i.N)},3059:(t,e,r)=>{"use strict";r.d(e,{N:()=>d});var n=r(4589),i=r(2601),s=r(2233),o=r(8507),a=r(4503),h=r(2927),l=r(397);const u=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function c(t,e,r){const n={};if(t.forEach((t=>{n[t]=e})),Object.keys(e.textures).forEach((t=>{n[t]=e.textures[t]})),!r){const r=h.A.dirname(t[0]);e.linkedSheets.forEach(((t,i)=>{const s=c([`${r}/${e.data.meta.related_multi_packs[i]}`],t,!0);Object.assign(n,s)}))}return n}const d={extension:o.Ag.Asset,cache:{test:t=>t instanceof l.z,getCacheableAssets:(t,e)=>c(t,e,!1)},resolver:{extension:{type:o.Ag.ResolveParser,name:"resolveSpritesheet"},test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return"json"===r&&u.includes(n)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(i.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:o.Ag.LoadParser,priority:n.T.Normal,name:"spritesheetLoader"},testParse:async(t,e)=>".json"===h.A.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,r){const{texture:n,imageFilename:i,textureOptions:o}=e?.data??{};let u,c=h.A.dirname(e.src);if(c&&c.lastIndexOf("/")!==c.length-1&&(c+="/"),n instanceof a.g)u=n;else{const n=(0,s.Y)(c+(i??t.meta.image),e.src);u=(await r.load([{src:n,data:o}]))[n]}const d=new l.z(u.source,t);await d.parse();const p=t?.meta?.related_multi_packs;if(Array.isArray(p)){const t=[];for(const n of p){if("string"!=typeof n)continue;let i=c+n;e.data?.ignoreMultiPack||(i=(0,s.Y)(i,e.src),t.push(r.load({src:i,data:{ignoreMultiPack:!0}})))}const n=await Promise.all(t);d.linkedSheets=n,n.forEach((t=>{t.linkedSheets=[d].concat(d.linkedSheets.filter((e=>e!==t)))}))}return d},async unload(t,e,r){await r.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}}},8567:(t,e,r)=>{"use strict";r.d(e,{R:()=>o});var n=r(4458),i=r(2175);const s=class t{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new i.X(null,null,1/0),this.deltaMS=1/t.targetFPMS,this.elapsedMS=1/t.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=n.d.NORMAL){return this._addListener(new i.X(t,e,r))}addOnce(t,e,r=n.d.NORMAL){return this._addListener(new i.X(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*t.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,t.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!t._shared){const e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared}static get system(){if(!t._system){const e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system}};s.targetFPMS=.06;let o=s},2175:(t,e,r)=>{"use strict";r.d(e,{X:()=>n});class n{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=r,this._once=n}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}},4458:(t,e,r)=>{"use strict";r.d(e,{d:()=>n});var n=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(n||{})},6858:(t,e,r)=>{"use strict";let n;async function i(){return n??(n=(async()=>{const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise((t=>{const e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()}));if(!e)return"premultiply-alpha-on-upload";const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(n),t.deleteTexture(r),t.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),n}r.d(e,{C:()=>i})},7218:(t,e,r)=>{"use strict";r.d(e,{F:()=>v});var n=/iPhone/i,i=/iPod/i,s=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,u=/Silk/i,c=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,_=/Mobile(?:.+)Firefox\b/i,b=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};function x(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,x=r.split("[FBAN");void 0!==x[1]&&(r=x[0]),void 0!==(x=r.split("Twitter"))[1]&&(r=x[0]);var v=function(t){return function(e){return e.test(t)}}(r),y={apple:{phone:v(n)&&!v(c),ipod:v(i),tablet:!v(n)&&(v(s)||b(e))&&!v(c),universal:v(o),device:(v(n)||v(i)||v(s)||v(o)||b(e))&&!v(c)},amazon:{phone:v(l),tablet:!v(l)&&v(u),device:v(l)||v(u)},android:{phone:!v(c)&&v(l)||!v(c)&&v(a),tablet:!v(c)&&!v(l)&&!v(a)&&(v(u)||v(h)),device:!v(c)&&(v(l)||v(u)||v(a)||v(h))||v(/\bokhttp\b/i)},windows:{phone:v(c),tablet:v(d),device:v(c)||v(d)},other:{blackberry:v(p),blackberry10:v(f),opera:v(m),firefox:v(_),chrome:v(g),device:v(p)||v(f)||v(m)||v(_)||v(g)},any:!1,phone:!1,tablet:!1};return y.any=y.apple.device||y.android.device||y.windows.device||y.other.device,y.phone=y.apple.phone||y.android.phone||y.windows.phone,y.tablet=y.apple.tablet||y.android.tablet||y.windows.tablet,y}const v=(x.default??x)(globalThis.navigator)},4897:(t,e,r)=>{"use strict";r.d(e,{n:()=>i});var n=r(3751);function i(){const{userAgent:t}=n.e.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}},4577:(t,e,r)=>{"use strict";let n;function i(){if("boolean"==typeof n)return n;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");n=!0===t({a:"b"},"a","b")}catch(t){n=!1}return n}r.d(e,{f:()=>i})},1222:(t,e,r)=>{"use strict";r.d(e,{m:()=>o});var n=r(9252);function i(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(0!==t[i+3])return!1;return!0}function s(t,e,r,n,i){const s=4*e;for(let e=n,o=n*s+4*r;e<=i;++e,o+=s)if(0!==t[o+3])return!1;return!0}function o(t,e=1){const{width:r,height:o}=t,a=t.getContext("2d",{willReadFrequently:!0});if(null===a)throw new TypeError("Failed to get canvas 2D context");const h=a.getImageData(0,0,r,o).data;let l=0,u=0,c=r-1,d=o-1;for(;u<o&&i(h,r,u);)++u;if(u===o)return n.M.EMPTY;for(;i(h,r,d);)--d;for(;s(h,r,l,u,d);)++l;for(;s(h,r,c,u,d);)--c;return++c,++d,new n.M(l/e,u/e,(c-l)/e,(d-u)/e)}},2571:(t,e,r)=>{"use strict";r.d(e,{Ut:()=>n,xv:()=>i}),r(4486);const n=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,i="8.7.2"},1460:(t,e,r)=>{"use strict";r.d(e,{u:()=>n});class n{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}},1448:(t,e,r)=>{"use strict";function n(t){let e=!1;for(const r in t)if(null==t[r]){e=!0;break}if(!e)return t;const r=Object.create(null);for(const e in t){const n=t[e];n&&(r[e]=n)}return r}function i(t){let e=0;for(let r=0;r<t.length;r++)null==t[r]?e++:t[r-e]=t[r];return t.length-=e,t}r.d(e,{s:()=>n,t:()=>i})},9903:(t,e,r)=>{"use strict";function n(t,e,r){const n=t.length;let i;if(e>=n||0===r)return;const s=n-(r=e+r>n?n-e:r);for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}r.d(e,{d:()=>n})},133:(t,e,r)=>{"use strict";r.d(e,{L:()=>i,t:()=>s});const n={default:-1};function i(t="default"){return void 0===n[t]&&(n[t]=-1),++n[t]}function s(){for(const t in n)delete n[t]}},2048:(t,e,r)=>{"use strict";function n(t,e,r){const{width:n,height:i}=r.orig,s=r.trim;if(s){const r=s.width,o=s.height;t.minX=s.x-e._x*n,t.maxX=t.minX+r,t.minY=s.y-e._y*i,t.maxY=t.minY+o}else t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*i,t.maxY=t.minY+i}r.d(e,{y:()=>n})},7073:(t,e,r)=>{"use strict";r.d(e,{M:()=>s,d:()=>o});var n=r(8507),i=r(2571);class s{static init(){globalThis.__PIXI_APP_INIT__?.(this,i.xv)}static destroy(){}}s.extension=n.Ag.Application;class o{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,i.xv)}destroy(){this._renderer=null}}o.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"initHook",priority:-10}},4670:(t,e,r)=>{"use strict";r.d(e,{Ek:()=>s,lj:()=>i,t6:()=>o});const n={},i="8.0.0",s="8.3.4";function o(t,e,r=3){if(n[e])return;let i=(new Error).stack;void 0===i||(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed),n[e]=!0}},268:(t,e,r)=>{"use strict";r.d(e,{R:()=>s});let n=0;const i=500;function s(...t){n!==i&&n++}},1549:(t,e,r)=>{"use strict";r.d(e,{t:()=>n});const n=()=>{}},2927:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var n=r(3751);function i(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function s(t){return t.split("?")[0].split("#")[0]}const o={toPosix:t=>t.replace(new RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),isBlobUrl:t=>t.startsWith("blob:"),hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){i(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(i(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const a=s(this.toPosix(e??n.e.get().getBaseUrl())),h=s(this.toPosix(r??this.rootname(a)));return(t=this.toPosix(t)).startsWith("/")?o.join(h,t.slice(1)):this.isAbsolute(t)?t:this.join(a,t)},normalize(t){if(i(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;let e="";const r=(t=this.toPosix(t)).startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return(t=function(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let e=0;e<=t.length;++e){if(e<t.length)o=t.charCodeAt(e);else{if(47===o)break;o=47}if(47===o){if(i===e-1||1===s);else if(i!==e-1&&2===s){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const t=r.lastIndexOf("/");if(t!==r.length-1){-1===t?(r="",n=0):(r=r.slice(0,t),n=r.length-1-r.lastIndexOf("/")),i=e,s=0;continue}}else if(2===r.length||1===r.length){r="",n=0,i=e,s=0;continue}}else r.length>0?r+=`/${t.slice(i+1,e)}`:r=t.slice(i+1,e),n=e-i-1;i=e,s=0}else 46===o&&-1!==s?++s:s=-1}return r}(t)).length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return i(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(i(n),n.length>0)if(void 0===e)e=n;else{const i=t[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return void 0===e?".":this.normalize(e)},dirname(t){if(i(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const r=47===e;let n=-1,s=!0;const o=this.getProtocol(t),a=t;for(let r=(t=t.slice(o.length)).length-1;r>=1;--r)if(e=t.charCodeAt(r),47===e){if(!s){n=r;break}}else s=!1;return-1===n?r?"/":this.isUrl(a)?o+t:o:r&&1===n?"//":o+t.slice(0,n)},rootname(t){i(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);e=-1!==r?t.slice(0,r):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){i(t),e&&i(e),t=s(this.toPosix(t));let r,n=0,o=-1,a=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let i=e.length-1,s=-1;for(r=t.length-1;r>=0;--r){const h=t.charCodeAt(r);if(47===h){if(!a){n=r+1;break}}else-1===s&&(a=!1,s=r+1),i>=0&&(h===e.charCodeAt(i)?-1==--i&&(o=r):(i=-1,o=s))}return n===o?o=s:-1===o&&(o=t.length),t.slice(n,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!a){n=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":t.slice(n,o)},extname(t){i(t);let e=-1,r=0,n=-1,o=!0,a=0;for(let i=(t=s(this.toPosix(t))).length-1;i>=0;--i){const s=t.charCodeAt(i);if(47!==s)-1===n&&(o=!1,n=i+1),46===s?-1===e?e=i:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){r=i+1;break}}return-1===e||-1===n||0===a||1===a&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){i(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let r=(t=s(this.toPosix(t))).charCodeAt(0);const n=this.isAbsolute(t);let o;e.root=this.rootname(t),o=n||this.hasProtocol(t)?1:0;let a=-1,h=0,l=-1,u=!0,c=t.length-1,d=0;for(;c>=o;--c)if(r=t.charCodeAt(c),47!==r)-1===l&&(u=!1,l=c+1),46===r?-1===a?a=c:1!==d&&(d=1):-1!==a&&(d=-1);else if(!u){h=c+1;break}return-1===a||-1===l||0===d||1===d&&a===l-1&&a===h+1?-1!==l&&(e.base=e.name=0===h&&n?t.slice(1,l):t.slice(h,l)):(0===h&&n?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(h,a),e.base=t.slice(h,l)),e.ext=t.slice(a,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]}},8425:(t,e,r)=>{"use strict";r.d(e,{b:()=>n});class n{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return e=this._index>0?this._pool[--this._index]:new this._classType,e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}},8218:(t,e,r)=>{"use strict";r.d(e,{I:()=>i,Z:()=>s});var n=r(8425);class i{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new n.b(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach((e=>{const r=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[r]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}})),t}}const s=new i},7081:(t,e,r)=>{"use strict";r.d(e,{e:()=>o});var n=r(3751),i=r(2571);let s=!1;function o(t){if(!s){if(n.e.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${i.xv} (${t}) http://www.pixijs.com/\n\n`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${i.xv} - ${t} - http://www.pixijs.com/`);s=!0}}}},n={};function i(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return r[t](s,s.exports,i),s.exports}i.m=r,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,r)=>(i.f[r](t,e),e)),[])),i.u=t=>t+".bundle.min.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="paint-pictures:",i.l=(r,n,s,o)=>{if(t[r])t[r].push(n);else{var a,h;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==e+s){a=c;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",e+s),a.src=r),t[r]=[n];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(n))),e)return e(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={792:0};i.f.j=(e,r)=>{var n=i.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,i)=>n=t[e]=[r,i]));r.push(n[2]=s);var o=i.p+i.u(e),a=new Error;i.l(o,(r=>{if(i.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var n,s,[o,a,h]=r,l=0;if(o.some((e=>0!==t[e]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);h&&h(i)}for(e&&e(r);l<o.length;l++)s=o[l],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0},r=self.webpackChunkpaint_pictures=self.webpackChunkpaint_pictures||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var s={};(()=>{"use strict";i.d(s,{D:()=>Ox});var t={};i.r(t),i.d(t,{AbstractBitmapFont:()=>ot.v,AbstractRenderer:()=>z.k,AbstractText:()=>si,AccessibilitySystem:()=>o.a,AlphaFilter:()=>un,AlphaMask:()=>Wi.Z,AlphaMaskPipe:()=>Yi.z,AnimatedSprite:()=>ei,Application:()=>J,ApplicationInitHook:()=>Z.M,Assets:()=>_e,AssetsClass:()=>ge,BLEND_TO_NPM:()=>ya.Q,BUFFER_TYPE:()=>es.y,BackgroundLoader:()=>gt,BackgroundSystem:()=>Wo.s,Batch:()=>Si.l,BatchGeometry:()=>Ai.J,BatchTextureArray:()=>Mi.L,BatchableGraphics:()=>Ph.G,BatchableMesh:()=>Rl.U,BatchableSprite:()=>ou.K,Batcher:()=>Si.i,BatcherPipe:()=>wi.s,BigPool:()=>ec.Z,BindGroup:()=>wo.T,BindGroupSystem:()=>ao.g,BitmapFont:()=>ht,BitmapFontManager:()=>at.c,BitmapText:()=>ci,BitmapTextPipe:()=>hu.n,BlendModeFilter:()=>g,BlendModePipe:()=>Yo.j,BlurFilter:()=>Cn,BlurFilterPass:()=>yn,Bounds:()=>Er.c,BrowserAdapter:()=>Fr.O,Buffer:()=>lo.h,BufferImageSource:()=>Oa.P,BufferResource:()=>jo.d,BufferUsage:()=>uo.S,CLEAR:()=>is.u,Cache:()=>_t.l,CanvasPool:()=>wa.N,CanvasPoolClass:()=>wa.V,CanvasSource:()=>Ia.q,CanvasTextMetrics:()=>ai.P,CanvasTextPipe:()=>Tu.e,CanvasTextSystem:()=>Su.p,Circle:()=>Nn.j,Color:()=>ve.Q,ColorBlend:()=>v,ColorBurnBlend:()=>y,ColorDodgeBlend:()=>C,ColorMask:()=>ji.W,ColorMaskPipe:()=>qi.u,ColorMatrixFilter:()=>Tn,CompressedSource:()=>Te,Container:()=>$.mc,Culler:()=>Br,CullerPlugin:()=>Or,CustomRenderPipe:()=>uh._,D3D10_RESOURCE_DIMENSION:()=>We,D3DFMT:()=>qe,DATA_URI:()=>Hu.Ut,DDS:()=>Ke,DEG_TO_RAD:()=>Dn.Td,DEPRECATED_SCALE_MODES:()=>La,DEPRECATED_WRAP_MODES:()=>Ma,DOMAdapter:()=>H.e,DRAW_MODES:()=>Qo,DXGI_FORMAT:()=>Ve,DXGI_TO_TEXTURE_FORMAT:()=>Ze,DarkenBlend:()=>T,DefaultBatcher:()=>Ei.J,DefaultShader:()=>Li.$,DifferenceBlend:()=>S,DisplacementFilter:()=>Mn,DivideBlend:()=>w,DynamicBitmapFont:()=>lu.u,Ellipse:()=>Hn.P,EventBoundary:()=>Ur.T,EventEmitter:()=>zu.A,EventSystem:()=>Nr.C,EventsTicker:()=>Hr.U,ExclusionBlend:()=>A,ExtensionType:()=>e.Ag,ExtractSystem:()=>$o.h,FOURCC_TO_TEXTURE_FORMAT:()=>$e,FederatedContainer:()=>Xr.e,FederatedEvent:()=>zr.N,FederatedMouseEvent:()=>Vr._,FederatedPointerEvent:()=>Wr.A,FederatedWheelEvent:()=>Yr.O,FillGradient:()=>Vh._,FillPattern:()=>Wh.m,Filter:()=>d.d,FilterEffect:()=>Rn.a,FilterPipe:()=>Pn.L,FilterSystem:()=>Bn.u,FontStylePromiseCache:()=>gu.G,GAUSSIAN_VALUES:()=>pn,GL_FORMATS:()=>js.bH,GL_INTERNAL_FORMAT:()=>er,GL_TARGETS:()=>js.FT,GL_TYPES:()=>js.Yr,GL_WRAP_MODES:()=>js.I7,GenerateTextureSystem:()=>Zo.y,Geometry:()=>Zn.V,GlBackBufferSystem:()=>hs.q,GlBatchAdaptor:()=>_i.t,GlBuffer:()=>rs.i,GlBufferSystem:()=>ns.h,GlColorMaskSystem:()=>ls.U,GlContextSystem:()=>ss.q,GlEncoderSystem:()=>us.X,GlGeometrySystem:()=>os.r,GlGraphicsAdaptor:()=>Eh.k,GlMeshAdaptor:()=>El.S,GlParticleContainerAdaptor:()=>Ol.C,GlParticleContainerPipe:()=>Dl.D,GlProgram:()=>h.M,GlProgramData:()=>bs.W,GlRenderTarget:()=>cs.N,GlRenderTargetAdaptor:()=>fs.q,GlRenderTargetSystem:()=>ms.E,GlShaderSystem:()=>xs.S,GlStateSystem:()=>Ws.u,GlStencilSystem:()=>ds.P,GlTexture:()=>qs.P,GlTextureSystem:()=>$s._,GlUboSystem:()=>ps.z,GlUniformGroupSystem:()=>vs.e,GlobalUniformSystem:()=>sa.J,GpuBatchAdaptor:()=>Ti.E,GpuBlendModesToPixi:()=>Do.X,GpuBufferSystem:()=>ho.C,GpuColorMaskSystem:()=>fo.l,GpuDeviceSystem:()=>mo.O,GpuEncoderSystem:()=>go._,GpuGraphicsAdaptor:()=>Rh.r,GpuGraphicsContext:()=>Yh.HW,GpuMeshAdapter:()=>Ll.F,GpuMipmapGenerator:()=>Xo.o,GpuParticleContainerAdaptor:()=>Il.h,GpuParticleContainerPipe:()=>Fl.C,GpuProgram:()=>l.B,GpuReadBuffer:()=>co,GpuRenderTarget:()=>Co.M,GpuRenderTargetAdaptor:()=>To.$,GpuRenderTargetSystem:()=>So.p,GpuShaderSystem:()=>Ao.x,GpuStateSystem:()=>Fo.$,GpuStencilModesToPixi:()=>Go.g,GpuStencilSystem:()=>_o.k,GpuTextureSystem:()=>ko.P,GpuUboSystem:()=>bo.u,GpuUniformBatchPipe:()=>xo.T,Graphics:()=>$n.A,GraphicsContext:()=>Vt.T,GraphicsContextRenderData:()=>Yh.$i,GraphicsContextSystem:()=>Yh.GH,GraphicsPath:()=>qh.n,GraphicsPipe:()=>jh.S,HTMLText:()=>fi,HTMLTextPipe:()=>du.n,HTMLTextRenderData:()=>pu.pF,HTMLTextStyle:()=>di.I,HTMLTextSystem:()=>fu.Q,HardLightBlend:()=>M,HardMixBlend:()=>E,HelloSystem:()=>va.U,IGLUniformData:()=>bs.n,ImageSource:()=>Xt.b,InstructionSet:()=>ia.L,KTX:()=>rr,LightenBlend:()=>L,LinearBurnBlend:()=>R,LinearDodgeBlend:()=>P,LinearLightBlend:()=>B,Loader:()=>Pt,LoaderParserPriority:()=>rt.T,LuminosityBlend:()=>O,MSAA_QUALITY:()=>Aa,MaskEffectManager:()=>$i.B,MaskEffectManagerClass:()=>$i.H,MaskFilter:()=>On.L,Matrix:()=>Sn.u,Mesh:()=>ti,MeshGeometry:()=>Jn.u,MeshPipe:()=>Bl.G,MeshPlane:()=>Cl,MeshRope:()=>Al,MeshSimple:()=>Ml,NOOP:()=>Ju.t,NegationBlend:()=>I,NineSliceGeometry:()=>ql.P,NineSlicePlane:()=>Kl,NineSliceSprite:()=>Zl,NineSliceSpritePipe:()=>Ql.e,NoiseFilter:()=>Ln,ObservablePoint:()=>kn.o,OverlayBlend:()=>D,PI_2:()=>Dn.TO,Particle:()=>kl,ParticleBuffer:()=>Ul.h,ParticleContainer:()=>Xl,ParticleContainerPipe:()=>Vl.m,ParticleShader:()=>Wl.E,PerspectiveMesh:()=>yl,PerspectivePlaneGeometry:()=>xl,PinLightBlend:()=>F,PipelineSystem:()=>vo.A,PlaneGeometry:()=>hl.b,Point:()=>wn.b,Polygon:()=>zn.t,Pool:()=>tc.b,PoolGroupClass:()=>ec.I,PrepareBase:()=>qn,PrepareQueue:()=>ui,PrepareSystem:()=>gi,PrepareUpload:()=>mi,QuadGeometry:()=>nu.m,RAD_TO_DEG:()=>Dn.bO,Rectangle:()=>st.M,RenderContainer:()=>ch,RenderGroup:()=>dh.m,RenderGroupPipe:()=>ph.a,RenderGroupSystem:()=>fh.b,RenderLayer:()=>al,RenderLayerClass:()=>ol,RenderTarget:()=>aa.O,RenderTargetSystem:()=>ha.l,RenderTexture:()=>Ba.Y,RenderableGCSystem:()=>Pa.M,RendererInitHook:()=>Z.d,RendererType:()=>dn.W,ResizePlugin:()=>tt.U,Resolver:()=>Wt.x,RopeGeometry:()=>Sl,RoundedRectangle:()=>Xn.T,SCALE_MODES:()=>Ra,STENCIL_MODES:()=>ya.K,SVGParser:()=>Kh.u,SVGToGraphicsPath:()=>Qh.w,SaturationBlend:()=>G,SchedulerSystem:()=>ca.F,ScissorMask:()=>Qi,SdfShader:()=>Mu.$,Shader:()=>pa.M,ShaderStage:()=>da.q,ShapePath:()=>Zh.L,SharedRenderPipes:()=>Ta.f,SharedSystems:()=>Ta.i,SoftLightBlend:()=>k,Sprite:()=>An.k,SpritePipe:()=>au.k,Spritesheet:()=>Iu.z,State:()=>Kn.U,StencilMask:()=>Ji.r,StencilMaskPipe:()=>ts.j,SubtractBlend:()=>U,SystemRunner:()=>Sa.C,TEXTURE_FORMAT_BLOCK_SIZE:()=>Qe,Text:()=>li,TextStyle:()=>hi.x,Texture:()=>c.g,TextureGCSystem:()=>Da.l,TextureMatrix:()=>Fa.N,TexturePool:()=>cn.W,TexturePoolClass:()=>cn.M,TextureSource:()=>Ce.v,TextureStyle:()=>Ga.n,TextureUvs:()=>ka,Ticker:()=>Yn.R,TickerListener:()=>Fu.X,TickerPlugin:()=>et.y,TilingSprite:()=>ii,TilingSpritePipe:()=>eu.x,TilingSpriteShader:()=>tu.S,Transform:()=>ri,Triangle:()=>Vn,UNIFORM_TO_ARRAY_SETTERS:()=>Vs.e,UNIFORM_TO_SINGLE_SETTERS:()=>Vs.v,UNIFORM_TYPES_MAP:()=>fa._,UNIFORM_TYPES_VALUES:()=>fa.q,UPDATE_BLEND:()=>$.u,UPDATE_COLOR:()=>$.ig,UPDATE_PRIORITY:()=>Wn.d,UPDATE_TRANSFORM:()=>$.ne,UPDATE_VISIBLE:()=>$.fR,UboBatch:()=>po.Z,UboSystem:()=>ma.W,UniformGroup:()=>u.k,VERSION:()=>Hu.xv,VideoSource:()=>oe.$,ViewContainer:()=>Qn.l,ViewSystem:()=>Wa.v,ViewableBuffer:()=>ju.u,VividLightBlend:()=>N,WGSL_ALIGN_SIZE_DATA:()=>Mo.f,WGSL_TO_STD40_SIZE:()=>Ns.K,WRAP_MODES:()=>Ea,WebGLRenderer:()=>oo.WebGLRenderer,WebGPURenderer:()=>Vo.WebGPURenderer,WebWorkerAdapter:()=>kr,WorkerManager:()=>ee,_getGlobalBounds:()=>Lr.U3,accessibilityTarget:()=>a.K,addBits:()=>Bi.u,addMaskBounds:()=>Zi.d,addMaskLocalBounds:()=>Ki.U,addProgramDefines:()=>Ds.U,alphaFrag:()=>qr,alphaWgsl:()=>$r,applyMatrix:()=>ru.Y,applyProjectiveTransformationToPlane:()=>ll,applyStyleParams:()=>to.m,assignWithIgnore:()=>mh.s,autoDetectEnvironment:()=>Dr.Q,autoDetectRenderer:()=>q,autoDetectSource:()=>za._,basisTranscoderUrls:()=>De,bgr2rgb:()=>sh.D,bitmapFontCachePlugin:()=>pt,bitmapFontTextParser:()=>lt,bitmapFontXMLParser:()=>ut,bitmapFontXMLStringParser:()=>ct,blendTemplateFrag:()=>p,blendTemplateVert:()=>f,blendTemplateWgsl:()=>m,blockDataMap:()=>No.w,blurTemplateWgsl:()=>Zr,boundsPool:()=>Qa.o,browserExt:()=>r,buildAdaptiveBezier:()=>Bh.M,buildAdaptiveQuadratic:()=>Oh.T,buildArc:()=>Ih.t,buildArcTo:()=>Dh.I,buildArcToSvg:()=>Fh.W,buildCircle:()=>Gh.RH,buildContextBatches:()=>Jh.M,buildEllipse:()=>Gh.$S,buildGeometryFromPath:()=>el,buildLine:()=>kh.h,buildPixelLine:()=>Uh.D,buildPolygon:()=>Nh.h,buildRectangle:()=>Hh.a,buildRoundedRectangle:()=>Gh.nZ,buildSimpleUvs:()=>Jo.D,buildTriangle:()=>zh.b,buildUvs:()=>Jo.X,cacheAsTextureMixin:()=>Ja.b,cacheTextureArray:()=>bt,calculateProjection:()=>yo.s,checkChildrenDidChange:()=>gh.l,checkDataUrl:()=>Bt,checkExtension:()=>Ot,checkMaxIfStatementsInShader:()=>bi.u,childrenHelperMixin:()=>th.l,cleanArray:()=>Xu.t,cleanHash:()=>Xu.s,clearList:()=>_h.a,closePointEps:()=>Xh.B,collectAllRenderables:()=>bh,collectRenderablesMixin:()=>eh.J,color32BitToUniform:()=>Lh.V,colorBit:()=>Ui.F,colorBitGl:()=>Ui.a,colorMatrixFilterFrag:()=>Kr,colorMatrixFilterWgsl:()=>Qr,colorToUniform:()=>Lh.$,compareModeToGlCompare:()=>io.am,compileHighShader:()=>Pi.h,compileHighShaderGl:()=>Pi.Q,compileHighShaderGlProgram:()=>Ri.I,compileHighShaderGpuProgram:()=>Ri.v,compileHooks:()=>Oi.w,compileInputs:()=>Ii.j,compileOutputs:()=>Di.Q,compileShader:()=>Cs.R,compute2DProjection:()=>bl,convertFormatIfRequired:()=>fr,convertToList:()=>Lt.z,copySearchParams:()=>nt.Y,createIdFromString:()=>Xa.X,createIndicesForQuads:()=>Yl.L,createLevelBuffers:()=>He,createLevelBuffersFromKTX:()=>gr,createStringVariations:()=>xe.m,createTexture:()=>jt,createUboElementsSTD40:()=>Ns.l,createUboElementsWGSL:()=>Mo.V,createUboSyncFunction:()=>ga.E,createUboSyncFunctionSTD40:()=>Hs.N,createUboSyncFunctionWGSL:()=>Eo.v,crossOrigin:()=>ue,cullingMixin:()=>Ir.E,curveEps:()=>Xh.I,defaultFilterVert:()=>Jr,defaultValue:()=>Ts.J,definedProps:()=>xh.S,deprecation:()=>K.t6,detectAvif:()=>vt,detectBasis:()=>ye,detectCompressed:()=>Mr,detectDefaults:()=>Ct,detectMp4:()=>wt,detectOgv:()=>At,detectVideoAlphaMode:()=>ae.C,detectWebm:()=>Mt,detectWebp:()=>Et,determineCrossOrigin:()=>de,displacementFrag:()=>tn,displacementVert:()=>en,displacementWgsl:()=>rn,earcut:()=>nc,effectsMixin:()=>rh.m,ensureAttributes:()=>Ss.q,ensureIsBuffer:()=>ta.b,ensureOptions:()=>oi,ensurePrecision:()=>Fs.V,ensureTextStyle:()=>Ru,executeInstructions:()=>vh.j,extensions:()=>e.XO,extractAttributesFromGlProgram:()=>ws.A,extractAttributesFromGpuProgram:()=>Lo.N,extractFontFamilies:()=>mu.F,extractStructAndGroups:()=>Ro.G,fastCopy:()=>qo.W,findHooksRx:()=>Oi.a,findMixin:()=>nh.t,fontStringFromTextStyle:()=>wu.Z,formatShader:()=>Fi,fragmentGPUTemplate:()=>ki.xl,fragmentGlTemplate:()=>ki._g,generateArraySyncSTD40:()=>zs.D,generateArraySyncWGSL:()=>Po.T,generateBlurFragSource:()=>mn,generateBlurGlProgram:()=>bn,generateBlurProgram:()=>xn,generateBlurVertSource:()=>_n,generateGPULayout:()=>vi,generateGpuLayoutGroups:()=>Bo.W,generateLayout:()=>yi,generateLayoutHash:()=>Oo.y,generateParticleUpdateFunction:()=>jl.N,generateProgram:()=>As.C,generateShaderSyncCode:()=>gs.$,generateTextStyleKey:()=>Pu.V,generateTextureBatchBit:()=>Ni._,generateTextureBatchBitGl:()=>Ni.P,generateUID:()=>Na,generateUniformsSync:()=>Xs.U,getAdjustedBlendModeBlend:()=>Ca.i,getAttributeInfoFromFormat:()=>ea.m,getBatchSamplersUniformGroup:()=>_s.n,getBitmapTextLayout:()=>uu.Z,getCanvasBoundingBox:()=>Nu.m,getCanvasFillStyle:()=>Au.r,getCanvasTexture:()=>Ha.c,getDefaultUniformValue:()=>_a.p,getFastGlobalBounds:()=>$a,getFastGlobalBoundsMixin:()=>ih.Y,getFontCss:()=>gu.Z,getFontFamilyName:()=>Nt,getGeometryBounds:()=>ra.U,getGlTypeFromFormat:()=>as.L,getGlobalBounds:()=>Lr.fB,getGlobalMixin:()=>sh.R,getGlobalRenderableBounds:()=>Ka.L,getLocalBounds:()=>Za.n,getMatrixRelativeToParent:()=>Ki.D,getMaxFragmentPrecision:()=>Ms.$,getMaxTexturesPerBatch:()=>xi.a,getOrientationOfPoints:()=>nl.v,getParent:()=>Za.P,getPo2TextureFromSource:()=>Bu.M,getResolutionOfUrl:()=>Yt,getSVGUrl:()=>_u.e,getSupportedCompressedTextureFormats:()=>Le,getSupportedGPUCompressedTextureFormats:()=>Ee,getSupportedGlCompressedTextureFormats:()=>Me,getSupportedTextureFormats:()=>Be,getTemporaryCanvasFromImage:()=>bu.J,getTestContext:()=>Es.W,getTextureBatchBindGroup:()=>Ci.w,getTextureDefaultMatrix:()=>Pl,getTextureFormatFromKTXTexture:()=>yr,getUboData:()=>Ls.X,getUniformData:()=>Rs.L,getUrlExtension:()=>Wt.l,glFormatToGPUFormat:()=>br,glUploadBufferImageResource:()=>Zs.e,glUploadCompressedTextureResource:()=>Ks.B,glUploadImageResource:()=>Qs.a,glUploadVideoResource:()=>Js._,globalUniformsBit:()=>Hi.EU,globalUniformsBitGl:()=>Hi.jv,globalUniformsUBOBitGl:()=>Hi.hF,gpuFormatToBasisTranscoderFormat:()=>Xe,gpuFormatToKTXBasisTranscoderFormat:()=>Tr,gpuUploadBufferImageResource:()=>Uo.j,gpuUploadCompressedTextureResource:()=>No._,gpuUploadImageResource:()=>Ho.d,gpuUploadVideoResource:()=>zo.h,groupD8:()=>In.E,hasCachedCanvasTexture:()=>Ha.i,hslWgsl:()=>jr,hslgl:()=>b,hslgpu:()=>x,injectBits:()=>Gi.q,insertVersion:()=>Gs.W,isMobile:()=>Gu.F,isPow2:()=>Fn.f3,isRenderingToScreen:()=>oa.A,isSafari:()=>ku.n,isSingleItem:()=>Rt.a,isWebGLSupported:()=>W,isWebGPUSupported:()=>Y,ktxTranscoderUrls:()=>ar,loadBasis:()=>Ne,loadBasisOnWorker:()=>Ue,loadBitmapFont:()=>ft,loadDDS:()=>tr,loadEnvironmentExtensions:()=>Dr.W,loadFontAsBase64:()=>xu.x,loadFontCSS:()=>vu.f,loadImageBitmap:()=>ie,loadJson:()=>It,loadKTX:()=>ir,loadKTX2:()=>dr,loadKTX2onWorker:()=>cr,loadSVGImage:()=>yu.c,loadSvg:()=>qt,loadTextures:()=>se,loadTxt:()=>Dt,loadVideoTextures:()=>pe,loadWebFont:()=>zt,localUniformBit:()=>zi.Ls,localUniformBitGl:()=>zi.mA,localUniformBitGroup2:()=>zi._Q,localUniformMSDFBit:()=>Eu.D,localUniformMSDFBitGl:()=>Eu.C,log2:()=>Fn.p6,logDebugTexture:()=>qu,logProgramError:()=>Ps.$,logRenderGroupScene:()=>Qu,logScene:()=>Ku,mSDFBit:()=>Lu._,mSDFBitGl:()=>Lu.Z,mapFormatToGlFormat:()=>eo.R,mapFormatToGlInternalFormat:()=>ro.Y,mapFormatToGlType:()=>no.o,mapGlToVertexFormat:()=>Is.E,mapSize:()=>Os,mapType:()=>Is.H,mapWebGLBlendModesToPixi:()=>Ys.Y,maskFrag:()=>on.A,maskVert:()=>an.A,maskWgsl:()=>hn.A,matrixPool:()=>Qa.u,measureHtmlText:()=>pi.r,measureMixin:()=>oh.i,migrateFragmentFromV7toV8:()=>ys,mipmapScaleModeToGlFilter:()=>io.yT,mixHexColors:()=>yh,multiplyColors:()=>Ch.j,multiplyHexColors:()=>Th.u,nextPow2:()=>Fn.U5,noiseFrag:()=>nn,noiseWgsl:()=>sn,nonCompressedFormats:()=>Re,normalizeExtensionPriority:()=>e.vp,nssvg:()=>pu.e8,nsxhtml:()=>pu.hv,onRenderMixin:()=>ah.D,parseDDS:()=>Je,parseFunctionBody:()=>Va,parseKTX:()=>nr,particleData:()=>Nl,particlesFrag:()=>Ya.A,particlesVert:()=>ja.A,particlesWgsl:()=>qa.A,path:()=>it.A,pointInTriangle:()=>Un,preloadVideo:()=>ce,removeItems:()=>Vu.d,removeStructAndGroupDuplicates:()=>Io.A,resetUids:()=>Wu.t,resolveCharacters:()=>cu.D,resolveCompressedTextureUrl:()=>wr,resolveJsonUrl:()=>me,resolveTextureUrl:()=>fe,resourceToTexture:()=>za.tx,roundPixelsBit:()=>Xi.b,roundPixelsBitGl:()=>Xi.m,roundedShapeArc:()=>$h.X,roundedShapeQuadraticCurve:()=>$h.q,sayHello:()=>rc.e,scaleModeToGlFilter:()=>io.wq,setBasisTranscoderPath:()=>Fe,setKTXTranscoderPath:()=>hr,setPositions:()=>iu.t,setProgramName:()=>ks.k,setUvs:()=>su.X,shapeBuilders:()=>Jh.y,sortMixin:()=>hh.I,spritesheetAsset:()=>Du.N,squaredDistanceToLineSegment:()=>Gn.z,stripVersion:()=>Us.h,testImageFormat:()=>xt,testVideoFormat:()=>St,textStyleToCSS:()=>Cu.n,textureBit:()=>Vi.R,textureBitGl:()=>Vi.m,textureFrom:()=>za._4,tilingBit:()=>Jl.R,tilingBitGl:()=>Jl.c,toFillStyle:()=>rl.w,toLocalGlobalMixin:()=>lh.P,toStrokeStyle:()=>rl.T,transformVertices:()=>na.s,triangulateWithHoles:()=>il.U,uboSyncFunctionsSTD40:()=>ba.g,uboSyncFunctionsWGSL:()=>ba._,uid:()=>Wu.L,uniformParsers:()=>xa.$,unpremultiplyAlpha:()=>so,unsafeEvalSupported:()=>Uu.f,updateLocalTransform:()=>Sh,updateQuadBounds:()=>Yu.y,updateRenderGroupTransform:()=>wh.T1,updateRenderGroupTransforms:()=>wh.s8,updateTextBounds:()=>Ou.s,updateTransformAndChildren:()=>wh.e9,updateTransformBackwards:()=>Lr.Ek,updateWorldTransform:()=>Ah,v8_0_0:()=>K.lj,v8_3_4:()=>K.Ek,validFormats:()=>Sr,validateRenderables:()=>Mh.G,vertexGPUTemplate:()=>ki.Tp,vertexGlTemplate:()=>ki.sS,viewportFromFrame:()=>ua,vkFormatToGPUFormat:()=>vr,warn:()=>mt.R,webworkerExt:()=>n,wrapModeToGlAddress:()=>io.AJ});var e=i(8507);const r={extension:{type:e.Ag.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await i.e(24).then(i.bind(i,2024))}},n={extension:{type:e.Ag.Environment,name:"webworker",priority:0},test:()=>"undefined"!=typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await i.e(162).then(i.bind(i,2162))}};i(7801),i(6197);var o=i(3946),a=i(4302),h=i(9657),l=i(1595),u=i(9921),c=i(4503),d=i(6554),p="\nin vec2 vTextureCoord;\nin vec4 vColor;\n\nout vec4 finalColor;\n\nuniform float uBlend;\n\nuniform sampler2D uTexture;\nuniform sampler2D uBackTexture;\n\n{FUNCTIONS}\n\nvoid main()\n{ \n    vec4 back = texture(uBackTexture, vTextureCoord);\n    vec4 front = texture(uTexture, vTextureCoord);\n    float blendedAlpha = front.a + back.a * (1.0 - front.a);\n    \n    {MAIN}\n}\n",f="in vec2 aPosition;\nout vec2 vTextureCoord;\nout vec2 backgroundUv;\n\nuniform vec4 uInputSize;\nuniform vec4 uOutputFrame;\nuniform vec4 uOutputTexture;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n    \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",m="\nstruct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct BlendUniforms {\n  uBlend:f32,\n};\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n@group(0) @binding(3) var uBackTexture: texture_2d<f32>;\n\n@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;\n\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>\n  };\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \n}\n  \n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>, \n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition)\n  );\n}\n\n{FUNCTIONS}\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>\n) -> @location(0) vec4<f32> {\n\n\n   var back =  textureSample(uBackTexture, uSampler, uv);\n   var front = textureSample(uTexture, uSampler, uv);\n   var blendedAlpha = front.a + back.a * (1.0 - front.a);\n   \n   var out = vec4<f32>(0.0,0.0,0.0,0.0);\n\n   {MAIN}\n\n   return out;\n}";class g extends d.d{constructor(t){const e=t.gpu,r=_({source:m,...e}),n=l.B.from({vertex:{source:r,entryPoint:"mainVertex"},fragment:{source:r,entryPoint:"mainFragment"}}),i=t.gl,s=_({source:p,...i});super({gpuProgram:n,glProgram:h.M.from({vertex:f,fragment:s}),blendRequired:!0,resources:{blendUniforms:new u.k({uBlend:{value:1,type:"f32"}}),uBackTexture:c.g.EMPTY}})}}function _(t){const{source:e,functions:r,main:n}=t;return e.replace("{FUNCTIONS}",r).replace("{MAIN}",n)}const b="\n\tfloat getLuminosity(vec3 c) {\n\t\treturn 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\n\t}\n\n\tvec3 setLuminosity(vec3 c, float lum) {\n\t\tfloat modLum = lum - getLuminosity(c);\n\t\tvec3 color = c.rgb + vec3(modLum);\n\n\t\t// clip back into legal range\n\t\tmodLum = getLuminosity(color);\n\t\tvec3 modLumVec = vec3(modLum);\n\n\t\tfloat cMin = min(color.r, min(color.g, color.b));\n\t\tfloat cMax = max(color.r, max(color.g, color.b));\n\n\t\tif(cMin < 0.0) {\n\t\t\tcolor = mix(modLumVec, color, modLum / (modLum - cMin));\n\t\t}\n\n\t\tif(cMax > 1.0) {\n\t\t\tcolor = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tfloat getSaturation(vec3 c) {\n\t\treturn max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n\t}\n\n\tvec3 setSaturationMinMidMax(vec3 cSorted, float s) {\n\t\tvec3 colorSorted = cSorted;\n\n\t\tif(colorSorted.z > colorSorted.x) {\n\t\t\tcolorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));\n\t\t\tcolorSorted.z = s;\n\t\t}\n\t\telse {\n\t\t\tcolorSorted.y = 0.0;\n\t\t\tcolorSorted.z = 0.0;\n\t\t}\n\n\t\tcolorSorted.x = 0.0;\n\n\t\treturn colorSorted;\n\t}\n\n\tvec3 setSaturation(vec3 c, float s) {\n\t\tvec3 color = c;\n\n\t\tif(color.r <= color.g && color.r <= color.b) {\n\t\t\tif(color.g <= color.b) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.rgb, s).rgb;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.rbg, s).rbg;\n\t\t\t}\n\t\t}\n\t\telse if(color.g <= color.r && color.g <= color.b) {\n\t\t\tif(color.r <= color.b) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.grb, s).grb;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.gbr, s).gbr;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Using bgr for both fixes part of hue\n\t\t\tif(color.r <= color.g) {\n\t\t\t\tcolor = setSaturationMinMidMax(color.brg, s).brg;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcolor = setSaturationMinMidMax(color.bgr, s).bgr;\n\t\t\t}\n\t\t}\n\n\t\treturn color;\n\t}\n    ",x="\n\tfn getLuminosity(c: vec3<f32>) -> f32\n\t{\n\t\treturn 0.3*c.r + 0.59*c.g + 0.11*c.b;\n\t}\n\n\tfn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>\n\t{\n\t\tvar modLum: f32 = lum - getLuminosity(c);\n\t\tvar color: vec3<f32> = c.rgb + modLum;\n\n\t\t// clip back into legal range\n\t\tmodLum = getLuminosity(color);\n\t\tlet modLumVec = vec3<f32>(modLum);\n\n\t\tlet cMin: f32 = min(color.r, min(color.g, color.b));\n\t\tlet cMax: f32 = max(color.r, max(color.g, color.b));\n\n\t\tif(cMin < 0.0)\n\t\t{\n\t\t\tcolor = mix(modLumVec, color, modLum / (modLum - cMin));\n\t\t}\n\n\t\tif(cMax > 1.0)\n\t\t{\n\t\t\tcolor = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tfn getSaturation(c: vec3<f32>) -> f32\n\t{\n\t\treturn max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n\t}\n\n\tfn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>\n\t{\n\t\tvar colorSorted = cSorted;\n\n\t\tif(colorSorted.z > colorSorted.x)\n\t\t{\n\t\t\tcolorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));\n\t\t\tcolorSorted.z = s;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcolorSorted.y = 0;\n\t\t\tcolorSorted.z = 0;\n\t\t}\n\n\t\tcolorSorted.x = 0;\n\n\t\treturn colorSorted;\n\t}\n\n\tfn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>\n\t{\n\t\tvar color = c;\n\n\t\tif (color.r <= color.g && color.r <= color.b)\n\t\t{\n\t\t\tif (color.g <= color.b)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;\n\t\t\t}\n\t\t}\n\t\telse if (color.g <= color.r && color.g <= color.b)\n\t\t{\n\t\t\tif (color.r <= color.b)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Using bgr for both fixes part of hue\n\t\t\tif (color.r <= color.g)\n\t\t\t{\n\t\t\t\tcolor = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;\n\t\t\t}\n\t\t}\n\n\t\treturn color;\n\t}\n\t";class v extends g{constructor(){super({gl:{functions:`\n                ${b}\n\n                vec3 blendColor(vec3 base, vec3 blend,  float opacity)\n                {\n                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));\n                }\n                `,main:"\n                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:`\n                ${x}\n\n                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));\n                }\n                `,main:"\n                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}v.extension={name:"color",type:e.Ag.BlendMode};class y extends g{constructor(){super({gl:{functions:"\n                float colorBurn(float base, float blend)\n                {\n                    return max((1.0 - ((1.0 - base) / blend)), 0.0);\n                }\n\n                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        colorBurn(base.r, blend.r),\n                        colorBurn(base.g, blend.g),\n                        colorBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            "},gpu:{functions:"\n                fn colorBurn(base:f32, blend:f32) -> f32\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        colorBurn(base.r, blend.r),\n                        colorBurn(base.g, blend.g),\n                        colorBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}y.extension={name:"color-burn",type:e.Ag.BlendMode};class C extends g{constructor(){super({gl:{functions:"\n                float colorDodge(float base, float blend)\n                {\n                    return base / (1.0 - blend);\n                }\n\n                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        colorDodge(base.r, blend.r),\n                        colorDodge(base.g, blend.g),\n                        colorDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn colorDodge(base: f32, blend: f32) -> f32\n                {\n                    return base / (1.0 - blend);\n                }\n\n                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        colorDodge(base.r, blend.r),\n                        colorDodge(base.g, blend.g),\n                        colorDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}C.extension={name:"color-dodge",type:e.Ag.BlendMode};class T extends g{constructor(){super({gl:{functions:"\n                vec3 blendDarken(vec3 base, vec3 blend, float opacity)\n                {\n                    return (min(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (min(blend,base) * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}T.extension={name:"darken",type:e.Ag.BlendMode};class S extends g{constructor(){super({gl:{functions:"\n                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)\n                {\n                    return (abs(blend - base) * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            "},gpu:{functions:"\n                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (abs(blend - base) * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}S.extension={name:"difference",type:e.Ag.BlendMode};class w extends g{constructor(){super({gl:{functions:"\n                float divide(float base, float blend)\n                {\n                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;\n                }\n\n                vec3 blendDivide(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        divide(base.r, blend.r),\n                        divide(base.g, blend.g),\n                        divide(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn divide(base: f32, blend: f32) -> f32\n                {\n                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);\n                }\n\n                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        divide(base.r, blend.r),\n                        divide(base.g, blend.g),\n                        divide(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}w.extension={name:"divide",type:e.Ag.BlendMode};class A extends g{constructor(){super({gl:{functions:"\n                vec3 exclusion(vec3 base, vec3 blend)\n                {\n                    return base + blend - 2.0 * base * blend;\n                }\n\n                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)\n                {\n                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>\n                {\n                    return base+blend-2.0*base*blend;\n                }\n\n                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}A.extension={name:"exclusion",type:e.Ag.BlendMode};class M extends g{constructor(){super({gl:{functions:"\n                float hardLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);\n                }\n\n                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        hardLight(base.r, blend.r),\n                        hardLight(base.g, blend.g),\n                        hardLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            "},gpu:{functions:"\n                fn hardLight(base: f32, blend: f32) -> f32\n                {\n                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);\n                }\n\n                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        hardLight(base.r, blend.r),\n                        hardLight(base.g, blend.g),\n                        hardLight(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}M.extension={name:"hard-light",type:e.Ag.BlendMode};class E extends g{constructor(){super({gl:{functions:"\n                float hardMix(float base, float blend)\n                {\n                    return (base + blend >= 1.0) ? 1.0 : 0.0;\n                }\n\n                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blended = vec3(\n                        hardMix(base.r, blend.r),\n                        hardMix(base.g, blend.g),\n                        hardMix(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            "},gpu:{functions:"\n                fn hardMix(base: f32, blend: f32) -> f32\n                {\n                    return select(0.0, 1.0, base + blend >= 1.0);\n                }\n\n                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        hardMix(base.r, blend.r),\n                        hardMix(base.g, blend.g),\n                        hardMix(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}E.extension={name:"hard-mix",type:e.Ag.BlendMode};class L extends g{constructor(){super({gl:{functions:"\n                vec3 blendLighten(vec3 base, vec3 blend, float opacity)\n                {\n                    return (max(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    return (max(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}L.extension={name:"lighten",type:e.Ag.BlendMode};class R extends g{constructor(){super({gl:{functions:"\n                float linearBurn(float base, float blend)\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        linearBurn(base.r, blend.r),\n                        linearBurn(base.g, blend.g),\n                        linearBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn linearBurn(base: f32, blend: f32) -> f32\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearBurn(base.r, blend.r),\n                        linearBurn(base.g, blend.g),\n                        linearBurn(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}R.extension={name:"linear-burn",type:e.Ag.BlendMode};class P extends g{constructor(){super({gl:{functions:"\n                float linearDodge(float base, float blend) {\n                    return min(1.0, base + blend);\n                }\n\n                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {\n                    vec3 blended = vec3(\n                        linearDodge(base.r, blend.r),\n                        linearDodge(base.g, blend.g),\n                        linearDodge(base.b, blend.b)\n                    );\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn linearDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1, base + blend);\n                }\n\n                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearDodge(base.r, blend.r),\n                        linearDodge(base.g, blend.g),\n                        linearDodge(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}P.extension={name:"linear-dodge",type:e.Ag.BlendMode};class B extends g{constructor(){super({gl:{functions:"\n                float linearBurn(float base, float blend) {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                float linearDodge(float base, float blend) {\n                    return min(1.0, base + blend);\n                }\n\n                float linearLight(float base, float blend) {\n                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));\n                }\n\n                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {\n                    vec3 blended = vec3(\n                        linearLight(base.r, blend.r),\n                        linearLight(base.g, blend.g),\n                        linearLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn linearBurn(base: f32, blend: f32) -> f32\n                {\n                    return max(0.0, base + blend - 1.0);\n                }\n\n                fn linearDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1.0, base + blend);\n                }\n\n                fn linearLight(base: f32, blend: f32) -> f32\n                {\n                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);\n                }\n\n                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        linearLight(base.r, blend.r),\n                        linearLight(base.g, blend.g),\n                        linearLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}B.extension={name:"linear-light",type:e.Ag.BlendMode};class O extends g{constructor(){super({gl:{functions:`\n                ${b}\n\n                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));\n                    return (blendLuminosity * opacity + base * (1.0 - opacity));\n                }\n                `,main:"\n                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:`\n                ${x}\n\n                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));\n                    return (blendLuminosity * opacity + base * (1.0 - opacity));\n                }\n            `,main:"\n                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}O.extension={name:"luminosity",type:e.Ag.BlendMode};class I extends g{constructor(){super({gl:{functions:"\n                vec3 negation(vec3 base, vec3 blend)\n                {\n                    return 1.0-abs(1.0-base-blend);\n                }\n\n                vec3 blendNegation(vec3 base, vec3 blend, float opacity)\n                {\n                    return (negation(base, blend) * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>\n                {\n                    return 1.0-abs(1.0-base-blend);\n                }\n\n                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}I.extension={name:"negation",type:e.Ag.BlendMode};class D extends g{constructor(){super({gl:{functions:"\n                float overlay(float base, float blend)\n                {\n                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));\n                }\n\n                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        overlay(base.r, blend.r),\n                        overlay(base.g, blend.g),\n                        overlay(base.b, blend.b)\n                    );\n   \n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn overlay(base: f32, blend: f32) -> f32\n                {\n                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);\n                }\n\n                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        overlay(base.r, blend.r),\n                        overlay(base.g, blend.g),\n                        overlay(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}D.extension={name:"overlay",type:e.Ag.BlendMode};class F extends g{constructor(){super({gl:{functions:"\n                float pinLight(float base, float blend)\n                {\n                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));\n                }\n\n                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        pinLight(base.r, blend.r),\n                        pinLight(base.g, blend.g),\n                        pinLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn pinLight(base: f32, blend: f32) -> f32\n                {\n                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);\n                }\n\n                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        pinLight(base.r, blend.r),\n                        pinLight(base.g, blend.g),\n                        pinLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}F.extension={name:"pin-light",type:e.Ag.BlendMode};class G extends g{constructor(){super({gl:{functions:`\n                ${b}\n\n                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)\n                {\n                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));\n                    return (blendSaturation * opacity + base * (1.0 - opacity));\n                }\n            `,main:"\n                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n            "},gpu:{functions:`\n                ${x}\n\n                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));\n                    return (blendSaturation * opacity + base * (1.0 - opacity));\n                }\n            `,main:"\n                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n            "}})}}G.extension={name:"saturation",type:e.Ag.BlendMode};class k extends g{constructor(){super({gl:{functions:"\n                float softLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));\n                }\n\n                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        softLight(base.r, blend.r),\n                        softLight(base.g, blend.g),\n                        softLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn softLight(base: f32, blend: f32) -> f32\n                {\n                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);\n                }\n\n                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        softLight(base.r, blend.r),\n                        softLight(base.g, blend.g),\n                        softLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}k.extension={name:"soft-light",type:e.Ag.BlendMode};class U extends g{constructor(){super({gl:{functions:"\n                float subtract(float base, float blend)\n                {\n                    return max(0.0, base - blend);\n                }\n\n                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        subtract(base.r, blend.r),\n                        subtract(base.g, blend.g),\n                        subtract(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;\n                "},gpu:{functions:"\n                fn subtract(base: f32, blend: f32) -> f32\n                {\n                    return max(0, base - blend);\n                }\n\n                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>\n                {\n                    let blended = vec3<f32>(\n                        subtract(base.r, blend.r),\n                        subtract(base.g, blend.g),\n                        subtract(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}U.extension={name:"subtract",type:e.Ag.BlendMode};class N extends g{constructor(){super({gl:{functions:"\n                float colorBurn(float base, float blend)\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                float colorDodge(float base, float blend)\n                {\n                    return min(1.0, base / (1.0-blend));\n                }\n\n                float vividLight(float base, float blend)\n                {\n                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));\n                }\n\n                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)\n                {\n                    vec3 blended = vec3(\n                        vividLight(base.r, blend.r),\n                        vividLight(base.g, blend.g),\n                        vividLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n            ",main:"\n                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;\n            "},gpu:{functions:"\n                fn colorBurn(base:f32, blend:f32) -> f32\n                {\n                    return max((1.0-((1.0-base)/blend)),0.0);\n                }\n\n                fn colorDodge(base: f32, blend: f32) -> f32\n                {\n                    return min(1.0, base / (1.0-blend));\n                }\n\n                fn vividLight(base: f32, blend: f32) -> f32\n                {\n                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);\n                }\n\n                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>\n                {\n                    let blended: vec3<f32> = vec3<f32>(\n                        vividLight(base.r, blend.r),\n                        vividLight(base.g, blend.g),\n                        vividLight(base.b, blend.b)\n                    );\n\n                    return (blended * opacity + base * (1.0 - opacity));\n                }\n                ",main:"\n                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;\n                "}})}}N.extension={name:"vivid-light",type:e.Ag.BlendMode};var H=i(3751),z=i(2855);let X,V;function W(t){return void 0!==X||(X=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:t??z.k.defaultOptions.failIfMajorPerformanceCaveat};try{if(!H.e.get().getWebGLRenderingContext())return!1;let t=H.e.get().createCanvas().getContext("webgl",e);const r=!!t?.getContextAttributes()?.stencil;if(t){const e=t.getExtension("WEBGL_lose_context");e&&e.loseContext()}return t=null,r}catch(t){return!1}})()),X}async function Y(t={}){return void 0!==V||(V=await(async()=>{const e=H.e.get().getNavigator().gpu;if(!e)return!1;try{const r=await e.requestAdapter(t);return await r.requestDevice(),!0}catch(t){return!1}})()),V}const j=["webgl","webgpu","canvas"];async function q(t){let e,r=[];t.preference?(r.push(t.preference),j.forEach((e=>{e!==t.preference&&r.push(e)}))):r=j.slice();let n={};for(let s=0;s<r.length;s++){const o=r[s];if("webgpu"===o&&await Y()){const{WebGPURenderer:r}=await Promise.resolve().then(i.bind(i,2196));e=r,n={...t,...t.webgpu};break}if("webgl"===o&&W(t.failIfMajorPerformanceCaveat??z.k.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:r}=await Promise.resolve().then(i.bind(i,4794));e=r,n={...t,...t.webgl};break}if("canvas"===o)throw n={...t},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!e)throw new Error("No available renderer for the current environment");const s=new e;return await s.init(n),s}var $=i(4980),Z=i(7073),K=i(4670);const Q=class t{constructor(...t){this.stage=new $.mc,void 0!==t[0]&&(0,K.t6)(K.lj,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await q(e),t._plugins.forEach((t=>{t.init.call(this,e)}))}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return(0,K.t6)(K.lj,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,r=!1){const n=t._plugins.slice(0);n.reverse(),n.forEach((t=>{t.destroy.call(this)})),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Q._plugins=[];let J=Q;e.XO.handleByList(e.Ag.Application,J._plugins),e.XO.add(Z.M);var tt=i(6697),et=i(6719),rt=i(4589),nt=i(2233),it=i(2927),st=i(9252),ot=i(1849),at=i(6204);class ht extends ot.v{constructor(t,e){super();const{textures:r,data:n}=t;Object.keys(n.pages).forEach((t=>{const e=n.pages[parseInt(t,10)],i=r[e.id];this.pages.push({texture:i})})),Object.keys(n.chars).forEach((t=>{const e=n.chars[t],{frame:i,source:s}=r[e.page],o=new st.M(e.x+i.x,e.y+i.y,e.width,e.height),a=new c.g({source:s,frame:o});this.chars[t]={id:t.codePointAt(0),xOffset:e.xOffset,yOffset:e.yOffset,xAdvance:e.xAdvance,kerning:e.kerning??{},texture:a}})),this.baseRenderedFontSize=n.fontSize,this.baseMeasurementFontSize=n.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:n.fontSize},this.baseLineOffset=n.baseLineOffset,this.lineHeight=n.lineHeight,this.fontFamily=n.fontFamily,this.distanceField=n.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){at.c.install(t)}static uninstall(t){at.c.uninstall(t)}}const lt={test:t=>"string"==typeof t&&t.startsWith("info face="),parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const t in e){const n=e[t].match(/^[a-z]+/gm)[0],i=e[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const t in i){const e=i[t].split("="),r=e[0],n=e[1].replace(/"/gm,""),o=parseFloat(n),a=isNaN(o)?n:o;s[r]=a}r[n].push(s)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=r.info,[s]=r.common,[o]=r.distanceField??[];o&&(n.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),n.fontSize=parseInt(i.size,10),n.fontFamily=i.face,n.lineHeight=parseInt(s.lineHeight,10);const a=r.page;for(let t=0;t<a.length;t++)n.pages.push({id:parseInt(a[t].id,10)||0,file:a[t].file});const h={};n.baseLineOffset=n.lineHeight-parseInt(s.base,10);const l=r.char;for(let t=0;t<l.length;t++){const e=l[t],r=parseInt(e.id,10);let i=e.letter??e.char??String.fromCharCode(r);"space"===i&&(i=" "),h[r]=i,n.chars[i]={id:r,page:parseInt(e.page,10)||0,x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xOffset:parseInt(e.xoffset,10),yOffset:parseInt(e.yoffset,10),xAdvance:parseInt(e.xadvance,10),kerning:{}}}const u=r.kerning||[];for(let t=0;t<u.length;t++){const e=parseInt(u[t].first,10),r=parseInt(u[t].second,10),i=parseInt(u[t].amount,10);n.chars[h[r]].kerning[h[e]]=i}return n}},ut={test(t){const e=t;return"string"!=typeof e&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},r=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],i=t.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});const s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning");e.fontSize=parseInt(r.getAttribute("size"),10),e.fontFamily=r.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let t=0;t<s.length;t++)e.pages.push({id:parseInt(s[t].getAttribute("id"),10)||0,file:s[t].getAttribute("file")});const h={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let t=0;t<o.length;t++){const r=o[t],n=parseInt(r.getAttribute("id"),10);let i=r.getAttribute("letter")??r.getAttribute("char")??String.fromCharCode(n);"space"===i&&(i=" "),h[n]=i,e.chars[i]={id:n,page:parseInt(r.getAttribute("page"),10)||0,x:parseInt(r.getAttribute("x"),10),y:parseInt(r.getAttribute("y"),10),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10),xOffset:parseInt(r.getAttribute("xoffset"),10),yOffset:parseInt(r.getAttribute("yoffset"),10),xAdvance:parseInt(r.getAttribute("xadvance"),10),kerning:{}}}for(let t=0;t<a.length;t++){const r=parseInt(a[t].getAttribute("first"),10),n=parseInt(a[t].getAttribute("second"),10),i=parseInt(a[t].getAttribute("amount"),10);e.chars[h[n]].kerning[h[r]]=i}return e}},ct={test:t=>!("string"!=typeof t||!t.includes("<font>"))&&ut.test(H.e.get().parseXML(t)),parse:t=>ut.parse(H.e.get().parseXML(t))},dt=[".xml",".fnt"],pt={extension:{type:e.Ag.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof ht,getCacheableAssets(t,e){const r={};return t.forEach((t=>{r[t]=e,r[`${t}-bitmap`]=e})),r[`${e.fontFamily}-bitmap`]=e,r}},ft={extension:{type:e.Ag.LoadParser,priority:rt.T.Normal},name:"loadBitmapFont",test:t=>dt.includes(it.A.extname(t).toLowerCase()),testParse:async t=>lt.test(t)||ct.test(t),async parse(t,e,r){const n=lt.test(t)?lt.parse(t):ct.parse(t),{src:i}=e,{pages:s}=n,o=[],a=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let t=0;t<s.length;++t){const e=s[t].file;let r=it.A.join(it.A.dirname(i),e);r=(0,nt.Y)(r,i),o.push({src:r,data:a})}const h=await r.load(o),l=o.map((t=>h[t.src]));return new ht({data:n,textures:l},i)},async load(t,e){const r=await H.e.get().fetch(t);return await r.text()},async unload(t,e,r){await Promise.all(t.pages.map((t=>r.unload(t.texture.source._sourceOrigin)))),t.destroy()}};var mt=i(268);class gt{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach((t=>{this._assetList.push(t)})),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}var _t=i(1979);const bt={extension:{type:e.Ag.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every((t=>t instanceof c.g)),getCacheableAssets:(t,e)=>{const r={};return t.forEach((t=>{e.forEach(((e,n)=>{r[t+(0===n?"":n+1)]=e}))})),r}};async function xt(t){if("Image"in globalThis)return new Promise((e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t}));if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch(t){return!1}return!0}return!1}const vt={extension:{type:e.Ag.DetectionParser,priority:1},test:async()=>xt("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter((t=>"avif"!==t))},yt=["png","jpg","jpeg"],Ct={extension:{type:e.Ag.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...yt],remove:async t=>t.filter((t=>!yt.includes(t)))},Tt="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function St(t){return!Tt&&""!==document.createElement("video").canPlayType(t)}const wt={extension:{type:e.Ag.DetectionParser,priority:0},test:async()=>St("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter((t=>"mp4"!==t&&"m4v"!==t))},At={extension:{type:e.Ag.DetectionParser,priority:0},test:async()=>St("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter((t=>"ogv"!==t))},Mt={extension:{type:e.Ag.DetectionParser,priority:0},test:async()=>St("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter((t=>"webm"!==t))},Et={extension:{type:e.Ag.DetectionParser,priority:0},test:async()=>xt("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter((t=>"webp"!==t))};var Lt=i(2406),Rt=i(2217);class Pt{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,r)=>(this._parsersValidated=!1,t[e]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{let n=null,i=null;if(e.loadParser&&(i=this._parserHash[e.loadParser],i||(0,mt.R)(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!i){for(let r=0;r<this.parsers.length;r++){const n=this.parsers[r];if(n.load&&n.test?.(t,e,this)){i=n;break}}if(!i)return(0,mt.R)(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await i.load(t,e,this),r.parser=i;for(let t=0;t<this.parsers.length;t++){const i=this.parsers[t];i.parse&&i.parse&&await(i.testParse?.(n,e,this))&&(n=await i.parse(n,e,this)||n,r.parser=i)}return n})(),r}async load(t,e){this._parsersValidated||this._validateParsers();let r=0;const n={},i=(0,Rt.a)(t),s=(0,Lt.z)(t,(t=>({alias:[t],src:t,data:{}}))),o=s.length,a=s.map((async t=>{const i=it.A.toAbsolute(t.src);if(!n[t.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,t)),n[t.src]=await this.promiseCache[i].promise,e&&e(++r/o)}catch(e){throw delete this.promiseCache[i],delete n[t.src],new Error(`[Loader.load] Failed to load ${i}.\n${e}`)}}));return await Promise.all(a),i?n[s[0].src]:n}async unload(t){const e=(0,Lt.z)(t,(t=>({alias:[t],src:t}))).map((async t=>{const e=it.A.toAbsolute(t.src),r=this.promiseCache[e];if(r){const n=await r.promise;delete this.promiseCache[e],await(r.parser?.unload?.(n,t,this))}}));await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((t=>t.name)).reduce(((t,e)=>(e.name?t[e.name]&&(0,mt.R)(`[Assets] loadParser name conflict "${e.name}"`):(0,mt.R)("[Assets] loadParser should have a name"),{...t,[e.name]:e})),{})}}function Bt(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Ot(t,e){const r=t.split("?")[0],n=it.A.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const It={extension:{type:e.Ag.LoadParser,priority:rt.T.Low},name:"loadJson",test:t=>Bt(t,"application/json")||Ot(t,".json"),async load(t){const e=await H.e.get().fetch(t);return await e.json()}},Dt={name:"loadTxt",extension:{type:e.Ag.LoadParser,priority:rt.T.Low,name:"loadTxt"},test:t=>Bt(t,"text/plain")||Ot(t,".txt"),async load(t){const e=await H.e.get().fetch(t);return await e.text()}},Ft=["normal","bold","100","200","300","400","500","600","700","800","900"],Gt=[".ttf",".otf",".woff",".woff2"],kt=["font/ttf","font/otf","font/woff","font/woff2"],Ut=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Nt(t){const e=it.A.extname(t),r=it.A.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1)));let n=r.length>0;for(const t of r)if(!t.match(Ut)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const Ht=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/,zt={extension:{type:e.Ag.LoadParser,priority:rt.T.Low},name:"loadWebFont",test:t=>Bt(t,kt)||Ot(t,Gt),async load(t,e){const r=H.e.get().getFontFaceSet();if(r){const i=[],s=e.data?.family??Nt(t),o=e.data?.weights?.filter((t=>Ft.includes(t)))??["normal"],a=e.data??{};for(let e=0;e<o.length;e++){const h=o[e],l=new FontFace(s,`url(${n=t,Ht.test(n)?n:encodeURI(n)})`,{...a,weight:h});await l.load(),r.add(l),i.push(l)}return _t.l.set(`${s}-and-url`,{url:t,fontFaces:i}),1===i.length?i[0]:i}var n;return(0,mt.R)("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach((t=>{_t.l.remove(`${t.family}-and-url`),H.e.get().getFontFaceSet().delete(t)}))}};var Xt=i(8293),Vt=i(5801),Wt=i(2601);function Yt(t,e=1){const r=Wt.x.RETINA_PREFIX?.exec(t);return r?parseFloat(r[1]):e}function jt(t,e,r){t.label=r,t._sourceOrigin=r;const n=new c.g({source:t,label:r}),i=()=>{delete e.promiseCache[r],_t.l.has(r)&&_t.l.remove(r)};return n.source.once("destroy",(()=>{e.promiseCache[r]&&((0,mt.R)("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())})),n.once("destroy",(()=>{t.destroyed||((0,mt.R)("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())})),n}const qt={extension:{type:e.Ag.LoadParser,priority:rt.T.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test:t=>Bt(t,"image/svg+xml")||Ot(t,".svg"),async load(t,e,r){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?async function(t){const e=await H.e.get().fetch(t),r=await e.text(),n=new Vt.T;return n.svg(r),n}(t):async function(t,e,r,n){const i=await H.e.get().fetch(t),s=await i.blob(),o=URL.createObjectURL(s),a=new Image;a.src=o,a.crossOrigin=n,await a.decode(),URL.revokeObjectURL(o);const h=document.createElement("canvas"),l=h.getContext("2d"),u=e.data?.resolution||Yt(t),c=e.data?.width??a.width,d=e.data?.height??a.height;h.width=c*u,h.height=d*u,l.drawImage(a,0,0,c*u,d*u);const{parseAsGraphicsContext:p,...f}=e.data??{};return jt(new Xt.b({resource:h,alphaMode:"premultiply-alpha-on-upload",resolution:u,...f}),r,t)}(t,e,r,this.config.crossOrigin)},unload(t){t.destroy(!0)}};let $t=null;class Zt{constructor(){$t||($t=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n    async function checkImageBitmap() {\n      try {\n        if (typeof createImageBitmap !== "function")\n          return false;\n        const response = await fetch(WHITE_PNG);\n        const imageBlob = await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\n      } catch (_e) {\n        return false;\n      }\n    }\n    void checkImageBitmap().then((result) => {\n      self.postMessage(result);\n    });\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker($t)}}Zt.revokeObjectURL=function(){$t&&(URL.revokeObjectURL($t),$t=null)};let Kt=null;class Qt{constructor(){Kt||(Kt=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    async function loadImageBitmap(url, alphaMode) {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n      }\n      const imageBlob = await response.blob();\n      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);\n    }\n    self.onmessage = async (event) => {\n      try {\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\n        self.postMessage({\n          data: imageBitmap,\n          uuid: event.data.uuid,\n          id: event.data.id\n        }, [imageBitmap]);\n      } catch (e) {\n        self.postMessage({\n          error: e,\n          uuid: event.data.uuid,\n          id: event.data.id\n        });\n      }\n    };\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(Kt)}}Qt.revokeObjectURL=function(){Kt&&(URL.revokeObjectURL(Kt),Kt=null)};let Jt,te=0;const ee=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((t=>{const{worker:e}=new Zt;e.addEventListener("message",(r=>{e.terminate(),Zt.revokeObjectURL(),t(r.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){void 0===Jt&&(Jt=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Jt&&(this._createdWorkers++,t=(new Qt).worker,t.addEventListener("message",(t=>{this._complete(t.data),this._returnWorker(t.target),this._next()}))),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){void 0!==t.error?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise(((r,n)=>{this._queue.push({id:t,arguments:e,resolve:r,reject:n})}));return this._next(),r}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),r=e.id;this._resolveHash[te]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:te++,id:r})}},re=[".jpeg",".jpg",".png",".webp",".avif"],ne=["image/jpeg","image/png","image/webp","image/avif"];async function ie(t,e){const r=await H.e.get().fetch(t);if(!r.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${r.status} ${r.statusText}`);const n=await r.blob();return"premultiplied-alpha"===e?.data?.alphaMode?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const se={name:"loadTextures",extension:{type:e.Ag.LoadParser,priority:rt.T.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:t=>Bt(t,ne)||Ot(t,re),async load(t,e,r){let n=null;return n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ee.isImageBitmapSupported()?await ee.loadImageBitmap(t,e):await ie(t,e):await new Promise(((e,r)=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?e(n):(n.onload=()=>{e(n)},n.onerror=r)})),jt(new Xt.b({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||Yt(t),...e.data}),r,t)},unload(t){t.destroy(!0)}};var oe=i(6139),ae=i(6858);const he=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],le=he.map((t=>`video/${t.substring(1)}`));function ue(t,e,r){void 0!==r||e.startsWith("data:")?!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous"):t.crossOrigin=de(e)}function ce(t){return new Promise(((e,r)=>{function n(){s(),e()}function i(t){s(),r(t)}function s(){t.removeEventListener("canplaythrough",n),t.removeEventListener("error",i)}t.addEventListener("canplaythrough",n),t.addEventListener("error",i),t.load()}))}function de(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}const pe={name:"loadVideo",extension:{type:e.Ag.LoadParser,name:"loadVideo"},test(t){const e=Bt(t,le),r=Ot(t,he);return e||r},async load(t,e,r){const n={...oe.$.defaultOptions,resolution:e.data?.resolution||Yt(t),alphaMode:e.data?.alphaMode||await(0,ae.C)(),...e.data},i=document.createElement("video"),s={preload:!1!==n.autoLoad?"auto":void 0,"webkit-playsinline":!1!==n.playsinline?"":void 0,playsinline:!1!==n.playsinline?"":void 0,muted:!0===n.muted?"":void 0,loop:!0===n.loop?"":void 0,autoplay:!1!==n.autoPlay?"":void 0};Object.keys(s).forEach((t=>{const e=s[t];void 0!==e&&i.setAttribute(t,e)})),!0===n.muted&&(i.muted=!0),ue(i,t,n.crossorigin);const o=document.createElement("source");let a;if(t.startsWith("data:"))a=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const e=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();a=oe.$.MIME_TYPES[e]||`video/${e}`}return o.src=t,a&&(o.type=a),new Promise((s=>{const a=async()=>{const o=new oe.$({...n,resource:i});i.removeEventListener("canplay",a),e.data.preload&&await ce(i),s(jt(o,r,t))};i.addEventListener("canplay",a),i.appendChild(o)}))},unload(t){t.destroy(!0)}},fe={extension:{type:e.Ag.ResolveParser,name:"resolveTexture"},test:se.test,parse:t=>({resolution:parseFloat(Wt.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})},me={extension:{type:e.Ag.ResolveParser,priority:-2,name:"resolveJson"},test:t=>Wt.x.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:fe.parse};class ge{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Wt.x,this.loader=new Pt,this.cache=_t.l,this._backgroundLoader=new gt(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return void(0,mt.R)("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let e=t.manifest;"string"==typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,r="number"==typeof e?[e]:e,n=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:r}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const r=(0,Rt.a)(t),n=(0,Lt.z)(t).map((t=>{if("string"!=typeof t){const e=this.resolver.getAlias(t);return e.some((t=>!this.resolver.hasKey(t)))&&this.add(t),Array.isArray(e)?e[0]:e}return this.resolver.hasKey(t)||this.add({alias:t,src:t}),t})),i=this.resolver.resolve(n),s=await this._mapLoadToResolve(i,e);return r?s[n[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;"string"==typeof t&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),i={},s=Object.keys(n);let o=0,a=0;const h=()=>{e?.(++o/a)},l=s.map((t=>{const e=n[t];return a+=Object.keys(e).length,this._mapLoadToResolve(e,h).then((e=>{i[t]=e}))}));return await Promise.all(l),r?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach((t=>{this._backgroundLoader.add(Object.values(t))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"==typeof t)return _t.l.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=_t.l.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const n=await this.loader.load(r,e);this._backgroundLoader.active=!0;const i={};return r.forEach((t=>{const e=n[t.src],r=[t.src];t.alias&&r.push(...t.alias),r.forEach((t=>{i[t]=e})),_t.l.set(r,e)})),i}async unload(t){this._initialized||await this.init();const e=(0,Lt.z)(t).map((t=>"string"!=typeof t?t.src:t)),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=(0,Lt.z)(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map((t=>this._unloadFromResolved(e[t])));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach((t=>{_t.l.remove(t.src)})),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const r of t.detections)t.skipDetections||await r.test()?e=await r.add(e):t.skipDetections||(e=await r.remove(e));return e=e.filter(((t,r)=>e.indexOf(t)===r)),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach((e=>{e.config&&Object.keys(e.config).filter((e=>e in t)).forEach((r=>{e.config[r]=t[r]}))}))}}const _e=new ge;e.XO.handleByList(e.Ag.LoadParser,_e.loader.parsers).handleByList(e.Ag.ResolveParser,_e.resolver.parsers).handleByList(e.Ag.CacheParser,_e.cache.parsers).handleByList(e.Ag.DetectionParser,_e.detections),e.XO.add(bt,Ct,vt,Et,wt,At,Mt,It,Dt,zt,qt,se,pe,ft,pt,fe,me);const be={loader:e.Ag.LoadParser,resolver:e.Ag.ResolveParser,cache:e.Ag.CacheParser,detection:e.Ag.DetectionParser};e.XO.handle(e.Ag.Asset,(t=>{const r=t.ref;Object.entries(be).filter((([t])=>!!r[t])).forEach((([t,n])=>e.XO.add(Object.assign(r[t],{extension:r[t].extension??n}))))}),(t=>{const r=t.ref;Object.keys(be).filter((t=>!!r[t])).forEach((t=>e.XO.remove(r[t])))}));var xe=i(4913),ve=i(2577);const ye={extension:{type:e.Ag.DetectionParser,priority:3},test:async()=>!!await Y()||!!W(),add:async t=>[...t,"basis"],remove:async t=>t.filter((t=>"basis"!==t))};var Ce=i(583);class Te extends Ce.v{constructor(t){super(t),this.uploadMethodId="compressed",this.resource=t.resource,this.mipLevelCount=this.resource.length}}let Se,we,Ae;function Me(){if(Se)return Se;const t=document.createElement("canvas").getContext("webgl");return t?(Se=[...t.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...t.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...t.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...t.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Se):[]}async function Ee(){if(we)return we;const t=await H.e.get().getNavigator().gpu.requestAdapter();return we=[...t.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...t.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],we}async function Le(){return void 0!==Ae||(Ae=await(async()=>{const t=await Y(),e=W();if(t&&e){const t=await Ee(),e=Me();return t.filter((t=>e.includes(t)))}return t?await Ee():e?Me():[]})()),Ae}const Re=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let Pe;async function Be(){if(void 0!==Pe)return Pe;const t=await Le();return Pe=[...Re,...t],Pe}let Oe=null;class Ie{constructor(){Oe||(Oe=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    function createLevelBuffers(basisTexture, basisTranscoderFormat) {\n      const images = basisTexture.getNumImages();\n      const levels = basisTexture.getNumLevels(0);\n      const success = basisTexture.startTranscoding();\n      if (!success) {\n        throw new Error("startTranscoding failed");\n      }\n      const levelBuffers = [];\n      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {\n        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {\n          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);\n          const levelBuffer = new Uint8Array(transcodeSize);\n          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);\n          if (!success2) {\n            throw new Error("transcodeImage failed");\n          }\n          levelBuffers.push(levelBuffer);\n        }\n      }\n      return levelBuffers;\n    }\n\n    const gpuFormatToBasisTranscoderFormatMap = {\n      "bc3-rgba-unorm": 3,\n      // cTFBC3_RGBA\n      "bc7-rgba-unorm": 6,\n      // cTFBC7_RGBA,\n      "etc2-rgba8unorm": 1,\n      // cTFETC2_RGBA,\n      "astc-4x4-unorm": 10,\n      // cTFASTC_4x4_RGBA,\n      // Uncompressed\n      rgba8unorm: 13,\n      // cTFRGBA32,\n      rgba4unorm: 16\n      // cTFRGBA4444,\n    };\n    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {\n      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\n      if (format) {\n        return format;\n      }\n      throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\n    }\n\n    const settings = {\n      jsUrl: "basis/basis_transcoder.js",\n      wasmUrl: "basis/basis_transcoder.wasm"\n    };\n    let basisTranscoderFormat;\n    let basisTranscodedTextureFormat;\n    let basisPromise;\n    async function getBasis() {\n      if (!basisPromise) {\n        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;\n        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;\n        importScripts(absoluteJsUrl);\n        basisPromise = new Promise((resolve) => {\n          BASIS({\n            locateFile: (_file) => absoluteWasmUrl\n          }).then((module) => {\n            module.initializeBasis();\n            resolve(module.BasisFile);\n          });\n        });\n      }\n      return basisPromise;\n    }\n    async function fetchBasisTexture(url, BasisTexture) {\n      const basisResponse = await fetch(url);\n      if (basisResponse.ok) {\n        const basisArrayBuffer = await basisResponse.arrayBuffer();\n        return new BasisTexture(new Uint8Array(basisArrayBuffer));\n      }\n      throw new Error(`Failed to load Basis texture: ${url}`);\n    }\n    const preferredTranscodedFormat = [\n      "bc7-rgba-unorm",\n      "astc-4x4-unorm",\n      "etc2-rgba8unorm",\n      "bc3-rgba-unorm",\n      "rgba8unorm"\n    ];\n    async function load(url) {\n      const BasisTexture = await getBasis();\n      const basisTexture = await fetchBasisTexture(url, BasisTexture);\n      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);\n      return {\n        width: basisTexture.getImageWidth(0, 0),\n        height: basisTexture.getImageHeight(0, 0),\n        format: basisTranscodedTextureFormat,\n        resource: levelBuffers,\n        alphaMode: "no-premultiply-alpha"\n      };\n    }\n    async function init(jsUrl, wasmUrl, supportedTextures) {\n      if (jsUrl)\n        settings.jsUrl = jsUrl;\n      if (wasmUrl)\n        settings.wasmUrl = wasmUrl;\n      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];\n      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);\n      await getBasis();\n    }\n    const messageHandlers = {\n      init: async (data) => {\n        const { jsUrl, wasmUrl, supportedTextures } = data;\n        await init(jsUrl, wasmUrl, supportedTextures);\n      },\n      load: async (data) => {\n        try {\n          const textureOptions = await load(data.url);\n          return {\n            type: "load",\n            url: data.url,\n            success: true,\n            textureOptions,\n            transferables: textureOptions.resource?.map((arr) => arr.buffer)\n          };\n        } catch (e) {\n          throw e;\n        }\n      }\n    };\n    self.onmessage = async (messageEvent) => {\n      const message = messageEvent.data;\n      const response = await messageHandlers[message.type](message);\n      if (response) {\n        self.postMessage(response, response.transferables);\n      }\n    };\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(Oe)}}Ie.revokeObjectURL=function(){Oe&&(URL.revokeObjectURL(Oe),Oe=null)};const De={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function Fe(t){Object.assign(De,t)}let Ge;const ke={};function Ue(t,e){const r=function(t){return Ge||(Ge=(new Ie).worker,Ge.onmessage=t=>{const{success:e,url:r,textureOptions:n}=t.data;ke[r](n)},Ge.postMessage({type:"init",jsUrl:De.jsUrl,wasmUrl:De.wasmUrl,supportedTextures:t})),Ge}(e);return new Promise((e=>{ke[t]=e,r.postMessage({type:"load",url:t})}))}const Ne={extension:{type:e.Ag.LoadParser,priority:rt.T.High,name:"loadBasis"},name:"loadBasis",test:t=>Ot(t,[".basis"]),async load(t,e,r){const n=await Be(),i=await Ue(t,n);return jt(new Te(i),r,t)},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};function He(t,e){const r=t.getNumImages(),n=t.getNumLevels(0);if(!t.startTranscoding())throw new Error("startTranscoding failed");const i=[];for(let s=0;s<n;++s)for(let n=0;n<r;++n){const r=t.getImageTranscodedSizeInBytes(n,s,e),o=new Uint8Array(r);if(!t.transcodeImage(o,n,s,e,1,0))throw new Error("transcodeImage failed");i.push(o)}return i}const ze={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function Xe(t){const e=ze[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}var Ve=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(Ve||{}),We=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(We||{});function Ye(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var je,qe=((je=qe||{})[je.UNKNOWN=0]="UNKNOWN",je[je.R8G8B8=20]="R8G8B8",je[je.A8R8G8B8=21]="A8R8G8B8",je[je.X8R8G8B8=22]="X8R8G8B8",je[je.R5G6B5=23]="R5G6B5",je[je.X1R5G5B5=24]="X1R5G5B5",je[je.A1R5G5B5=25]="A1R5G5B5",je[je.A4R4G4B4=26]="A4R4G4B4",je[je.R3G3B2=27]="R3G3B2",je[je.A8=28]="A8",je[je.A8R3G3B2=29]="A8R3G3B2",je[je.X4R4G4B4=30]="X4R4G4B4",je[je.A2B10G10R10=31]="A2B10G10R10",je[je.A8B8G8R8=32]="A8B8G8R8",je[je.X8B8G8R8=33]="X8B8G8R8",je[je.G16R16=34]="G16R16",je[je.A2R10G10B10=35]="A2R10G10B10",je[je.A16B16G16R16=36]="A16B16G16R16",je[je.A8P8=40]="A8P8",je[je.P8=41]="P8",je[je.L8=50]="L8",je[je.A8L8=51]="A8L8",je[je.A4L4=52]="A4L4",je[je.V8U8=60]="V8U8",je[je.L6V5U5=61]="L6V5U5",je[je.X8L8V8U8=62]="X8L8V8U8",je[je.Q8W8V8U8=63]="Q8W8V8U8",je[je.V16U16=64]="V16U16",je[je.A2W10V10U10=67]="A2W10V10U10",je[je.Q16W16V16U16=110]="Q16W16V16U16",je[je.R16F=111]="R16F",je[je.G16R16F=112]="G16R16F",je[je.A16B16G16R16F=113]="A16B16G16R16F",je[je.R32F=114]="R32F",je[je.G32R32F=115]="G32R32F",je[je.A32B32G32R32F=116]="A32B32G32R32F",je[je.UYVY=Ye("UYVY")]="UYVY",je[je.R8G8_B8G8=Ye("RGBG")]="R8G8_B8G8",je[je.YUY2=Ye("YUY2")]="YUY2",je[je.D3DFMT_G8R8_G8B8=Ye("GRGB")]="D3DFMT_G8R8_G8B8",je[je.DXT1=Ye("DXT1")]="DXT1",je[je.DXT2=Ye("DXT2")]="DXT2",je[je.DXT3=Ye("DXT3")]="DXT3",je[je.DXT4=Ye("DXT4")]="DXT4",je[je.DXT5=Ye("DXT5")]="DXT5",je[je.ATI1=Ye("ATI1")]="ATI1",je[je.AT1N=Ye("AT1N")]="AT1N",je[je.ATI2=Ye("ATI2")]="ATI2",je[je.AT2N=Ye("AT2N")]="AT2N",je[je.BC4U=Ye("BC4U")]="BC4U",je[je.BC4S=Ye("BC4S")]="BC4S",je[je.BC5U=Ye("BC5U")]="BC5U",je[je.BC5S=Ye("BC5S")]="BC5S",je[je.DX10=Ye("DX10")]="DX10",je);const $e={[qe.DXT1]:"bc1-rgba-unorm",[qe.DXT2]:"bc2-rgba-unorm",[qe.DXT3]:"bc2-rgba-unorm",[qe.DXT4]:"bc3-rgba-unorm",[qe.DXT5]:"bc3-rgba-unorm",[qe.ATI1]:"bc4-r-unorm",[qe.BC4U]:"bc4-r-unorm",[qe.BC4S]:"bc4-r-snorm",[qe.ATI2]:"bc5-rg-unorm",[qe.BC5U]:"bc5-rg-unorm",[qe.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},Ze={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},Ke={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:{MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},HEADER_DX10_FIELDS:{DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DXGI_FORMAT:Ve,D3D10_RESOURCE_DIMENSION:We,D3DFMT:qe},Qe={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function Je(t,e){const{format:r,fourCC:n,width:i,height:s,dataOffset:o,mipmapCount:a}=function(t){const e=new Uint32Array(t,0,Ke.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[Ke.HEADER_FIELDS.MAGIC]!==Ke.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const r=e[Ke.HEADER_FIELDS.HEIGHT],n=e[Ke.HEADER_FIELDS.WIDTH],i=Math.max(1,e[Ke.HEADER_FIELDS.MIPMAP_COUNT]),s=e[Ke.HEADER_FIELDS.PF_FLAGS],o=e[Ke.HEADER_FIELDS.FOURCC],a=function(t,e,r,n){if(e&Ke.PIXEL_FORMAT_FLAGS.FOURCC){if(r===Ke.D3DFMT.DX10){const t=new Uint32Array(n,Ke.MAGIC_SIZE+Ke.HEADER_SIZE,Ke.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(t[Ke.HEADER_DX10_FIELDS.MISC_FLAG]===Ke.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(t[Ke.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===Ke.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const e=t[Ke.HEADER_DX10_FIELDS.DXGI_FORMAT];if(e in Ze)return Ze[e];throw new Error(`DDSParser cannot parse texture data with DXGI format ${e}`)}if(r in $e)return $e[r];throw new Error(`DDSParser cannot parse texture data with fourCC format ${r}`)}if(e&Ke.PIXEL_FORMAT_FLAGS.RGB||e&Ke.PIXEL_FORMAT_FLAGS.RGBA)return function(t){const e=t[Ke.HEADER_FIELDS.RGB_BITCOUNT],r=t[Ke.HEADER_FIELDS.R_BIT_MASK],n=t[Ke.HEADER_FIELDS.G_BIT_MASK],i=t[Ke.HEADER_FIELDS.B_BIT_MASK],s=t[Ke.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(255===r&&65280===n&&16711680===i&&4278190080===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(16711680===r&&65280===n&&255===i&&4278190080===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(1072693248===r&&1047552===n&&1023===i&&3221225472===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(65535===r&&4294901760===n&&0===i&&0===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(4294967295===r&&0===n&&0===i&&0===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(31744===r&&992===n&&31===i&&32768===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(63488===r&&2016===n&&31===i&&0===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(3840===r&&240===n&&15===i&&61440===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(255===r&&0===n&&0===i&&65280===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(65535===r&&0===n&&0===i&&0===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(255===r&&0===n&&0===i&&0===s)return Ze[Ke.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM]}throw new Error(`DDSParser does not support uncompressed texture with configuration:\n                bitCount = ${e}, rBitMask = ${r}, gBitMask = ${n}, aBitMask = ${s}`)}(t);if(e&Ke.PIXEL_FORMAT_FLAGS.YUV)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(e&Ke.PIXEL_FORMAT_FLAGS.LUMINANCE||e&Ke.PIXEL_FORMAT_FLAGS.LUMINANCEA)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(e&Ke.PIXEL_FORMAT_FLAGS.ALPHA||e&Ke.PIXEL_FORMAT_FLAGS.ALPHAPIXELS)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}(e,s,o,t);return{format:a,fourCC:o,width:n,height:r,dataOffset:Ke.MAGIC_SIZE+Ke.HEADER_SIZE+(o===Ke.D3DFMT.DX10?Ke.HEADER_DX10_SIZE:0),mipmapCount:i}}(t);if(!e.includes(r))throw new Error(`Unsupported texture format: ${n} ${r}, supported: ${e}`);if(a<=1)return{format:r,width:i,height:s,resource:[new Uint8Array(t,o)],alphaMode:"no-premultiply-alpha"};const h=function(t,e,r,n,i,s){const o=[],a=Qe[t];let h=e,l=r,u=n;for(let t=0;t<i;++t){const t=4*Math.ceil(Math.max(4,h)/4),e=4*Math.ceil(Math.max(4,l)/4),r=a?t/4*e/4*a:h*l*4,n=new Uint8Array(s,u,r);o.push(n),u+=r,h=Math.max(h>>1,1),l=Math.max(l>>1,1)}return o}(r,i,s,o,a,t);return{format:r,width:i,height:s,resource:h,alphaMode:"no-premultiply-alpha"}}const tr={extension:{type:e.Ag.LoadParser,priority:rt.T.High,name:"loadDDS"},name:"loadDDS",test:t=>Ot(t,[".dds"]),async load(t,e,r){const n=await Be(),i=await fetch(t),s=Je(await i.arrayBuffer(),n);return jt(new Te(s),r,t)},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};var er=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(er||{});const rr={FILE_HEADER_SIZE:64,FILE_IDENTIFIER:[171,75,84,88,32,49,49,187,13,10,26,10],FORMATS_TO_COMPONENTS:{6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:{33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},INTERNAL_FORMAT_TO_TEXTURE_FORMATS:{33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},FIELDS:{FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},TYPES_TO_BYTES_PER_COMPONENT:{5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},TYPES_TO_BYTES_PER_PIXEL:{32819:2,32820:2,33635:2},ENDIANNESS:67305985};function nr(t,e){const r=new DataView(t);if(!function(t){for(let e=0;e<rr.FILE_IDENTIFIER.length;e++)if(t.getUint8(e)!==rr.FILE_IDENTIFIER[e])return!1;return!0}(r))throw new Error("Invalid KTX identifier in header");const{littleEndian:n,glType:i,glFormat:s,glInternalFormat:o,pixelWidth:a,pixelHeight:h,numberOfMipmapLevels:l,offset:u}=function(t){const e=t.getUint32(rr.FIELDS.ENDIANNESS,!0)===rr.ENDIANNESS,r=t.getUint32(rr.FIELDS.GL_TYPE,e),n=t.getUint32(rr.FIELDS.GL_FORMAT,e),i=t.getUint32(rr.FIELDS.GL_INTERNAL_FORMAT,e),s=t.getUint32(rr.FIELDS.PIXEL_WIDTH,e),o=t.getUint32(rr.FIELDS.PIXEL_HEIGHT,e)||1,a=t.getUint32(rr.FIELDS.PIXEL_DEPTH,e)||1,h=t.getUint32(rr.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,l=t.getUint32(rr.FIELDS.NUMBER_OF_FACES,e),u=t.getUint32(rr.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),c=t.getUint32(rr.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(0===o||1!==a)throw new Error("Only 2D textures are supported");if(1!==l)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:r,glFormat:n,glInternalFormat:i,pixelWidth:s,pixelHeight:o,numberOfMipmapLevels:u,offset:rr.FILE_HEADER_SIZE+c}}(r),c=rr.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[o];if(!c)throw new Error(`Unknown texture format ${o}`);if(!e.includes(c))throw new Error(`Unsupported texture format: ${c}, supportedFormats: ${e}`);const d=function(t,e,r){let n=rr.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];if(0!==t&&(n=rr.TYPES_TO_BYTES_PER_COMPONENT[t]?rr.TYPES_TO_BYTES_PER_COMPONENT[t]*rr.FORMATS_TO_COMPONENTS[e]:rr.TYPES_TO_BYTES_PER_PIXEL[t]),void 0===n)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return n}(i,s,o),p=function(t,e,r,n,i,s,o,a){const h=n+3&-4,l=i+3&-4;let u=n*i;0===e&&(u=h*l);let c=u*r,d=n,p=i,f=h,m=l,g=s;const _=new Array(o);for(let e=0;e<o;e++){const n=t.getUint32(g,a);let i=g+4;_[e]=new Uint8Array(t.buffer,i,c),i+=c,g+=n+4,g=g%4!=0?g+4-g%4:g,d=d>>1||1,p=p>>1||1,f=d+4-1&-4,m=p+4-1&-4,c=f*m*r}return _}(r,i,d,a,h,u,l,n);return{format:c,width:a,height:h,resource:p,alphaMode:"no-premultiply-alpha"}}const ir={extension:{type:e.Ag.LoadParser,priority:rt.T.High,name:"loadKTX"},name:"loadKTX",test:t=>Ot(t,".ktx"),async load(t,e,r){const n=await Be(),i=await fetch(t),s=nr(await i.arrayBuffer(),n);return jt(new Te(s),r,t)},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};let sr=null;class or{constructor(){sr||(sr=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const converters = {\n      rgb8unorm: {\n        convertedFormat: "rgba8unorm",\n        convertFunction: convertRGBtoRGBA\n      },\n      "rgb8unorm-srgb": {\n        convertedFormat: "rgba8unorm-srgb",\n        convertFunction: convertRGBtoRGBA\n      }\n    };\n    function convertFormatIfRequired(textureOptions) {\n      const format = textureOptions.format;\n      if (converters[format]) {\n        const convertFunction = converters[format].convertFunction;\n        const levelBuffers = textureOptions.resource;\n        for (let i = 0; i < levelBuffers.length; i++) {\n          levelBuffers[i] = convertFunction(levelBuffers[i]);\n        }\n        textureOptions.format = converters[format].convertedFormat;\n      }\n    }\n    function convertRGBtoRGBA(levelBuffer) {\n      const pixelCount = levelBuffer.byteLength / 3;\n      const levelBufferWithAlpha = new Uint32Array(pixelCount);\n      for (let i = 0; i < pixelCount; ++i) {\n        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;\n      }\n      return new Uint8Array(levelBufferWithAlpha.buffer);\n    }\n\n    function createLevelBuffersFromKTX(ktxTexture) {\n      const levelBuffers = [];\n      for (let i = 0; i < ktxTexture.numLevels; i++) {\n        const imageData = ktxTexture.getImageData(i, 0, 0);\n        const levelBuffer = new Uint8Array(imageData.byteLength);\n        levelBuffer.set(imageData);\n        levelBuffers.push(levelBuffer);\n      }\n      return levelBuffers;\n    }\n\n    const glFormatToGPUFormatMap = {\n      6408: "rgba8unorm",\n      32856: "bgra8unorm",\n      //\n      32857: "rgb10a2unorm",\n      33189: "depth16unorm",\n      33190: "depth24plus",\n      33321: "r8unorm",\n      33323: "rg8unorm",\n      33325: "r16float",\n      33326: "r32float",\n      33327: "rg16float",\n      33328: "rg32float",\n      33329: "r8sint",\n      33330: "r8uint",\n      33331: "r16sint",\n      33332: "r16uint",\n      33333: "r32sint",\n      33334: "r32uint",\n      33335: "rg8sint",\n      33336: "rg8uint",\n      33337: "rg16sint",\n      33338: "rg16uint",\n      33339: "rg32sint",\n      33340: "rg32uint",\n      33778: "bc2-rgba-unorm",\n      33779: "bc3-rgba-unorm",\n      34836: "rgba32float",\n      34842: "rgba16float",\n      35056: "depth24plus-stencil8",\n      35898: "rg11b10ufloat",\n      35901: "rgb9e5ufloat",\n      35907: "rgba8unorm-srgb",\n      // bgra8unorm-srgb\n      36012: "depth32float",\n      36013: "depth32float-stencil8",\n      36168: "stencil8",\n      36208: "rgba32uint",\n      36214: "rgba16uint",\n      36220: "rgba8uint",\n      36226: "rgba32sint",\n      36232: "rgba16sint",\n      36238: "rgba8sint",\n      36492: "bc7-rgba-unorm",\n      36756: "r8snorm",\n      36757: "rg8snorm",\n      36759: "rgba8snorm",\n      37496: "etc2-rgba8unorm",\n      37808: "astc-4x4-unorm"\n    };\n    function glFormatToGPUFormat(glInternalFormat) {\n      const format = glFormatToGPUFormatMap[glInternalFormat];\n      if (format) {\n        return format;\n      }\n      throw new Error(`Unsupported glInternalFormat: ${glInternalFormat}`);\n    }\n\n    const vkFormatToGPUFormatMap = {\n      23: "rgb8unorm",\n      // VK_FORMAT_R8G8B8_UNORM\n      37: "rgba8unorm",\n      // VK_FORMAT_R8G8B8A8_UNORM\n      43: "rgba8unorm-srgb"\n      // VK_FORMAT_R8G8B8A8_SRGB\n      // TODO add more!\n    };\n    function vkFormatToGPUFormat(vkFormat) {\n      const format = vkFormatToGPUFormatMap[vkFormat];\n      if (format) {\n        return format;\n      }\n      throw new Error(`Unsupported VkFormat: ${vkFormat}`);\n    }\n\n    function getTextureFormatFromKTXTexture(ktxTexture) {\n      if (ktxTexture.classId === 2) {\n        return vkFormatToGPUFormat(ktxTexture.vkFormat);\n      }\n      return glFormatToGPUFormat(ktxTexture.glInternalformat);\n    }\n\n    const gpuFormatToBasisTranscoderFormatMap = {\n      "bc3-rgba-unorm": "BC3_RGBA",\n      "bc7-rgba-unorm": "BC7_M5_RGBA",\n      "etc2-rgba8unorm": "ETC2_RGBA",\n      "astc-4x4-unorm": "ASTC_4x4_RGBA",\n      // Uncompressed\n      rgba8unorm: "RGBA32",\n      rg11b10ufloat: "R11F_G11F_B10F"\n    };\n    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {\n      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];\n      if (format) {\n        return format;\n      }\n      throw new Error(`Unsupported transcoderFormat: ${transcoderFormat}`);\n    }\n\n    const settings = {\n      jsUrl: "",\n      wasmUrl: ""\n    };\n    let basisTranscoderFormat;\n    let basisTranscodedTextureFormat;\n    let ktxPromise;\n    async function getKTX() {\n      if (!ktxPromise) {\n        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;\n        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;\n        importScripts(absoluteJsUrl);\n        ktxPromise = new Promise((resolve) => {\n          LIBKTX({\n            locateFile: (_file) => absoluteWasmUrl\n          }).then((libktx) => {\n            resolve(libktx);\n          });\n        });\n      }\n      return ktxPromise;\n    }\n    async function fetchKTXTexture(url, ktx) {\n      const ktx2Response = await fetch(url);\n      if (ktx2Response.ok) {\n        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();\n        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));\n      }\n      throw new Error(`Failed to load KTX(2) texture: ${url}`);\n    }\n    const preferredTranscodedFormat = [\n      "bc7-rgba-unorm",\n      "astc-4x4-unorm",\n      "etc2-rgba8unorm",\n      "bc3-rgba-unorm",\n      "rgba8unorm"\n    ];\n    async function load(url) {\n      const ktx = await getKTX();\n      const ktxTexture = await fetchKTXTexture(url, ktx);\n      let format;\n      if (ktxTexture.needsTranscoding) {\n        format = basisTranscodedTextureFormat;\n        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];\n        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);\n        if (result !== ktx.ErrorCode.SUCCESS) {\n          throw new Error("Unable to transcode basis texture.");\n        }\n      } else {\n        format = getTextureFormatFromKTXTexture(ktxTexture);\n      }\n      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);\n      const textureOptions = {\n        width: ktxTexture.baseWidth,\n        height: ktxTexture.baseHeight,\n        format,\n        mipLevelCount: ktxTexture.numLevels,\n        resource: levelBuffers,\n        alphaMode: "no-premultiply-alpha"\n      };\n      convertFormatIfRequired(textureOptions);\n      return textureOptions;\n    }\n    async function init(jsUrl, wasmUrl, supportedTextures) {\n      if (jsUrl)\n        settings.jsUrl = jsUrl;\n      if (wasmUrl)\n        settings.wasmUrl = wasmUrl;\n      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];\n      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);\n      await getKTX();\n    }\n    const messageHandlers = {\n      init: async (data) => {\n        const { jsUrl, wasmUrl, supportedTextures } = data;\n        await init(jsUrl, wasmUrl, supportedTextures);\n      },\n      load: async (data) => {\n        try {\n          const textureOptions = await load(data.url);\n          return {\n            type: "load",\n            url: data.url,\n            success: true,\n            textureOptions,\n            transferables: textureOptions.resource?.map((arr) => arr.buffer)\n          };\n        } catch (e) {\n          throw e;\n        }\n      }\n    };\n    self.onmessage = async (messageEvent) => {\n      const message = messageEvent.data;\n      const response = await messageHandlers[message.type]?.(message);\n      if (response) {\n        self.postMessage(response, response.transferables);\n      }\n    };\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(sr)}}or.revokeObjectURL=function(){sr&&(URL.revokeObjectURL(sr),sr=null)};const ar={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function hr(t){Object.assign(ar,t)}let lr;const ur={};function cr(t,e){const r=function(t){return lr||(lr=(new or).worker,lr.onmessage=t=>{const{success:e,url:r,textureOptions:n}=t.data;ur[r](n)},lr.postMessage({type:"init",jsUrl:ar.jsUrl,wasmUrl:ar.wasmUrl,supportedTextures:t})),lr}(e);return new Promise((e=>{ur[t]=e,r.postMessage({type:"load",url:t})}))}const dr={extension:{type:e.Ag.LoadParser,priority:rt.T.High,name:"loadKTX2"},name:"loadKTX2",test:t=>Ot(t,".ktx2"),async load(t,e,r){const n=await Be(),i=await cr(t,n);return jt(new Te(i),r,t)},async unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}},pr={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:mr},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:mr}};function fr(t){const e=t.format;if(pr[e]){const r=pr[e].convertFunction,n=t.resource;for(let t=0;t<n.length;t++)n[t]=r(n[t]);t.format=pr[e].convertedFormat}}function mr(t){const e=t.byteLength/3,r=new Uint32Array(e);for(let n=0;n<e;++n)r[n]=t[3*n]+(t[3*n+1]<<8)+(t[3*n+2]<<16)+4278190080;return new Uint8Array(r.buffer)}function gr(t){const e=[];for(let r=0;r<t.numLevels;r++){const n=t.getImageData(r,0,0),i=new Uint8Array(n.byteLength);i.set(n),e.push(i)}return e}const _r={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function br(t){const e=_r[t];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${t}`)}const xr={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function vr(t){const e=xr[t];if(e)return e;throw new Error(`Unsupported VkFormat: ${t}`)}function yr(t){return 2===t.classId?vr(t.vkFormat):br(t.glInternalformat)}const Cr={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function Tr(t){const e=Cr[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const Sr=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],wr={extension:e.Ag.ResolveParser,test:t=>Ot(t,[".ktx",".ktx2",".dds"]),parse:t=>{let e;const r=t.split(".");if(r.length>2){const t=r[r.length-2];Sr.includes(t)&&(e=t)}else e=r[r.length-1];return{resolution:parseFloat(Wt.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e,src:t}}};let Ar;const Mr={extension:{type:e.Ag.DetectionParser,priority:2},test:async()=>!!await Y()||!!W(),add:async t=>{const e=await Le();return Ar=function(t){const e=["basis"],r={};return t.forEach((t=>{const n=t.split("-")[0];n&&!r[n]&&(r[n]=!0,e.push(n))})),e.sort(((t,e)=>{const r=Sr.indexOf(t),n=Sr.indexOf(e);return-1===r?1:-1===n?-1:r-n})),e}(e),[...Ar,...t]},remove:async t=>Ar?t.filter((t=>!(t in Ar))):t};var Er=i(9636),Lr=i(9443);const Rr=new Er.c,Pr=class{cull(t,e,r=!0){this._cullRecursive(t,e,r)}_cullRecursive(t,e,r=!0){if(t.cullable&&t.measurable&&t.includeInBuild){const n=t.cullArea??(0,Lr.fB)(t,r,Rr);t.culled=n.x>=e.x+e.width||n.y>=e.y+e.height||n.x+n.width<=e.x||n.y+n.height<=e.y}else t.culled=!1;if(t.cullableChildren&&!t.culled&&t.renderable&&t.measurable&&t.includeInBuild)for(let n=0;n<t.children.length;n++)this._cullRecursive(t.children[n],e,r)}};Pr.shared=new Pr;let Br=Pr;class Or{static init(){this._renderRef=this.render.bind(this),this.render=()=>{Br.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}Or.extension={priority:10,type:e.Ag.Application,name:"culler"};var Ir=i(992),Dr=i(7385),Fr=i(7982),Gr=i(8978);const kr={createCanvas:(t,e)=>new OffscreenCanvas(t??0,e??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new Gr.DOMParser).parseFromString(t,"text/xml")};var Ur=i(9432),Nr=i(809),Hr=i(5504),zr=i(7566),Xr=i(317),Vr=i(3285),Wr=i(4935),Yr=i(6625),jr="fn getLuminosity(c: vec3<f32>) -> f32 {\n  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;\n}\n\nfn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {\n  let d: f32 = lum - getLuminosity(c);\n  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);\n\n  // clip back into legal range\n  let newLum: f32 = getLuminosity(newColor);\n  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));\n  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));\n\n  let t1: f32 = newLum / (newLum - cMin);\n  let t2: f32 = (1.0 - newLum) / (cMax - newLum);\n\n  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));\n\n  return finalColor;\n}\n\nfn getSaturation(c: vec3<f32>) -> f32 {\n  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));\n}\n\n// Set saturation if color components are sorted in ascending order.\nfn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {\n  var result: vec3<f32>;\n  if (cSorted.z > cSorted.x) {\n    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));\n    result = vec3<f32>(0.0, newY, s);\n  } else {\n    result = vec3<f32>(0.0, 0.0, 0.0);\n  }\n  return vec3<f32>(result.x, result.y, result.z);\n}\n\nfn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {\n    var result: vec3<f32> = c;\n\n    if (c.r <= c.g && c.r <= c.b) {\n        if (c.g <= c.b) {\n            result = setSaturationMinMidMax(result, s);\n        } else {\n            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);\n            temp = setSaturationMinMidMax(temp, s);\n            result = vec3<f32>(temp.r, temp.b, temp.g);\n        }\n    } else if (c.g <= c.r && c.g <= c.b) {\n        if (c.r <= c.b) {\n            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);\n            temp = setSaturationMinMidMax(temp, s);\n            result = vec3<f32>(temp.g, temp.r, temp.b);\n        } else {\n            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);\n            temp = setSaturationMinMidMax(temp, s);\n            result = vec3<f32>(temp.g, temp.b, temp.r);\n        }\n    } else {\n        if (c.r <= c.g) {\n            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);\n            temp = setSaturationMinMidMax(temp, s);\n            result = vec3<f32>(temp.b, temp.r, temp.g);\n        } else {\n            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);\n            temp = setSaturationMinMidMax(temp, s);\n            result = vec3<f32>(temp.b, temp.g, temp.r);\n        }\n    }\n\n    return result;\n}",qr="\nin vec2 vTextureCoord;\n\nout vec4 finalColor;\n\nuniform float uAlpha;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;\n}\n",$r="struct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct AlphaUniforms {\n  uAlpha:f32,\n};\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n\n@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>\n  };\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \n}\n\nfn getSize() -> vec2<f32>\n{\n  return gfu.uGlobalFrame.zw;\n}\n  \n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>, \n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition)\n  );\n}\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n  @builtin(position) position: vec4<f32>\n) -> @location(0) vec4<f32> {\n \n    var sample = textureSample(uTexture, uSampler, uv);\n    \n    return sample * alphaUniforms.uAlpha;\n}",Zr="\n\nstruct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct BlurUniforms {\n  uStrength:f32,\n};\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n\n@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;\n\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    %blur-struct%\n  };\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \n}\n\nfn getSize() -> vec2<f32>\n{\n  return gfu.uGlobalFrame.zw;\n}\n\n\n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>, \n) -> VSOutput {\n\n  let filteredCord = filterTextureCoord(aPosition);\n\n  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;\n\n  return VSOutput(\n   filterVertexPosition(aPosition),\n    %blur-vertex-out%\n  );\n}\n\n@fragment\nfn mainFragment(\n  @builtin(position) position: vec4<f32>,\n  %blur-fragment-in%\n) -> @location(0) vec4<f32> {\n\n    var   finalColor = vec4(0.0);\n\n    %blur-sampling%\n\n    return finalColor;\n}",Kr="\nin vec2 vTextureCoord;\nin vec4 vColor;\n\nout vec4 finalColor;\n\nuniform float uColorMatrix[20];\nuniform float uAlpha;\n\nuniform sampler2D uTexture;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture(uTexture, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * 0.2);\n    float diff = (randomValue - 0.5) *  0.5;\n\n    if (uAlpha == 0.0) {\n        finalColor = color;\n        return;\n    }\n\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    vec4 result;\n\n    result.r = (uColorMatrix[0] * color.r);\n        result.r += (uColorMatrix[1] * color.g);\n        result.r += (uColorMatrix[2] * color.b);\n        result.r += (uColorMatrix[3] * color.a);\n        result.r += uColorMatrix[4];\n\n    result.g = (uColorMatrix[5] * color.r);\n        result.g += (uColorMatrix[6] * color.g);\n        result.g += (uColorMatrix[7] * color.b);\n        result.g += (uColorMatrix[8] * color.a);\n        result.g += uColorMatrix[9];\n\n    result.b = (uColorMatrix[10] * color.r);\n       result.b += (uColorMatrix[11] * color.g);\n       result.b += (uColorMatrix[12] * color.b);\n       result.b += (uColorMatrix[13] * color.a);\n       result.b += uColorMatrix[14];\n\n    result.a = (uColorMatrix[15] * color.r);\n       result.a += (uColorMatrix[16] * color.g);\n       result.a += (uColorMatrix[17] * color.b);\n       result.a += (uColorMatrix[18] * color.a);\n       result.a += uColorMatrix[19];\n\n    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    finalColor = vec4(rgb, result.a);\n}\n",Qr="struct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct ColorMatrixUniforms {\n  uColorMatrix:array<vec4<f32>, 5>,\n  uAlpha:f32,\n};\n\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;\n\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>,\n  };\n  \nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>, \n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition),\n  );\n}\n\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n) -> @location(0) vec4<f32> {\n\n\n  var c = textureSample(uTexture, uSampler, uv);\n  \n  if (colorMatrixUniforms.uAlpha == 0.0) {\n    return c;\n  }\n\n \n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.r /= c.a;\n      c.g /= c.a;\n      c.b /= c.a;\n    }\n\n    var cm = colorMatrixUniforms.uColorMatrix;\n\n\n    var result = vec4<f32>(0.);\n\n    result.r = (cm[0][0] * c.r);\n    result.r += (cm[0][1] * c.g);\n    result.r += (cm[0][2] * c.b);\n    result.r += (cm[0][3] * c.a);\n    result.r += cm[1][0];\n\n    result.g = (cm[1][1] * c.r);\n    result.g += (cm[1][2] * c.g);\n    result.g += (cm[1][3] * c.b);\n    result.g += (cm[2][0] * c.a);\n    result.g += cm[2][1];\n\n    result.b = (cm[2][2] * c.r);\n    result.b += (cm[2][3] * c.g);\n    result.b += (cm[3][0] * c.b);\n    result.b += (cm[3][1] * c.a);\n    result.b += cm[3][2];\n\n    result.a = (cm[3][3] * c.r);\n    result.a += (cm[4][0] * c.g);\n    result.a += (cm[4][1] * c.b);\n    result.a += (cm[4][2] * c.a);\n    result.a += cm[4][3];\n\n    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);\n\n    rgb.r *= result.a;\n    rgb.g *= result.a;\n    rgb.b *= result.a;\n\n    return vec4(rgb, result.a);\n}",Jr="in vec2 aPosition;\nout vec2 vTextureCoord;\n\nuniform vec4 uInputSize;\nuniform vec4 uOutputFrame;\nuniform vec4 uOutputTexture;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n    \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",tn="\nin vec2 vTextureCoord;\nin vec2 vFilterUv;\n\nout vec4 finalColor;\n\nuniform sampler2D uTexture;\nuniform sampler2D uMapTexture;\n\nuniform vec4 uInputClamp;\nuniform highp vec4 uInputSize;\nuniform mat2 uRotation;\nuniform vec2 uScale;\n\nvoid main()\n{\n    vec4 map = texture(uMapTexture, vFilterUv);\n    \n    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; \n\n    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));\n}\n",en="in vec2 aPosition;\nout vec2 vTextureCoord;\nout vec2 vFilterUv;\n\n\nuniform vec4 uInputSize;\nuniform vec4 uOutputFrame;\nuniform vec4 uOutputTexture;\n\nuniform mat3 uFilterMatrix;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n    \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\n}\n\nvec2 getFilterCoord( void )\n{\n  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;\n}\n\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n    vFilterUv = getFilterCoord();\n}\n",rn="\nstruct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct DisplacementUniforms {\n  uFilterMatrix:mat3x3<f32>,\n  uScale:vec2<f32>,\n  uRotation:mat2x2<f32>\n};\n\n\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n\n@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;\n@group(1) @binding(1) var uMapTexture: texture_2d<f32>;\n@group(1) @binding(2) var uMapSampler : sampler;\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>,\n    @location(1) filterUv : vec2<f32>,\n  };\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \n}\n\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\n}\n\nfn getSize() -> vec2<f32>\n{\n\n  \n  return gfu.uGlobalFrame.zw;\n}\n  \n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>, \n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition),\n   getFilterCoord(aPosition)\n  );\n}\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n  @location(1) filterUv: vec2<f32>,\n  @builtin(position) position: vec4<f32>\n) -> @location(0) vec4<f32> {\n\n    var map = textureSample(uMapTexture, uMapSampler, filterUv);\n\n    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; \n   \n    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));\n}",nn="\nin vec2 vTextureCoord;\nin vec4 vColor;\n\nout vec4 finalColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uTexture;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture(uTexture, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) *  uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    finalColor = color;\n}\n",sn="\n\nstruct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct NoiseUniforms {\n  uNoise:f32,\n  uSeed:f32,\n};\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n\n@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>\n  };\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \n}\n\nfn getSize() -> vec2<f32>\n{\n  return gfu.uGlobalFrame.zw;\n}\n  \n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>, \n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition)\n  );\n}\n\nfn rand(co:vec2<f32>) -> f32\n{\n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n  @builtin(position) position: vec4<f32>\n) -> @location(0) vec4<f32> {\n\n    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);\n  \n    \n    var sample = textureSample(uTexture, uSampler, uv);\n    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);\n    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;\n  \n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (sample.a > 0.0) {\n      sample.r /= sample.a;\n      sample.g /= sample.a;\n      sample.b /= sample.a;\n    }\n\n    sample.r += diff;\n    sample.g += diff;\n    sample.b += diff;\n\n    // Premultiply alpha again.\n    sample.r *= sample.a;\n    sample.g *= sample.a;\n    sample.b *= sample.a;\n    \n    return sample;\n}",on=i(2311),an=i(7314),hn=i(5496);const ln=class t extends d.d{constructor(e){e={...t.defaultOptions,...e};const r=l.B.from({vertex:{source:$r,entryPoint:"mainVertex"},fragment:{source:$r,entryPoint:"mainFragment"}}),n=h.M.from({vertex:Jr,fragment:qr,name:"alpha-filter"}),{alpha:i,...s}=e;super({...s,gpuProgram:r,glProgram:n,resources:{alphaUniforms:new u.k({uAlpha:{value:i,type:"f32"}})}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(t){this.resources.alphaUniforms.uniforms.uAlpha=t}};ln.defaultOptions={alpha:1};let un=ln;var cn=i(2437),dn=i(5099);const pn={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fn=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join("\n");function mn(t){const e=pn[t],r=e.length;let n,i=fn,s="";for(let i=0;i<t;i++){let o="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;".replace("%index%",i.toString());n=i,i>=r&&(n=t-i-1),o=o.replace("%value%",e[n].toString()),s+=o,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}const gn="\n    in vec2 aPosition;\n\n    uniform float uStrength;\n\n    out vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 uInputSize;\n    uniform vec4 uOutputFrame;\n    uniform vec4 uOutputTexture;\n\n    vec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n    \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\n    vec2 filterTextureCoord( void )\n    {\n        return aPosition * (uOutputFrame.zw * uInputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        float pixelStrength = uInputSize.%dimension% * uStrength;\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";function _n(t,e){const r=Math.ceil(t/2);let n,i=gn,s="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let e=0;e<t;e++){let t=n.replace("%index%",e.toString());t=t.replace("%sampleIndex%",e-(r-1)+".0"),s+=t,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i=i.replace("%dimension%",e?"z":"w"),i}function bn(t,e){const r=_n(e,t),n=mn(e);return h.M.from({vertex:r,fragment:n,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}function xn(t,e){const r=pn[e],n=r.length,i=[],s=[],o=[];for(let a=0;a<e;a++){i[a]=`@location(${a}) offset${a}: vec2<f32>,`,s[a]=t?`filteredCord + vec2(${a-n+1} * pixelStrength, 0.0),`:`filteredCord + vec2(0.0, ${a-n+1} * pixelStrength),`;const h=r[a<n?a:e-a-1].toString();o[a]=`finalColor += textureSample(uTexture, uSampler, offset${a}) * ${h};`}const a=i.join("\n"),h=s.join("\n"),u=o.join("\n"),c=Zr.replace("%blur-struct%",a).replace("%blur-vertex-out%",h).replace("%blur-fragment-in%",a).replace("%blur-sampling%",u).replace("%dimension%",t?"z":"w");return l.B.from({vertex:{source:c,entryPoint:"mainVertex"},fragment:{source:c,entryPoint:"mainFragment"}})}const vn=class t extends d.d{constructor(e){super({glProgram:bn((e={...t.defaultOptions,...e}).horizontal,e.kernelSize),gpuProgram:xn(e.horizontal,e.kernelSize),resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(t,e,r,n){if(this._uniforms.uStrength=this.strength/this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{const i=cn.W.getSameSizeTexture(e);let s=e,o=i;this._state.blend=!1;const a=t.renderer.type===dn.W.WEBGPU;for(let e=0;e<this.passes-1;e++){t.applyFilter(this,s,o,0===e||a);const r=o;o=s,s=r}this._state.blend=!0,t.applyFilter(this,s,r,n),cn.W.returnTexture(i)}}get blur(){return this.strength}set blur(t){this.padding=1+2*Math.abs(t),this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}};vn.defaultOptions={strength:8,quality:4,kernelSize:5};let yn=vn;class Cn extends d.d{constructor(...t){let e=t[0]??{};"number"==typeof e&&((0,K.t6)(K.lj,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},void 0!==t[1]&&(e.quality=t[1]),void 0!==t[2]&&(e.resolution=t[2]||"inherit"),void 0!==t[3]&&(e.kernelSize=t[3])),e={...yn.defaultOptions,...e};const{strength:r,strengthX:n,strengthY:i,quality:s,...o}=e;super({...o,compatibleRenderers:dn.W.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new yn({horizontal:!0,...e}),this.blurYFilter=new yn({horizontal:!1,...e}),this.quality=s,this.strengthX=n??r,this.strengthY=i??r,this.repeatEdgePixels=!1}apply(t,e,r,n){const i=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(i&&s){const i=cn.W.getSameSizeTexture(e);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(t,e,i,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,i,r,n),cn.W.returnTexture(i)}else s?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,e,r,n)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(t,e,r,n))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get strengthX(){return this.blurXFilter.blur}set strengthX(t){this.blurXFilter.blur=t,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(t){this.blurYFilter.blur=t,this.updatePadding()}get blur(){return(0,K.t6)("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(t){(0,K.t6)("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=t}get blurX(){return(0,K.t6)("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(t){(0,K.t6)("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=t}get blurY(){return(0,K.t6)("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(t){(0,K.t6)("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}Cn.defaultOptions={strength:8,quality:4,kernelSize:5};class Tn extends d.d{constructor(t={}){const e=new u.k({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}});super({...t,gpuProgram:l.B.from({vertex:{source:Qr,entryPoint:"mainVertex"},fragment:{source:Qr,entryPoint:"mainFragment"}}),glProgram:h.M.from({vertex:Jr,fragment:Kr,name:"color-matrix-filter"}),resources:{colorMatrixUniforms:e}}),this.alpha=1}_loadMatrix(t,e=!1){let r=t;e&&(this._multiply(r,this.matrix,t),r=this._colorMatrix(r)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=r,this.resources.colorMatrixUniforms.update()}_multiply(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}tint(t,e){const[r,n,i]=ve.Q.shared.setValue(t).toArray(),s=[r,0,0,0,0,0,n,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(s,e)}greyscale(t,e){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}grayscale(t,e){this.greyscale(t,e)}blackAndWhite(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)}hue(t,e){t=(t||0)/180*Math.PI;const r=Math.cos(t),n=Math.sin(t),i=1/3,s=(0,Math.sqrt)(i),o=[r+(1-r)*i,i*(1-r)-s*n,i*(1-r)+s*n,0,0,i*(1-r)+s*n,r+i*(1-r),i*(1-r)-s*n,0,0,i*(1-r)-s*n,i*(1-r)+s*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,e)}contrast(t,e){const r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)}saturate(t=0,e){const r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)}desaturate(){this.saturate(-1)}negative(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)}sepia(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)}technicolor(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)}polaroid(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)}toBGR(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)}kodachrome(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)}browni(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)}vintage(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)}colorTone(t,e,r,n,i){t||(t=.2),e||(e=.15),r||(r=16770432),n||(n=3375104);const s=ve.Q.shared,[o,a,h]=s.setValue(r).toArray(),[l,u,c]=s.setValue(n).toArray(),d=[.3,.59,.11,0,0,o,a,h,t,0,l,u,c,e,0,o-l,a-u,h-c,0,0];this._loadMatrix(d,i)}night(t,e){t||(t=.1);const r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}predator(t,e){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)}lsd(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(t){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=t}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(t){this.resources.colorMatrixUniforms.uniforms.uAlpha=t}}var Sn=i(9313),wn=i(5101),An=i(6844);class Mn extends d.d{constructor(...t){let e=t[0];e instanceof An.k&&(t[1]&&(0,K.t6)(K.lj,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),e={sprite:e,scale:t[1]});const{sprite:r,scale:n,...i}=e;let s=n??20;"number"==typeof s&&(s=new wn.b(s,s));const o=new u.k({uFilterMatrix:{value:new Sn.u,type:"mat3x3<f32>"},uScale:{value:s,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),a=h.M.from({vertex:en,fragment:tn,name:"displacement-filter"}),c=l.B.from({vertex:{source:rn,entryPoint:"mainVertex"},fragment:{source:rn,entryPoint:"mainFragment"}}),d=r.texture.source;super({...i,gpuProgram:c,glProgram:a,resources:{filterUniforms:o,uMapTexture:d,uMapSampler:d.style}}),this._sprite=e.sprite,this._sprite.renderable=!1}apply(t,e,r,n){const i=this.resources.filterUniforms.uniforms;t.calculateSpriteMatrix(i.uFilterMatrix,this._sprite);const s=this._sprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);0!==o&&0!==a&&(i.uRotation[0]=s.a/o,i.uRotation[1]=s.b/o,i.uRotation[2]=s.c/a,i.uRotation[3]=s.d/a),this.resources.uMapTexture=this._sprite.texture.source,t.applyFilter(this,e,r,n)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}const En=class t extends d.d{constructor(e={}){e={...t.defaultOptions,...e};const r=l.B.from({vertex:{source:sn,entryPoint:"mainVertex"},fragment:{source:sn,entryPoint:"mainFragment"}}),n=h.M.from({vertex:Jr,fragment:nn,name:"noise-filter"}),{noise:i,seed:s,...o}=e;super({...o,gpuProgram:r,glProgram:n,resources:{noiseUniforms:new u.k({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=i,this.seed=s??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(t){this.resources.noiseUniforms.uniforms.uNoise=t}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(t){this.resources.noiseUniforms.uniforms.uSeed=t}};En.defaultOptions={noise:.5};let Ln=En;var Rn=i(9049),Pn=i(9430),Bn=i(825),On=i(2329),In=i(2079),Dn=i(1652),Fn=i(9939),Gn=i(2505),kn=i(2812);function Un(t,e,r,n,i,s,o,a){const h=o-r,l=a-n,u=i-r,c=s-n,d=t-r,p=e-n,f=h*h+l*l,m=h*u+l*c,g=h*d+l*p,_=u*u+c*c,b=u*d+c*p,x=1/(f*_-m*m),v=(_*g-m*b)*x,y=(f*b-m*g)*x;return v>=0&&y>=0&&v+y<1}var Nn=i(6125),Hn=i(2853),zn=i(9389),Xn=i(4863);class Vn{constructor(t=0,e=0,r=0,n=0,i=0,s=0){this.type="triangle",this.x=t,this.y=e,this.x2=r,this.y2=n,this.x3=i,this.y3=s}contains(t,e){const r=(this.x-this.x3)*(e-this.y3)-(this.y-this.y3)*(t-this.x3),n=(this.x2-this.x)*(e-this.y)-(this.y2-this.y)*(t-this.x);if(r<0!=n<0&&0!==r&&0!==n)return!1;const i=(this.x3-this.x2)*(e-this.y2)-(this.y3-this.y2)*(t-this.x2);return 0===i||i<0==r+n<=0}strokeContains(t,e,r,n=.5){const i=r/2,s=i*i,{x:o,x2:a,x3:h,y:l,y2:u,y3:c}=this;return(0,Gn.z)(t,e,o,l,a,c)<=s||(0,Gn.z)(t,e,a,u,h,c)<=s||(0,Gn.z)(t,e,h,c,o,l)<=s}clone(){return new Vn(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x2=t.x2,this.y2=t.y2,this.x3=t.x3,this.y3=t.y3,this}copyTo(t){return t.copyFrom(this),t}getBounds(t){t||(t=new st.M);const e=Math.min(this.x,this.x2,this.x3),r=Math.max(this.x,this.x2,this.x3),n=Math.min(this.y,this.y2,this.y3),i=Math.max(this.y,this.y2,this.y3);return t.x=e,t.y=n,t.width=r-e,t.height=i-n,t}}var Wn=i(4458),Yn=i(8567);const jn=class t{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:e}=this;let r=0;for(;e.length&&r<t.uploadsPerFrame;){const t=e.shift();this.uploadQueueItem(t),r++}e.length?Yn.R.system.addOnce(this._tick,this,Wn.d.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(t){const e=Array.isArray(t)?t:[t];for(const t of e)t instanceof $.mc?this._addContainer(t):this.resolveQueueItem(t,this.queue);return this}_addContainer(t){this.resolveQueueItem(t,this.queue);for(const e of t.children)this._addContainer(e)}upload(t){return t&&this.add(t),new Promise((t=>{this.queue.length?(this.resolves.push(t),this.dedupeQueue(),Yn.R.system.addOnce(this._tick,this,Wn.d.UTILITY)):t()}))}dedupeQueue(){const t=Object.create(null);let e=0;for(let r=0;r<this.queue.length;r++){const n=this.queue[r];t[n.uid]||(t[n.uid]=!0,this.queue[e++]=n)}this.queue.length=e}_resolve(){const{resolves:t}=this,e=t.slice(0);t.length=0;for(const t of e)t()}};jn.uploadsPerFrame=4;let qn=jn;var $n=i(9408),Zn=i(3681),Kn=i(7547),Qn=i(4985),Jn=i(5060);class ti extends Qn.l{constructor(...t){let e=t[0];e instanceof Zn.V&&((0,K.t6)(K.lj,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&((0,K.t6)(K.lj,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));const{geometry:r,shader:n,texture:i,roundPixels:s,state:o,...a}=e;super({label:"Mesh",...a}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=n??null,this.texture=i??n?.texture??c.g.WHITE,this.state=o??Kn.U.for2d(),this._geometry=r,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=s??!1}get material(){return(0,K.t6)(K.lj,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){this._geometry!==t&&(this._geometry?.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=c.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return!this._shader&&!(12&this.state.data)&&this._geometry instanceof Jn.u&&("auto"===this._geometry.batchMode?this._geometry.positions.length/2<=100:"batch"===this._geometry.batchMode)}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){const{x:e,y:r}=t;if(!this.bounds.containsPoint(e,r))return!1;const n=this.geometry.getBuffer("aPosition").data,i="triangle-strip"===this.geometry.topology?3:1;if(this.geometry.getIndex()){const t=this.geometry.getIndex().data,s=t.length;for(let o=0;o+2<s;o+=i){const i=2*t[o],s=2*t[o+1],a=2*t[o+2];if(Un(e,r,n[i],n[i+1],n[s],n[s+1],n[a],n[a+1]))return!0}}else{const t=n.length/2;for(let s=0;s+2<t;s+=i){const t=2*s,i=2*(s+1),o=2*(s+2);if(Un(e,r,n[t],n[t+1],n[i],n[i+1],n[o],n[o+1]))return!0}}return!1}destroy(t){if(super.destroy(t),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._texture.destroy(e)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}class ei extends An.k{constructor(...t){let e=t[0];Array.isArray(t[0])&&(e={textures:t[0],autoUpdate:t[1]});const{textures:r,autoUpdate:n,...i}=e,[s]=r;super({...i,texture:s instanceof c.g?s:s.texture}),this._textures=null,this._durations=null,this._autoUpdate=n??!0,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=r}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Yn.R.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Yn.R.shared.add(this.update,this,Wn.d.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=t.deltaTime,r=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){let t=this._currentTime%1*this._durations[this.currentFrame];for(t+=r/60*1e3;t<0;)this._currentTime--,t+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);t>=this._durations[this.currentFrame];)t-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=t/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this._updateTexture())}_updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this.texture=this._textures[t],this.updateAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let r=0;r<t.length;++r)e.push(c.g.from(t[r]));return new ei(e)}static fromImages(t){const e=[];for(let r=0;r<t.length;++r)e.push(c.g.from(t[r]));return new ei(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof c.g)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Yn.R.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Yn.R.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class ri{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new Sn.u,this.observer=e,this.position=new kn.o(this,0,0),this.scale=new kn.o(this,1,1),this.pivot=new kn.o(this,0,0),this.skew=new kn.o(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const t=this._matrix;return this.dirty?(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1,t):t}_onUpdate(t){this.dirty=!0,t===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}const ni=class t extends Qn.l{constructor(...e){let r=e[0]||{};r instanceof c.g&&(r={texture:r}),e.length>1&&((0,K.t6)(K.lj,"use new TilingSprite({ texture, width:100, height:100 }) instead"),r.width=e[1],r.height=e[2]),r={...t.defaultOptions,...r};const{texture:n,anchor:i,tilePosition:s,tileScale:o,tileRotation:a,width:h,height:l,applyAnchorToTexture:u,roundPixels:d,...p}=r??{};super({label:"TilingSprite",...p}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new kn.o({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=u,this.texture=n,this._width=h??n.width,this._height=l??n.height,this._tileTransform=new ri({observer:{_onUpdate:()=>this.onViewUpdate()}}),i&&(this.anchor=i),this.tilePosition=s,this.tileScale=o,this.tileRotation=a,this.roundPixels=d??!1}static from(e,r={}){return new t("string"==typeof e?{texture:_t.l.get(e),...r}:{texture:e,...r})}get uvRespectAnchor(){return(0,mt.R)("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(t){(0,mt.R)("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=t}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(t){this._texture.textureMatrix.clampMargin=t}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get tilePosition(){return this._tileTransform.position}set tilePosition(t){this._tileTransform.position.copyFrom(t)}get tileScale(){return this._tileTransform.scale}set tileScale(t){"number"==typeof t?this._tileTransform.scale.set(t):this._tileTransform.scale.copyFrom(t)}set tileRotation(t){this._tileTransform.rotation=t}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(t){t||(t=c.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}set width(t){this._width=t,this.onViewUpdate()}get width(){return this._width}set height(t){this._height=t,this.onViewUpdate()}get height(){return this._height}setSize(t,e){"object"==typeof t&&(e=t.height??t.width,t=t.width),this._width=t,this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}updateBounds(){const t=this._bounds,e=this._anchor,r=this._width,n=this._height;t.maxX=-e._x*r,t.minX=t.maxX+r,t.maxY=-e._y*n,t.minY=t.maxY+n}containsPoint(t){const e=this._width,r=this._height,n=-e*this._anchor._x;let i=0;return t.x>=n&&t.x<=n+e&&(i=-r*this._anchor._y,t.y>=i&&t.y<=i+r)}destroy(t=!1){if(super.destroy(t),this._anchor=null,this._tileTransform=null,this._bounds=null,"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._texture.destroy(e)}this._texture=null}};ni.defaultOptions={texture:c.g.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let ii=ni;class si extends Qn.l{constructor(t,e){const{text:r,resolution:n,style:i,anchor:s,width:o,height:a,roundPixels:h,...l}=t;super({...l}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=r??"",this.style=i,this.resolution=n??null,this.allowChildren=!1,this._anchor=new kn.o({_onUpdate:()=>{this.onViewUpdate()}}),s&&(this.anchor=s),this.roundPixels=h??!1,void 0!==o&&(this.width=o),void 0!==a&&(this.height=a)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=null===t,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){t||(t={}),this._style?.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){"object"==typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,this.bounds.width),void 0!==e&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,r=this.bounds.height,n=-e*this.anchor.x;let i=0;return t.x>=n&&t.x<=n+e&&(i=-r*this.anchor.y,t.y>=i&&t.y<=i+r)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,("boolean"==typeof t?t:t?.style)&&this._style.destroy(t),this._style=null,this._text=null}}function oi(t,e){let r=t[0]??{};return("string"==typeof r||t[1])&&((0,K.t6)(K.lj,`use new ${e}({ text: "hi!", style }) instead`),r={text:r,style:t[1]}),r}var ai=i(4016),hi=i(8291);class li extends si{constructor(...t){super(oi(t,"Text"),hi.x),this.renderPipeId="text"}updateBounds(){const t=this._bounds,e=this._anchor,r=ai.P.measureText(this._text,this._style),{width:n,height:i}=r;t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*i,t.maxY=t.minY+i}}class ui extends qn{resolveQueueItem(t,e){return t instanceof $.mc?this.resolveContainerQueueItem(t,e):t instanceof Ce.v||t instanceof c.g?e.push(t.source):t instanceof Vt.T&&e.push(t),null}resolveContainerQueueItem(t,e){t instanceof An.k||t instanceof ii||t instanceof ti?e.push(t.texture.source):t instanceof li?e.push(t):t instanceof $n.A?e.push(t.context):t instanceof ei&&t.textures.forEach((t=>{t.source?e.push(t.source):e.push(t.texture.source)}))}resolveGraphicsContextQueueItem(t){this.renderer.graphicsContext.getContextRenderData(t);const{instructions:e}=t;for(const t of e){if("texture"===t.action){const{image:e}=t.data;return e.source}if("fill"===t.action){const{texture:e}=t.data.style;return e.source}}return null}}class ci extends si{constructor(...t){var e;const r=oi(t,"BitmapText");r.style??(r.style=r.style||{}),(e=r.style).fill??(e.fill=16777215),super(r,hi.x),this.renderPipeId="bitmapText"}updateBounds(){const t=this._bounds,e=this._anchor,r=at.c.measureText(this.text,this._style),n=r.scale,i=r.offsetY*n;let s=r.width*n,o=r.height*n;const a=this._style._stroke;a&&(s+=a.width,o+=a.width),t.minX=-e._x*s,t.maxX=t.minX+s,t.minY=-e._y*(o+i),t.maxY=t.minY+o}set resolution(t){null!==t&&(0,mt.R)("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}var di=i(7676),pi=i(2073);class fi extends si{constructor(...t){super(oi(t,"HtmlText"),di.I),this.renderPipeId="htmlText"}updateBounds(){const t=this._bounds,e=this._anchor,r=(0,pi.r)(this.text,this._style),{width:n,height:i}=r;t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*i,t.maxY=t.minY+i}}class mi extends ui{uploadQueueItem(t){t instanceof Ce.v?this.uploadTextureSource(t):t instanceof li?this.uploadText(t):t instanceof fi?this.uploadHTMLText(t):t instanceof ci?this.uploadBitmapText(t):t instanceof Vt.T&&this.uploadGraphicsContext(t)}uploadTextureSource(t){this.renderer.texture.initSource(t)}uploadText(t){this.renderer.renderPipes.text.initGpuText(t)}uploadBitmapText(t){this.renderer.renderPipes.bitmapText.initGpuText(t)}uploadHTMLText(t){this.renderer.renderPipes.htmlText.initGpuText(t)}uploadGraphicsContext(t){this.renderer.graphicsContext.getContextRenderData(t);const{instructions:e}=t;for(const t of e)if("texture"===t.action){const{image:e}=t.data;this.uploadTextureSource(e.source)}else if("fill"===t.action){const{texture:e}=t.data.style;this.uploadTextureSource(e.source)}return null}}class gi extends mi{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}gi.extension={type:[e.Ag.WebGLSystem,e.Ag.WebGPUSystem],name:"prepare"};var _i=i(2439),bi=i(6512),xi=i(9271);function vi(t){const e=[];let r=0;for(let n=0;n<t;n++)e[r]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:r,visibility:GPUShaderStage.FRAGMENT},r++,e[r]={sampler:{type:"filtering"},binding:r,visibility:GPUShaderStage.FRAGMENT},r++;return e}function yi(t){const e={};let r=0;for(let n=0;n<t;n++)e[`textureSource${n+1}`]=r++,e[`textureSampler${n+1}`]=r++;return e}var Ci=i(341),Ti=i(6915),Si=i(1936),wi=i(780),Ai=i(1617),Mi=i(5217),Ei=i(6987),Li=i(9269),Ri=i(8587),Pi=i(5188),Bi=i(7879),Oi=i(931),Ii=i(7962),Di=i(2141);function Fi(t){const e=t.split(/([\n{}])/g).map((t=>t.trim())).filter((t=>t.length));let r="";return e.map((t=>{let e=r+t;return"{"===t?r+="    ":"}"===t&&(r=r.substr(0,r.length-4),e=r+t),e})).join("\n")}var Gi=i(2677),ki=i(3589),Ui=i(4459),Ni=i(4e3),Hi=i(6632),zi=i(2067),Xi=i(6665),Vi=i(3391),Wi=i(911),Yi=i(7923),ji=i(8263),qi=i(2187),$i=i(7790),Zi=i(474),Ki=i(5473);class Qi{constructor(t){this.priority=0,this.pipe="scissorMask",this.mask=t,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(t,e){(0,Zi.d)(this.mask,t,e)}addLocalBounds(t,e){(0,Ki.U)(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}var Ji=i(7687),ts=i(2139),es=i(9202),rs=i(5902),ns=i(2277),is=i(1257),ss=i(8397),os=i(5313),as=i(643),hs=i(8377),ls=i(8013),us=i(4220),cs=i(6550),ds=i(48),ps=i(7816),fs=i(1731),ms=i(331),gs=i(4998),_s=i(6040),bs=i(4905),xs=i(2915),vs=i(7361);function ys(t){return`\n        out vec4 finalColor;\n    ${t=t.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in")}\n    `}var Cs=i(7031),Ts=i(8535),Ss=i(7084),ws=i(3258),As=i(1180),Ms=i(7489),Es=i(3804),Ls=i(7217),Rs=i(4289),Ps=i(4231);const Bs={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Os(t){return Bs[t]}var Is=i(1145),Ds=i(6735),Fs=i(2496),Gs=i(2395),ks=i(4907),Us=i(8528),Ns=i(7718),Hs=i(3412),zs=i(8696),Xs=i(2712),Vs=i(5442),Ws=i(5277),Ys=i(8891),js=i(2669),qs=i(7270),$s=i(1757),Zs=i(5163),Ks=i(8018),Qs=i(7061),Js=i(5359),to=i(5569),eo=i(8390),ro=i(9454),no=i(5539),io=i(4281);function so(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const e=t[r+3];if(0!==e){const n=255.001/e;t[r]=t[r]*n+.5,t[r+1]=t[r+1]*n+.5,t[r+2]=t[r+2]*n+.5}}}var oo=i(4794),ao=i(8090),ho=i(2021),lo=i(949),uo=i(1132);function co(t,e){const r=t.descriptor.size,n=e.gpu.device,i=new lo.h({data:new Float32Array(24e5),usage:uo.S.MAP_READ|uo.S.COPY_DST}),s=e.buffer.createGPUBuffer(i),o=n.createCommandEncoder();o.copyBufferToBuffer(e.buffer.getGPUBuffer(t),0,s,0,r),n.queue.submit([o.finish()]),s.mapAsync(GPUMapMode.READ,0,r).then((()=>{s.getMappedRange(0,r),s.unmap()}))}var po=i(3862),fo=i(2193),mo=i(7004),go=i(632),_o=i(3652),bo=i(3644),xo=i(7185),vo=i(3163),yo=i(7868),Co=i(7634),To=i(4541),So=i(2593),wo=i(3513),Ao=i(2561),Mo=i(3397),Eo=i(7995),Lo=i(3015),Ro=i(5788),Po=i(1579),Bo=i(5230),Oo=i(1088),Io=i(1422),Do=i(3627),Fo=i(933),Go=i(1172),ko=i(561),Uo=i(9291),No=i(8338),Ho=i(2946),zo=i(1416),Xo=i(3350),Vo=i(2196),Wo=i(7978),Yo=i(360),jo=i(581),qo=i(6736),$o=i(4736),Zo=i(1709);const Ko={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},Qo=new Proxy(Ko,{get:(t,e)=>((0,K.t6)(K.lj,`DRAW_MODES.${e} is deprecated, use '${Ko[e]}' instead`),t[e])});var Jo=i(3759),ta=i(7751),ea=i(8306),ra=i(7262),na=i(9888),ia=i(848),sa=i(2428),oa=i(6071),aa=i(279),ha=i(3032);const la=new st.M(0,0,1,1);function ua(t,e,r){r||(r=la);const n=e.pixelWidth,i=e.pixelHeight;return t.x=r.x*n|0,t.y=r.y*i|0,t.width=r.width*n|0,t.height=r.height*i|0,t}var ca=i(5814),da=i(8985),pa=i(8475),fa=i(1867),ma=i(7047),ga=i(6423),_a=i(8726),ba=i(1266),xa=i(8166),va=i(435),ya=i(1957),Ca=i(8639),Ta=i(511),Sa=i(7729),wa=i(7608),Aa=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Aa||{}),Ma=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))(Ma||{});const Ea=new Proxy(Ma,{get:(t,e)=>((0,K.t6)(K.lj,`DRAW_MODES.${e} is deprecated, use '${Ma[e]}' instead`),t[e])});var La=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(La||{});const Ra=new Proxy(La,{get:(t,e)=>((0,K.t6)(K.lj,`DRAW_MODES.${e} is deprecated, use '${La[e]}' instead`),t[e])});var Pa=i(3871),Ba=i(4167),Oa=i(4195),Ia=i(4884),Da=i(3818),Fa=i(1196),Ga=i(218);class ka{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,i=e.height;if(r){const e=t.width/2/n,s=t.height/2/i,o=t.x/n+e,a=t.y/i+s;r=In.E.add(r,In.E.NW),this.x0=o+e*In.E.uX(r),this.y0=a+s*In.E.uY(r),r=In.E.add(r,2),this.x1=o+e*In.E.uX(r),this.y1=a+s*In.E.uY(r),r=In.E.add(r,2),this.x2=o+e*In.E.uX(r),this.y2=a+s*In.E.uY(r),r=In.E.add(r,2),this.x3=o+e*In.E.uX(r),this.y3=a+s*In.E.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}let Ua=0;function Na(){return Ua++}var Ha=i(8725),za=i(6557),Xa=i(7952);function Va(t){const e=t.toString(),r=e.indexOf("{"),n=e.lastIndexOf("}");if(-1===r||-1===n)throw new Error("getFunctionBody: No body found in function definition");return e.slice(r+1,n).trim()}var Wa=i(548),Ya=i(9415),ja=i(3730),qa=i(4120);function $a(t,e){return(0,K.t6)("8.7.0","Use container.getFastGlobalBounds() instead"),t.getFastGlobalBounds(!0,e)}var Za=i(7269),Ka=i(5462),Qa=i(2208),Ja=i(8636),th=i(2094),eh=i(6190),rh=i(7219),nh=i(3358),ih=i(3629),sh=i(198),oh=i(37),ah=i(4116),hh=i(5713),lh=i(1638),uh=i(594);class ch extends Qn.l{constructor(t){"function"==typeof t&&(t={render:t});const{render:e,...r}=t;super({label:"RenderContainer",...r}),this.renderPipeId="customRender",this.batched=!1,e&&(this.render=e),this.containsPoint=t.containsPoint??(()=>!1),this.addBounds=t.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(t){}}var dh=i(3284),ph=i(1160),fh=i(779),mh=i(6216),gh=i(1761),_h=i(9320);function bh(t,e,r){(0,K.t6)("8.7.0","Please use container.collectRenderables instead.");const n=r.renderPipes?r:r.batch.renderer;return t.collectRenderables(e,n,null)}var xh=i(2698),vh=i(433);function yh(t,e,r){const n=t>>16&255,i=t>>8&255,s=255&t;return(n+((e>>16&255)-n)*r<<16)+(i+((e>>8&255)-i)*r<<8)+(s+((255&e)-s)*r)}var Ch=i(753),Th=i(4676);function Sh(t,e){const r=e._scale,n=e._pivot,i=e._position,s=r._x,o=r._y,a=n._x,h=n._y;t.a=e._cx*s,t.b=e._sx*s,t.c=e._cy*o,t.d=e._sy*o,t.tx=i._x-(a*t.a+h*t.c),t.ty=i._y-(a*t.b+h*t.d)}var wh=i(6584);function Ah(t,e,r){const n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,h=t.ty,l=e.a,u=e.b,c=e.c,d=e.d;r.a=n*l+i*c,r.b=n*u+i*d,r.c=s*l+o*c,r.d=s*u+o*d,r.tx=a*l+h*c+e.tx,r.ty=a*u+h*d+e.ty}var Mh=i(8386),Eh=i(7326),Lh=i(2760),Rh=i(7858),Ph=i(6954),Bh=i(593),Oh=i(7986),Ih=i(4026),Dh=i(9513),Fh=i(269),Gh=i(382),kh=i(4724),Uh=i(5236),Nh=i(2304),Hh=i(2765),zh=i(6422),Xh=i(4928),Vh=i(7276),Wh=i(2806),Yh=i(378),jh=i(9260),qh=i(7571),$h=i(6466),Zh=i(1633),Kh=i(110),Qh=i(8837),Jh=i(6668);const tl={rectangle:Hh.a,polygon:Nh.h,triangle:zh.b,circle:Gh.RH,ellipse:Gh.RH,roundedRectangle:Gh.RH};function el(t){t instanceof qh.n&&(t={path:t,textureMatrix:null,out:null});const e=[],r=[],n=[],i=t.path.shapePath,s=t.textureMatrix;i.shapePrimitives.forEach((({shape:t,transform:i})=>{const o=n.length,a=e.length/2,h=[],l=tl[t.type];l.build(t,h),i&&(0,na.s)(h,i),l.triangulate(h,e,2,a,n,o);const u=r.length/2;s?(i&&s.append(i.clone().invert()),(0,Jo.X)(e,2,a,r,u,2,e.length/2-a,s)):(0,Jo.D)(r,u,2,e.length/2-a)}));const o=t.out;return o?(o.positions=new Float32Array(e),o.uvs=new Float32Array(r),o.indices=new Uint32Array(n),o):new Jn.u({positions:new Float32Array(e),uvs:new Float32Array(r),indices:new Uint32Array(n)})}var rl=i(990),nl=i(4549),il=i(310);const sl=class t extends $.mc{constructor(e={}){e={...t.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...t){for(let e=0;e<t.length;e++){const r=t[e];if(r.parentRenderLayer){if(r.parentRenderLayer===this)continue;r.parentRenderLayer.detach(r)}this.renderLayerChildren.push(r),r.parentRenderLayer=this;const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)}return t[0]}detach(...t){for(let e=0;e<t.length;e++){const r=t[e],n=this.renderLayerChildren.indexOf(r);-1!==n&&this.renderLayerChildren.splice(n,1),r.parentRenderLayer=null;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)}return t[0]}detachAll(){const t=this.renderLayerChildren;for(let e=0;e<t.length;e++)t[e].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(t,e,r){const n=this.renderLayerChildren,i=n.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let r=0;r<i;r++)n[r].parent||(0,mt.R)("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",n[r]),n[r].collectRenderables(t,e,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(t,e,r){if(!t)return;const n=this.renderLayerChildren;for(let t=0;t<n.length;t++)n[t]._getGlobalBoundsRecursive(!0,e,this)}};sl.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex};let ol=sl;const al=ol;var hl=i(3266);function ll(t,e,r,n){const i=r.buffers[0],s=i.data,{verticesX:o,verticesY:a}=r,h=t/(o-1),l=e/(a-1);let u=0;const c=n[0],d=n[1],p=n[2],f=n[3],m=n[4],g=n[5],_=n[6],b=n[7],x=n[8];for(let t=0;t<s.length;t+=2){const e=u%o*h,r=(u/o|0)*l,n=c*e+d*r+p,i=f*e+m*r+g,a=_*e+b*r+x;s[t]=n/a,s[t+1]=i/a,u++}i.update()}function ul(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8];return t[0]=o*u-a*l,t[1]=i*l-n*u,t[2]=n*a-i*o,t[3]=a*h-s*u,t[4]=r*u-i*h,t[5]=i*s-r*a,t[6]=s*l-o*h,t[7]=n*h-r*l,t[8]=r*o-n*s,t}function cl(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],u=e[7],c=e[8],d=r[0],p=r[1],f=r[2],m=r[3],g=r[4],_=r[5],b=r[6],x=r[7],v=r[8];return t[0]=d*n+p*o+f*l,t[1]=d*i+p*a+f*u,t[2]=d*s+p*h+f*c,t[3]=m*n+g*o+_*l,t[4]=m*i+g*a+_*u,t[5]=m*s+g*h+_*c,t[6]=b*n+x*o+v*l,t[7]=b*i+x*a+v*u,t[8]=b*s+x*h+v*c,t}const dl=[0,0,0,0,0,0,0,0,0],pl=[0,0,0],fl=[0,0,0];function ml(t,e,r,n,i,s,o,a,h){const l=dl;l[0]=e,l[1]=n,l[2]=s,l[3]=r,l[4]=i,l[5]=o,l[6]=1,l[7]=1,l[8]=1;const u=ul(t,l);fl[0]=a,fl[1]=h,fl[2]=1;const c=function(t,e,r){const n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n+e[1]*i+e[2]*s,t[1]=e[3]*n+e[4]*i+e[5]*s,t[2]=e[6]*n+e[7]*i+e[8]*s,t}(pl,u,fl),d=t;return t[0]=c[0],t[1]=0,t[2]=0,t[3]=0,t[4]=c[1],t[5]=0,t[6]=0,t[7]=0,t[8]=c[2],cl(t,d,l)}const gl=[0,0,0,0,0,0,0,0,0],_l=[0,0,0,0,0,0,0,0,0];function bl(t,e,r,n,i,s,o,a,h,l,u,c,d,p,f,m,g){const _=ml(gl,e,r,s,o,l,u,p,f),b=ml(_l,n,i,a,h,c,d,m,g);return cl(t,ul(_,_),b)}class xl extends hl.b{constructor(t){super(t),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:e,height:r}=t;this.corners=[0,0,e,0,e,r,0,r]}setCorners(t,e,r,n,i,s,o,a){const h=this.corners;h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=s,h[6]=o,h[7]=a,this.updateProjection()}updateProjection(){const{width:t,height:e}=this,r=this.corners;ll(t,e,this,bl(this._projectionMatrix,0,0,r[0],r[1],t,0,r[2],r[3],t,e,r[4],r[5],0,e,r[6],r[7]))}}const vl=class t extends ti{constructor(e){e={...t.defaultOptions,...e};const{texture:r,verticesX:n,verticesY:i,...s}=e,o=new xl((0,xh.S)({width:r.width,height:r.height,verticesX:n,verticesY:i}));super((0,xh.S)({...s,geometry:o})),this._texture=r,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){const t=this.geometry;if(!t)return;const{width:e,height:r}=this.texture;t.width===e&&t.height===r||(t.width=e,t.height=r,t.updateProjection())}set texture(t){this._texture!==t&&(super.texture=t,this.textureUpdated())}get texture(){return this._texture}setCorners(t,e,r,n,i,s,o,a){this.geometry.setCorners(t,e,r,n,i,s,o,a)}};vl.defaultOptions={texture:c.g.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let yl=vl;class Cl extends ti{constructor(t){const{texture:e,verticesX:r,verticesY:n,...i}=t,s=new hl.b((0,xh.S)({width:e.width,height:e.height,verticesX:r,verticesY:n}));super((0,xh.S)({...i,geometry:s,texture:e})),this.texture=e,this.autoResize=!0}textureUpdated(){const t=this.geometry,{width:e,height:r}=this.texture;!this.autoResize||t.width===e&&t.height===r||(t.width=e,t.height=r,t.build({}))}set texture(t){this._texture?.off("update",this.textureUpdated,this),super.texture=t,t.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(t){this.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const Tl=class t extends Jn.u{constructor(e){const{width:r,points:n,textureScale:i}={...t.defaultOptions,...e};super({positions:new Float32Array(4*n.length),uvs:new Float32Array(4*n.length),indices:new Uint32Array(6*(n.length-1))}),this.points=n,this._width=r,this.textureScale=i,this._build()}get width(){return this._width}_build(){const t=this.points;if(!t)return;const e=this.getBuffer("aPosition"),r=this.getBuffer("aUV"),n=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));const i=r.data,s=n.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;let o=0,a=t[0];const h=this._width*this.textureScale,l=t.length;for(let e=0;e<l;e++){const r=4*e;if(this.textureScale>0){const r=a.x-t[e].x,n=a.y-t[e].y,i=Math.sqrt(r*r+n*n);a=t[e],o+=i/h}else o=e/(l-1);i[r]=o,i[r+1]=0,i[r+2]=o,i[r+3]=1}let u=0;for(let t=0;t<l-1;t++){const e=2*t;s[u++]=e,s[u++]=e+1,s[u++]=e+2,s[u++]=e+2,s[u++]=e+1,s[u++]=e+3}r.update(),n.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e,r=t[0],n=0,i=0;const s=this.buffers[0].data,o=t.length,a=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<o;h++){const l=t[h],u=4*h;e=h<t.length-1?t[h+1]:l,i=-(e.x-r.x),n=e.y-r.y;let c=10*(1-h/(o-1));c>1&&(c=1);const d=Math.sqrt(n*n+i*i);d<1e-6?(n=0,i=0):(n/=d,i/=d,n*=a,i*=a),s[u]=l.x+n,s[u+1]=l.y+i,s[u+2]=l.x-n,s[u+3]=l.y-i,r=l}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};Tl.defaultOptions={width:200,points:[],textureScale:0};let Sl=Tl;const wl=class t extends ti{constructor(e){const{texture:r,points:n,textureScale:i,...s}={...t.defaultOptions,...e},o=new Sl((0,xh.S)({width:r.height,points:n,textureScale:i}));i>0&&(r.source.style.addressMode="repeat"),super((0,xh.S)({...s,texture:r,geometry:o})),this.autoUpdate=!0,this.onRender=this._render}_render(){const t=this.geometry;(this.autoUpdate||t._width!==this.texture.height)&&(t._width=this.texture.height,t.update())}};wl.defaultOptions={textureScale:0};let Al=wl;class Ml extends ti{constructor(t){const{texture:e,vertices:r,uvs:n,indices:i,topology:s,...o}=t,a=new Jn.u((0,xh.S)({positions:r,uvs:n,indices:i,topology:s}));super((0,xh.S)({...o,texture:e,geometry:a})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(t){this.geometry.getBuffer("aPosition").data=t}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}var El=i(7586),Ll=i(2448),Rl=i(8734);function Pl(t,e){const{width:r,height:n}=t.frame;return e.scale(1/r,1/n),e}var Bl=i(1892),Ol=i(9909),Il=i(9473),Dl=i(6756),Fl=i(4325);const Gl=class t{constructor(e){if(e instanceof c.g)this.texture=e,(0,mh.s)(this,t.defaultOptions,{});else{const r={...t.defaultOptions,...e};(0,mh.s)(this,r,{})}}get alpha(){return this._alpha}set alpha(t){this._alpha=Math.min(Math.max(t,0),1),this._updateColor()}get tint(){return(0,sh.D)(this._tint)}set tint(t){this._tint="number"==typeof t?t:ve.Q.shared.setValue(t??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+(255*this._alpha<<24)}};Gl.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let kl=Gl;var Ul=i(5864);const Nl={vertex:{attributeName:"aVertex",format:"float32x2",code:"\n            const texture = p.texture;\n            const sx = p.scaleX;\n            const sy = p.scaleY;\n            const ax = p.anchorX;\n            const ay = p.anchorY;\n            const trim = texture.trim;\n            const orig = texture.orig;\n\n            if (trim)\n            {\n                w1 = trim.x - (ax * orig.width);\n                w0 = w1 + trim.width;\n\n                h1 = trim.y - (ay * orig.height);\n                h0 = h1 + trim.height;\n            }\n            else\n            {\n                w1 = -ax * (orig.width);\n                w0 = w1 + orig.width;\n\n                h1 = -ay * (orig.height);\n                h0 = h1 + orig.height;\n            }\n\n            f32v[offset] = w1 * sx;\n            f32v[offset + 1] = h1 * sy;\n\n            f32v[offset + stride] = w0 * sx;\n            f32v[offset + stride + 1] = h1 * sy;\n\n            f32v[offset + (stride * 2)] = w0 * sx;\n            f32v[offset + (stride * 2) + 1] = h0 * sy;\n\n            f32v[offset + (stride * 3)] = w1 * sx;\n            f32v[offset + (stride * 3) + 1] = h0 * sy;\n        ",dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:"\n            var x = p.x;\n            var y = p.y;\n\n            f32v[offset] = x;\n            f32v[offset + 1] = y;\n\n            f32v[offset + stride] = x;\n            f32v[offset + stride + 1] = y;\n\n            f32v[offset + (stride * 2)] = x;\n            f32v[offset + (stride * 2) + 1] = y;\n\n            f32v[offset + (stride * 3)] = x;\n            f32v[offset + (stride * 3) + 1] = y;\n        ",dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:"\n            var rotation = p.rotation;\n\n            f32v[offset] = rotation;\n            f32v[offset + stride] = rotation;\n            f32v[offset + (stride * 2)] = rotation;\n            f32v[offset + (stride * 3)] = rotation;\n        ",dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:"\n            var uvs = p.texture.uvs;\n\n            f32v[offset] = uvs.x0;\n            f32v[offset + 1] = uvs.y0;\n\n            f32v[offset + stride] = uvs.x1;\n            f32v[offset + stride + 1] = uvs.y1;\n\n            f32v[offset + (stride * 2)] = uvs.x2;\n            f32v[offset + (stride * 2) + 1] = uvs.y2;\n\n            f32v[offset + (stride * 3)] = uvs.x3;\n            f32v[offset + (stride * 3) + 1] = uvs.y3;\n        ",dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:"\n            const c = p.color;\n\n            u32v[offset] = c;\n            u32v[offset + stride] = c;\n            u32v[offset + (stride * 2)] = c;\n            u32v[offset + (stride * 3)] = c;\n        ",dynamic:!1}},Hl=new Er.c(0,0,0,0),zl=class t extends Qn.l{constructor(e={}){e={...t.defaultOptions,...e,dynamicProperties:{...t.defaultOptions.dynamicProperties,...e?.dynamicProperties}};const{dynamicProperties:r,shader:n,roundPixels:i,texture:s,particles:o,...a}=e;super({label:"ParticleContainer",...a}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=s||null,this.shader=n,this._properties={};for(const t in Nl){const e=Nl[t],n=r[t];this._properties[t]={...e,dynamic:n}}this.allowChildren=!0,this.roundPixels=i??!1,this.particleChildren=o??[]}addParticle(...t){for(let e=0;e<t.length;e++)this.particleChildren.push(t[e]);return this.onViewUpdate(),t[0]}removeParticle(...t){let e=!1;for(let r=0;r<t.length;r++){const n=this.particleChildren.indexOf(t[r]);n>-1&&(this.particleChildren.splice(n,1),e=!0)}return e&&this.onViewUpdate(),t[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Hl}updateBounds(){}destroy(t=!1){if(super.destroy(t),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource,r=this.texture??this.particleChildren[0]?.texture;r&&r.destroy(e)}this.texture=null,this.shader?.destroy()}removeParticles(t,e){const r=this.particleChildren.splice(t,e);return this.onViewUpdate(),r}removeParticleAt(t){const e=this.particleChildren.splice(t,1);return this.onViewUpdate(),e[0]}addParticleAt(t,e){return this.particleChildren.splice(e,0,t),this.onViewUpdate(),t}addChild(...t){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...t){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(t,e){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(t){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(t){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(t,e){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(t){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(t,e){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(t,e){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...t){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(t,e){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};zl.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let Xl=zl;var Vl=i(6447),Wl=i(1855),Yl=i(434),jl=i(8850),ql=i(7523);const $l=class t extends Qn.l{constructor(e){e instanceof c.g&&(e={texture:e});const{width:r,height:n,leftWidth:i,rightWidth:s,topHeight:o,bottomHeight:a,texture:h,roundPixels:l,...u}=e;super({label:"NineSliceSprite",...u}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=i??h?.defaultBorders?.left??ql.P.defaultOptions.leftWidth,this._topHeight=o??h?.defaultBorders?.top??ql.P.defaultOptions.topHeight,this._rightWidth=s??h?.defaultBorders?.right??ql.P.defaultOptions.rightWidth,this._bottomHeight=a??h?.defaultBorders?.bottom??ql.P.defaultOptions.bottomHeight,this.bounds.maxX=this._width=r??h.width??ql.P.defaultOptions.width,this.bounds.maxY=this._height=n??h.height??ql.P.defaultOptions.height,this.allowChildren=!1,this.texture=h??t.defaultOptions.texture,this.roundPixels=l??!1}updateBounds(){}get width(){return this._width}set width(t){this.bounds.maxX=this._width=t,this.onViewUpdate()}get height(){return this._height}set height(t){this.bounds.maxY=this._height=t,this.onViewUpdate()}setSize(t,e){"object"==typeof t&&(e=t.height??t.width,t=t.width),this.bounds.maxX=this._width=t,this.bounds.maxY=this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this.onViewUpdate()}get texture(){return this._texture}set texture(t){t||(t=c.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(t){if(super.destroy(t),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._texture.destroy(e)}this._texture=null}};$l.defaultOptions={texture:c.g.EMPTY};let Zl=$l;class Kl extends Zl{constructor(...t){let e=t[0];e instanceof c.g&&((0,K.t6)(K.lj,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),e={texture:e,leftWidth:t[1],topHeight:t[2],rightWidth:t[3],bottomHeight:t[4]}),(0,K.t6)(K.lj,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(e)}}var Ql=i(6880),Jl=i(9315),tu=i(3558),eu=i(5773),ru=i(4852),nu=i(4592),iu=i(9933),su=i(5049),ou=i(8422),au=i(3136),hu=i(661),lu=i(678),uu=i(2763),cu=i(6653),du=i(6829),pu=i(5337),fu=i(7602),mu=i(6783),gu=i(4117),_u=i(7382),bu=i(6347),xu=i(6555),vu=i(9995),yu=i(7988),Cu=i(2157),Tu=i(5369),Su=i(7278),wu=i(1242),Au=i(3548),Mu=i(7018),Eu=i(8747),Lu=i(9750);function Ru(t,e){return e instanceof hi.x||e instanceof di.I?e:"html"===t?new di.I(e):new hi.x(e)}var Pu=i(8011),Bu=i(2558),Ou=i(2289),Iu=i(397),Du=i(3059),Fu=i(2175),Gu=i(7218),ku=i(4897),Uu=i(4577),Nu=i(1222),Hu=i(2571),zu=i(4486),Xu=i(1448),Vu=i(9903),Wu=i(133),Yu=i(2048),ju=i(1460);async function qu(t,e,r=200){const n=await e.extract.base64(t);await e.encoder.commandFinished,["font-size: 1px;",`padding: ${r}px 300px;`,`background: url(${n}) no-repeat;`,"background-size: contain;"].join(" ")}const $u=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let Zu=0;function Ku(t,e=0,r={color:"#000000"}){t.renderGroup&&(r.color=$u[Zu++]);let n="";for(let t=0;t<e;t++)n+="    ";let i=t.label;!i&&t instanceof An.k&&(i=`sprite:${t.texture.label}`);let s=`%c ${n}|- ${i} (worldX:${t.worldTransform.tx}, relativeRenderX:${t.relativeGroupTransform.tx}, renderX:${t.groupTransform.tx}, localX:${t.x})`;t.renderGroup&&(s+=" (RenderGroup)"),t.filters&&(s+="(*filters)"),e++;for(let n=0;n<t.children.length;n++)Ku(t.children[n],e,{...r})}function Qu(t,e=0,r={index:0,color:"#000000"}){let n="";for(let t=0;t<e;t++)n+="    ";r.index,t.root.label,t.worldTransform.tx,e++;for(let n=0;n<t.renderGroupChildren.length;n++)Qu(t.renderGroupChildren[n],e,{...r,index:n})}var Ju=i(1549),tc=i(8425),ec=i(8218),rc=i(7081),nc=i(6570);e.XO.add(r,n);class ic{constructor(t){this.container=new $.mc,this.textObject=new li({text:t.text,style:Object.assign({fontFamily:"sans-serif",fontSize:140,fill:"#ffffff",fontWeight:"normal",align:"center"},t.styles)}),this.textObject.anchor.set(.5),this.container.addChild(this.textObject)}setText(t){this.textObject.text=t}}const sc=1100,oc=1900,ac="#000000",hc="#ffffff",lc="clickColor",uc="clickCard",cc="tapSegment",dc="changeProgressMode",pc="clickBackButton",fc="clickHintButton",mc="clickZoomButton",gc="adEnded",_c="showNotification";class bc{constructor(){this.container=new $.mc,this.container.label="BootScene",this.text=new ic({text:"0%",styles:{fontSize:70,fill:"#464646"}}),this.text.container.alpha=.9,this.text.container.position.set(550,950),this.container.addChild(this.text.container)}update(t){var e;let r=Math.round(100*t);r>=99&&(r=99),null===(e=this.text)||void 0===e||e.setText(`${r}%`)}resize(t){this.container.scale.set(t.scale),this.container.position.set(t.x,t.y)}}let xc;function vc(){return xc}class yc{constructor(t,e){this.init(t,e)}init(t,e){this.destination=t,this.source=e||t}connect(t){this.source?.connect(t)}disconnect(){this.source?.disconnect()}destroy(){this.disconnect(),this.destination=null,this.source=null}}class Cc{static setParamValue(t,e){if(t.setValueAtTime){const r=vc().context;t.setValueAtTime(e,r.audioContext.currentTime)}else t.value=e;return e}}const Tc=class extends yc{constructor(t=0,e=0,r=0,n=0,i=0,s=0,o=0,a=0,h=0,l=0){let u=[];const c=[{f:Tc.F32,type:"lowshelf",gain:t},{f:Tc.F64,type:"peaking",gain:e},{f:Tc.F125,type:"peaking",gain:r},{f:Tc.F250,type:"peaking",gain:n},{f:Tc.F500,type:"peaking",gain:i},{f:Tc.F1K,type:"peaking",gain:s},{f:Tc.F2K,type:"peaking",gain:o},{f:Tc.F4K,type:"peaking",gain:a},{f:Tc.F8K,type:"peaking",gain:h},{f:Tc.F16K,type:"highshelf",gain:l}];vc().useLegacy||(u=c.map((t=>{const e=vc().context.audioContext.createBiquadFilter();return e.type=t.type,Cc.setParamValue(e.Q,1),e.frequency.value=t.f,Cc.setParamValue(e.gain,t.gain),e}))),super(u[0],u[u.length-1]),this.bands=u,this.bandsMap={};for(let t=0;t<this.bands.length;t++){const e=this.bands[t];t>0&&this.bands[t-1].connect(e),this.bandsMap[e.frequency.value]=e}}setGain(t,e=0){if(!this.bandsMap[t])throw new Error(`No band found for frequency ${t}`);Cc.setParamValue(this.bandsMap[t].gain,e)}getGain(t){if(!this.bandsMap[t])throw new Error(`No band found for frequency ${t}`);return this.bandsMap[t].gain.value}set f32(t){this.setGain(Tc.F32,t)}get f32(){return this.getGain(Tc.F32)}set f64(t){this.setGain(Tc.F64,t)}get f64(){return this.getGain(Tc.F64)}set f125(t){this.setGain(Tc.F125,t)}get f125(){return this.getGain(Tc.F125)}set f250(t){this.setGain(Tc.F250,t)}get f250(){return this.getGain(Tc.F250)}set f500(t){this.setGain(Tc.F500,t)}get f500(){return this.getGain(Tc.F500)}set f1k(t){this.setGain(Tc.F1K,t)}get f1k(){return this.getGain(Tc.F1K)}set f2k(t){this.setGain(Tc.F2K,t)}get f2k(){return this.getGain(Tc.F2K)}set f4k(t){this.setGain(Tc.F4K,t)}get f4k(){return this.getGain(Tc.F4K)}set f8k(t){this.setGain(Tc.F8K,t)}get f8k(){return this.getGain(Tc.F8K)}set f16k(t){this.setGain(Tc.F16K,t)}get f16k(){return this.getGain(Tc.F16K)}reset(){this.bands.forEach((t=>{Cc.setParamValue(t.gain,0)}))}destroy(){this.bands.forEach((t=>{t.disconnect()})),this.bands=null,this.bandsMap=null}};let Sc=Tc;Sc.F32=32,Sc.F64=64,Sc.F125=125,Sc.F250=250,Sc.F500=500,Sc.F1K=1e3,Sc.F2K=2e3,Sc.F4K=4e3,Sc.F8K=8e3,Sc.F16K=16e3;class wc extends zu.A{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return null}set filters(t){}get audioContext(){return null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}let Ac=0;const Mc=class extends zu.A{constructor(t){super(),this.id=Ac++,this.init(t)}set(t,e){if(void 0===this[t])throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e}return this}get progress(){const{currentTime:t}=this._source;return t/this._duration}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(t){this._playing=!1,this._duration=t.source.duration;const e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get filters(){return null}set filters(t){}refresh(){const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const r=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),i=this._volume*(this._muted?0:1);this._source.volume=i*r*n,this._source.playbackRate=this._speed*t.speed*e.speed}refreshPaused(){const t=this._media.context,e=this._media.parent,r=this._paused||e.paused||t.paused;r!==this._pausedReal&&(this._pausedReal=r,r?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",r))}play(t){const{start:e,end:r,speed:n,loop:i,volume:s,muted:o}=t;this._speed=n,this._volume=s,this._loop=!!i,this._muted=o,this.refresh(),this.loop&&null!==r&&(this.loop=!1),this._start=e,this._end=r||this._duration,this._start=Math.max(0,this._start-Mc.PADDING),this._end=Math.min(this._end+Mc.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e/this._duration,this._duration),Yn.R.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){Yn.R.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){Yn.R.shared.remove(this._onUpdate,this),this.removeAllListeners();const t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let Ec=Mc;Ec.PADDING=.1;class Lc extends zu.A{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new Ec(this)}get isPlayable(){return!!this._source&&4===this._source.readyState}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(t){const e=this._source,r=this.parent;if(4===e.readyState){r.isLoaded=!0;const e=r.autoPlayStart();return void(t&&setTimeout((()=>{t(null,r,e)}),0))}if(!r.url)return void t(new Error("sound.url or sound.source must be set"));e.src=r.url;const n=()=>{o(),r.isLoaded=!0;const e=r.autoPlayStart();t&&t(null,r,e)},i=()=>{o(),t&&t(new Error("Sound loading has been aborted"))},s=()=>{o();const r=`Failed to load audio element (code: ${e.error.code})`;t&&t(new Error(r))},o=()=>{e.removeEventListener("canplaythrough",n),e.removeEventListener("load",n),e.removeEventListener("abort",i),e.removeEventListener("error",s)};e.addEventListener("canplaythrough",n,!1),e.addEventListener("load",n,!1),e.addEventListener("abort",i,!1),e.addEventListener("error",s,!1),e.load()}}class Rc{constructor(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const Pc=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],Bc=["audio/mpeg","audio/ogg"],Oc={};!function(t){const e={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},r=document.createElement("audio"),n={},i=/^no$/;Pc.forEach((t=>{const s=r.canPlayType(`audio/${t}`).replace(i,""),o=e[t]?r.canPlayType(e[t]).replace(i,""):"";n[t]=!!s||!!o})),Object.assign(Oc,n)}();let Ic=0;class Dc extends zu.A{constructor(t){super(),this.id=Ic++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,e){if(void 0===this[t])throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){this._filters&&(this._filters?.filter((t=>t)).forEach((t=>t.disconnect())),this._filters=null,this._source.connect(this._gain)),this._filters=t?.length?t.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const r=t.volume*(t.muted?0:1),n=e.volume*(e.muted?0:1),i=this._volume*(this._muted?0:1);Cc.setParamValue(this._gain.gain,i*n*r),Cc.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters()}applyFilters(){if(this._filters?.length){this._source.disconnect();let t=this._source;this._filters.forEach((e=>{t.connect(e.destination),t=e})),t.connect(this._gain)}}refreshPaused(){const t=this._media.context,e=this._media.parent,r=this._paused||e.paused||t.paused;r!==this._pausedReal&&(this._pausedReal=r,r?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",r))}play(t){const{start:e,end:r,speed:n,loop:i,volume:s,muted:o,filters:a}=t;this._paused=!1;const{source:h,gain:l}=this._media.nodes.cloneBufferSource();this._source=h,this._gain=l,this._speed=n,this._volume=s,this._loop=!!i,this._muted=o,this._filters=a,this.refresh();const u=this._source.buffer.duration;this._duration=u,this._end=r,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=r,this._source.loopStart=e,this._source.start(0,e)):r?this._source.start(0,e,r-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){Yn.R.shared.remove(this._updateListener,this),t&&Yn.R.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._filters?.forEach((t=>t.disconnect())),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(t=!1){if(this._source){const e=this._now(),r=e-this._lastUpdate;if(r>0||t){const t=this._source.playbackRate.value;this._elapsed+=r*t,this._lastUpdate=e;const n=this._duration;let i;if(this._source.loopStart){const t=this._source.loopEnd-this._source.loopStart;i=(this._source.loopStart+this._elapsed%t)/n}else i=this._elapsed%n/n;this._progress=i,this.emit("progress",this._progress,n)}}}init(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class Fc{constructor(t,e){this._output=e,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach((t=>{t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let e=null;t.forEach((t=>{null===e?this._input.connect(t.destination):e.connect(t.destination),e=t})),e.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const Gc=class extends Fc{constructor(t){const e=t.audioContext,r=e.createBufferSource(),n=e.createGain(),i=e.createAnalyser();r.connect(i),i.connect(n),n.connect(t.destination),super(i,n),this.context=t,this.bufferSource=r,this.gain=n,this.analyser=i}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(Gc.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,Cc.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;const r=this.context.audioContext.createGain();return e.connect(r),r.connect(this.destination),{source:e,gain:r}}get bufferSize(){return this.script.bufferSize}};let kc=Gc;kc.BUFFER_SIZE=0;class Uc{init(t){this.parent=t,this._nodes=new kc(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){}this._source=null,this.source=null}create(){return new Dc(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))}async _loadUrl(t){const e=this.parent.url,r=await H.e.get().fetch(e);this._decode(await r.arrayBuffer(),t)}_decode(t,e){const r=(t,r)=>{if(t)e&&e(t);else{this.parent.isLoaded=!0,this.buffer=r;const t=this.parent.autoPlayStart();e&&e(null,this.parent,t)}};t instanceof AudioBuffer?r(null,t):this.parent.context.decode(t,r)}}const Nc=class{static from(t){let e={};"string"==typeof t?e.url=t:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?e.source=t:Array.isArray(t)?e.url=t:e=t,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);const r=vc().useLegacy?new Lc:new Uc;return new Nc(r,e)}constructor(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);const r=e.complete;this._autoPlayOptions=r?{complete:r}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(t){const[e]=t.map((t=>({url:t,ext:it.A.extname(t).slice(1)}))).filter((({ext:t})=>Oc[t])).sort(((t,e)=>Pc.indexOf(t.ext)-Pc.indexOf(e.ext)));if(!e)throw new Error("No supported file type found");return e.url}get context(){return vc().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get filters(){return this.media.filters}set filters(t){this.media.filters=t}addSprites(t,e){if("object"==typeof t){const e={};for(const r in t)e[r]=this.addSprites(r,t[r]);return e}const r=new Rc(this,e);return this._sprites[t]=r,r}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(t){if(t){const e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(const t in this._sprites)this.removeSprites(t);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this}play(t,e){let r;if("string"==typeof t?r={sprite:t,loop:this.loop,complete:e}:"function"==typeof t?(r={},r.complete=t):r=t,r={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...r||{}},r.sprite){const t=r.sprite,e=this._sprites[t];r.start=e.start+(r.start||0),r.end=e.end,r.speed=e.speed||1,r.loop=e.loop||r.loop,delete r.sprite}if(r.offset&&(r.start=r.offset),!this.isLoaded)return this._preloadQueue?new Promise((t=>{this._preloadQueue.push((()=>{t(this.play(r))}))})):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=r,new Promise(((t,e)=>{this._preload(((n,i,s)=>{this._preloadQueue.forEach((t=>t())),this._preloadQueue=null,n?e(n):(r.loaded&&r.loaded(n,i,s),t(s))}))})));(this.singleInstance||r.singleInstance)&&this._removeInstances();const n=this._createInstance();return this._instances.push(n),this.isPlaying=!0,n.once("end",(()=>{r.complete&&r.complete(this),this._onComplete(n)})),n.once("stop",(()=>{this._onComplete(n)})),n.play(r),n}refresh(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refresh()}refreshPaused(){const t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refreshPaused()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}_preload(t){this.media.load(t)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t}_removeInstances(){for(let t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0}_onComplete(t){if(this._instances){const e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)}_createInstance(){if(Nc._pool.length>0){const t=Nc._pool.pop();return t.init(this.media),t}return this.media.create()}_poolInstance(t){t.destroy(),Nc._pool.indexOf(t)<0&&Nc._pool.push(t)}};let Hc=Nc;Hc._pool=[];class zc extends Fc{constructor(){const t=window,e=new zc.AudioContext,r=e.createDynamicsCompressor(),n=e.createAnalyser();n.connect(r),r.connect(e.destination),super(n,r),this.autoPause=!0,this._ctx=e,this._offlineCtx=new zc.OfflineAudioContext(1,2,t.OfflineAudioContext?Math.max(8e3,Math.min(96e3,e.sampleRate)):44100),this.compressor=r,this.analyser=n,this.events=new zu.A,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked="suspended"===e.state&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;const t=this._ctx.state;"suspended"!==t&&"interrupted"!==t&&this._locked||(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()}static get AudioContext(){const t=window;return t.AudioContext||t.webkitAudioContext||null}static get OfflineAudioContext(){const t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null}destroy(){super.destroy();const t=this._ctx;void 0!==t.close&&t.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(t,e){const r=t=>{e(new Error(t?.message||"Unable to decode file"))},n=this._offlineCtx.decodeAudioData(t,(t=>{e(null,t)}),r);n&&n.catch(r)}}const Xc=t=>{const e=t.src;let r=t?.alias?.[0];return r&&t.src!==r||(r=it.A.basename(e,it.A.extname(e))),r},Vc={extension:e.Ag.Asset,detection:{test:async()=>!0,add:async t=>[...t,...Pc.filter((t=>Oc[t]))],remove:async t=>t.filter((e=>t.includes(e)))},loader:{name:"sound",extension:{type:[e.Ag.LoadParser],priority:rt.T.High},test(t){const e=it.A.extname(t).slice(1);return!!Oc[e]||Bc.some((e=>t.startsWith(`data:${e}`)))},async load(t,e){const r=await new Promise(((r,n)=>Hc.from({...e.data,url:t,preload:!0,loaded(t,i){t?n(t):r(i),e.data?.loaded?.(t,i)}})));return vc().add(Xc(e),r),r},async unload(t,e){vc().remove(Xc(e))}}};e.XO.add(Vc);const Wc=function(t){return xc=t,t}(new class{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new zc),this._htmlAudioContext=new wc,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return null!==zc.AudioContext}add(t,e){if("object"==typeof t){const r={};for(const n in t){const i=this._getOptions(t[n],e);r[n]=this.add(n,i)}return r}if(e instanceof Hc)return this._sounds[t]=e,e;const r=this._getOptions(e),n=Hc.from(r);return this._sounds[t]=n,n}_getOptions(t,e){let r;return r="string"==typeof t||Array.isArray(t)?{url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?{source:t}:t,r={...r,...e||{}},r}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(const t in this._sounds)this._sounds[t].stop();return this}exists(t,e=!1){return!!this._sounds[t]}isPlaying(){for(const t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,e){return this.find(t).play(e)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,e){const r=this.find(t);return void 0!==e&&(r.volume=e),r.volume}speed(t,e){const r=this.find(t);return void 0!==e&&(r.speed=e),r.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}),Yc={segmentBg:"./images/segmentBg.png"},jc={ui:"./images/ui.json"},qc="button_click",$c={win:"./audio/win.mp3",full_color:"./audio/full_color.mp3",button_click:"./audio/button_click.mp3"},Zc=()=>{const t=window.innerWidth,e=window.innerHeight,r=t/e,n=r>1;let i,s,o;return r>.5789473684210527?(i=e/oc,s=t/2-550*i,o=0):(i=t/sc,s=0,o=e/2-950*i),{screenHeight:e,screenWidth:t,isLandscape:n,scale:i,x:s,y:o,scaleUI:n?.9*r:1/r*.9,cornerLT:{x:-(t/i-sc)/2,y:-(e/i-oc)/2},cornerRB:{x:sc+(t/i-sc)/2,y:oc+(e/i-oc)/2},ratio:r}},Kc={winButtonContinue:"Next",congratulations:"Congratulations!",ad:"Ad",chooseColorNotification:"Choose color",cancel:"Cancel",restartLevel:"Restart level"};function Qc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jc(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var td,ed,rd,nd,id,sd,od,ad,hd,ld,ud,cd,dd,pd,fd,md,gd,_d={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},bd={duration:.5,overwrite:!1,delay:0},xd=1e8,vd=1e-8,yd=2*Math.PI,Cd=yd/4,Td=0,Sd=Math.sqrt,wd=Math.cos,Ad=Math.sin,Md=function(t){return"string"==typeof t},Ed=function(t){return"function"==typeof t},Ld=function(t){return"number"==typeof t},Rd=function(t){return void 0===t},Pd=function(t){return"object"==typeof t},Bd=function(t){return!1!==t},Od=function(){return"undefined"!=typeof window},Id=function(t){return Ed(t)||Md(t)},Dd="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Fd=Array.isArray,Gd=/(?:-?\.?\d|\.)+/gi,kd=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ud=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Nd=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Hd=/[+-]=-?[.\d]+/,zd=/[^,'"\[\]\s]+/gi,Xd=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vd={},Wd={},Yd=function(t){return(Wd=vp(t,Vd))&&ym},jd=function(t,e){return!e&&void 0},qd=function(t,e){return t&&(Vd[t]=e)&&Wd&&(Wd[t]=e)||Vd},$d=function(){return 0},Zd={suppressEvents:!0,isStart:!0,kill:!1},Kd={suppressEvents:!0,kill:!1},Qd={suppressEvents:!0},Jd={},tp=[],ep={},rp={},np={},ip=30,sp=[],op="",ap=function(t){var e,r,n=t[0];if(Pd(n)||Ed(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(r=sp.length;r--&&!sp[r].targetTest(n););e=sp[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Df(t[r],e)))||t.splice(r,1);return t},hp=function(t){return t._gsap||ap(Kp(t))[0]._gsap},lp=function(t,e,r){return(r=t[e])&&Ed(r)?t[e]():Rd(r)&&t.getAttribute&&t.getAttribute(e)||r},up=function(t,e){return(t=t.split(",")).forEach(e)||t},cp=function(t){return Math.round(1e5*t)/1e5||0},dp=function(t){return Math.round(1e7*t)/1e7||0},pp=function(t,e){var r=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),"+"===r?t+n:"-"===r?t-n:"*"===r?t*n:t/n},fp=function(t,e){for(var r=e.length,n=0;t.indexOf(e[n])<0&&++n<r;);return n<r},mp=function(){var t,e,r=tp.length,n=tp.slice(0);for(ep={},tp.length=0,t=0;t<r;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},gp=function(t,e,r,n){tp.length&&!ed&&mp(),t.render(e,r,n||ed&&e<0&&(t._initted||t._startAt)),tp.length&&!ed&&mp()},_p=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(zd).length<2?e:Md(t)?t.trim():t},bp=function(t){return t},xp=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},vp=function(t,e){for(var r in e)t[r]=e[r];return t},yp=function t(e,r){for(var n in r)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=Pd(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},Cp=function(t,e){var r,n={};for(r in t)r in e||(n[r]=t[r]);return n},Tp=function(t){var e,r=t.parent||nd,n=t.keyframes?(e=Fd(t.keyframes),function(t,r){for(var n in r)n in t||"duration"===n&&e||"ease"===n||(t[n]=r[n])}):xp;if(Bd(t.inherit))for(;r;)n(t,r.vars.defaults),r=r.parent||r._dp;return t},Sp=function(t,e,r,n,i){void 0===r&&(r="_first"),void 0===n&&(n="_last");var s,o=t[n];if(i)for(s=e[i];o&&o[i]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},wp=function(t,e,r,n){void 0===r&&(r="_first"),void 0===n&&(n="_last");var i=e._prev,s=e._next;i?i._next=s:t[r]===e&&(t[r]=s),s?s._prev=i:t[n]===e&&(t[n]=i),e._next=e._prev=e.parent=null},Ap=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Mp=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},Ep=function(t,e,r,n){return t._startAt&&(ed?t._startAt.revert(Kd):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Lp=function t(e){return!e||e._ts&&t(e.parent)},Rp=function(t){return t._repeat?Pp(t._tTime,t=t.duration()+t._rDelay)*t:0},Pp=function(t,e){var r=Math.floor(t/=e);return t&&r===t?r-1:r},Bp=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Op=function(t){return t._end=dp(t._start+(t._tDur/Math.abs(t._ts||t._rts||vd)||0))},Ip=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=dp(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Op(t),r._dirty||Mp(r,t)),t},Dp=function(t,e){var r;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(r=Bp(t.rawTime(),e),(!e._dur||jp(0,e.totalDuration(),r)-e._tTime>vd)&&e.render(r,!0)),Mp(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},Fp=function(t,e,r,n){return e.parent&&Ap(e),e._start=dp((Ld(r)?r:r||t!==nd?Vp(t,r,e):t._time)+e._delay),e._end=dp(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Sp(t,e,"_first","_last",t._sort?"_start":0),Np(e)||(t._recent=e),n||Dp(t,e),t._ts<0&&Ip(t,t._tTime),t},Gp=function(t,e){return Vd.ScrollTrigger?Vd.ScrollTrigger.create(e,t):void 0},kp=function(t,e,r,n,i){return Xf(t,e,i),t._initted?!r&&t._pt&&!ed&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&hd!==Cf.frame?(tp.push(t),t._lazy=[i,n],1):void 0:1},Up=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},Np=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Hp=function(t,e,r,n){var i=t._repeat,s=dp(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=s/t._dur),t._dur=s,t._tDur=i?i<0?1e10:dp(s*(i+1)+t._rDelay*i):s,o>0&&!n&&Ip(t,t._tTime=t._tDur*o),t.parent&&Op(t),r||Mp(t.parent,t),t},zp=function(t){return t instanceof Gf?Mp(t):Hp(t,t._dur)},Xp={_start:0,endTime:$d,totalDuration:$d},Vp=function t(e,r,n){var i,s,o,a=e.labels,h=e._recent||Xp,l=e.duration()>=xd?h.endTime(!1):e._dur;return Md(r)&&(isNaN(r)||r in a)?(s=r.charAt(0),o="%"===r.substr(-1),i=r.indexOf("="),"<"===s||">"===s?(i>=0&&(r=r.replace(/=/,"")),("<"===s?h._start:h.endTime(h._repeat>=0))+(parseFloat(r.substr(1))||0)*(o?(i<0?h:n).totalDuration()/100:1)):i<0?(r in a||(a[r]=l),a[r]):(s=parseFloat(r.charAt(i-1)+r.substr(i+1)),o&&n&&(s=s/100*(Fd(n)?n[0]:n).totalDuration()),i>1?t(e,r.substr(0,i-1),n)+s:l+s)):null==r?l:+r},Wp=function(t,e,r){var n,i,s=Ld(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=r,t){for(n=a,i=r;i&&!("immediateRender"in n);)n=i.vars.defaults||{},i=Bd(i.vars.inherit)&&i.parent;a.immediateRender=Bd(n.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new qf(e[0],a,e[o+1])},Yp=function(t,e){return t||0===t?e(t):e},jp=function(t,e,r){return r<t?t:r>e?e:r},qp=function(t,e){return Md(t)&&(e=Xd.exec(t))?e[1]:""},$p=[].slice,Zp=function(t,e){return t&&Pd(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Pd(t[0]))&&!t.nodeType&&t!==id},Kp=function(t,e,r){return rd&&!e&&rd.selector?rd.selector(t):!Md(t)||r||!sd&&Tf()?Fd(t)?function(t,e,r){return void 0===r&&(r=[]),t.forEach((function(t){var n;return Md(t)&&!e||Zp(t,1)?(n=r).push.apply(n,Kp(t)):r.push(t)}))||r}(t,r):Zp(t)?$p.call(t,0):t?[t]:[]:$p.call((e||od).querySelectorAll(t),0)},Qp=function(t){return t=Kp(t)[0]||jd()||{},function(e){var r=t.current||t.nativeElement||t;return Kp(e,r.querySelectorAll?r:r===t?jd()||od.createElement("div"):t)}},Jp=function(t){return t.sort((function(){return.5-Math.random()}))},tf=function(t){if(Ed(t))return t;var e=Pd(t)?t:{each:t},r=Rf(e.ease),n=e.from||0,i=parseFloat(e.base)||0,s={},o=n>0&&n<1,a=isNaN(n)||o,h=e.axis,l=n,u=n;return Md(n)?l=u={center:.5,edges:.5,end:1}[n]||0:!o&&a&&(l=n[0],u=n[1]),function(t,o,c){var d,p,f,m,g,_,b,x,v,y=(c||e).length,C=s[y];if(!C){if(!(v="auto"===e.grid?0:(e.grid||[1,xd])[1])){for(b=-xd;b<(b=c[v++].getBoundingClientRect().left)&&v<y;);v<y&&v--}for(C=s[y]=[],d=a?Math.min(v,y)*l-.5:n%v,p=v===xd?0:a?y*u/v-.5:n/v|0,b=0,x=xd,_=0;_<y;_++)f=_%v-d,m=p-(_/v|0),C[_]=g=h?Math.abs("y"===h?m:f):Sd(f*f+m*m),g>b&&(b=g),g<x&&(x=g);"random"===n&&Jp(C),C.max=b-x,C.min=x,C.v=y=(parseFloat(e.amount)||parseFloat(e.each)*(v>y?y-1:h?"y"===h?y/v:v:Math.max(v,y/v))||0)*("edges"===n?-1:1),C.b=y<0?i-y:i,C.u=qp(e.amount||e.each)||0,r=r&&y<0?Ef(r):r}return y=(C[t]-C.min)/C.max||0,dp(C.b+(r?r(y):y)*C.v)+C.u}},ef=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var n=dp(Math.round(parseFloat(r)/t)*t*e);return(n-n%1)/e+(Ld(r)?0:qp(r))}},rf=function(t,e){var r,n,i=Fd(t);return!i&&Pd(t)&&(r=i=t.radius||xd,t.values?(t=Kp(t.values),(n=!Ld(t[0]))&&(r*=r)):t=ef(t.increment)),Yp(e,i?Ed(t)?function(e){return n=t(e),Math.abs(n-e)<=r?n:e}:function(e){for(var i,s,o=parseFloat(n?e.x:e),a=parseFloat(n?e.y:0),h=xd,l=0,u=t.length;u--;)(i=n?(i=t[u].x-o)*i+(s=t[u].y-a)*s:Math.abs(t[u]-o))<h&&(h=i,l=u);return l=!r||h<=r?t[l]:e,n||l===e||Ld(e)?l:l+qp(e)}:ef(t))},nf=function(t,e,r,n){return Yp(Fd(t)?!e:!0===r?!!(r=0):!n,(function(){return Fd(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+.99*r))/r)*r*n)/n}))},sf=function(t,e,r){return Yp(r,(function(r){return t[~~e(r)]}))},of=function(t){for(var e,r,n,i,s=0,o="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),i="["===t.charAt(e+7),r=t.substr(e+7,n-e-7).match(i?zd:Gd),o+=t.substr(s,e-s)+nf(i?r:+r[0],i?0:+r[1],+r[2]||1e-5),s=n+1;return o+t.substr(s,t.length-s)},af=function(t,e,r,n,i){var s=e-t,o=n-r;return Yp(i,(function(e){return r+((e-t)/s*o||0)}))},hf=function(t,e,r){var n,i,s,o=t.labels,a=xd;for(n in o)(i=o[n]-e)<0==!!r&&i&&a>(i=Math.abs(i))&&(s=n,a=i);return s},lf=function(t,e,r){var n,i,s,o=t.vars,a=o[e],h=rd,l=t._ctx;if(a)return n=o[e+"Params"],i=o.callbackScope||t,r&&tp.length&&mp(),l&&(rd=l),s=n?a.apply(i,n):a.call(i),rd=h,s},uf=function(t){return Ap(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ed),t.progress()<1&&lf(t,"onInterrupt"),t},cf=[],df=function(t){if(t)if(t=!t.name&&t.default||t,Od()||t.headless){var e=t.name,r=Ed(t),n=e&&!r&&t.init?function(){this._props=[]}:t,i={init:$d,render:nm,add:Hf,kill:sm,modifier:im,rawVars:0},s={targetTest:0,get:0,getSetter:Jf,aliases:{},register:0};if(Tf(),t!==n){if(rp[e])return;xp(n,xp(Cp(t,i),s)),vp(n.prototype,vp(i,Cp(t,s))),rp[n.prop=e]=n,t.targetTest&&(sp.push(n),Jd[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}qd(e,n),t.register&&t.register(ym,n,hm)}else cf.push(t)},pf=255,ff={aqua:[0,pf,pf],lime:[0,pf,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,pf],navy:[0,0,128],white:[pf,pf,pf],olive:[128,128,0],yellow:[pf,pf,0],orange:[pf,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[pf,0,0],pink:[pf,192,203],cyan:[0,pf,pf],transparent:[pf,pf,pf,0]},mf=function(t,e,r){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*pf+.5|0},gf=function(t,e,r){var n,i,s,o,a,h,l,u,c,d,p=t?Ld(t)?[t>>16,t>>8&pf,t&pf]:0:ff.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ff[t])p=ff[t];else if("#"===t.charAt(0)){if(t.length<6&&(n=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+n+n+i+i+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&pf,p&pf,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&pf,t&pf]}else if("hsl"===t.substr(0,3))if(p=d=t.match(Gd),e){if(~t.indexOf("="))return p=t.match(kd),r&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,a=+p[1]/100,n=2*(h=+p[2]/100)-(i=h<=.5?h*(a+1):h+a-h*a),p.length>3&&(p[3]*=1),p[0]=mf(o+1/3,n,i),p[1]=mf(o,n,i),p[2]=mf(o-1/3,n,i);else p=t.match(Gd)||ff.transparent;p=p.map(Number)}return e&&!d&&(n=p[0]/pf,i=p[1]/pf,s=p[2]/pf,h=((l=Math.max(n,i,s))+(u=Math.min(n,i,s)))/2,l===u?o=a=0:(c=l-u,a=h>.5?c/(2-l-u):c/(l+u),o=l===n?(i-s)/c+(i<s?6:0):l===i?(s-n)/c+2:(n-i)/c+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*a+.5),p[2]=~~(100*h+.5)),r&&p.length<4&&(p[3]=1),p},_f=function(t){var e=[],r=[],n=-1;return t.split(xf).forEach((function(t){var i=t.match(Ud)||[];e.push.apply(e,i),r.push(n+=i.length+1)})),e.c=r,e},bf=function(t,e,r){var n,i,s,o,a="",h=(t+a).match(xf),l=e?"hsla(":"rgba(",u=0;if(!h)return t;if(h=h.map((function(t){return(t=gf(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),r&&(s=_f(t),(n=r.c).join(a)!==s.c.join(a)))for(o=(i=t.replace(xf,"1").split(Ud)).length-1;u<o;u++)a+=i[u]+(~n.indexOf(u)?h.shift()||l+"0,0,0,0)":(s.length?s:h.length?h:r).shift());if(!i)for(o=(i=t.split(xf)).length-1;u<o;u++)a+=i[u]+h[u];return a+i[o]},xf=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ff)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),vf=/hsl[a]?\(/,yf=function(t){var e,r=t.join(" ");if(xf.lastIndex=0,xf.test(r))return e=vf.test(r),t[1]=bf(t[1],e),t[0]=bf(t[0],e,_f(t[1])),!0},Cf=function(){var t,e,r,n,i,s,o=Date.now,a=500,h=33,l=o(),u=l,c=1e3/240,d=c,p=[],f=function r(f){var m,g,_,b,x=o()-u,v=!0===f;if((x>a||x<0)&&(l+=x-h),((m=(_=(u+=x)-l)-d)>0||v)&&(b=++n.frame,i=_-1e3*n.time,n.time=_/=1e3,d+=m+(m>=c?4:c-m),g=1),v||(t=e(r)),g)for(s=0;s<p.length;s++)p[s](_,i,b,f)};return n={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){ad&&(!sd&&Od()&&(id=sd=window,od=id.document||{},Vd.gsap=ym,(id.gsapVersions||(id.gsapVersions=[])).push(ym.version),Yd(Wd||id.GreenSockGlobals||!id.gsap&&id||{}),cf.forEach(df)),r="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&n.sleep(),e=r||function(t){return setTimeout(t,d-1e3*n.time+1|0)},ud=1,f(2))},sleep:function(){(r?cancelAnimationFrame:clearTimeout)(t),ud=0,e=$d},lagSmoothing:function(t,e){a=t||1/0,h=Math.min(e||33,a)},fps:function(t){c=1e3/(t||240),d=1e3*n.time+c},add:function(t,e,r){var i=e?function(e,r,s,o){t(e,r,s,o),n.remove(i)}:t;return n.remove(t),p[r?"unshift":"push"](i),Tf(),i},remove:function(t,e){~(e=p.indexOf(t))&&p.splice(e,1)&&s>=e&&s--},_listeners:p},n}(),Tf=function(){return!ud&&Cf.wake()},Sf={},wf=/^[\d.\-M][\d.\-,\s]/,Af=/["']/g,Mf=function(t){for(var e,r,n,i={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,h=s.length;a<h;a++)r=s[a],e=a!==h-1?r.lastIndexOf(","):r.length,n=r.substr(0,e),i[o]=isNaN(n)?n.replace(Af,"").trim():+n,o=r.substr(e+1).trim();return i},Ef=function(t){return function(e){return 1-t(1-e)}},Lf=function t(e,r){for(var n,i=e._first;i;)i instanceof Gf?t(i,r):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===r||(i.timeline?t(i.timeline,r):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=r)),i=i._next},Rf=function(t,e){return t&&(Ed(t)?t:Sf[t]||function(t){var e,r,n,i,s=(t+"").split("("),o=Sf[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[Mf(s[1])]:(e=t,r=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",r),e.substring(r,~i&&i<n?e.indexOf(")",n+1):n)).split(",").map(_p)):Sf._CE&&wf.test(t)?Sf._CE("",t):o}(t))||e},Pf=function(t,e,r,n){void 0===r&&(r=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,s={easeIn:e,easeOut:r,easeInOut:n};return up(t,(function(t){for(var e in Sf[t]=Vd[t]=s,Sf[i=t.toLowerCase()]=r,s)Sf[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Sf[t+"."+e]=s[e]})),s},Bf=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Of=function t(e,r,n){var i=r>=1?r:1,s=(n||(e?.3:.45))/(r<1?r:1),o=s/yd*(Math.asin(1/i)||0),a=function(t){return 1===t?1:i*Math.pow(2,-10*t)*Ad((t-o)*s)+1},h="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Bf(a);return s=yd/s,h.config=function(r,n){return t(e,r,n)},h},If=function t(e,r){void 0===r&&(r=1.70158);var n=function(t){return t?--t*t*((r+1)*t+r)+1:0},i="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Bf(n);return i.config=function(r){return t(e,r)},i};up("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var r=e<5?e+1:e;Pf(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},(function(t){return 1-Math.pow(1-t,r)}),(function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2}))})),Sf.Linear.easeNone=Sf.none=Sf.Linear.easeIn,Pf("Elastic",Of("in"),Of("out"),Of()),cd=7.5625,fd=2*(pd=1/(dd=2.75)),md=2.5*pd,gd=function(t){return t<pd?cd*t*t:t<fd?cd*Math.pow(t-1.5/dd,2)+.75:t<md?cd*(t-=2.25/dd)*t+.9375:cd*Math.pow(t-2.625/dd,2)+.984375},Pf("Bounce",(function(t){return 1-gd(1-t)}),gd),Pf("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Pf("Circ",(function(t){return-(Sd(1-t*t)-1)})),Pf("Sine",(function(t){return 1===t?1:1-wd(t*Cd)})),Pf("Back",If("in"),If("out"),If()),Sf.SteppedEase=Sf.steps=Vd.SteppedEase={config:function(t,e){void 0===t&&(t=1);var r=1/t,n=t+(e?0:1),i=e?1:0;return function(t){return((n*jp(0,.99999999,t)|0)+i)*r}}},bd.ease=Sf["quad.out"],up("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return op+=t+","+t+"Params,"}));var Df=function(t,e){this.id=Td++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:lp,this.set=e?e.getSetter:Jf},Ff=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Hp(this,+t.duration,1,1),this.data=t.data,rd&&(this._ctx=rd,rd.data.push(this)),ud||Cf.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Hp(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Tf(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Ip(this,t),!r._dp||r.parent||Dp(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Fp(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===vd||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),gp(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Rp(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Rp(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?Pp(this._tTime,r)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var r=this.parent&&this._ts?Bp(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(jp(-Math.abs(this._delay),this._tDur,r),!1!==e),Op(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Tf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==vd&&(this._tTime-=vd)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Fp(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Bd(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Bp(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=Qd);var e=ed;return ed=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),ed=e,this},e.globalTime=function(t){for(var e=this,r=arguments.length?t:e.rawTime();e;)r=e._start+r/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):r},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,zp(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,zp(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Vp(this,t),Bd(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Bd(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,r=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<this.endTime(!0)-vd))},e.eventCallback=function(t,e,r){var n=this.vars;return arguments.length>1?(e?(n[t]=e,r&&(n[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(t){var e=this;return new Promise((function(r){var n=Ed(t)?t:bp,i=function(){var t=e.then;e.then=null,Ed(n)&&(n=n(e))&&(n.then||n===e)&&(e.then=t),r(n),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){uf(this)},t}();xp(Ff.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Gf=function(t){function e(e,r){var n;return void 0===e&&(e={}),(n=t.call(this,e)||this).labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=Bd(e.sortChildren),nd&&Fp(e.parent||nd,Qc(n),r),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&Gp(Qc(n),e.scrollTrigger),n}Jc(e,t);var r=e.prototype;return r.to=function(t,e,r){return Wp(0,arguments,this),this},r.from=function(t,e,r){return Wp(1,arguments,this),this},r.fromTo=function(t,e,r,n){return Wp(2,arguments,this),this},r.set=function(t,e,r){return e.duration=0,e.parent=this,Tp(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new qf(t,e,Vp(this,r),1),this},r.call=function(t,e,r){return Fp(this,qf.delayedCall(0,t,e),r)},r.staggerTo=function(t,e,r,n,i,s,o){return r.duration=e,r.stagger=r.stagger||n,r.onComplete=s,r.onCompleteParams=o,r.parent=this,new qf(t,r,Vp(this,i)),this},r.staggerFrom=function(t,e,r,n,i,s,o){return r.runBackwards=1,Tp(r).immediateRender=Bd(r.immediateRender),this.staggerTo(t,e,r,n,i,s,o)},r.staggerFromTo=function(t,e,r,n,i,s,o,a){return n.startAt=r,Tp(n).immediateRender=Bd(n.immediateRender),this.staggerTo(t,e,n,i,s,o,a)},r.render=function(t,e,r){var n,i,s,o,a,h,l,u,c,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,_=this._dur,b=t<=0?0:dp(t),x=this._zTime<0!=t<0&&(this._initted||!_);if(this!==nd&&b>g&&t>=0&&(b=g),b!==this._tTime||r||x){if(m!==this._time&&_&&(b+=this._time-m,t+=this._time-m),n=b,c=this._start,h=!(u=this._ts),x&&(_||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,a=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,r);if(n=dp(b%a),b===g?(o=this._repeat,n=_):((o=~~(b/a))&&o===b/a&&(n=_,o--),n>_&&(n=_)),d=Pp(this._tTime,a),!m&&this._tTime&&d!==o&&this._tTime-d*a-this._dur<=0&&(d=o),p&&1&o&&(n=_-n,f=1),o!==d&&!this._lock){var v=p&&1&d,y=v===(p&&1&o);if(o<d&&(v=!v),m=v?0:b%_?_:b,this._lock=1,this.render(m||(f?0:dp(o*a)),e,!_)._lock=0,this._tTime=b,!e&&this.parent&&lf(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,g=this._tDur,y&&(this._lock=2,m=v?_:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;Lf(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,r){var n;if(r>e)for(n=t._first;n&&n._start<=r;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=r;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,dp(m),dp(n)),l&&(b-=n-(n=l._start))),this._tTime=b,this._time=n,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&n&&!e&&!o&&(lf(this,"onStart"),this._tTime!==b))return this;if(n>=m&&t>=0)for(i=this._first;i;){if(s=i._next,(i._act||n>=i._start)&&i._ts&&l!==i){if(i.parent!==this)return this.render(t,e,r);if(i.render(i._ts>0?(n-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(n-i._start)*i._ts,e,r),n!==this._time||!this._ts&&!h){l=0,s&&(b+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var C=t<0?t:n;i;){if(s=i._prev,(i._act||C<=i._end)&&i._ts&&l!==i){if(i.parent!==this)return this.render(t,e,r);if(i.render(i._ts>0?(C-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(C-i._start)*i._ts,e,r||ed&&(i._initted||i._startAt)),n!==this._time||!this._ts&&!h){l=0,s&&(b+=this._zTime=C?-1e-8:vd);break}}i=s}}if(l&&!e&&(this.pause(),l.render(n>=m?0:-1e-8)._zTime=n>=m?1:-1,this._ts))return this._start=c,Op(this),this.render(t,e,r);this._onUpdate&&!e&&lf(this,"onUpdate",!0),(b===g&&this._tTime>=this.totalDuration()||!b&&m)&&(c!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!_)&&(b===g&&this._ts>0||!b&&this._ts<0)&&Ap(this,1),e||t<0&&!m||!b&&!m&&g||(lf(this,b===g&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<g&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(t,e){var r=this;if(Ld(e)||(e=Vp(this,e,t)),!(t instanceof Ff)){if(Fd(t))return t.forEach((function(t){return r.add(t,e)})),this;if(Md(t))return this.addLabel(t,e);if(!Ed(t))return this;t=qf.delayedCall(0,t)}return this!==t?Fp(this,t,e):this},r.getChildren=function(t,e,r,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===n&&(n=-xd);for(var i=[],s=this._first;s;)s._start>=n&&(s instanceof qf?e&&i.push(s):(r&&i.push(s),t&&i.push.apply(i,s.getChildren(!0,e,r)))),s=s._next;return i},r.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},r.remove=function(t){return Md(t)?this.removeLabel(t):Ed(t)?this.killTweensOf(t):(wp(this,t),t===this._recent&&(this._recent=this._last),Mp(this))},r.totalTime=function(e,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=dp(Cf.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,r),this._forcing=0,this):this._tTime},r.addLabel=function(t,e){return this.labels[t]=Vp(this,e),this},r.removeLabel=function(t){return delete this.labels[t],this},r.addPause=function(t,e,r){var n=qf.delayedCall(0,e||$d,r);return n.data="isPause",this._hasPause=1,Fp(this,n,Vp(this,t))},r.removePause=function(t){var e=this._first;for(t=Vp(this,t);e;)e._start===t&&"isPause"===e.data&&Ap(e),e=e._next},r.killTweensOf=function(t,e,r){for(var n=this.getTweensOf(t,r),i=n.length;i--;)kf!==n[i]&&n[i].kill(t,e);return this},r.getTweensOf=function(t,e){for(var r,n=[],i=Kp(t),s=this._first,o=Ld(e);s;)s instanceof qf?fp(s._targets,i)&&(o?(!kf||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&n.push(s):(r=s.getTweensOf(i,e)).length&&n.push.apply(n,r),s=s._next;return n},r.tweenTo=function(t,e){e=e||{};var r,n=this,i=Vp(n,t),s=e,o=s.startAt,a=s.onStart,h=s.onStartParams,l=s.immediateRender,u=qf.to(n,xp({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale())||vd,onStart:function(){if(n.pause(),!r){var t=e.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale());u._dur!==t&&Hp(u,t,0,1).render(u._time,!0,!0),r=1}a&&a.apply(u,h||[])}},e));return l?u.render(0):u},r.tweenFromTo=function(t,e,r){return this.tweenTo(e,xp({startAt:{time:Vp(this,t)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(t){return void 0===t&&(t=this._time),hf(this,Vp(this,t))},r.previousLabel=function(t){return void 0===t&&(t=this._time),hf(this,Vp(this,t),1)},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+vd)},r.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var n,i=this._first,s=this.labels;i;)i._start>=r&&(i._start+=t,i._end+=t),i=i._next;if(e)for(n in s)s[n]>=r&&(s[n]+=t);return Mp(this)},r.invalidate=function(e){var r=this._first;for(this._lock=0;r;)r.invalidate(e),r=r._next;return t.prototype.invalidate.call(this,e)},r.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Mp(this)},r.totalDuration=function(t){var e,r,n,i=0,s=this,o=s._last,a=xd;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(r=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,Fp(s,o,r-o._delay,1)._lock=0):a=r,r<0&&o._ts&&(i-=r,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),a=0),o._end>i&&o._ts&&(i=o._end),o=e;Hp(s,s===nd&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(nd._ts&&(gp(nd,Bp(t,nd)),hd=Cf.frame),Cf.frame>=ip){ip+=_d.autoSleep||120;var e=nd._first;if((!e||!e._ts)&&_d.autoSleep&&Cf._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Cf.sleep()}}},e}(Ff);xp(Gf.prototype,{_lock:0,_hasPause:0,_forcing:0});var kf,Uf,Nf=function(t,e,r,n,i,s,o){var a,h,l,u,c,d,p,f,m=new hm(this._pt,t,e,0,1,rm,null,i),g=0,_=0;for(m.b=r,m.e=n,r+="",(p=~(n+="").indexOf("random("))&&(n=of(n)),s&&(s(f=[r,n],t,e),r=f[0],n=f[1]),h=r.match(Nd)||[];a=Nd.exec(n);)u=a[0],c=n.substring(g,a.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),u!==h[_++]&&(d=parseFloat(h[_-1])||0,m._pt={_next:m._pt,p:c||1===_?c:",",s:d,c:"="===u.charAt(1)?pp(d,u)-d:parseFloat(u)-d,m:l&&l<4?Math.round:0},g=Nd.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=o,(Hd.test(n)||p)&&(m.e=0),this._pt=m,m},Hf=function(t,e,r,n,i,s,o,a,h,l){Ed(n)&&(n=n(i||0,t,s));var u,c=t[e],d="get"!==r?r:Ed(c)?h?t[e.indexOf("set")||!Ed(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():c,p=Ed(c)?h?Kf:Zf:$f;if(Md(n)&&(~n.indexOf("random(")&&(n=of(n)),"="===n.charAt(1)&&((u=pp(d,n)+(qp(d)||0))||0===u)&&(n=u)),!l||d!==n||Uf)return isNaN(d*n)||""===n?Nf.call(this,t,e,d,n,p,a||_d.stringFilter,h):(u=new hm(this._pt,t,e,+d||0,n-(d||0),"boolean"==typeof c?em:tm,0,p),h&&(u.fp=h),o&&u.modifier(o,this,t),this._pt=u)},zf=function(t,e,r,n,i,s){var o,a,h,l;if(rp[t]&&!1!==(o=new rp[t]).init(i,o.rawVars?e[t]:function(t,e,r,n,i){if(Ed(t)&&(t=Wf(t,i,e,r,n)),!Pd(t)||t.style&&t.nodeType||Fd(t)||Dd(t))return Md(t)?Wf(t,i,e,r,n):t;var s,o={};for(s in t)o[s]=Wf(t[s],i,e,r,n);return o}(e[t],n,i,s,r),r,n,s)&&(r._pt=a=new hm(r._pt,i,t,0,1,o.render,o,0,o.priority),r!==ld))for(h=r._ptLookup[r._targets.indexOf(i)],l=o._props.length;l--;)h[o._props[l]]=a;return o},Xf=function t(e,r,n){var i,s,o,a,h,l,u,c,d,p,f,m,g,_=e.vars,b=_.ease,x=_.startAt,v=_.immediateRender,y=_.lazy,C=_.onUpdate,T=_.runBackwards,S=_.yoyoEase,w=_.keyframes,A=_.autoRevert,M=e._dur,E=e._startAt,L=e._targets,R=e.parent,P=R&&"nested"===R.data?R.vars.targets:L,B="auto"===e._overwrite&&!td,O=e.timeline;if(O&&(!w||!b)&&(b="none"),e._ease=Rf(b,bd.ease),e._yEase=S?Ef(Rf(!0===S?b:S,bd.ease)):0,S&&e._yoyo&&!e._repeat&&(S=e._yEase,e._yEase=e._ease,e._ease=S),e._from=!O&&!!_.runBackwards,!O||w&&!_.stagger){if(m=(c=L[0]?hp(L[0]).harness:0)&&_[c.prop],i=Cp(_,Jd),E&&(E._zTime<0&&E.progress(1),r<0&&T&&v&&!A?E.render(-1,!0):E.revert(T&&M?Kd:Zd),E._lazy=0),x){if(Ap(e._startAt=qf.set(L,xp({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:!E&&Bd(y),startAt:null,delay:0,onUpdate:C&&function(){return lf(e,"onUpdate")},stagger:0},x))),e._startAt._dp=0,e._startAt._sat=e,r<0&&(ed||!v&&!A)&&e._startAt.revert(Kd),v&&M&&r<=0&&n<=0)return void(r&&(e._zTime=r))}else if(T&&M&&!E)if(r&&(v=!1),o=xp({overwrite:!1,data:"isFromStart",lazy:v&&!E&&Bd(y),immediateRender:v,stagger:0,parent:R},i),m&&(o[c.prop]=m),Ap(e._startAt=qf.set(L,o)),e._startAt._dp=0,e._startAt._sat=e,r<0&&(ed?e._startAt.revert(Kd):e._startAt.render(-1,!0)),e._zTime=r,v){if(!r)return}else t(e._startAt,vd,vd);for(e._pt=e._ptCache=0,y=M&&Bd(y)||y&&!M,s=0;s<L.length;s++){if(u=(h=L[s])._gsap||ap(L)[s]._gsap,e._ptLookup[s]=p={},ep[u.id]&&tp.length&&mp(),f=P===L?s:P.indexOf(h),c&&!1!==(d=new c).init(h,m||i,e,f,P)&&(e._pt=a=new hm(e._pt,h,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){p[t]=a})),d.priority&&(l=1)),!c||m)for(o in i)rp[o]&&(d=zf(o,i,e,f,h,P))?d.priority&&(l=1):p[o]=a=Hf.call(e,h,o,"get",i[o],f,P,0,_.stringFilter);e._op&&e._op[s]&&e.kill(h,e._op[s]),B&&e._pt&&(kf=e,nd.killTweensOf(h,p,e.globalTime(r)),g=!e.parent,kf=0),e._pt&&y&&(ep[u.id]=1)}l&&am(e),e._onInit&&e._onInit(e)}e._onUpdate=C,e._initted=(!e._op||e._pt)&&!g,w&&r<=0&&O.render(xd,!0,!0)},Vf=function(t,e,r,n){var i,s,o=e.ease||n||"power1.inOut";if(Fd(e))s=r[t]||(r[t]=[]),e.forEach((function(t,r){return s.push({t:r/(e.length-1)*100,v:t,e:o})}));else for(i in e)s=r[i]||(r[i]=[]),"ease"===i||s.push({t:parseFloat(t),v:e[i],e:o})},Wf=function(t,e,r,n,i){return Ed(t)?t.call(e,r,n,i):Md(t)&&~t.indexOf("random(")?of(t):t},Yf=op+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",jf={};up(Yf+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return jf[t]=1}));var qf=function(t){function e(e,r,n,i){var s;"number"==typeof r&&(n.duration=r,r=n,n=null);var o,a,h,l,u,c,d,p,f=(s=t.call(this,i?r:Tp(r))||this).vars,m=f.duration,g=f.delay,_=f.immediateRender,b=f.stagger,x=f.overwrite,v=f.keyframes,y=f.defaults,C=f.scrollTrigger,T=f.yoyoEase,S=r.parent||nd,w=(Fd(e)||Dd(e)?Ld(e[0]):"length"in r)?[e]:Kp(e);if(s._targets=w.length?ap(w):jd(0,!_d.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=x,v||b||Id(m)||Id(g)){if(r=s.vars,(o=s.timeline=new Gf({data:"nested",defaults:y||{},targets:S&&"nested"===S.data?S.vars.targets:w})).kill(),o.parent=o._dp=Qc(s),o._start=0,b||Id(m)||Id(g)){if(l=w.length,d=b&&tf(b),Pd(b))for(u in b)~Yf.indexOf(u)&&(p||(p={}),p[u]=b[u]);for(a=0;a<l;a++)(h=Cp(r,jf)).stagger=0,T&&(h.yoyoEase=T),p&&vp(h,p),c=w[a],h.duration=+Wf(m,Qc(s),a,c,w),h.delay=(+Wf(g,Qc(s),a,c,w)||0)-s._delay,!b&&1===l&&h.delay&&(s._delay=g=h.delay,s._start+=g,h.delay=0),o.to(c,h,d?d(a,c,w):0),o._ease=Sf.none;o.duration()?m=g=0:s.timeline=0}else if(v){Tp(xp(o.vars.defaults,{ease:"none"})),o._ease=Rf(v.ease||r.ease||"none");var A,M,E,L=0;if(Fd(v))v.forEach((function(t){return o.to(w,t,">")})),o.duration();else{for(u in h={},v)"ease"===u||"easeEach"===u||Vf(u,v[u],h,v.easeEach);for(u in h)for(A=h[u].sort((function(t,e){return t.t-e.t})),L=0,a=0;a<A.length;a++)(E={ease:(M=A[a]).e,duration:(M.t-(a?A[a-1].t:0))/100*m})[u]=M.v,o.to(w,E,L),L+=E.duration;o.duration()<m&&o.to({},{duration:m-o.duration()})}}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==x||td||(kf=Qc(s),nd.killTweensOf(w),kf=0),Fp(S,Qc(s),n),r.reversed&&s.reverse(),r.paused&&s.paused(!0),(_||!m&&!v&&s._start===dp(S._time)&&Bd(_)&&Lp(Qc(s))&&"nested"!==S.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g)||0)),C&&Gp(Qc(s),C),s}Jc(e,t);var r=e.prototype;return r.render=function(t,e,r){var n,i,s,o,a,h,l,u,c,d=this._time,p=this._tDur,f=this._dur,m=t<0,g=t>p-vd&&!m?p:t<vd?0:t;if(f){if(g!==this._tTime||!t||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m){if(n=g,u=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*o+t,e,r);if(n=dp(g%o),g===p?(s=this._repeat,n=f):((s=~~(g/o))&&s===dp(g/o)&&(n=f,s--),n>f&&(n=f)),(h=this._yoyo&&1&s)&&(c=this._yEase,n=f-n),a=Pp(this._tTime,o),n===d&&!r&&this._initted&&s===a)return this._tTime=g,this;s!==a&&(u&&this._yEase&&Lf(u,h),this.vars.repeatRefresh&&!h&&!this._lock&&this._time!==o&&this._initted&&(this._lock=r=1,this.render(dp(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(kp(this,m?t:n,r,e,g))return this._tTime=0,this;if(!(d===this._time||r&&this.vars.repeatRefresh&&s!==a))return this;if(f!==this._dur)return this.render(t,e,r)}if(this._tTime=g,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(c||this._ease)(n/f),this._from&&(this.ratio=l=1-l),n&&!d&&!e&&!s&&(lf(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(l,i.d),i=i._next;u&&u.render(t<0?t:u._dur*u._ease(n/this._dur),e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(m&&Ep(this,t,0,r),lf(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&lf(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&Ep(this,t,0,!0),(t||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Ap(this,1),e||m&&!d||!(g||d||h)||(lf(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,r,n){var i,s,o,a=t.ratio,h=e<0||!e&&(!t._start&&Up(t)&&(t._initted||!Np(t))||(t._ts<0||t._dp._ts<0)&&!Np(t))?0:1,l=t._rDelay,u=0;if(l&&t._repeat&&(u=jp(0,t._tDur,e),s=Pp(u,l),t._yoyo&&1&s&&(h=1-h),s!==Pp(t._tTime,l)&&(a=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==a||ed||n||t._zTime===vd||!e&&t._zTime){if(!t._initted&&kp(t,e,n,r,u))return;for(o=t._zTime,t._zTime=e||(r?vd:0),r||(r=e&&!o),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=u,i=t._pt;i;)i.r(h,i.d),i=i._next;e<0&&Ep(t,e,0,!0),t._onUpdate&&!r&&lf(t,"onUpdate"),u&&t._repeat&&!r&&t.parent&&lf(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&Ap(t,1),r||ed||(lf(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,r);return this},r.targets=function(){return this._targets},r.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},r.resetTo=function(t,e,r,n,i){ud||Cf.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Xf(this,s),function(t,e,r,n,i,s,o,a){var h,l,u,c,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],u=t._ptLookup,c=t._targets.length;c--;){if((h=u[c][e])&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return Uf=1,t.vars[e]="+=0",Xf(t,o),Uf=0,a?jd():1;d.push(h)}for(c=d.length;c--;)(h=(l=d[c])._pt||l).s=!n&&0!==n||i?h.s+(n||0)+s*h.c:n,h.c=r-h.s,l.e&&(l.e=cp(r)+qp(l.e)),l.b&&(l.b=h.s+qp(l.b))}(this,t,e,r,n,this._ease(s/this._dur),s,i)?this.resetTo(t,e,r,n,1):(Ip(this,0),this.parent||Sp(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?uf(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,kf&&!0!==kf.vars.overwrite)._first||uf(this),this.parent&&r!==this.timeline.totalDuration()&&Hp(this,this._dur*this.timeline._tDur/r,0,1),this}var n,i,s,o,a,h,l,u=this._targets,c=t?Kp(t):u,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,n=r===e.length;n&&r--&&t[r]===e[r];);return r<0}(u,c))return"all"===e&&(this._pt=0),uf(this);for(n=this._op=this._op||[],"all"!==e&&(Md(e)&&(a={},up(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var r,n,i,s,o=t[0]?hp(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(n in r=vp({},e),a)if(n in r)for(i=(s=a[n].split(",")).length;i--;)r[s[i]]=r[n];return r}(u,e)),l=u.length;l--;)if(~c.indexOf(u[l]))for(a in i=d[l],"all"===e?(n[l]=e,o=i,s={}):(s=n[l]=n[l]||{},o=e),o)(h=i&&i[a])&&("kill"in h.d&&!0!==h.d.kill(a)||wp(this,h,"_pt"),delete i[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&p&&uf(this),this},e.to=function(t,r){return new e(t,r,arguments[2])},e.from=function(t,e){return Wp(1,arguments)},e.delayedCall=function(t,r,n,i){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},e.fromTo=function(t,e,r){return Wp(2,arguments)},e.set=function(t,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(t,r)},e.killTweensOf=function(t,e,r){return nd.killTweensOf(t,e,r)},e}(Ff);xp(qf.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),up("staggerTo,staggerFrom,staggerFromTo",(function(t){qf[t]=function(){var e=new Gf,r=$p.call(arguments,0);return r.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,r)}}));var $f=function(t,e,r){return t[e]=r},Zf=function(t,e,r){return t[e](r)},Kf=function(t,e,r,n){return t[e](n.fp,r)},Qf=function(t,e,r){return t.setAttribute(e,r)},Jf=function(t,e){return Ed(t[e])?Zf:Rd(t[e])&&t.setAttribute?Qf:$f},tm=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},em=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},rm=function(t,e){var r=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+n,r=r._next;n+=e.c}e.set(e.t,e.p,n,e)},nm=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},im=function(t,e,r,n){for(var i,s=this._pt;s;)i=s._next,s.p===n&&s.modifier(t,e,r),s=i},sm=function(t){for(var e,r,n=this._pt;n;)r=n._next,n.p===t&&!n.op||n.op===t?wp(this,n,"_pt"):n.dep||(e=1),n=r;return!e},om=function(t,e,r,n){n.mSet(t,e,n.m.call(n.tween,r,n.mt),n)},am=function(t){for(var e,r,n,i,s=t._pt;s;){for(e=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:i)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:i=s,s=e}t._pt=n},hm=function(){function t(t,e,r,n,i,s,o,a,h){this.t=e,this.s=n,this.c=i,this.p=r,this.r=s||tm,this.d=o||this,this.set=a||$f,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=om,this.m=t,this.mt=r,this.tween=e},t}();up(op+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return Jd[t]=1})),Vd.TweenMax=Vd.TweenLite=qf,Vd.TimelineLite=Vd.TimelineMax=Gf,nd=new Gf({sortChildren:!1,defaults:bd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_d.stringFilter=yf;var lm=[],um={},cm=[],dm=0,pm=0,fm=function(t){return(um[t]||cm).map((function(t){return t()}))},mm=function(){var t=Date.now(),e=[];t-dm>2&&(fm("matchMediaInit"),lm.forEach((function(t){var r,n,i,s,o=t.queries,a=t.conditions;for(n in o)(r=id.matchMedia(o[n]).matches)&&(i=1),r!==a[n]&&(a[n]=r,s=1);s&&(t.revert(),i&&e.push(t))})),fm("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),dm=t,fm("matchMedia"))},gm=function(){function t(t,e){this.selector=e&&Qp(e),this.data=[],this._r=[],this.isReverted=!1,this.id=pm++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,r){Ed(t)&&(r=e,e=t,t=Ed);var n=this,i=function(){var t,i=rd,s=n.selector;return i&&i!==n&&i.data.push(n),r&&(n.selector=Qp(r)),rd=n,t=e.apply(n,arguments),Ed(t)&&n._r.push(t),rd=i,n.selector=s,n.isReverted=!1,t};return n.last=i,t===Ed?i(n,(function(t){return n.add(null,t)})):t?n[t]=i:i},e.ignore=function(t){var e=rd;rd=null,t(this),rd=e},e.getTweens=function(){var e=[];return this.data.forEach((function(r){return r instanceof t?e.push.apply(e,r.getTweens()):r instanceof qf&&!(r.parent&&"nested"===r.parent.data)&&e.push(r)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var r=this;if(t?function(){for(var e,n=r.getTweens(),i=r.data.length;i--;)"isFlip"===(e=r.data[i]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return n.splice(n.indexOf(t),1)})));for(n.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),i=r.data.length;i--;)(e=r.data[i])instanceof Gf?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof qf)&&e.revert&&e.revert(t);r._r.forEach((function(e){return e(t,r)})),r.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var n=lm.length;n--;)lm[n].id===this.id&&lm.splice(n,1)},e.revert=function(t){this.kill(t||{})},t}(),_m=function(){function t(t){this.contexts=[],this.scope=t,rd&&rd.data.push(this)}var e=t.prototype;return e.add=function(t,e,r){Pd(t)||(t={matches:t});var n,i,s,o=new gm(0,r||this.scope),a=o.conditions={};for(i in rd&&!o.selector&&(o.selector=rd.selector),this.contexts.push(o),e=o.add("onMatch",e),o.queries=t,t)"all"===i?s=1:(n=id.matchMedia(t[i]))&&(lm.indexOf(o)<0&&lm.push(o),(a[i]=n.matches)&&(s=1),n.addListener?n.addListener(mm):n.addEventListener("change",mm));return s&&e(o,(function(t){return o.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),bm={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){return df(t)}))},timeline:function(t){return new Gf(t)},getTweensOf:function(t,e){return nd.getTweensOf(t,e)},getProperty:function(t,e,r,n){Md(t)&&(t=Kp(t)[0]);var i=hp(t||{}).get,s=r?bp:_p;return"native"===r&&(r=""),t?e?s((rp[e]&&rp[e].get||i)(t,e,r,n)):function(e,r,n){return s((rp[e]&&rp[e].get||i)(t,e,r,n))}:t},quickSetter:function(t,e,r){if((t=Kp(t)).length>1){var n=t.map((function(t){return ym.quickSetter(t,e,r)})),i=n.length;return function(t){for(var e=i;e--;)n[e](t)}}t=t[0]||{};var s=rp[e],o=hp(t),a=o.harness&&(o.harness.aliases||{})[e]||e,h=s?function(e){var n=new s;ld._pt=0,n.init(t,r?e+r:e,ld,0,[t]),n.render(1,n),ld._pt&&nm(1,ld)}:o.set(t,a);return s?h:function(e){return h(t,a,r?e+r:e,o,1)}},quickTo:function(t,e,r){var n,i=ym.to(t,vp(((n={})[e]="+=0.1",n.paused=!0,n),r||{})),s=function(t,r,n){return i.resetTo(e,t,r,n)};return s.tween=i,s},isTweening:function(t){return nd.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Rf(t.ease,bd.ease)),yp(bd,t||{})},config:function(t){return yp(_d,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,n=t.plugins,i=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!rp[t]&&!Vd[t]&&jd()})),np[e]=function(t,e,n){return r(Kp(t),xp(e||{},i),n)},s&&(Gf.prototype[e]=function(t,r,n){return this.add(np[e](t,Pd(r)?r:(n=r)&&{},this),n)})},registerEase:function(t,e){Sf[t]=Rf(e)},parseEase:function(t,e){return arguments.length?Rf(t,e):Sf},getById:function(t){return nd.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,n,i=new Gf(t);for(i.smoothChildTiming=Bd(t.smoothChildTiming),nd.remove(i),i._dp=0,i._time=i._tTime=nd._time,r=nd._first;r;)n=r._next,!e&&!r._dur&&r instanceof qf&&r.vars.onComplete===r._targets[0]||Fp(i,r,r._start-r._delay),r=n;return Fp(nd,i,0),i},context:function(t,e){return t?new gm(t,e):rd},matchMedia:function(t){return new _m(t)},matchMediaRefresh:function(){return lm.forEach((function(t){var e,r,n=t.conditions;for(r in n)n[r]&&(n[r]=!1,e=1);e&&t.revert()}))||mm()},addEventListener:function(t,e){var r=um[t]||(um[t]=[]);~r.indexOf(e)||r.push(e)},removeEventListener:function(t,e){var r=um[t],n=r&&r.indexOf(e);n>=0&&r.splice(n,1)},utils:{wrap:function t(e,r,n){var i=r-e;return Fd(e)?sf(e,t(0,e.length),r):Yp(n,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,r,n){var i=r-e,s=2*i;return Fd(e)?sf(e,t(0,e.length-1),r):Yp(n,(function(t){return e+((t=(s+(t-e)%s)%s||0)>i?s-t:t)}))},distribute:tf,random:nf,snap:rf,normalize:function(t,e,r){return af(t,e,0,1,r)},getUnit:qp,clamp:function(t,e,r){return Yp(r,(function(r){return jp(t,e,r)}))},splitColor:gf,toArray:Kp,selector:Qp,mapRange:af,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(r){return t(parseFloat(r))+(e||qp(r))}},interpolate:function t(e,r,n,i){var s=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!s){var o,a,h,l,u,c=Md(e),d={};if(!0===n&&(i=1)&&(n=null),c)e={p:e},r={p:r};else if(Fd(e)&&!Fd(r)){for(h=[],l=e.length,u=l-2,a=1;a<l;a++)h.push(t(e[a-1],e[a]));l--,s=function(t){t*=l;var e=Math.min(u,~~t);return h[e](t-e)},n=r}else i||(e=vp(Fd(e)?[]:{},e));if(!h){for(o in r)Hf.call(d,e,o,"get",r[o]);s=function(t){return nm(t,d)||(c?e.p:e)}}}return Yp(n,s)},shuffle:Jp},install:Yd,effects:np,ticker:Cf,updateRoot:Gf.updateRoot,plugins:rp,globalTimeline:nd,core:{PropTween:hm,globals:qd,Tween:qf,Timeline:Gf,Animation:Ff,getCache:hp,_removeLinkedListItem:wp,reverting:function(){return ed},context:function(t){return t&&rd&&(rd.data.push(t),t._ctx=rd),rd},suppressOverwrites:function(t){return td=t}}};up("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return bm[t]=qf[t]})),Cf.add(Gf.updateRoot),ld=bm.to({},{duration:0});var xm=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},vm=function(t,e){return{name:t,rawVars:1,init:function(t,r,n){n._onInit=function(t){var n,i;if(Md(r)&&(n={},up(r,(function(t){return n[t]=1})),r=n),e){for(i in n={},r)n[i]=e(r[i]);r=n}!function(t,e){var r,n,i,s=t._targets;for(r in e)for(n=s.length;n--;)(i=t._ptLookup[n][r])&&(i=i.d)&&(i._pt&&(i=xm(i,r)),i&&i.modifier&&i.modifier(e[r],t,s[n],r))}(t,r)}}}},ym=bm.registerPlugin({name:"attr",init:function(t,e,r,n,i){var s,o,a;for(s in this.tween=r,e)a=t.getAttribute(s)||"",(o=this.add(t,"setAttribute",(a||0)+"",e[s],n,i,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(t,e){for(var r=e._pt;r;)ed?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r],0,0,0,0,0,1)}},vm("roundProps",ef),vm("modifiers"),vm("snap",rf))||bm;qf.version=Gf.version=ym.version="3.12.5",ad=1,Od()&&Tf(),Sf.Power0,Sf.Power1,Sf.Power2,Sf.Power3,Sf.Power4,Sf.Linear,Sf.Quad,Sf.Cubic,Sf.Quart,Sf.Quint,Sf.Strong,Sf.Elastic,Sf.Back,Sf.SteppedEase,Sf.Bounce,Sf.Sine,Sf.Expo,Sf.Circ;var Cm,Tm,Sm,wm,Am,Mm,Em,Lm,Rm={},Pm=180/Math.PI,Bm=Math.PI/180,Om=Math.atan2,Im=/([A-Z])/g,Dm=/(left|right|width|margin|padding|x)/i,Fm=/[\s,\(]\S/,Gm={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},km=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Um=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Nm=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Hm=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},zm=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Xm=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Vm=function(t,e,r){return t.style[e]=r},Wm=function(t,e,r){return t.style.setProperty(e,r)},Ym=function(t,e,r){return t._gsap[e]=r},jm=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},qm=function(t,e,r,n,i){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},$m=function(t,e,r,n,i){var s=t._gsap;s[e]=r,s.renderTransform(i,s)},Zm="transform",Km=Zm+"Origin",Qm=function t(e,r){var n=this,i=this.target,s=i.style,o=i._gsap;if(e in Rm&&s){if(this.tfm=this.tfm||{},"transform"===e)return Gm.transform.split(",").forEach((function(e){return t.call(n,e,r)}));if(~(e=Gm[e]||e).indexOf(",")?e.split(",").forEach((function(t){return n.tfm[t]=gg(i,t)})):this.tfm[e]=o.x?o[e]:gg(i,e),e===Km&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(Zm)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Km,r,"")),e=Zm}(s||r)&&this.props.push(e,r,s[e])},Jm=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},tg=function(){var t,e,r=this.props,n=this.target,i=n.style,s=n._gsap;for(t=0;t<r.length;t+=3)r[t+1]?n[r[t]]=r[t+2]:r[t+2]?i[r[t]]=r[t+2]:i.removeProperty("--"===r[t].substr(0,2)?r[t]:r[t].replace(Im,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(t=Em())&&t.isStart||i[Zm]||(Jm(i),s.zOrigin&&i[Km]&&(i[Km]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},eg=function(t,e){var r={target:t,props:[],revert:tg,save:Qm};return t._gsap||ym.core.getCache(t),e&&e.split(",").forEach((function(t){return r.save(t)})),r},rg=function(t,e){var r=Tm.createElementNS?Tm.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Tm.createElement(t);return r&&r.style?r:Tm.createElement(t)},ng=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(Im,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,sg(r)||r,1)||""},ig="O,Moz,ms,Ms,Webkit".split(","),sg=function(t,e,r){var n=(e||Am).style,i=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(ig[i]+t in n););return i<0?null:(3===i?"ms":i>=0?ig[i]:"")+t},og=function(){"undefined"!=typeof window&&window.document&&(Cm=window,Tm=Cm.document,Sm=Tm.documentElement,Am=rg("div")||{style:{}},rg("div"),Zm=sg(Zm),Km=Zm+"Origin",Am.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Lm=!!sg("perspective"),Em=ym.core.reverting,wm=1)},ag=function t(e){var r,n=rg("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Sm.appendChild(n),n.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Sm.removeChild(n),this.style.cssText=o,r},hg=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},lg=function(t){var e;try{e=t.getBBox()}catch(r){e=ag.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===ag||(e=ag.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+hg(t,["x","cx","x1"])||0,y:+hg(t,["y","cy","y1"])||0,width:0,height:0}},ug=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!lg(t))},cg=function(t,e){if(e){var r,n=t.style;e in Rm&&e!==Km&&(e=Zm),n.removeProperty?("ms"!==(r=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty("--"===r?e:e.replace(Im,"-$1").toLowerCase())):n.removeAttribute(e)}},dg=function(t,e,r,n,i,s){var o=new hm(t._pt,e,r,0,1,s?Xm:zm);return t._pt=o,o.b=n,o.e=i,t._props.push(r),o},pg={deg:1,rad:1,turn:1},fg={grid:1,flex:1},mg=function t(e,r,n,i){var s,o,a,h,l=parseFloat(n)||0,u=(n+"").trim().substr((l+"").length)||"px",c=Am.style,d=Dm.test(r),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===i,_="%"===i;if(i===u||!l||pg[i]||pg[u])return l;if("px"!==u&&!g&&(l=t(e,r,n,"px")),h=e.getCTM&&ug(e),(_||"%"===u)&&(Rm[r]||~r.indexOf("adius")))return s=h?e.getBBox()[d?"width":"height"]:e[f],cp(_?l/s*m:l/100*s);if(c[d?"width":"height"]=m+(g?u:i),o=~r.indexOf("adius")||"em"===i&&e.appendChild&&!p?e:e.parentNode,h&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Tm&&o.appendChild||(o=Tm.body),(a=o._gsap)&&_&&a.width&&d&&a.time===Cf.time&&!a.uncache)return cp(l/a.width*m);if(!_||"height"!==r&&"width"!==r)(_||"%"===u)&&!fg[ng(o,"display")]&&(c.position=ng(e,"position")),o===e&&(c.position="static"),o.appendChild(Am),s=Am[f],o.removeChild(Am),c.position="absolute";else{var b=e.style[r];e.style[r]=m+i,s=e[f],b?e.style[r]=b:cg(e,r)}return d&&_&&((a=hp(o)).time=Cf.time,a.width=o[f]),cp(g?s*l/m:s&&l?m/s*l:0)},gg=function(t,e,r,n){var i;return wm||og(),e in Gm&&"transform"!==e&&~(e=Gm[e]).indexOf(",")&&(e=e.split(",")[0]),Rm[e]&&"transform"!==e?(i=Eg(t,n),i="transformOrigin"!==e?i[e]:i.svg?i.origin:Lg(ng(t,Km))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=yg[e]&&yg[e](t,e,r)||ng(t,e)||lp(t,e)||("opacity"===e?1:0)),r&&!~(i+"").trim().indexOf(" ")?mg(t,e,i,r)+r:i},_g=function(t,e,r,n){if(!r||"none"===r){var i=sg(e,t,1),s=i&&ng(t,i,1);s&&s!==r?(e=i,r=s):"borderColor"===e&&(r=ng(t,"borderTopColor"))}var o,a,h,l,u,c,d,p,f,m,g,_=new hm(this._pt,t.style,e,0,1,rm),b=0,x=0;if(_.b=r,_.e=n,r+="","auto"==(n+="")&&(c=t.style[e],t.style[e]=n,n=ng(t,e)||n,c?t.style[e]=c:cg(t,e)),yf(o=[r,n]),n=o[1],h=(r=o[0]).match(Ud)||[],(n.match(Ud)||[]).length){for(;a=Ud.exec(n);)d=a[0],f=n.substring(b,a.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(c=h[x++]||"")&&(l=parseFloat(c)||0,g=c.substr((l+"").length),"="===d.charAt(1)&&(d=pp(l,d)+g),p=parseFloat(d),m=d.substr((p+"").length),b=Ud.lastIndex-m.length,m||(m=m||_d.units[e]||g,b===n.length&&(n+=m,_.e+=m)),g!==m&&(l=mg(t,e,c,m)||0),_._pt={_next:_._pt,p:f||1===x?f:",",s:l,c:p-l,m:u&&u<4||"zIndex"===e?Math.round:0});_.c=b<n.length?n.substring(b,n.length):""}else _.r="display"===e&&"none"===n?Xm:zm;return Hd.test(n)&&(_.e=0),this._pt=_,_},bg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},xg=function(t){var e=t.split(" "),r=e[0],n=e[1]||"50%";return"top"!==r&&"bottom"!==r&&"left"!==n&&"right"!==n||(t=r,r=n,n=t),e[0]=bg[r]||r,e[1]=bg[n]||n,e.join(" ")},vg=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,n,i,s=e.t,o=s.style,a=e.u,h=s._gsap;if("all"===a||!0===a)o.cssText="",n=1;else for(i=(a=a.split(",")).length;--i>-1;)r=a[i],Rm[r]&&(n=1,r="transformOrigin"===r?Km:Zm),cg(s,r);n&&(cg(s,Zm),h&&(h.svg&&s.removeAttribute("transform"),Eg(s,1),h.uncache=1,Jm(o)))}},yg={clearProps:function(t,e,r,n,i){if("isFromStart"!==i.data){var s=t._pt=new hm(t._pt,e,r,0,0,vg);return s.u=n,s.pr=-10,s.tween=i,t._props.push(r),1}}},Cg=[1,0,0,1,0,0],Tg={},Sg=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},wg=function(t){var e=ng(t,Zm);return Sg(e)?Cg:e.substr(7).match(kd).map(cp)},Ag=function(t,e){var r,n,i,s,o=t._gsap||hp(t),a=t.style,h=wg(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Cg:h:(h!==Cg||t.offsetParent||t===Sm||o.svg||(i=a.display,a.display="block",(r=t.parentNode)&&t.offsetParent||(s=1,n=t.nextElementSibling,Sm.appendChild(t)),h=wg(t),i?a.display=i:cg(t,"display"),s&&(n?r.insertBefore(t,n):r?r.appendChild(t):Sm.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},Mg=function(t,e,r,n,i,s){var o,a,h,l=t._gsap,u=i||Ag(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,p=l.xOffset||0,f=l.yOffset||0,m=u[0],g=u[1],_=u[2],b=u[3],x=u[4],v=u[5],y=e.split(" "),C=parseFloat(y[0])||0,T=parseFloat(y[1])||0;r?u!==Cg&&(a=m*b-g*_)&&(h=C*(-g/a)+T*(m/a)-(m*v-g*x)/a,C=C*(b/a)+T*(-_/a)+(_*v-b*x)/a,T=h):(C=(o=lg(t)).x+(~y[0].indexOf("%")?C/100*o.width:C),T=o.y+(~(y[1]||y[0]).indexOf("%")?T/100*o.height:T)),n||!1!==n&&l.smooth?(x=C-c,v=T-d,l.xOffset=p+(x*m+v*_)-x,l.yOffset=f+(x*g+v*b)-v):l.xOffset=l.yOffset=0,l.xOrigin=C,l.yOrigin=T,l.smooth=!!n,l.origin=e,l.originIsAbsolute=!!r,t.style[Km]="0px 0px",s&&(dg(s,l,"xOrigin",c,C),dg(s,l,"yOrigin",d,T),dg(s,l,"xOffset",p,l.xOffset),dg(s,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",C+" "+T)},Eg=function(t,e){var r=t._gsap||new Df(t);if("x"in r&&!e&&!r.uncache)return r;var n,i,s,o,a,h,l,u,c,d,p,f,m,g,_,b,x,v,y,C,T,S,w,A,M,E,L,R,P,B,O,I,D=t.style,F=r.scaleX<0,G="px",k="deg",U=getComputedStyle(t),N=ng(t,Km)||"0";return n=i=s=h=l=u=c=d=p=0,o=a=1,r.svg=!(!t.getCTM||!ug(t)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(D[Zm]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[Zm]?U[Zm]:"")),D.scale=D.rotate=D.translate="none"),g=Ag(t,r.svg),r.svg&&(r.uncache?(M=t.getBBox(),N=r.xOrigin-M.x+"px "+(r.yOrigin-M.y)+"px",A=""):A=!e&&t.getAttribute("data-svg-origin"),Mg(t,A||N,!!A||r.originIsAbsolute,!1!==r.smooth,g)),f=r.xOrigin||0,m=r.yOrigin||0,g!==Cg&&(v=g[0],y=g[1],C=g[2],T=g[3],n=S=g[4],i=w=g[5],6===g.length?(o=Math.sqrt(v*v+y*y),a=Math.sqrt(T*T+C*C),h=v||y?Om(y,v)*Pm:0,(c=C||T?Om(C,T)*Pm+h:0)&&(a*=Math.abs(Math.cos(c*Bm))),r.svg&&(n-=f-(f*v+m*C),i-=m-(f*y+m*T))):(I=g[6],B=g[7],L=g[8],R=g[9],P=g[10],O=g[11],n=g[12],i=g[13],s=g[14],l=(_=Om(I,P))*Pm,_&&(A=S*(b=Math.cos(-_))+L*(x=Math.sin(-_)),M=w*b+R*x,E=I*b+P*x,L=S*-x+L*b,R=w*-x+R*b,P=I*-x+P*b,O=B*-x+O*b,S=A,w=M,I=E),u=(_=Om(-C,P))*Pm,_&&(b=Math.cos(-_),O=T*(x=Math.sin(-_))+O*b,v=A=v*b-L*x,y=M=y*b-R*x,C=E=C*b-P*x),h=(_=Om(y,v))*Pm,_&&(A=v*(b=Math.cos(_))+y*(x=Math.sin(_)),M=S*b+w*x,y=y*b-v*x,w=w*b-S*x,v=A,S=M),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,u=180-u),o=cp(Math.sqrt(v*v+y*y+C*C)),a=cp(Math.sqrt(w*w+I*I)),_=Om(S,w),c=Math.abs(_)>2e-4?_*Pm:0,p=O?1/(O<0?-O:O):0),r.svg&&(A=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Sg(ng(t,Zm)),A&&t.setAttribute("transform",A))),Math.abs(c)>90&&Math.abs(c)<270&&(F?(o*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),e=e||r.uncache,r.x=n-((r.xPercent=n&&(!e&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+G,r.y=i-((r.yPercent=i&&(!e&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+G,r.z=s+G,r.scaleX=cp(o),r.scaleY=cp(a),r.rotation=cp(h)+k,r.rotationX=cp(l)+k,r.rotationY=cp(u)+k,r.skewX=c+k,r.skewY=d+k,r.transformPerspective=p+G,(r.zOrigin=parseFloat(N.split(" ")[2])||!e&&r.zOrigin||0)&&(D[Km]=Lg(N)),r.xOffset=r.yOffset=0,r.force3D=_d.force3D,r.renderTransform=r.svg?Fg:Lm?Dg:Pg,r.uncache=0,r},Lg=function(t){return(t=t.split(" "))[0]+" "+t[1]},Rg=function(t,e,r){var n=qp(e);return cp(parseFloat(e)+parseFloat(mg(t,"x",r+"px",n)))+n},Pg=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Dg(t,e)},Bg="0deg",Og="0px",Ig=") ",Dg=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,o=r.y,a=r.z,h=r.rotation,l=r.rotationY,u=r.rotationX,c=r.skewX,d=r.skewY,p=r.scaleX,f=r.scaleY,m=r.transformPerspective,g=r.force3D,_=r.target,b=r.zOrigin,x="",v="auto"===g&&t&&1!==t||!0===g;if(b&&(u!==Bg||l!==Bg)){var y,C=parseFloat(l)*Bm,T=Math.sin(C),S=Math.cos(C);C=parseFloat(u)*Bm,y=Math.cos(C),s=Rg(_,s,T*y*-b),o=Rg(_,o,-Math.sin(C)*-b),a=Rg(_,a,S*y*-b+b)}m!==Og&&(x+="perspective("+m+Ig),(n||i)&&(x+="translate("+n+"%, "+i+"%) "),(v||s!==Og||o!==Og||a!==Og)&&(x+=a!==Og||v?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Ig),h!==Bg&&(x+="rotate("+h+Ig),l!==Bg&&(x+="rotateY("+l+Ig),u!==Bg&&(x+="rotateX("+u+Ig),c===Bg&&d===Bg||(x+="skew("+c+", "+d+Ig),1===p&&1===f||(x+="scale("+p+", "+f+Ig),_.style[Zm]=x||"translate(0, 0)"},Fg=function(t,e){var r,n,i,s,o,a=e||this,h=a.xPercent,l=a.yPercent,u=a.x,c=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,g=a.scaleY,_=a.target,b=a.xOrigin,x=a.yOrigin,v=a.xOffset,y=a.yOffset,C=a.forceCSS,T=parseFloat(u),S=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Bm,p*=Bm,r=Math.cos(d)*m,n=Math.sin(d)*m,i=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=Bm,o=Math.tan(p-f),i*=o=Math.sqrt(1+o*o),s*=o,f&&(o=Math.tan(f),r*=o=Math.sqrt(1+o*o),n*=o)),r=cp(r),n=cp(n),i=cp(i),s=cp(s)):(r=m,s=g,n=i=0),(T&&!~(u+"").indexOf("px")||S&&!~(c+"").indexOf("px"))&&(T=mg(_,"x",u,"px"),S=mg(_,"y",c,"px")),(b||x||v||y)&&(T=cp(T+b-(b*r+x*i)+v),S=cp(S+x-(b*n+x*s)+y)),(h||l)&&(o=_.getBBox(),T=cp(T+h/100*o.width),S=cp(S+l/100*o.height)),o="matrix("+r+","+n+","+i+","+s+","+T+","+S+")",_.setAttribute("transform",o),C&&(_.style[Zm]=o)},Gg=function(t,e,r,n,i){var s,o,a=360,h=Md(i),l=parseFloat(i)*(h&&~i.indexOf("rad")?Pm:1)-n,u=n+l+"deg";return h&&("short"===(s=i.split("_")[1])&&(l%=a)!=l%180&&(l+=l<0?a:-360),"cw"===s&&l<0?l=(l+36e9)%a-~~(l/a)*a:"ccw"===s&&l>0&&(l=(l-36e9)%a-~~(l/a)*a)),t._pt=o=new hm(t._pt,e,r,n,l,Um),o.e=u,o.u="deg",t._props.push(r),o},kg=function(t,e){for(var r in e)t[r]=e[r];return t},Ug=function(t,e,r){var n,i,s,o,a,h,l,u=kg({},r._gsap),c=r.style;for(i in u.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),c[Zm]=e,n=Eg(r,1),cg(r,Zm),r.setAttribute("transform",s)):(s=getComputedStyle(r)[Zm],c[Zm]=e,n=Eg(r,1),c[Zm]=s),Rm)(s=u[i])!==(o=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(a=qp(s)!==(l=qp(o))?mg(r,i,s,l):parseFloat(s),h=parseFloat(o),t._pt=new hm(t._pt,n,i,a,h-a,km),t._pt.u=l||0,t._props.push(i));kg(n,u)};up("padding,margin,Width,Radius",(function(t,e){var r="Top",n="Right",i="Bottom",s="Left",o=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map((function(r){return e<2?t+r:"border"+r+t}));yg[e>1?"border"+t:t]=function(t,e,r,n,i){var s,a;if(arguments.length<4)return s=o.map((function(e){return gg(t,e,r)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(n+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,i)}}));var Ng,Hg,zg={name:"css",register:og,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var s,o,a,h,l,u,c,d,p,f,m,g,_,b,x,v,y=this._props,C=t.style,T=r.vars.startAt;for(c in wm||og(),this.styles=this.styles||eg(t),v=this.styles.props,this.tween=r,e)if("autoRound"!==c&&(o=e[c],!rp[c]||!zf(c,e,r,n,t,i)))if(l=typeof o,u=yg[c],"function"===l&&(l=typeof(o=o.call(r,n,t,i))),"string"===l&&~o.indexOf("random(")&&(o=of(o)),u)u(this,t,c,o,r)&&(x=1);else if("--"===c.substr(0,2))s=(getComputedStyle(t).getPropertyValue(c)+"").trim(),o+="",xf.lastIndex=0,xf.test(s)||(d=qp(s),p=qp(o)),p?d!==p&&(s=mg(t,c,s,p)+p):d&&(o+=d),this.add(C,"setProperty",s,o,n,i,0,0,c),y.push(c),v.push(c,0,C[c]);else if("undefined"!==l){if(T&&c in T?(s="function"==typeof T[c]?T[c].call(r,n,t,i):T[c],Md(s)&&~s.indexOf("random(")&&(s=of(s)),qp(s+"")||"auto"===s||(s+=_d.units[c]||qp(gg(t,c))||""),"="===(s+"").charAt(1)&&(s=gg(t,c))):s=gg(t,c),h=parseFloat(s),(f="string"===l&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),c in Gm&&("autoAlpha"===c&&(1===h&&"hidden"===gg(t,"visibility")&&a&&(h=0),v.push("visibility",0,C.visibility),dg(this,C,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=Gm[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in Rm)if(this.styles.save(c),g||((_=t._gsap).renderTransform&&!e.parseTransform||Eg(t,e.parseTransform),b=!1!==e.smoothOrigin&&_.smooth,(g=this._pt=new hm(this._pt,C,Zm,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===c)this._pt=new hm(this._pt,_,"scaleY",_.scaleY,(f?pp(_.scaleY,f+a):a)-_.scaleY||0,km),this._pt.u=0,y.push("scaleY",c),c+="X";else{if("transformOrigin"===c){v.push(Km,0,C[Km]),o=xg(o),_.svg?Mg(t,o,0,b,0,this):((p=parseFloat(o.split(" ")[2])||0)!==_.zOrigin&&dg(this,_,"zOrigin",_.zOrigin,p),dg(this,C,c,Lg(s),Lg(o)));continue}if("svgOrigin"===c){Mg(t,o,1,b,0,this);continue}if(c in Tg){Gg(this,_,c,h,f?pp(h,f+o):o);continue}if("smoothOrigin"===c){dg(this,_,"smooth",_.smooth,o);continue}if("force3D"===c){_[c]=o;continue}if("transform"===c){Ug(this,o,t);continue}}else c in C||(c=sg(c)||c);if(m||(a||0===a)&&(h||0===h)&&!Fm.test(o)&&c in C)a||(a=0),(d=(s+"").substr((h+"").length))!==(p=qp(o)||(c in _d.units?_d.units[c]:d))&&(h=mg(t,c,s,p)),this._pt=new hm(this._pt,m?_:C,c,h,(f?pp(h,f+a):a)-h,m||"px"!==p&&"zIndex"!==c||!1===e.autoRound?km:Hm),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=Nm);else if(c in C)_g.call(this,t,c,s,f?f+o:o);else if(c in t)this.add(t,c,s||t[c],f?f+o:o,n,i);else if("parseTransform"!==c)continue;m||(c in C?v.push(c,0,C[c]):v.push(c,1,s||t[c])),y.push(c)}x&&am(this)},render:function(t,e){if(e.tween._time||!Em())for(var r=e._pt;r;)r.r(t,r.d),r=r._next;else e.styles.revert()},get:gg,aliases:Gm,getSetter:function(t,e,r){var n=Gm[e];return n&&n.indexOf(",")<0&&(e=n),e in Rm&&e!==Km&&(t._gsap.x||gg(t,"x"))?r&&Mm===r?"scale"===e?jm:Ym:(Mm=r||{})&&("scale"===e?qm:$m):t.style&&!Rd(t.style[e])?Vm:~e.indexOf("-")?Wm:Jf(t,e)},core:{_removeProperty:cg,_getMatrix:Ag}};ym.utils.checkPrefix=sg,ym.core.getStyleSaver=eg,Hg=up("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(Ng="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Rm[t]=1})),up(Ng,(function(t){_d.units[t]="deg",Tg[t]=1})),Gm[Hg[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Ng,up("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Gm[e[1]]=Hg[e[0]]})),up("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){_d.units[t]="px"})),ym.registerPlugin(zg);var Xg,Vg,Wg,Yg,jg,qg,$g,Zg,Kg,Qg=ym.registerPlugin(zg)||ym,Jg=(Qg.core.Tween,function(){return"undefined"!=typeof window}),t_=function(){return Xg||Jg()&&(Xg=window.gsap)&&Xg.registerPlugin&&Xg},e_=function(t){return"function"==typeof t},r_=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n_=.212671,i_=.71516,s_=.072169,o_=function(t){return e_(Yg[t])?Yg[t]:Yg.filters[t]},a_=function(t,e){var r,n,i=[],s=0,o=0;for(r=0;r<4;r++){for(n=0;n<5;n++)o=4===n?t[s+4]:0,i[s+n]=t[s]*e[n]+t[s+1]*e[n+5]+t[s+2]*e[n+10]+t[s+3]*e[n+15]+o;s+=5}return i},h_=function(t,e){var r=1-e,n=r*n_,i=r*i_,s=r*s_;return a_([n+e,i,s,0,0,n,i+e,s,0,0,n,i,s+e,0,0,0,0,0,1,0],t)},l_=function(t,e,r){var n=Vg(e),i=n[0]/255,s=n[1]/255,o=n[2]/255,a=1-r;return a_([a+r*i*n_,r*i*i_,r*i*s_,0,0,r*s*n_,a+r*s*i_,r*s*s_,0,0,r*o*n_,r*o*i_,a+r*o*s_,0,0,0,0,0,1,0],t)},u_=function(t,e){e*=Math.PI/180;var r=Math.cos(e),n=Math.sin(e);return a_([n_+r*(1-n_)+n*-n_,i_+r*-i_+n*-i_,s_+r*-s_+n*(1-s_),0,0,n_+r*-n_+.143*n,i_+.28484*r+.14*n,s_+r*-s_+-.283*n,0,0,n_+r*-n_+-.787329*n,i_+r*-i_+n*i_,s_+r*(1-s_)+n*s_,0,0,0,0,0,1,0,0,0,0,0,1],t)},c_=function(t,e){return a_([e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0],t)},d_=function(t,e){for(var r,n=o_(e),i=t.filters||[],s=i.length;--s>-1;)if(i[s]instanceof n)return i[s];return r=new n,"BlurFilter"===e&&(r.blur=0),i.push(r),t.filters=i,r},p_=function(t,e,r,n){e.add(r,t,r[t],n[t]),e._props.push(t)},f_=function(t,e){var r=new(o_("ColorMatrixFilter"));return r.matrix=e,r.brightness(t,!0),r.matrix},m_={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},g_=function(t,e,r){var n,i,s,o=d_(t,"ColorMatrixFilter"),a=t._gsColorMatrixFilter=t._gsColorMatrixFilter||function(t){var e,r={};for(e in t)r[e]=t[e];return r}(m_),h=e.combineCMF&&!("colorMatrixFilter"in e&&!e.colorMatrixFilter);s=o.matrix,e.resolution&&(o.resolution=e.resolution),e.matrix&&e.matrix.length===s.length?(i=e.matrix,1!==a.contrast&&p_("contrast",r,a,m_),a.hue&&p_("hue",r,a,m_),1!==a.brightness&&p_("brightness",r,a,m_),a.colorizeAmount&&(p_("colorize",r,a,m_),p_("colorizeAmount",r,a,m_)),1!==a.saturation&&p_("saturation",r,a,m_)):(i=r_.slice(),null!=e.contrast?(i=c_(i,+e.contrast),p_("contrast",r,a,e)):1!==a.contrast&&(h?i=c_(i,a.contrast):p_("contrast",r,a,m_)),null!=e.hue?(i=u_(i,+e.hue),p_("hue",r,a,e)):a.hue&&(h?i=u_(i,a.hue):p_("hue",r,a,m_)),null!=e.brightness?(i=f_(+e.brightness,i),p_("brightness",r,a,e)):1!==a.brightness&&(h?i=f_(a.brightness,i):p_("brightness",r,a,m_)),null!=e.colorize?(e.colorizeAmount="colorizeAmount"in e?+e.colorizeAmount:1,i=l_(i,e.colorize,e.colorizeAmount),p_("colorize",r,a,e),p_("colorizeAmount",r,a,e)):a.colorizeAmount&&(h?i=l_(i,a.colorize,a.colorizeAmount):(p_("colorize",r,a,m_),p_("colorizeAmount",r,a,m_))),null!=e.saturation?(i=h_(i,+e.saturation),p_("saturation",r,a,e)):1!==a.saturation&&(h?i=h_(i,a.saturation):p_("saturation",r,a,m_))),n=i.length;for(;--n>-1;)i[n]!==s[n]&&r.add(s,n,s[n],i[n],"colorMatrixFilter");r._props.push("colorMatrixFilter")},__=function(t,e){var r=e.t,n=e.p,i=e.color;(0,e.set)(r,n,i[0]<<16|i[1]<<8|i[2])},b_=function(t,e){var r=e.g;r&&(r.dirty++,r.clearDirty++)},x_=function(t,e){e.t.visible=!!e.t.alpha},v_=function(t,e,r,n){var i=t[e],s=Vg(e_(i)?t[e.indexOf("set")||!e_(t["get"+e.substr(3)])?e:"get"+e.substr(3)]():i),o=Vg(r);n._pt=new jg(n._pt,t,e,0,0,__,{t,p:e,color:s,set:qg(t,e)}),n.add(s,0,s[0],o[0]),n.add(s,1,s[1],o[1]),n.add(s,2,s[2],o[2])},y_={tint:1,lineColor:1,fillColor:1},C_="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),T_={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},S_={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},w_=Math.PI/180,A_=function(t){return"string"==typeof t},M_=function(t){return A_(t)&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*w_:t*w_},E_=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e5*(e.s+e.c*t))/1e5,e)},L_=function(t,e,r,n,i,s){var o,a,h=360*(s?w_:1),l=A_(i),u=l&&"="===i.charAt(1)?+(i.charAt(0)+"1"):0,c=parseFloat(u?i.substr(2):i)*(s?w_:1),d=u?c*u:c-n,p=n+d;return l&&("short"===(o=i.split("_")[1])&&(d%=h)!=d%(h/2)&&(d+=d<0?h:-h),"cw"===o&&d<0?d=(d+1e10*h)%h-~~(d/h)*h:"ccw"===o&&d>0&&(d=(d-1e10*h)%h-~~(d/h)*h)),t._pt=a=new jg(t._pt,e,r,n,d,E_),a.e=p,a},R_=function(){Wg||(Xg=t_(),Yg=Wg=Yg||Jg()&&window.PIXI,$g=Yg&&Yg.VERSION&&"4"===Yg.VERSION.charAt(0),Vg=function(t){return Xg.utils.splitColor("0x"===(t+"").substr(0,2)?"#"+t.substr(2):t)})};for(Zg=0;Zg<C_.length;Zg++)Kg=C_[Zg],T_[Kg+"X"]=Kg,T_[Kg+"Y"]=Kg;var P_={version:"3.12.5",name:"pixi",register:function(t,e,r){Xg=t,jg=r,qg=e.getSetter,R_()},headless:!0,registerPIXI:function(t){Yg=t},init:function(t,e,r,n,i){if(Yg||R_(),!Yg)return!1;var s,o,a,h,l,u,c,d,p;for(u in e){if(s=T_[u],a=e[u],s)o=~u.charAt(u.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[s],o,t[s][o],"skew"===s?M_(a):a,0,0,0,0,0,1);else if("scale"===u||"anchor"===u||"pivot"===u||"tileScale"===u)this.add(t[u],"x",t[u].x,a),this.add(t[u],"y",t[u].y,a);else if("rotation"===u||"angle"===u)L_(this,t,u,t[u],a,"rotation"===u);else if(S_[u])h||(g_(t,e.colorMatrixFilter||e,this),h=!0);else if("blur"===u||"blurX"===u||"blurY"===u||"blurPadding"===u){if(l=d_(t,"BlurFilter"),this.add(l,u,l[u],a),0!==e.blurPadding)for(c=e.blurPadding||2*Math.max(l[u],a),d=t.filters.length;--d>-1;)t.filters[d].padding=Math.max(t.filters[d].padding,c)}else if(y_[u])if(("lineColor"===u||"fillColor"===u)&&t instanceof Yg.Graphics)for(p=(t.geometry||t).graphicsData,this._pt=new jg(this._pt,t,u,0,0,b_,{g:t.geometry||t}),d=p.length;--d>-1;)v_($g?p[d]:p[d][u.substr(0,4)+"Style"],$g?u:"color",a,this);else v_(t,u,a,this);else"autoAlpha"===u?(this._pt=new jg(this._pt,t,"visible",0,0,x_),this.add(t,"alpha",t.alpha,a),this._props.push("alpha","visible")):"resolution"!==u&&this.add(t,u,"get",a);this._props.push(u)}}};t_()&&Xg.registerPlugin(P_),Qg.registerPlugin(P_),P_.registerPIXI(t);class B_{constructor(t){this.animateObj=t.object,this.from=t.from,this.to=t.to,this.delay=t.delay||0,this.duration=t.duration||1,this.ease=t.ease||"none",this.repeat=t.repeat||0,this.yoyo=!!t.yoyo,this.repeatDelay=t.repeatDelay||0,this.onRepeat=t.onRepeat,this.onComplete=t.onComplete,this.onStart=t.onStart,this.animation=this._createAnimation()}onStartHandler(){"function"==typeof this.onStart&&this.onStart()}onRepeatHandler(){"function"==typeof this.onRepeat&&this.onRepeat()}onCompleteHandler(){"function"==typeof this.onComplete&&this.onComplete()}start(){var t;return null===(t=this.animation)||void 0===t||t.restart(!0),this}pause(){this.animation.pause()}killAnim(){var t;null===(t=this.animation)||void 0===t||t.kill()}toEnd(){var t;null===(t=this.animation)||void 0===t||t.progress(1)}resume(){this.animation.resume()}_createAnimation(){return Qg.fromTo(this.animateObj,this.from?{pixi:this.from}:{},{delay:this.delay,pixi:this.to,duration:this.duration,ease:this.ease,repeat:this.repeat,yoyo:this.yoyo,paused:!0,repeatDelay:this.repeatDelay,onRepeat:()=>{this.onRepeatHandler()},onStart:()=>{this.onStartHandler()},onComplete:()=>{this.onCompleteHandler()}})}}const O_=(t,e,r=.1)=>(Qg.killTweensOf(t),t.eventMode="none",new B_({duration:r,object:t,from:{alpha:1},to:{alpha:0},ease:"none",onComplete:()=>{t.visible=!1,e&&e()}}).start()),I_=(t,e)=>{Wc.play(qc,{volume:.8}),new B_({object:t,from:{scaleY:1,scaleX:1},to:{scaleY:.9,scaleX:.9},duration:.1,yoyo:!0,repeat:1,onStart:()=>{t.eventMode="none"},onComplete:()=>{t.eventMode="static",e&&e()}}).start()},D_=(t,e,r,n,i)=>{new B_({delay:r,duration:n,object:t,to:e,ease:"sine.inOut",onComplete:i}).start()},F_=(t,e)=>Qg.delayedCall(t,e),G_=(t,e,r=.1)=>new B_({duration:r,object:t,to:{scale:e}}).start();class k_{constructor({game:t}){this.game=t,this.textures=t.textures,this.container=new $.mc}update(t){}show(t){if(t)return this.container.visible=!0,void(this.container.alpha=1);((t,e,r=.1)=>{Qg.killTweensOf(t),new B_({duration:r,object:t,from:{alpha:0},to:{alpha:1},ease:"none",onStart:()=>{t.visible=!0},onComplete:()=>{t.eventMode="auto",e&&e()}}).start()})(this.container)}hide(t){if(t)return this.container.visible=!1,void(this.container.alpha=0);O_(this.container)}addBlur(){this.container.filters=[new Cn],this.container.eventMode="none"}hideBlur(){this.container.filters=[],this.container.eventMode="auto"}resize(t){var e,r,n,i;null===(r=null===(e=this.container)||void 0===e?void 0:e.scale)||void 0===r||r.set(t.scale),null===(i=null===(n=this.container)||void 0===n?void 0:n.position)||void 0===i||i.set(t.x,t.y)}}var U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H_,z_={exports:{}};H_=z_,function(){var t,e;e=function(t){return H_.exports=t},t={linear:function(t,e,r,n){return r*t/n+e},easeInQuad:function(t,e,r,n){return r*(t/=n)*t+e},easeOutQuad:function(t,e,r,n){return-r*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,n){return r*(t/=n)*t*t+e},easeOutCubic:function(t,e,r,n){return r*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,n){return r*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,r,n){return-r*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,n){return r*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,r,n){return r*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,n){return-r*Math.cos(t/n*(Math.PI/2))+r+e},easeOutSine:function(t,e,r,n){return r*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,r,n){return-r/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,r,n){return 0===t?e:r*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,r,n){return t===n?e+r:r*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,r,n){return(t/=n/2)<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,r,n){return-r*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,r,n){return r*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,r,n){return(t/=n/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,n){var i,s,o;return o=1.70158,0===t||(t/=n),(s=0)||(s=.3*n),(i=r)<Math.abs(r)?(i=r,o=s/4):o=s/(2*Math.PI)*Math.asin(r/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)+e},easeOutElastic:function(t,e,r,n){var i,s,o;return o=1.70158,0===t||(t/=n),(s=0)||(s=.3*n),(i=r)<Math.abs(r)?(i=r,o=s/4):o=s/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*t)*Math.sin((t*n-o)*(2*Math.PI)/s)+r+e},easeInOutElastic:function(t,e,r,n){var i,s,o;return o=1.70158,0===t||(t/=n/2),(s=0)||(s=n*(.3*1.5)),(i=r)<Math.abs(r)?(i=r,o=s/4):o=s/(2*Math.PI)*Math.asin(r/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)*.5+r+e},easeInBack:function(t,e,r,n,i){return void 0===i&&(i=1.70158),r*(t/=n)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,r,n,i){return void 0===i&&(i=1.70158),r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,r,n,i){return void 0===i&&(i=1.70158),(t/=n/2)<1?r/2*(t*t*((1+(i*=1.525))*t-i))+e:r/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},easeInBounce:function(e,r,n,i){return n-t.easeOutBounce(i-e,0,n,i)+r},easeOutBounce:function(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(e,r,n,i){return e<i/2?.5*t.easeInBounce(2*e,0,n,i)+r:.5*t.easeOutBounce(2*e-i,0,n,i)+.5*n+r}},e(t)}.call(U_);const X_=N_(z_.exports);function V_(t,e){return t?"function"==typeof t?t:"string"==typeof t?X_[t]:void 0:X_[e]}class W_{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new st.M(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var t;null==(t=this.viewport.options.events.domElement)||t.removeEventListener("wheel",this.wheelFunction)}down(t){if(!this.viewport.pause&&this.viewport.visible){if("mouse"===t.pointerType?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),1===this.count()){this.last=t.global.clone();const e=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);e&&e.isActive()||r&&r.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.visible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const e=t.global.x-this.last.x,r=t.global.y-this.last.y;(this.checkThreshold(e)||this.checkThreshold(r))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.visible)return;"mouse"===t.pointerType&&(this.isMouseDown=!1),"mouse"!==t.pointerType&&this.remove(t.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new wn.b;return this.viewport.options.events.mapPositionToPoint(e,t.clientX,t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.visible)return;const e=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}const Y_=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class j_{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,r=Y_.length){const n=this.plugins[t];n&&n.destroy(),this.plugins[t]=e;const i=Y_.indexOf(t);-1!==i&&Y_.splice(i,1),Y_.splice(r,0,t),this.sort()}get(t,e){var r;return e&&null!=(r=this.plugins[t])&&r.paused?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach((t=>{t.destroy()})),this.plugins={},this.sort()}remove(t){var e;this.plugins[t]&&(null==(e=this.plugins[t])||e.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){var e;null==(e=this.plugins[t])||e.pause()}resume(t){var e;null==(e=this.plugins[t])||e.resume()}sort(){this.list=[];for(const t of Y_)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const r of this.list)r.down(t)&&(e=!0);return e}move(t){let e=!1;for(const r of this.viewport.plugins.list)r.move(t)&&(e=!0);return e}up(t){let e=!1;for(const r of this.list)r.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const r of this.list)r.wheel(t)&&(e=!0);return e}}class q_{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const $_={removeOnInterrupt:!1,ease:"linear",time:1e3};class Z_ extends q_{constructor(t,e={}){super(t),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},$_,e),this.options.ease=V_(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),null!==this.width&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),null!==this.height&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),null!==this.width&&this.parent.fitWidth(this.width,this.keepCenter,null===this.height),null!==this.height&&this.parent.fitHeight(this.height,this.keepCenter,null===this.width),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const e=new wn.b(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const t=this.parent.width,r=this.parent.height;this.complete(),(t!==this.parent.width||r!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}else{const t=this.options.ease(this.time,0,1,this.options.time);if(null!==this.width){const e=this.startWidth,r=this.deltaWidth;this.parent.fitWidth(e+r*t,this.keepCenter,null===this.height)}if(null!==this.height){const e=this.startHeight,r=this.deltaHeight;this.parent.fitHeight(e+r*t,this.keepCenter,null===this.width)}if(null===this.width?this.parent.scale.x=this.parent.scale.y:null===this.height&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const e=this.startX,r=this.startY,n=this.deltaX,i=this.deltaY,s=new wn.b(this.parent.x,this.parent.y);this.parent.moveCenter(e+n*t,r+i*t),this.parent.emit("moved",{viewport:this.parent,original:s,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}}}const K_={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Q_ extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},K_,e),this.ease=V_(this.options.ease,"easeInOutSine"),this.options.sides?"all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?(this.right=this.left=!0,this.top=this.bottom=!1):"vertical"===this.options.sides?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right")):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();"center"===r?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==r.indexOf("left")?-1:-1!==r.indexOf("right")?1:0,this.underflowY=-1!==r.indexOf("top")?-1:-1!==r.indexOf("bottom")?1:0),this.reset()}isActive(){return null!==this.toX||null!==this.toY}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=typeof t.x>"u"?0:t.x,r=typeof t.y>"u"?0:t.y,n=typeof t.width>"u"?this.parent.worldWidth:t.width,i=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>n,top:this.parent.top<r,bottom:this.parent.bottom>i,topLeft:new wn.b(e*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new wn.b(n*this.parent.scale.x-this.parent.screenWidth,i*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new wn.b(0,0),bottomRight:new wn.b(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var t,e;if(this.paused)return;let r,n=this.parent.plugins.get("decelerate",!0);n&&(n.x||n.y)&&(n.x&&n.percentChangeX===(null==(t=n.options)?void 0:t.friction)||n.y&&n.percentChangeY===(null==(e=n.options)?void 0:e.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(n.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(n.percentChangeY=this.options.friction));const i=this.parent.plugins.get("drag",!0)||{},s=this.parent.plugins.get("pinch",!0)||{};if(n=n||{},!(null!=i&&i.active||null!=s&&s.active||this.toX&&this.toY||n.x&&n.y)){r=r||this.oob();const t=r.topLeft,e=r.bottomRight;if(!this.toX&&!n.x){let n=null;r.left&&this.left?n=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-t.x:r.right&&this.right&&(n=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-e.x),null!==n&&this.parent.x!==n&&(this.toX={time:0,start:this.parent.x,delta:n-this.parent.x,end:n},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!n.y){let n=null;r.top&&this.top?n=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-t.y:r.bottom&&this.bottom&&(n=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-e.y),null!==n&&this.parent.y!==n&&(this.toY={time:0,start:this.parent.y,delta:n-this.parent.y,end:n},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const J_={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class tb extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},J_,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t=new wn.b(this.parent.x,this.parent.y),e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,r=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,r=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const eb={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class rb extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},eb,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){const t=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/t,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if("number"==typeof this.options.minScale)t.x=this.options.minScale,t.y=this.options.minScale;else if(null!==this.options.minScale){const e=this.options.minScale;t.x=typeof e.x>"u"?null:e.x,t.y=typeof e.y>"u"?null:e.y}if("number"==typeof this.options.maxScale)e.x=this.options.maxScale,e.y=this.options.maxScale;else if(null!==this.options.maxScale){const t=this.options.maxScale;e.x=typeof t.x>"u"?null:t.x,e.y=typeof t.y>"u"?null:t.y}let r=this.parent.scale.x,n=this.parent.scale.y;null!==t.x&&r<t.x&&(r=t.x),null!==e.x&&r>e.x&&(r=e.x),null!==t.y&&n<t.y&&(n=t.y),null!==e.y&&n>e.y&&(n=e.y),(r!==this.parent.scale.x||n!==this.parent.scale.y)&&(this.parent.scale.set(r,n),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const nb={friction:.98,bounce:.8,minSpeed:.01},ib=16;class sb extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},nb,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",(t=>this.handleMoved(t)))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!(!this.x&&!this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(1===t||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];"clamp-x"===t.type&&t.original?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&t.original&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(0===this.parent.input.count()&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const r=t-e.time;this.x=(this.parent.x-e.x)/r,this.y=(this.parent.y-e.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){typeof(t=t||{}).x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,r=this.timeSinceRelease,n=this.timeSinceRelease+t;if(this.x){const e=this.percentChangeX,i=Math.log(e);this.parent.x+=this.x*ib/i*(Math.pow(e,n/ib)-Math.pow(e,r/ib)),this.x*=Math.pow(this.percentChangeX,t/ib)}if(this.y){const e=this.percentChangeY,i=Math.log(e);this.parent.y+=this.y*ib/i*(Math.pow(e,n/ib)-Math.pow(e,r/ib)),this.y*=Math.pow(this.percentChangeY,t/ib)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const ob={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class ab extends q_{constructor(t,e={}){super(t),this.windowEventHandlers=[],this.options=Object.assign({},ob,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){this.addWindowEventHandler("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})),this.addWindowEventHandler("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}))}addWindowEventHandler(t,e){typeof window>"u"||(window.addEventListener(t,e),this.windowEventHandlers.push({event:t,handler:e}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach((({event:t,handler:e})=>{window.removeEventListener(t,e)}))}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e="mouse"===t.pointerType,r=this.parent.input.count();return!(!(1===r||r>1&&!this.parent.plugins.get("pinch",!0))||e&&!this.mouse[t.button])}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType}down(t){return!(this.paused||!this.options.pressDrag||(this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},(this.parent.parent||this.parent).toLocal(this.last,void 0,this.last),this.current=t.pointerId,0):(this.last=null,1)))}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.global.x,r=t.global.y,n=this.parent.input.count();if(1===n||n>1&&!this.parent.plugins.get("pinch",!0)){const n={x:e,y:r};(this.parent.parent||this.parent).toLocal(n,void 0,n);const i=n.x-this.last.x,s=n.y-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(i)||this.yDirection&&this.parent.input.checkThreshold(s))return this.xDirection&&(this.parent.x+=(n.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(n.y-this.last.y)*this.options.factor),this.last=n,this.moved||this.parent.emit("drag-start",{event:t,screen:new wn.b(this.last.x,this.last.y),world:this.parent.toWorld(new wn.b(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(1===e.length){const t=e[0];return t.last&&(this.last={x:t.last.x,y:t.last.y},this.current=t.id),this.moved=!1,!0}if(this.last&&this.moved){const e=new wn.b(this.last.x,this.last.y);return(this.parent.parent||this.parent).toGlobal(e,e,!0),this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const e=t.deltaMode?this.options.lineHeight:1,r=[t.deltaX,t.deltaY],[n,i]=this.options.wheelSwapAxes?r.reverse():r;return this.xDirection&&(this.parent.x+=n*e*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=i*e*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const hb={speed:0,acceleration:null,radius:null};class lb extends q_{constructor(t,e,r={}){super(t),this.target=e,this.options=Object.assign({},hb,r),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let r=this.target.x,n=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;{const t=Math.atan2(this.target.y-e.y,this.target.x-e.x);r=this.target.x-Math.cos(t)*this.options.radius,n=this.target.y-Math.sin(t)*this.options.radius}}const i=r-e.x,s=n-e.y;if(i||s)if(this.options.speed)if(this.options.acceleration){const t=Math.atan2(n-e.y,r-e.x),o=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));if(o){const a=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=o>a?{x:Math.min(this.velocity.x+(this.options.acceleration,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration,this.options.speed))}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const h=Math.cos(t)*this.velocity.x,l=Math.sin(t)*this.velocity.y,u=Math.abs(h)>Math.abs(i)?r:e.x+h,c=Math.abs(l)>Math.abs(s)?n:e.y+l;this.parent.moveCenter(u,c),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const t=Math.atan2(n-e.y,r-e.x),o=Math.cos(t)*this.options.speed,a=Math.sin(t)*this.options.speed,h=Math.abs(o)>Math.abs(i)?r:e.x+o,l=Math.abs(a)>Math.abs(s)?n:e.y+a;this.parent.moveCenter(h,l),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,n),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const ub={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class cb extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},ub,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared="number"==typeof this.options.radius?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.screenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused||"mouse"!==t.pointerType&&1!==t.pointerId||!this.options.allowButtons&&0!==t.buttons)return!1;const e=t.global.x,r=t.global.y;if(this.radiusSquared){const t=this.parent.toScreen(this.parent.center);if(Math.pow(t.x-e,2)+Math.pow(t.y-r,2)>=this.radiusSquared){const n=Math.atan2(t.y-r,t.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(n))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(n))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(n)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(n)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*.06:null!==this.bottom&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const db={noDrag:!1,percent:1,center:null,factor:1,axis:"all"},pb=new wn.b;class fb extends q_{constructor(t,e={}){super(t),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},db,e)}down(){return this.parent.input.count()>=2&&(this.active=!0,!0)}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const{x:e,y:r}=(this.parent.parent||this.parent).toLocal(t.global,void 0,pb),n=this.parent.input.touches;if(n.length>=2){const i=n[0],s=n[1],o=i.last&&s.last?Math.sqrt(Math.pow(s.last.x-i.last.x,2)+Math.pow(s.last.y-i.last.y,2)):null;if(i.id===t.pointerId?i.last={x:e,y:r,data:t}:s.id===t.pointerId&&(s.last={x:e,y:r,data:t}),o){let t;const e=new wn.b(i.last.x+(s.last.x-i.last.x)/2,i.last.y+(s.last.y-i.last.y)/2);this.options.center||(t=this.parent.toLocal(e,this.parent.parent||this.parent));let r=Math.sqrt(Math.pow(s.last.x-i.last.x,2)+Math.pow(s.last.y-i.last.y,2));r=0===r?r=1e-10:r;const n=(1-o/r)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=n),this.isAxisY()&&(this.parent.scale.y+=n),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:e});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const r=(this.parent.parent||this.parent).toLocal(t,this.parent);this.parent.x+=(e.x-r.x)*this.options.factor,this.parent.y+=(e.y-r.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(e.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(e.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=e,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return!!(this.pinching&&this.parent.input.touches.length<=1)&&(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0)}}const mb={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class gb extends q_{constructor(t,e,r,n={}){super(t),this.options=Object.assign({},mb,n),this.ease=V_(n.ease,"easeInOutSine"),this.x=e,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(0===this.parent.input.count()){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){const e=this.snapping;let r,n,i;e.time+=t;const s=this.startX,o=this.startY,a=this.deltaX,h=this.deltaY;if(e.time>this.options.time)r=!0,n=s+a,i=o+h;else{const t=this.ease(e.time,0,1,this.options.time);n=s+a*t,i=o+h*t}this.options.topLeft?this.parent.moveCorner(n,i):this.parent.moveCenter(n,i),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;(t.x!==this.x||t.y!==this.y)&&this.snapStart()}}}const _b={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class bb extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},_b,e),this.ease=V_(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,n=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:r-t,deltaY:n-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused||this.options.interrupt&&0!==this.parent.input.count())return;let e;if(!this.options.center&&!this.options.noMove&&(e=this.parent.center),this.snapping){if(this.snapping){const r=this.snapping;if(r.time+=t,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const t=this.snapping,e=this.ease(t.time,t.startX,t.deltaX,this.options.time),r=this.ease(t.time,t.startY,t.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/e,this.parent.scale.y=this.parent.screenHeight/r}const n=this.parent.plugins.get("clamp-zoom",!0);n&&n.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping()}resume(){this.snapping=null,super.resume()}}const xb={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class vb extends q_{constructor(t,e={}){super(t),this.options=Object.assign({},xb,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){typeof window>"u"||(window.addEventListener("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)})),window.addEventListener("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const n=this.parent.plugins.get("clamp-zoom",!0);if(n&&n.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const e=this.parent.parent||this.parent;e.toLocal(r,this.parent,r);const n=e.toLocal(t);this.parent.x+=n.x-r.x,this.parent.y+=n.y-r.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,"number"==typeof this.options.smooth&&this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),r=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,n=Math.pow(2,(1+this.options.percent)*r);let i;this.options.center||(i=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=n),this.isAxisY()&&(this.parent.scale.y*=n),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const t=this.parent.parent||this.parent;t.toLocal(i,this.parent,i);const r=t.toLocal(e);this.parent.x+=r.x-i.x,this.parent.y+=r.y-i.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),r=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,n=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const t={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+t.x)*n-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+t.y)*n-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=n),this.isAxisY()&&(this.parent.scale.y*=n),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const r=this.parent.parent||this.parent;r.toLocal(t,this.parent,t);const n=r.toLocal(e);this.parent.x+=n.x-t.x,this.parent.y+=n.y-t.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}const yb={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Yn.R.shared,allowPreserveDragOutside:!1};class Cb extends $.mc{constructor(t){super(),this._disableOnContextMenu=t=>t.preventDefault(),this.options={...yb,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new W_(this),this.plugins=new j_(this)}destroy(t){var e;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&(null==(e=this.options.events.domElement)||e.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new st.M(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=(typeof window>"u"?0:window.innerWidth),e=(typeof window>"u"?0:window.innerHeight),r,n){this.screenWidth=t,this.screenHeight=e,typeof r<"u"&&(this._worldWidth=r),typeof n<"u"&&(this._worldHeight=n),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new st.M(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new wn.b(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new wn.b(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new wn.b(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,r;"number"==typeof t[0]?(e=t[0],r=t[1]):(e=t[0].x,r=t[0].y);const n=(this.worldScreenWidth/2-e)*this.scale.x,i=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==n||this.y!==i)&&(this.position.set(n,i),this.plugins.reset(),this.dirty=!0),this}get corner(){return new wn.b(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,r;return 1===t.length?(e=-t[0].x*this.scale.x,r=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,r=-t[1]*this.scale.y),(e!==this.x||r!==this.y)&&(this.position.set(e,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const r=this.screenWidth/t,n=this.screenHeight/e;return Math.min(r,n)}findCover(t,e){const r=this.screenWidth/t,n=this.screenHeight/e;return Math.max(r,n)}fitWidth(t=this.worldWidth,e,r=!0,n){let i;e&&(i=this.center),this.scale.x=this.screenWidth/t,r&&(this.scale.y=this.scale.x);const s=this.plugins.get("clamp-zoom",!0);return!n&&s&&s.clamp(),e&&i&&this.moveCenter(i),this}fitHeight(t=this.worldHeight,e,r=!0,n){let i;e&&(i=this.center),this.scale.y=this.screenHeight/t,r&&(this.scale.x=this.scale.y);const s=this.plugins.get("clamp-zoom",!0);return!n&&s&&s.clamp(),e&&i&&this.moveCenter(i),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,r=this.worldHeight){let n;t&&(n=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&n&&this.moveCenter(n),this}setZoom(t,e){let r;e&&(r=this.center),this.scale.set(t);const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),e&&r&&this.moveCenter(r),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new bb(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new wn.b(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new st.M(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new ab(this,t)),this}clamp(t){return this.plugins.add("clamp",new tb(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new sb(this,t)),this}bounce(t){return this.plugins.add("bounce",new Q_(this,t)),this}pinch(t){return this.plugins.add("pinch",new fb(this,t)),this}snap(t,e,r){return this.plugins.add("snap",new gb(this,t,e,r)),this}follow(t,e){return this.plugins.add("follow",new lb(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new vb(this,t)),this}animate(t){return this.plugins.add("animate",new Z_(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new rb(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new cb(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,r,n,i){i&&(r>this.worldScreenWidth||n>this.worldScreenHeight)&&(this.fit(!0,r,n),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let s=!1;t<this.left?(this.left=t,s=!0):t+r>this.right&&(this.right=t+r,s=!0),e<this.top?(this.top=e,s=!0):e+n>this.bottom&&(this.bottom=e+n,s=!0),s&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const Tb=1e3;class Sb{constructor(t){this.game=t.game,this.viewport=new Cb({events:this.game.app.renderer.events}),this.game.app.stage.addChild(this.viewport)}create(t,e){this.viewport.pinch({percent:1.2,factor:1}).drag({}).decelerate({}).wheel({}),this.viewport.on("zoomed",e),this.viewport.addChild(t)}resize(t,e){var r,n;if(this.viewport){const{scale:i}=t,s=50;e.y=s,this.viewport.screenWidth=window.innerWidth,this.viewport.screenHeight=window.innerHeight-Ox.colorBarHeight*i,this.viewport.worldWidth=null!==(r=e.width)&&void 0!==r?r:1e3,this.viewport.worldHeight=null!==(n=e.height+s)&&void 0!==n?n:1e3,this._addClampZoom(),this._addClamp(),this.viewport.fit(!0)}}destroyViewport(){this.viewport.destroy(!0)}animateToCenter(t){const{worldWidth:e,worldHeight:r}=this.viewport;this._isWidthResize()?this.viewport.animate({time:t,width:e}):this.viewport.animate({time:t,height:r}),this.viewport.moveCenter(e/2,r/2)}zoom(){const{screenWidth:t,width:e,worldWidth:r,worldHeight:n}=this.viewport;e/t>2?this.viewport.animate({time:Tb,width:r,position:{x:r/2,y:n/2},ease:"easeInOutSine",removeOnInterrupt:!0}):this.viewport.animate({time:Tb,width:300,ease:"easeInOutSine",removeOnInterrupt:!0})}showSegment(t,e,r){this.viewport.animate({time:Tb,position:{x:t,y:e},width:1.5*r,ease:"easeInOutSine",removeOnInterrupt:!0})}getViewportLocal(t,e){return this.viewport.toLocal(new wn.b(t,e))}pauseInteraction(){this.viewport.plugins.pause("drag"),this.viewport.plugins.pause("pinch"),this.viewport.plugins.pause("wheel"),this.viewport.plugins.pause("decelerate")}resumeInteraction(){this.viewport.plugins.resume("drag"),this.viewport.plugins.resume("pinch"),this.viewport.plugins.resume("wheel"),this.viewport.plugins.resume("decelerate")}pauseClamp(){this.viewport.plugins.pause("clamp")}resumeClamp(){this.viewport.plugins.resume("clamp")}_addClampZoom(){const{worldWidth:t,worldHeight:e}=this.viewport;this._isWidthResize()?this.viewport.clampZoom({minWidth:200,minHeight:200,maxWidth:t}):this.viewport.clampZoom({minWidth:200,minHeight:200,maxHeight:e})}_addClamp(){const{worldWidth:t,worldHeight:e}=this.viewport;this.viewport.clamp({left:0,right:t,top:0,bottom:e,direction:"all",underflow:"center"})}_isWidthResize(){const{worldWidth:t,worldHeight:e,screenWidth:r,screenHeight:n}=this.viewport;return t/r>e/n}}class wb{constructor({game:t}){this.game=t,this.textures=t.textures,this.container=new $.mc}disable(){this.container.eventMode="none"}enable(){this.container.eventMode="static",this.container.cursor="pointer"}}const Ab=(t,e)=>{let r=t+Math.random()*(e+1-t);return Math.floor(r)},Mb=(t,e)=>t+Math.random()*(e-t),Eb=(t,e)=>{const r=new An.k(t);return void 0===(null==e?void 0:e.anchor)?r.anchor.set(.5):"object"==typeof e.anchor?r.anchor.set(...e.anchor):r.anchor.set(e.anchor),r.position.set((null==e?void 0:e.x)||0,(null==e?void 0:e.y)||0),r.scale.set((null==e?void 0:e.scale)||1),r.alpha=(null==e?void 0:e.alpha)||1,r.label=null==e?void 0:e.label,(null==e?void 0:e.width)&&(r.width=e.width),(null==e?void 0:e.height)&&(r.height=e.height),(null==e?void 0:e.zIndex)&&(r.zIndex=e.zIndex),(null==e?void 0:e.angle)&&(r.angle=e.angle),(null==e?void 0:e.tint)&&"#ffffff"!==e.tint&&"#fff"!==e.tint&&(r.tint=e.tint),r},Lb=t=>{for(;t.children[0];){const e=t.children[0];t.removeChild(e),e.destroy()}},Rb=t=>{const e=t.replace("#","");return"black"===t||"#000"===t||"none"===t?"#000000":"white"===t||"#fff"===t?"#ffffff":/^[0-9A-Fa-f]{6}$/.test(e)?`#${e}`:"#b3b3b3"},Pb=(t,e,r,n,i=1)=>{t.scale.set(i),t.position.x=i*t.position.x,t.position.y=i*t.position.y;const s=Ba.Y.create({width:e*i,height:r*i});return n.renderer.render({target:s,container:t,clear:!0,transform:null}),s.source.updateMipmaps(),s},Bb=520;class Ob extends wb{constructor(t){super(t)}create(t){this.id=t.id,this._createBackground(),this._createGraphics(t),1!==t.progress&&this._createPercentLabel(t.progress),1===t.progress&&this._createCheck()}changePicture(t){Lb(this.container),this.create(t)}_createBackground(){const t=Eb(c.g.WHITE,{width:Bb,height:Bb,tint:"#ffffff"});this.container.addChild(t),this.container.eventMode="static",this.container.cursor="pointer"}_createGraphics(t){const e=Eb(t.texture,{label:"card texture",scale:Math.min(Bb/t.width,Bb/t.width)});this.container.addChild(e)}_createPercentLabel(t){const e=Eb(this.textures.ui.iconPercent,{scale:.5}),r=new ic({text:(100*t).toFixed()+"%",styles:{fontSize:50,fill:"#000"}});e.position.set(165,-204),r.container.position.set(e.x,e.y),this.container.addChild(e,r.container)}_createCheck(){const t=Eb(this.textures.ui.iconCheck,{scale:.5});t.position.set(202,202),this.container.addChild(t)}}const Ib=t=>t%2*540+260+20,Db=t=>{return 540*((e=t)/2>=0?Math.floor(e/2):Math.ceil(e/2))+260+20;var e},Fb=(t,e,r)=>{t.stroke({width:2,color:e}),t.fill({color:r})};class Gb extends wb{constructor(t){super(t)}static setHighlight(t){const e=(new Sn.u).scale(.05,.05);t.stroke({width:2,color:ac}),t.fill({texture:c.g.from("./images/segmentBg.png"),matrix:e})}create(t){this.segments=t,this.segments.forEach((t=>this.container.addChild(t.graphic))),this._colorFilledSegments(t)}setupInteraction(t){this.segments.forEach(((e,r)=>{e.graphic.eventMode="static",e.graphic.cursor="pointer",e.graphic.on("pointertap",(()=>t(r,e)))}))}setColorSegment(t){Fb(t.graphic,t.color,t.color),t.filled=!0,this.chosenSegments=this.chosenSegments.filter((e=>e!==t))}setHighlight(t){this.chosenSegments=this._getUnfilledSegments(t),this.chosenSegments.map((t=>Gb.setHighlight(t.graphic)))}hideHighlight(){var t;null===(t=this.chosenSegments)||void 0===t||t.map((t=>Fb(t.graphic,ac,hc)))}getUnfilledSegment(t){return this.segments.find((e=>!e.filled&&e.color===t))}getSegment(t){return this.segments[t]}_colorFilledSegments(t){t.filter((t=>t.filled)).map((t=>Fb(t.graphic,t.color,t.color)))}_getUnfilledSegments(t){return this.segments.filter((e=>!e.filled&&e.color===t))}}class kb extends wb{constructor(t){super(t)}create(t,e){this.texts=[],this.texts=e.map(((e,r)=>t[r].filled?null:this._createText(e))),this.texts.map((t=>t&&this.container.addChild(t)))}updateVisibility(t){const e=1/t*20;this.texts.filter((t=>t&&!t.destroyed)).map((t=>t.visible=t.style.fontSize>e))}hideText(t){var e;null===(e=this.texts[t])||void 0===e||e.destroy(),this.texts[t]=null}_createText({number:t,position:e,fontSize:r}){const n=new li({text:t.toString(),style:{fontSize:r,fill:"#000000"}});return n.position.set(e.x,e.y),n.scale.set(.5),n.anchor.set(.5),n.eventMode="none",n}}class Ub extends k_{constructor(t){super(t),this.container.label="PictureScene"}create(t,e,r,n){this.color=null,this.imageContainer=new $.mc,this.imageContainer.label="imageContainer",this.segments=new Gb({game:this.game}),this.labels=new kb({game:this.game}),this.segments.create(t),this.labels.create(t,e);const i=new $n.A;i.rect(0,0,r,n).fill({color:"#fff",alpha:.01}),this.imageContainer.addChild(i),this.imageContainer.addChild(this.segments.container,this.labels.container),this.viewport=new Sb({game:this.game}),this.viewport.create(this.imageContainer,this.onZoomUpdate.bind(this)),this.game.eventEmitter.on(lc,(({color:t})=>{this.color=t,this.segments.hideHighlight(),this.segments.setHighlight(t)})),this.game.eventEmitter.on(mc,(()=>this.viewport.zoom())),this.segments.setupInteraction(this.onSegmentTap.bind(this)),this.resize(Zc())}goToUnfilled(){const t=()=>{const t=this.game.translations.chooseColorNotification;return this.game.eventEmitter.emit(_c,{value:t},this),!1};if(!this.color)return t();const e=this.segments.getUnfilledSegment(this.color);return e?(this.showOnSegment(e.graphic),!0):t()}destroy(){Lb(this.imageContainer),this.viewport.destroyViewport()}getImageContainer(){return this.imageContainer}resize(t){var e;this.imageContainer&&!this.imageContainer.destroyed&&(null===(e=this.viewport)||void 0===e||e.resize(t,this.imageContainer))}showWinAnimation(){this.viewport.animateToCenter(500)}pauseViewportInteraction(){this.viewport.pauseInteraction()}resumeViewportInteraction(){this.viewport.resumeInteraction()}pauseViewportClamp(){this.viewport.pauseClamp()}resumeViewportClamp(){this.viewport.resumeClamp()}getSegment(t){return this.segments.getSegment(t)}showOnSegment(t){Gb.setHighlight(t);const e=t.getBounds(),r=this.viewport.getViewportLocal(e.minX,e.minY),n=this.viewport.getViewportLocal(e.maxX,e.maxY);this.viewport.showSegment((r.x+n.x)/2,(r.y+n.y)/2,Math.max(n.x-r.x,n.y-r.y))}onZoomUpdate(t){const e=Math.round(10*t.viewport.scale.x)/10;this.labels.updateVisibility(e)}onSegmentTap(t,e){this.color!==e.color||e.filled||(this.segments.setColorSegment(e),this.labels.hideText(t),this.game.eventEmitter.emit(cc,{index:t,color:this.color},this))}}var Nb,Hb;!function(t){t.My="My",t.All="All"}(Nb||(Nb={})),function(t){t.Menu="Menu",t.Game="Game"}(Hb||(Hb={}));var zb=i(8133),Xb=i.n(zb);const Vb=(t,e)=>{const r=[],n=Xb()(t);let i=new $n.A;r.push(i);let s=0,o=0;for(let t=0;t<n.length;t++){const a=n[t];switch(a[0]){case"M":0!==t?(i.stroke({width:2,color:e}),i.fill({color:"#ffffff"}),i=new $n.A,r.push(i),i.moveTo(a[1],a[2])):i.moveTo(a[1],a[2]),s=a[1],o=a[2];break;case"L":i.lineTo(a[1],a[2]),s=a[1],o=a[2];break;case"H":i.lineTo(a[1],o),s=a[1];break;case"V":i.lineTo(s,a[1]),o=a[1];break;case"C":i.bezierCurveTo(a[1],a[2],a[3],a[4],a[5],a[6]),s=a[5],o=a[6];break;case"Z":i.closePath()}}return i.stroke({width:2,color:e}),i.fill({color:"#ffffff"}),r};var Wb=i(3112),Yb=i.n(Wb),jb=i(1179),qb=i.n(jb);const $b=[[{position:{x:500,y:1501},fontSize:100,number:-1},{position:{x:396,y:496},fontSize:10,number:-1},{position:{x:799,y:1302},fontSize:39,number:-1},{position:{x:1379,y:1025},fontSize:90,number:-1},{position:{x:1285,y:1522},fontSize:51,number:-1},{position:{x:1404,y:1065},fontSize:32,number:-1},{position:{x:1522,y:1146},fontSize:66,number:-1},{position:{x:1478,y:1072},fontSize:23,number:-1},{position:{x:1519,y:1018},fontSize:66,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:779,y:1447},fontSize:37,number:-1},{position:{x:1156,y:1583},fontSize:94,number:-1},{position:{x:921,y:1603},fontSize:93,number:-1},{position:{x:985,y:1721},fontSize:20,number:-1},{position:{x:844,y:1737},fontSize:15,number:-1},{position:{x:879,y:1742},fontSize:14,number:-1},{position:{x:1135,y:1741},fontSize:14,number:-1},{position:{x:1156,y:1667},fontSize:12,number:-1},{position:{x:1094,y:1472},fontSize:80,number:-1},{position:{x:958,y:1257},fontSize:100,number:-1},{position:{x:1190,y:1437},fontSize:55,number:-1},{position:{x:731,y:288},fontSize:19,number:-1},{position:{x:1344,y:488},fontSize:28,number:-1},{position:{x:1268,y:288},fontSize:13,number:-1},{position:{x:1090,y:1738},fontSize:19,number:-1},{position:{x:1019,y:1046},fontSize:70,number:-1},{position:{x:1225,y:1737},fontSize:18,number:-1},{position:{x:1065,y:505},fontSize:29,number:-1},{position:{x:1311,y:374},fontSize:28,number:-1},{position:{x:1252,y:375},fontSize:47,number:-1},{position:{x:675,y:779},fontSize:31,number:-1},{position:{x:833,y:613},fontSize:100,number:-1},{position:{x:782,y:513},fontSize:27,number:-1},{position:{x:1218,y:814},fontSize:51,number:-1},{position:{x:1201,y:504},fontSize:100,number:-1},{position:{x:988,y:871},fontSize:23,number:-1},{position:{x:1181,y:1320},fontSize:19,number:-1},{position:{x:726,y:414},fontSize:12,number:-1},{position:{x:1100,y:718},fontSize:60,number:-1},{position:{x:1052,y:716},fontSize:20,number:-1},{position:{x:1088,y:750},fontSize:12,number:-1},{position:{x:805,y:714},fontSize:58,number:-1},{position:{x:760,y:713},fontSize:20,number:-1},{position:{x:793,y:751},fontSize:11,number:-1},{position:{x:888,y:796},fontSize:37,number:-1},{position:{x:537,y:535},fontSize:84,number:-1},{position:{x:490,y:496},fontSize:32,number:-1},{position:{x:773,y:337},fontSize:28,number:-1},{position:{x:793,y:323},fontSize:30,number:-1}],[{position:{x:-1,y:-1},fontSize:10,number:-1},{position:{x:1500,y:499},fontSize:100,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:2371,y:1236},fontSize:100,number:-1},{position:{x:809,y:1187},fontSize:100,number:-1},{position:{x:304,y:1325},fontSize:100,number:-1},{position:{x:238,y:1287},fontSize:24,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:402,y:1204},fontSize:26,number:-1},{position:{x:365,y:1219},fontSize:10,number:-1},{position:{x:353,y:1269},fontSize:15,number:-1},{position:{x:410,y:1237},fontSize:10,number:-1},{position:{x:374,y:1273},fontSize:10,number:-1},{position:{x:371,y:1260},fontSize:10,number:-1},{position:{x:2697,y:1339},fontSize:100,number:-1},{position:{x:2777,y:1299},fontSize:24,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:2598,y:1204},fontSize:26,number:-1},{position:{x:2634,y:1223},fontSize:11,number:-1},{position:{x:2647,y:1269},fontSize:15,number:-1},{position:{x:2590,y:1237},fontSize:10,number:-1},{position:{x:2612,y:1258},fontSize:10,number:-1},{position:{x:2629,y:1260},fontSize:10,number:-1},{position:{x:1023,y:1658},fontSize:100,number:-1},{position:{x:2172,y:1798},fontSize:100,number:-1},{position:{x:1159,y:94},fontSize:100,number:-1},{position:{x:1015,y:188},fontSize:100,number:-1},{position:{x:1743,y:545},fontSize:92,number:-1},{position:{x:2003,y:598},fontSize:100,number:-1},{position:{x:1279,y:808},fontSize:42,number:-1},{position:{x:1360,y:882},fontSize:83,number:-1},{position:{x:2372,y:628},fontSize:100,number:-1},{position:{x:2928,y:308},fontSize:100,number:-1},{position:{x:2737,y:757},fontSize:73,number:-1},{position:{x:2722,y:364},fontSize:11,number:-1},{position:{x:2854,y:867},fontSize:14,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:2237,y:183},fontSize:36,number:-1},{position:{x:2316,y:1040},fontSize:37,number:-1},{position:{x:2655,y:1080},fontSize:40,number:-1},{position:{x:2480,y:729},fontSize:42,number:-1},{position:{x:2583,y:772},fontSize:19,number:-1},{position:{x:2879,y:379},fontSize:34,number:-1},{position:{x:2727,y:230},fontSize:57,number:-1},{position:{x:2307,y:432},fontSize:47,number:-1},{position:{x:2674,y:50},fontSize:51,number:-1},{position:{x:2513,y:468},fontSize:22,number:-1},{position:{x:629,y:628},fontSize:100,number:-1},{position:{x:72,y:287},fontSize:100,number:-1},{position:{x:644,y:845},fontSize:52,number:-1},{position:{x:278,y:364},fontSize:10,number:-1},{position:{x:146,y:524},fontSize:19,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:764,y:183},fontSize:36,number:-1},{position:{x:681,y:1040},fontSize:37,number:-1},{position:{x:344,y:1079},fontSize:39,number:-1},{position:{x:615,y:758},fontSize:33,number:-1},{position:{x:414,y:772},fontSize:19,number:-1},{position:{x:118,y:379},fontSize:34,number:-1},{position:{x:317,y:230},fontSize:60,number:-1},{position:{x:693,y:432},fontSize:47,number:-1},{position:{x:333,y:50},fontSize:34,number:-1},{position:{x:488,y:468},fontSize:27,number:-1},{position:{x:2779,y:1500},fontSize:44,number:-1},{position:{x:2849,y:1514},fontSize:28,number:-1},{position:{x:2790,y:1600},fontSize:11,number:-1},{position:{x:2827,y:1526},fontSize:14,number:-1},{position:{x:2835,y:1415},fontSize:11,number:-1},{position:{x:2849,y:1329},fontSize:10,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:2905,y:1515},fontSize:10,number:-1},{position:{x:2901,y:1435},fontSize:10,number:-1},{position:{x:2907,y:1362},fontSize:10,number:-1},{position:{x:2732,y:1727},fontSize:100,number:-1},{position:{x:2922,y:1684},fontSize:29,number:-1},{position:{x:2915,y:1781},fontSize:25,number:-1},{position:{x:2723,y:1862},fontSize:90,number:-1},{position:{x:2825,y:1900},fontSize:18,number:-1},{position:{x:2388,y:1858},fontSize:79,number:-1},{position:{x:2479,y:1894},fontSize:50,number:-1},{position:{x:2313,y:1937},fontSize:50,number:-1},{position:{x:2217,y:1893},fontSize:70,number:-1},{position:{x:2304,y:1961},fontSize:13,number:-1},{position:{x:2396,y:1980},fontSize:48,number:-1},{position:{x:2359,y:1984},fontSize:16,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:2864,y:1909},fontSize:59,number:-1},{position:{x:2962,y:1916},fontSize:37,number:-1},{position:{x:2920,y:1981},fontSize:10,number:-1},{position:{x:2454,y:1553},fontSize:65,number:-1},{position:{x:2564,y:1552},fontSize:26,number:-1},{position:{x:2587,y:1726},fontSize:30,number:-1},{position:{x:2433,y:1644},fontSize:15,number:-1},{position:{x:2560,y:1803},fontSize:17,number:-1},{position:{x:2471,y:1680},fontSize:10,number:-1},{position:{x:2539,y:1636},fontSize:11,number:-1},{position:{x:2538,y:1701},fontSize:14,number:-1},{position:{x:221,y:1500},fontSize:44,number:-1},{position:{x:137,y:1430},fontSize:21,number:-1},{position:{x:210,y:1600},fontSize:11,number:-1},{position:{x:173,y:1526},fontSize:12,number:-1},{position:{x:154,y:1437},fontSize:11,number:-1},{position:{x:135,y:1369},fontSize:13,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:71,y:1495},fontSize:10,number:-1},{position:{x:82,y:1420},fontSize:10,number:-1},{position:{x:92,y:1362},fontSize:10,number:-1},{position:{x:268,y:1727},fontSize:100,number:-1},{position:{x:177,y:1706},fontSize:33,number:-1},{position:{x:60,y:1793},fontSize:25,number:-1},{position:{x:315,y:1952},fontSize:90,number:-1},{position:{x:175,y:1900},fontSize:18,number:-1},{position:{x:612,y:1858},fontSize:79,number:-1},{position:{x:520,y:1894},fontSize:51,number:-1},{position:{x:686,y:1937},fontSize:47,number:-1},{position:{x:794,y:1893},fontSize:58,number:-1},{position:{x:698,y:1948},fontSize:10,number:-1},{position:{x:581,y:1908},fontSize:48,number:-1},{position:{x:642,y:1995},fontSize:17,number:-1},{position:{x:135,y:1909},fontSize:59,number:-1},{position:{x:36,y:1898},fontSize:37,number:-1},{position:{x:81,y:1981},fontSize:10,number:-1},{position:{x:546,y:1552},fontSize:67,number:-1},{position:{x:434,y:1565},fontSize:26,number:-1},{position:{x:413,y:1727},fontSize:28,number:-1},{position:{x:528,y:1717},fontSize:17,number:-1},{position:{x:433,y:1769},fontSize:17,number:-1},{position:{x:0,y:0},fontSize:0,number:-1},{position:{x:462,y:1642},fontSize:11,number:-1},{position:{x:463,y:1701},fontSize:20,number:-1},{position:{x:2361,y:1439},fontSize:12,number:-1},{position:{x:2332,y:1431},fontSize:32,number:-1},{position:{x:2303,y:1410},fontSize:11,number:-1},{position:{x:2261,y:1420},fontSize:10,number:-1},{position:{x:2289,y:1411},fontSize:10,number:-1},{position:{x:798,y:1741},fontSize:10,number:-1},{position:{x:822,y:1723},fontSize:23,number:-1},{position:{x:1773,y:1498},fontSize:10,number:-1},{position:{x:1634,y:1507},fontSize:27,number:-1},{position:{x:1676,y:1480},fontSize:12,number:-1},{position:{x:1734,y:1496},fontSize:10,number:-1},{position:{x:1725,y:1473},fontSize:11,number:-1},{position:{x:1697,y:1482},fontSize:10,number:-1},{position:{x:798,y:1463},fontSize:12,number:-1},{position:{x:728,y:1473},fontSize:42,number:-1},{position:{x:727,y:1442},fontSize:11,number:-1},{position:{x:701,y:1453},fontSize:10,number:-1},{position:{x:739,y:1436},fontSize:10,number:-1},{position:{x:2324,y:1697},fontSize:10,number:-1},{position:{x:2269,y:1676},fontSize:27,number:-1},{position:{x:2314,y:1683},fontSize:10,number:-1},{position:{x:1294,y:1882},fontSize:10,number:-1},{position:{x:1295,y:1834},fontSize:26,number:-1},{position:{x:1325,y:1847},fontSize:15,number:-1},{position:{x:1296,y:1858},fontSize:10,number:-1},{position:{x:1310,y:1848},fontSize:11,number:-1},{position:{x:1339,y:1846},fontSize:11,number:-1},{position:{x:1617,y:1679},fontSize:13,number:-1},{position:{x:1591,y:1679},fontSize:13,number:-1},{position:{x:523,y:1362},fontSize:13,number:-1},{position:{x:497,y:1362},fontSize:13,number:-1},{position:{x:2673,y:1442},fontSize:13,number:-1},{position:{x:2647,y:1442},fontSize:13,number:-1},{position:{x:1039,y:1922},fontSize:10,number:-1},{position:{x:1069,y:1933},fontSize:10,number:-1},{position:{x:2043,y:1316},fontSize:13,number:-1},{position:{x:2079,y:1319},fontSize:14,number:-1},{position:{x:1996,y:1737},fontSize:13,number:-1},{position:{x:1962,y:1738},fontSize:13,number:-1}]],Zb=[Yb(),qb()];class Kb{constructor({storage:t,app:e}){this.previewMap=new Map,this.storage=t,this.app=e}setLevel(t){this.level=t}getLevelId(){return this.level}setSegmentFilled(t){this.fillProgress[t]=1,this.components[t].filled=!0,1===this._calculateProgress(this.fillProgress)&&(this.onceFilled=!0);const e={fillProgress:this.fillProgress,onceFilled:this.onceFilled};this.storage.saveLevel(this.level,e)}getProgress(){return this._calculateProgress(this.fillProgress)}getColorProgress(t){return this._getColorProgress(t)}getCardsPreviews(){const t=[];for(let e=0;e<Zb.length;e++){const{components:r,width:n,height:i,progress:s,onceFilled:o}=this._createPictureData(e),a=this._getRenderTexture(r,n,i,this.app);t.push({id:e,texture:a,width:n,height:i,progress:s,onceFilled:o})}return t.map((t=>this.previewMap.set(t.id,t))),t}getCardPreview(t){const{components:e,width:r,height:n,progress:i,onceFilled:s}=this._createPictureData(t),o=this._getRenderTexture(e,r,n,this.app);return this.previewMap.set(t,{id:t,texture:o,width:r,height:n,progress:i,onceFilled:s}),{id:t,texture:o,width:r,height:n,progress:i,onceFilled:s}}resetPictureStorage(t){const e={fillProgress:null,onceFilled:this.storage.getLevel(t).onceFilled};this.storage.saveLevel(t,e)}getPictureComponents(t){const{components:e,colors:r,width:n,height:i,fillProgress:s,onceFilled:o,labels:a}=this._createPictureData(t);return this.fillProgress=s,this.onceFilled=o,this.components=e,{components:e,colors:r,colorsProgress:this._getColorProgresses(r),width:n,height:i,labels:a}}getProgressModeIds(t){const e=[];for(let r=0;r<Zb.length;r++)switch(t){case Nb.My:const t=this.storage.getLevel(r);((null==t?void 0:t.fillProgress)||(null==t?void 0:t.onceFilled))&&e.push(r);break;case Nb.All:e.push(r)}return e}getPictureProgress(t){const e=this.storage.getLevel(t),r=null==e?void 0:e.fillProgress;return r?this._calculateProgress(r):0}getPreviewTexture(t){const e=this.previewMap.get(t);if(e)return e.texture;const{components:r,width:n,height:i}=this._createPictureData(t);return this._getRenderTexture(r,n,i,this.app)}getHintCount(){return this.storage.getStorageGame().hints}getIsRulesShown(){return this.storage.getStorageGame().showedRules}updateHintCount(t){this.storage.saveGame({hints:t,showedRules:this.getIsRulesShown()})}setTutorShown(){this.storage.saveGame({hints:this.getHintCount(),showedRules:!0})}_getColorProgresses(t){const e=new Array(t.length).fill(0);return t.map(((t,r)=>e[r]=this._getColorProgress(t))),e}_getColorProgress(t){const e=this.components.filter((e=>e.color===t));return e.filter((t=>t.filled)).length/e.length}_calculateProgress(t){return t.reduce(((t,e)=>t+e),0)/t.length}_createPictureData(t){const e=Zb[t],{components:r,width:n,height:i}=(performance.now(),(t=>{const e=[],{paths:r,width:n,height:i}=(t=>{var e,r;const n=(new DOMParser).parseFromString(t,"image/svg+xml"),i=n.querySelector("svg");let s=null!==(e=null==i?void 0:i.getAttribute("width"))&&void 0!==e?e:"",o=null!==(r=null==i?void 0:i.getAttribute("height"))&&void 0!==r?r:"";if(!s||!o){const t=null==i?void 0:i.getAttribute("viewBox");if(t){const[,,e,r]=t.trim().split(/\s+/);s||(s=e||"0"),o||(o=r||"0")}else s||(s="0"),o||(o="0")}const a=n.querySelectorAll("path"),h=Array.from(a).map((t=>{var e,r,n;return{d:null!==(e=t.getAttribute("d"))&&void 0!==e?e:"",fill:null!==(r=t.getAttribute("fill"))&&void 0!==r?r:"#FFFFFF",stroke:null!==(n=t.getAttribute("stroke"))&&void 0!==n?n:"#000000"}}));return{paths:h,width:+s,height:+o}})(t),s=new Set;for(const t of r){const r=Rb(t.fill),n=Vb(t.d,t.stroke);for(let t=0;t<n.length;t++){const i=n[t],{minX:o,maxX:a,minY:h,maxY:l}=i.getBounds(),u=20;if(l-h>u&&a-o>u){s.add(r);const t=Array.from(s).indexOf(r);e.push({graphic:i,color:r,number:t,filled:!1})}else i.destroy()}}return{components:e,width:n,height:i}})(e)),s=$b[t],{components:o,labels:a,colors:h}=((t,e)=>{if(t.length!==e.length)return{labels:[],components:[],colors:[]};const r=[],n=[],i=new Set;for(let s=0;s<e.length;s++)if(0!==t[s].fontSize){i.add(e[s].color);const o=Array.from(i).indexOf(e[s].color);r.push(Object.assign(Object.assign({},t[s]),{number:o+1})),n.push(Object.assign(Object.assign({},e[s]),{number:o+1}))}else e[s].graphic.destroy();return{labels:r,components:n,colors:Array.from(i)}})(s,r),l=this.storage.getLevel(t),u=(null==l?void 0:l.fillProgress)||new Array(o.length).fill(0),c=null==l?void 0:l.onceFilled;u.map(((t,e)=>{t&&(o[e].filled=!0)}));const d=this._calculateProgress(u);return{components:o,labels:a,colors:h,width:n,height:i,progress:d,fillProgress:u,onceFilled:c}}_getRenderTexture(t,e,r,n){const i=new $.mc;for(let e=0;e<t.length;e++){const r=t[e],n=r.filled?r.color:hc;r.graphic.stroke({width:8,color:r.filled?r.color:"#000000"}),r.graphic.fill({color:n}),i.addChild(r.graphic)}const s=Pb(i,e,r,n,1);return i.destroy(!0),s}}const Qb=.1;class Jb extends wb{constructor(t){super(t)}create({color:t,number:e,diameter:r}){this.diameter=r;const n=r/2,i=new $n.A;i.circle(0,0,n).fill({color:t});const s=new $.mc,o=new ic({text:e.toString(),styles:{fontSize:76,fill:{color:this._getFontColor(t)}}});s.position.set(r/2,r/2),s.addChild(i,o.container);const a=Pb(s,r,r,this.game.app,2);o.container.destroy(!0),i.destroy(!0),s.destroy(),this.bg=Eb(a,{label:"Color Button",scale:.5}),this.progressCircle=new $n.A,this.container.addChild(this.bg,this.progressCircle)}setupButtonClick({number:t,color:e,scrollBox:r}){let n=0;this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerdown",(()=>n=r.getScrollX())),this.container.on("pointerup",(()=>{Math.abs(r.getScrollX()-n)<15&&this.game.eventEmitter.emit(lc,{index:t,color:e},this)}))}setTappedState(){G_(this.container,1.15)}setDefaultState(){G_(this.container,1)}setProgress(t,e){const r=this.diameter/2,n=2*Math.PI*t;this.progressCircle.arc(0,0,r,-Math.PI/2,-Math.PI/2+n,!1),this.progressCircle.stroke({color:"#089829",width:10}),1===t&&this._setFill(e)}destroy(){this.container.destroy()}moveToRight(t,e){const{colorBarGap:r,colorBarPadding:n}=Ox,i=t*(this.diameter+r)+this.diameter/2+n;this.realX=i,e?(new B_({delay:Qb,duration:.06,object:this.container,to:{y:-120}}).start(),new B_({delay:Qb,duration:.3,object:this.container,to:{x:i}}).start(),new B_({delay:.33999999999999997,duration:.06,object:this.container,to:{y:0}}).start(),new B_({delay:Qb,duration:.15,object:this.container,from:{scale:1},to:{scale:.7},yoyo:!0,repeat:1,ease:"power3.out"}).start()):this.container.x=i}moveToLeft(t){const{colorBarGap:e}=Ox,r=this.realX-(this.diameter+e);this.realX=r,t?new B_({delay:Qb,duration:.3,object:this.container,to:{x:r}}).start():this.container.x=r}_getFontColor(t){const e=(r=t,[parseInt(r.substring(1,3),16),parseInt(r.substring(3,5),16),parseInt(r.substring(5,7),16)]);var r;return e[0]+e[1]+e[2]>380?"#252525":"#ececec"}_setFill(t){t&&Wc.play("full_color",{volume:.8}),this.container.eventMode="auto";const e=Eb(this.textures.ui.check,{anchor:.5,scale:.6}),r=(new $n.A).circle(0,0,this.diameter/2).fill({color:"#fff"});this.container.addChild(r,e),new B_({object:this.progressCircle,duration:Qb,to:{alpha:0},onComplete:()=>{this.progressCircle.destroy()}}).start(),new B_({object:r,duration:Qb,from:{scale:0},to:{scale:.9}}).start(),new B_({object:e,delay:.05,duration:Qb,from:{scale:0},to:{scale:.6}}).start()}}class tx extends wb{constructor(t){super(t),this.viewWidth=0,this.velocityX=0,this.container.label="ScrollBox",this.bg=Eb(c.g.WHITE,{width:100,height:t.height,alpha:.6,label:"WhiteBox",tint:"#aca3a3",anchor:[0,.5]}),this.scrollContainer=new $.mc,this.scrollContainer.label="ScrollContainer",this.container.addChild(this.bg,this.scrollContainer),this.scrollDrag={on:null,offsetX:0,startX:0,lastDeltaX:0},this.setupEvents()}getScrollX(){return this.scrollContainer.x}addItem(t){this.scrollContainer.addChild(t)}update(){0!==this.velocityX&&(this.scrollDrag.on||(this.scrollContainer.x+=this.velocityX,this.velocityX*=.9,Math.abs(this.velocityX)<.1&&(this.velocityX=0),this.limitScroll()))}resize(t){this.bg.width=t,this.viewWidth=t,this.resetPosition(),this.limitScroll()}setupEvents(){this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerdown",this.onDragStart,this),this.container.on("pointermove",this.onDragMove,this),this.container.on("pointerup",this.onDragEnd,this),this.container.on("mouseupoutside",this.onOutside,this)}onDragStart(t){const e=this.container.toLocal(t.global);this.scrollDrag={on:!0,offsetX:e.x,startX:this.scrollContainer.x,lastDeltaX:0},this.velocityX=0}onDragMove(t){const e=this.container.toLocal(t.global);if(this.scrollDrag.on){const t=e.x-this.scrollDrag.offsetX;this.scrollDrag.lastDeltaX=this.scrollDrag.startX+t-this.scrollContainer.x,this.scrollContainer.x+=this.scrollDrag.lastDeltaX,this.limitScroll()}}onOutside(t){this.scrollDrag.on=!1}onDragEnd(t){this.scrollDrag.on=!1,Math.abs(this.scrollDrag.lastDeltaX)>20&&(this.velocityX=(this.scrollContainer.x-this.scrollDrag.startX)/5,Math.abs(this.velocityX)>50&&(this.velocityX=50*Math.sign(this.velocityX)))}limitScroll(){const t=Math.min(0,this.viewWidth-this.scrollContainer.width-2*Ox.colorBarPadding),e=this.scrollContainer.x;e<t?(this.scrollContainer.x=(e+t)/2,D_(this.scrollContainer,{x:t},0,.1),this.velocityX=0):e>0&&(this.scrollContainer.x=0,this.velocityX=0)}resetPosition(){this.scrollContainer.x=0,this.velocityX=0,this.scrollDrag.on=!1}}class ex extends k_{constructor(t){super(t),this.container.label="ColorsBarScene",this.container.zIndex=2}create(t,e){this.colors=t;const{colorButtonDiameter:r,colorBarHeight:n}=Ox;this.scrollBox=new tx({game:this.game,height:n}),this.buttons=[],t.forEach(((t,n)=>{const i=new Jb({game:this.game});i.create({color:t,number:n+1,diameter:r}),i.setupButtonClick({color:t,number:n,scrollBox:this.scrollBox}),i.moveToRight(n),i.setProgress(e[n]),this.buttons.push(i),this.container.addChild(i.container),this.scrollBox.addItem(i.container)})),e.map(((t,e)=>1===t&&this._setButtonFilled(this.buttons[e]))),this.container.addChild(this.scrollBox.container),this.game.eventEmitter.on(lc,(({index:t})=>this._clickColor(t))),this.resize(Zc())}getColorByIndex(t){return this.colors[t]}getColorButtonPosition(t){return this.buttons[t].container.getGlobalPosition()}updateColorProgress(t,e){const r=this.colors.indexOf(t);-1!==r&&(this.buttons[r].setProgress(e,!0),1===e&&this._setButtonFilled(this.buttons[r],!0))}update(){var t;null===(t=this.scrollBox)||void 0===t||t.update()}destroy(){Lb(this.container)}resize(t){var e,r,n,i;null===(r=null===(e=this.container)||void 0===e?void 0:e.scale)||void 0===r||r.set(t.scale),null===(n=this.container)||void 0===n||n.position.set(0,t.screenHeight-this.container.height/2),null===(i=this.scrollBox)||void 0===i||i.resize(t.screenWidth/t.scale)}_setButtonFilled(t,e=!1){this.buttons.filter((e=>e.realX>t.realX)).map((t=>t.moveToLeft(e))),t.moveToRight(this.buttons.length-1,e)}_clickColor(t){Wc.play(qc,{volume:.8}),this.buttons[t].setTappedState(),this.buttons.filter(((e,r)=>r!==t&&e.setDefaultState()))}}class rx extends wb{constructor(t){super(t),this.container.label="BackButton",this.button=Eb(this.textures.ui.backButton),this.container.addChild(this.button),this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerup",this.onTap,this)}onTap(){this.game.eventEmitter.emit(pc,{},this),I_(this.container)}}class nx extends wb{constructor(t){super(t),this.container.label="SoundButton",this.on=Eb(this.textures.ui.soundOn),this.on.eventMode="static",this.on.cursor="pointer",this.on.on("pointerdown",this.turnOff,this),this.off=Eb(this.textures.ui.soundOff),this.off.eventMode="static",this.off.cursor="pointer",this.off.on("pointerdown",this.turnOn,this),this.container.addChild(this.on,this.off),this.soundOn()}turnOn(){this.soundOn(),this.animateButton()}turnOff(){this.soundOff(),this.animateButton()}soundOff(){Wc.muteAll(),this.off.visible=!0,this.on.visible=!this.off.visible}soundOn(){Wc.unmuteAll(),this.off.visible=!1,this.on.visible=!this.off.visible}animateButton(){I_(this.container)}}class ix extends wb{constructor(t){super(t),this.container.label="HintButton",this._init()}fill(t){this.iconText.setText(0===t?this.game.translations.ad:t.toString())}_init(){this.button=Eb(this.textures.ui.lamp),this.container.addChild(this.button);const t=Eb(this.textures.ui.adIcon,{x:30,y:-30});this.iconText=new ic({text:"",styles:{fontSize:38,fill:"#ffffff"}}),this.iconText.container.position.set(30,-30),this.container.addChild(t,this.iconText.container),this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerup",this._onTap,this)}_onTap(){this.game.eventEmitter.emit(fc,{},this),I_(this.container)}}class sx extends wb{constructor(t){super(t),this.container.label="ZoomButton",this.button=Eb(this.textures.ui.zoomButton),this.container.addChild(this.button),this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerdown",this.onTap,this)}onTap(){this.game.eventEmitter.emit(mc,{},this),I_(this.container)}}class ox extends k_{constructor(t){super(t),this.container.label="GameHeaderScene",this.container.zIndex=2,this.bg=this.createBg(),this.container.addChild(this.bg),this.backButton=new rx({game:this.game}),this.hintButton=new ix({game:this.game}),this.soundButton=new nx({game:this.game}),this.zoomButton=new sx({game:this.game}),this.container.addChild(this.backButton.container,this.soundButton.container,this.hintButton.container,this.zoomButton.container)}changeEventModes({backBtnOn:t,hintBtnOn:e,zoomBtnOn:r,soundBtnOn:n}){this.backButton.container.eventMode=t?"static":"none",this.hintButton.container.eventMode=e?"static":"none",this.zoomButton.container.eventMode=r?"static":"none",this.soundButton.container.eventMode=n?"static":"none"}fillHintButton(t){this.hintButton.fill(t)}createBg(){return Eb(c.g.WHITE,{height:Ox.headerHeight,tint:"#d8cfcf",alpha:.01,anchor:[0,.5]})}resize(t){var e,r,n,i,s,o,a,h,l,u,c;super.resize(t),null===(r=null===(e=this.container)||void 0===e?void 0:e.scale)||void 0===r||r.set(t.scale),null===(n=this.container)||void 0===n||n.position.set(0,this.container.height/2),this.bg.width=t.screenWidth/t.scale;const[d,p,f,m]=ax({padding:100,width:t.screenWidth/t.scale,count:4});null===(s=null===(i=this.backButton)||void 0===i?void 0:i.container)||void 0===s||s.position.set(d,0),null===(a=null===(o=this.hintButton)||void 0===o?void 0:o.container)||void 0===a||a.position.set(p,0),null===(l=null===(h=this.zoomButton)||void 0===h?void 0:h.container)||void 0===l||l.position.set(f,0),null===(c=null===(u=this.soundButton)||void 0===u?void 0:u.container)||void 0===c||c.position.set(m,0)}getButtonPosition(t){var e,r,n,i,s,o;return"zoom"===t?null===(r=null===(e=this.zoomButton)||void 0===e?void 0:e.container)||void 0===r?void 0:r.getGlobalPosition():"hint"===t?null===(i=null===(n=this.hintButton)||void 0===n?void 0:n.container)||void 0===i?void 0:i.getGlobalPosition():null===(o=null===(s=this.hintButton)||void 0===s?void 0:s.container)||void 0===o?void 0:o.getGlobalPosition()}}const ax=({count:t,padding:e,width:r})=>{const n=[];for(let i=0;i<t;i++)n.push((r-2*e)*i/(t-1)+e);return n};class hx extends wb{constructor(t){super(t),this._createParticle()}remove(){this.container.removeFromParent(),this.animation&&this.animation.killAnim()}_restartParticle(t){this.container.removeChild(t),this._createParticle()}_createParticle(){const t=Zc(),e=Mb(.6,1),r=Mb(.6,1),n=Mb(0,360),i=Mb(t.cornerLT.x-50,t.cornerRB.x+50),s=t.cornerLT.y-50,o=Eb(c.g.WHITE,{width:50*e,height:50*r,x:i,y:s,angle:n,tint:"#"+Math.floor(16777215*Math.random()).toString(16)});this.container.addChild(o);const a=Mb(3,3.5),h=Mb(0,3.5);return this.animation=new B_({object:o,ease:"sine.in",to:{y:t.cornerRB.y+50,angle:n+Mb(0,90),skewX:Ab(0,60),skewY:Ab(0,60)},duration:a,delay:h,onComplete:this._restartParticle.bind(this,o)}).start(),new B_({object:o,to:{alpha:0},duration:.5,delay:h+a-.5}).start(),o}}class lx extends wb{constructor(t){super(t),this.particles=[]}start(){this.particles.map((t=>t.remove())),this.particles=[];for(let t=0;t<80;t++)this.particles.push(new hx({game:this.game}));this.container.addChild(...this.particles.map((t=>t.container)))}stop(){this.particles.map((t=>t.remove()))}}class ux extends wb{constructor(t){var e,r;super(t),this.container.label="BaseButton",(null===(e=t.buttonStyles)||void 0===e?void 0:e.texture)?this.button=Eb(t.buttonStyles.texture):this.button=(new $n.A).roundRect(-250,-60,500,120,90).fill({color:(null===(r=t.buttonStyles)||void 0===r?void 0:r.color)||"#05aa05"}),this.text=new ic({text:t.text,styles:Object.assign({fontSize:70,fontWeight:"800"},t.styles)}),this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerdown",(()=>this.pointerDown(t.onTap))),this.container.addChild(this.button,this.text.container)}changeText(t){this.text.setText(t)}pointerDown(t){I_(this.container,t)}}class cx extends k_{constructor(t){super(t),this.container.label="WinScene",this.container.zIndex=3,this.text=this._createText(),this.button=this._createButton(),this.confetti=new lx({game:this.game}),this.container.addChild(this.confetti.container,this.button.container,this.text.container),this.resize(Zc())}hide(t){this.confetti.stop(),super.hide(t)}resize(t){super.resize(t)}show(){var t,e;super.show(),Wc.play("win",{volume:.8}),this.container.eventMode="auto",this.container.alpha=1,this.confetti.start(),(e=this.text.container).scale.set(0),e.alpha=0,new B_({delay:.3,duration:.5,object:e,to:{scaleX:1.3,scaleY:1.3,alpha:1}}).start(),new B_({delay:.8,duration:.5,object:e,yoyo:!0,repeat:2,to:{scaleX:1,scaleY:1}}).start(),t=this.button.container,new B_({delay:.8,duration:.4,object:t,yoyo:!0,repeat:-1,from:{scaleX:1,scaleY:1},to:{scaleX:1.2,scaleY:1.1}}).start()}_createText(){const t=new ic({text:this.game.translations.congratulations,styles:{fontSize:80,fill:"#1277ba",fontWeight:"bold",stroke:{color:"#ffffff",width:10,join:"round"}}});return t.container.position.set(550,160),t}_createButton(){const t=new ux({game:this.game,onTap:()=>this._clickButton(),text:this.game.translations.winButtonContinue,styles:{fontSize:56,fill:"#ffffff",fontWeight:"bold"},buttonStyles:{texture:this.textures.ui.buttonBlue}});return t.container.position.set(550,1700),t}_clickButton(){this.hide(),this.container.eventMode="none",this.game.eventEmitter.emit(pc,{},this)}}class dx extends wb{constructor(t){super(t),this.viewHeight=1100,this.velocityY=0,this.container.label="ScrollBox",this.boxSprite=this._createBox(sc,t.height),this.scrollContainer=new $.mc,this.scrollContainer.label="ScrollContainer",this.scrollContainer.addChild(this.boxSprite),this.container.addChild(this.scrollContainer),this.scrollDrag={on:null,offsetY:0,startY:0,lastDeltaY:0,moved:0},this.setupEvents()}moveOnTop(){D_(this.scrollContainer,{y:0},0,.2)}updateScrollBoxHeight(t){this.boxSprite.height=t}addItem(t){this.scrollContainer.addChild(t),t.eventMode="static",t.cursor="pointer"}update(){0!==this.velocityY&&(this.scrollDrag.on||(this.scrollContainer.y+=this.velocityY,this.velocityY*=.93,Math.abs(this.velocityY)<.1&&(this.velocityY=0),this._limitScroll()))}resize(t){this.container.position.set(0,t.cornerLT.y),this._resizeScrollContainer(t)}_resizeScrollContainer(t){const{screenHeight:e,screenWidth:r,scale:n,cornerLT:i}=t;this._updateScreenHeight(e/n/this.container.scale.y-Ox.progressSwitchHeight),this.resetPosition(),this.boxSprite.width=r/n/this.container.scale.x,this.boxSprite.x=i.x}_createBox(t,e){return Eb(c.g.WHITE,{width:t,height:e,alpha:.01,anchor:0})}setupEvents(){this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointerdown",this._onDragStart,this),this.container.on("pointermove",this._onDragMove,this),this.container.on("pointerup",this._onDragEnd,this),this.container.on("mouseupoutside",this._onOutside,this)}_onDragStart(t){var e;const r=this.container.toLocal(t.global);this.itemTap={item:null},this.scrollDrag={on:!0,offsetY:r.y,startY:this.scrollContainer.y,lastDeltaY:0,moved:0},this.velocityY=0;const n=t.target;(null===(e=n.label)||void 0===e?void 0:e.includes("card-id"))&&(this.itemTap={item:n})}_onDragMove(t){const e=this.container.toLocal(t.global);if(this.scrollDrag.on){const t=e.y-this.scrollDrag.offsetY;this.scrollDrag.lastDeltaY=this.scrollDrag.startY+t-this.scrollContainer.y,this.scrollDrag.moved+=Math.abs(t),this.scrollContainer.y+=this.scrollDrag.lastDeltaY,this._limitScroll()}}_onDragEnd(t){this.container.toLocal(t.global),this.scrollDrag.on=!1,Math.abs(this.scrollDrag.lastDeltaY)>20&&(this.velocityY=(this.scrollContainer.y-this.scrollDrag.startY)/5,Math.abs(this.velocityY)>70&&(this.velocityY=70*Math.sign(this.velocityY))),this.scrollDrag.moved<50&&this._clickHandler(t)}_clickHandler(t){var e,r;let n=t.target;if((null==n?void 0:n.label)===(null===(r=null===(e=this.itemTap)||void 0===e?void 0:e.item)||void 0===r?void 0:r.label)){const t=(t=>{const e=t.split("-").slice(2).map((t=>+t));return[e[0],e[1]]})(null==n?void 0:n.label)[0];this.game.eventEmitter.emit(uc,{id:t},this),Wc.play(qc,{volume:.8})}}_onOutside(t){this.scrollDrag.on=!1}_limitScroll(){const t=Math.min(0,this.viewHeight-this.scrollContainer.height);this.scrollContainer.y<t?(this.scrollContainer.y=t,this.velocityY=0):this.scrollContainer.y>0&&(this.scrollContainer.y=0,this.velocityY=0)}_updateScreenHeight(t){this.viewHeight=t}resetPosition(){this.scrollContainer.y=0,this.velocityY=0,this.scrollDrag.on=!1}}const px=t=>540*Math.ceil(t/2)+20;class fx extends k_{constructor(t){super(t),this.container.label="MenuScene"}create(t){this.bg=Eb(c.g.WHITE,{tint:"#aca3a3",anchor:0,label:"Bg"}),this.container.addChild(this.bg),this.scrollBox=new dx({game:this.game,height:px(t.length)}),this.container.addChild(this.scrollBox.container),this.cardInstances=this.createCards(t),this.cardInstances.map((t=>this.scrollBox.addItem(t.container))),this.resize(Zc())}changeSwitches(t){const e=this.cardInstances.filter((e=>t.includes(e.id)));this.cardInstances.filter((e=>!t.includes(e.id))).map((t=>t.container.visible=!1)),this.scrollBox.updateScrollBoxHeight(px(e.length)),this.scrollBox.moveOnTop(),e.map(((t,e)=>{t.container.visible=!0,t.container.position.set(Ib(e),Db(e))}))}updateCard(t){this.cardInstances.find((e=>e.id===t.id)).changePicture(t)}update(t){var e;null===(e=this.scrollBox)||void 0===e||e.update()}resize(t){var e;super.resize(t),this.bg.width=t.screenWidth/t.scale,this.bg.height=t.screenHeight/t.scale,this.bg.position.set(t.cornerLT.x,t.cornerLT.y),null===(e=this.scrollBox)||void 0===e||e.resize(t)}createCards(t){const e=[];for(let r=0;r<t.length;r++){const n=new Ob({game:this.game});n.create(t[r]),n.container.label=`card-id-${t[r].id}`,n.container.position.set(Ib(r),Db(r)),e.push(n)}return e}}const mx="34s133114",gx="paint-svg-pictures-game";class _x{constructor(){}saveGame(t){localStorage.setItem(gx+mx,JSON.stringify(t))}getStorageGame(){const t=localStorage.getItem(gx+mx);return t?JSON.parse(t):{hints:3,showedRules:!1}}saveLevel(t,e){localStorage.setItem(`${gx}-level-${t}`+mx,JSON.stringify(e))}getLevel(t){const e=localStorage.getItem(`${gx}-level-${t}`+mx);return e?JSON.parse(e):null}_cleanStorage(){}}const bx="#3b3b3b",xx="normal";class vx extends wb{constructor({game:t,onChange:e}){super({game:t}),this.container.label="ProgressSwitch",this.onChange=e,this.create()}create(){this.bg=Eb(c.g.WHITE,{anchor:[0,1],tint:"#ececec",height:Ox.progressSwitchHeight}),this.bg.eventMode="static";const t=this.createButton("All pictures",this.textures.ui.iconAllPictures);this.allContainer=t.container,this.allText=t.text,this.allIcon=t.icon,this.allContainer.on("pointerdown",(()=>this._chooseMode(Nb.All)));const e=this.createButton("My works",this.textures.ui.iconMyWorks);this.myContainer=e.container,this.myText=e.text,this.myIcon=e.icon,this.myContainer.on("pointerdown",(()=>this._chooseMode(Nb.My))),this.chooseButton({text:this.allText,icon:this.allIcon},{text:this.myText,icon:this.myIcon}),this.container.addChild(this.bg,this.allContainer,this.myContainer)}createButton(t,e){const r=new $.mc,n=new ic({text:t,styles:{fontSize:38,fill:bx,fontWeight:xx}}),i=Eb(e,{});return r.eventMode="static",r.cursor="pointer",r.addChild(n.container,i),{container:r,icon:i,text:n}}chooseButton(t,e){e.text.textObject.style.fill=bx,e.text.textObject.style.fontSize=38,e.text.textObject.style.fontWeight=xx,e.icon.alpha=.7,e.icon.scale.set(1.1),t.text.textObject.style.fill="#000000",t.text.textObject.style.fontSize=38,t.text.textObject.style.fontWeight="normal",t.icon.alpha=1,t.icon.scale.set(1.1)}resize(t){this.container.position.set(0,t.cornerRB.y),this.bg.width=t.cornerRB.x-t.cornerLT.x,this.bg.position.set(t.cornerLT.x,0);const e=-this.bg.height/2,r=t.cornerLT.x+250,n=t.cornerRB.x-250;this.allIcon.position.set(r,e-30),this.allText.container.position.set(r,e+30),this.myIcon.position.set(n,e-30),this.myText.container.position.set(n,e+30)}_chooseMode(t){if(this.chosenMode!==t)switch(this.chosenMode=t,this.onChange(t),t){case Nb.All:this.chooseButton({text:this.allText,icon:this.allIcon},{text:this.myText,icon:this.myIcon});break;case Nb.My:this.chooseButton({text:this.myText,icon:this.myIcon},{text:this.allText,icon:this.allIcon})}}}class yx extends k_{constructor(t){super(t),this.container.label="SwitchMenuScene",this.create()}create(){this.container.eventMode="auto",this.progressSwitch=new vx({game:this.game,onChange:this._changeProgress.bind(this)}),this.container.addChild(this.progressSwitch.container)}resize(t){var e;super.resize(t),null===(e=this.progressSwitch)||void 0===e||e.resize(t)}_changeDifficulty(){}_changeProgress(t){Wc.play(qc,{volume:.8}),this.game.eventEmitter.emit(dc,{mode:t},this)}}const Cx=()=>/(android)/i.test(navigator.userAgent);class Tx{constructor({game:t}){this.game=t,this.game.eventEmitter.on(fc,this._onHintButtonTap,this),this.game.eventEmitter.on(gc,this._onAdEnded,this)}startServe({changeCount:t,startHint:e,initHints:r}){this.hintCount=r,this.changeCountCallback=t,this.startHintCallback=e,this.changeCountCallback(this.hintCount)}_onHintButtonTap(){if(!this.hintCount)return this._showAd();this.startHintCallback()&&(this.hintCount-=1,this.changeCountCallback(this.hintCount))}_showAd(){this.game.app.stage.eventMode="none",(t=>{try{if(Cx())Android.showRewardedVideo(t);else{const e={type:"showRewardedVideo",value:t};window.webkit.messageHandlers.ports.postMessage(e)}}catch(e){setTimeout(t,1e3)}})("window.RewardedComplete()")}_onAdEnded(){this.game.app.stage.eventMode="auto",this.hintCount+=2,this.changeCountCallback(this.hintCount)}}const Sx=[90,30];class wx extends k_{constructor(t){super(t),this.container.label="NotificationScene",this.container.zIndex=2,this.game.eventEmitter.on(_c,(({value:t})=>this._create(t)))}resize(t){super.resize(t),this.container.y=0}_create(t){Lb(this.container);const e=new ic({text:t,styles:{fill:"#fff",fontSize:56}}),r=e.container.width+Sx[0],n=e.container.height+Sx[1],i={x:550,y:Ox.headerHeight+20+n/2},s=(new $n.A).roundRect(-r/2,-n/2,r,n,50).fill({color:"#000000",alpha:.5});e.container.position.set(i.x,i.y),s.position.set(i.x,i.y),this.container.addChild(s,e.container),new B_({duration:.5,object:this.container,yoyo:!0,repeat:7,from:{alpha:.8},to:{alpha:1},onComplete:()=>Lb(this.container)}).start()}}class Ax extends ic{constructor(t){super(t),this.container.hitArea=new st.M(-520,-82.5,1040,165),this.container.eventMode="static",this.container.cursor="pointer",this.container.on("pointermove",(()=>{this.container.alpha=.7})),this.container.on("pointerout",(()=>{this.container.alpha=1})),this.container.on("pointerdown",(()=>{I_(this.container,(()=>t.onTap()))}))}}class Mx extends k_{constructor(t){super(t),this.container.label="MenuConfirmScene"}create(t,e){this.onRestartCallback=()=>e(),this.shadow=Eb(c.g.WHITE,{tint:"#000",alpha:.5,x:550,y:950}),this.shadow.eventMode="static";const r=Eb(this.textures.ui.menuRect,{scale:1.4,x:550,y:617});this.confirmContainer=this._createConfirmContainer();const n=Eb(t,{}),i=Math.min(620/n.width,620/n.height);n.scale.set(i),n.position.set(550,600),this.container.addChild(this.shadow,r,n,this.confirmContainer),this.resize(Zc()),this.show()}show(){var t;this.container.alpha=0,(t=this.container).visible=!0,new B_({duration:.3,object:t,to:{alpha:1}}).start()}hide(t){var e,r;e=this.container,r=()=>Lb(this.container),new B_({duration:.3,object:e,to:{alpha:0},onComplete:()=>{e.visible=!1,r&&r()}}).start()}onCancelTap(){this.hide(!0)}onRestartTap(){this.hide(!0),this.onRestartCallback()}resize(t){super.resize(t),this.shadow&&!this.shadow.destroyed&&(this.shadow.width=t.screenWidth/t.scale,this.shadow.height=t.screenHeight/t.scale),this.confirmContainer&&!this.confirmContainer.destroyed&&(this.confirmContainer.y=t.cornerRB.y)}_createConfirmContainer(){const t=Eb(this.textures.confirmMenu2,{anchor:[.5,1]}),e=new Ax({text:this.game.translations.restartLevel,styles:{fill:"#e32b3a",fontSize:60},onTap:()=>this.onRestartTap()});e.container.position.set(0,-270);const r=new Ax({text:this.game.translations.cancel,styles:{fill:"#49bf63",fontSize:60},onTap:this.onCancelTap.bind(this)});r.container.position.set(0,-110);const n=new $.mc;return n.addChild(t,e.container,r.container),n.position.set(550,1890),n}}class Ex{constructor({game:t}){this.colorIndex=1,this.segmentIndex=37,this.game=t}startServe({pictureScene:t,colorBarScene:e,tutorScene:r,gameHeaderScene:n,onEndCallback:i}){this.tutorScene=r,this.pictureScene=t,this.colorBarScene=e,this.gameHeaderScene=n,this.onEndCallback=i,this.pictureScene.pauseViewportInteraction(),this.pictureScene.pauseViewportClamp();const{hand:s,bg:o,tapZone:a}=this.tutorScene.create();this.hand=s,this.bg=o,this.tapZone=a,this.showOnColorButton()}showOnColorButton(){const t=()=>{const t=this.colorBarScene.getColorButtonPosition(this.colorIndex),{x:e,y:r}=this.tutorScene.getLocalPos(t.x,t.y);this.setClickPosition(e,r,10,-30,-150)};t(),this.startHandAnimation(),this.tutorScene.setOnTapCallback((()=>{const t=this.colorBarScene.getColorByIndex(this.colorIndex);this.game.eventEmitter.emit(lc,{index:this.colorIndex,color:t},this),this.hideHand(),this.hideTapZone(),this.showToZone()})),this.tutorScene.setResizeCallback((()=>t()))}showToZone(){const t=()=>{const t=this.pictureScene.getSegment(this.segmentIndex);if("object"!=typeof t)return;this.pictureScene.showOnSegment(t.graphic);const e=t.graphic.getBounds(),{x:r,y:n}=this.tutorScene.getLocalPos(e.x,e.y);this.setClickPosition(r,n,150,-120,-150)};F_(1,(()=>{this.startHandAnimation(),this.gameHeaderScene.container.eventMode="none",this.colorBarScene.container.eventMode="none",this.bg.visible=!1})),this.game.eventEmitter.once(cc,(()=>{this.hideHand(),this.pictureScene.getImageContainer().eventMode="none",F_(.2,(()=>this.showOnZoomButton()))})),t(),this.tutorScene.setResizeCallback((()=>t())),this.tutorScene.setOnTapCallback((()=>{this.hideHand(),this.showOnZoomButton()}))}showOnZoomButton(){const t=()=>{const t=this.gameHeaderScene.getButtonPosition("zoom"),{x:e,y:r}=this.tutorScene.getLocalPos(t.x,t.y);this.setClickPosition(e,r,0,15,0)};F_(.1,(()=>{this.startHandAnimation(),this.gameHeaderScene.container.eventMode="auto",this.gameHeaderScene.changeEventModes({backBtnOn:!1,zoomBtnOn:!0,soundBtnOn:!1,hintBtnOn:!1})})),this.game.eventEmitter.once(mc,(()=>{this.hideHand(),this.gameHeaderScene.container.eventMode="none",F_(1,(()=>this.showOnHintButton()))})),t(),this.tutorScene.setResizeCallback((()=>t()))}setClickPosition(t,e,r=0,n=0,i){this.hand.position.set(t+r,e+n),this.tapZone.position.set(t,e),void 0!==i&&(this.hand.angle=i)}startHandAnimation(){this.hand.alpha=0,new B_({object:this.hand,duration:.2,to:{alpha:1}}).start(),new B_({object:this.hand,delay:.2,duration:.3,from:{scale:.9},to:{scale:.81},yoyo:!0,repeat:-1}).start()}hideHand(){Qg.killTweensOf(this.hand),this.hand.alpha=0}showOnHintButton(){const t=()=>{const t=this.gameHeaderScene.getButtonPosition("hint"),{x:e,y:r}=this.tutorScene.getLocalPos(t.x,t.y);this.setClickPosition(e,r,0,15,0)};this.startHandAnimation(),this.gameHeaderScene.container.eventMode="auto",this.gameHeaderScene.changeEventModes({backBtnOn:!1,zoomBtnOn:!1,soundBtnOn:!1,hintBtnOn:!0}),t(),this.tutorScene.setResizeCallback((()=>t())),this.game.eventEmitter.once(fc,(()=>{this.hideHand(),this.gameHeaderScene.container.eventMode="none",F_(1,(()=>this.onEnd()))}))}hideTapZone(){this.tapZone.visible=!1,this.tapZone.eventMode="none"}onEnd(){this.pictureScene.resumeViewportClamp(),O_(this.tutorScene.container,(()=>{Lb(this.tutorScene.container)})),this.gameHeaderScene.container.eventMode="auto",this.colorBarScene.container.eventMode="auto",this.pictureScene.resumeViewportInteraction(),this.pictureScene.getImageContainer().eventMode="auto",this.gameHeaderScene.changeEventModes({backBtnOn:!0,zoomBtnOn:!0,soundBtnOn:!0,hintBtnOn:!0}),this.onEndCallback()}}class Lx extends k_{constructor(t){super(t),this.container.label="TutorScene",this.container.zIndex=100}create(){return this.bg=Eb(c.g.WHITE,{tint:"#ff9900",anchor:0,label:"Bg",alpha:.01}),this.bg.eventMode="static",this.tapZone=new $n.A,this.tapZone.circle(0,0,100).fill({color:"#0055f0",alpha:.01}),this.hand=Eb(this.game.textures.ui.hand,{scale:.9,anchor:[.35,-.2],zIndex:10}),this.hand.alpha=0,this.container.addChild(this.bg,this.hand,this.tapZone),this.resize(Zc()),{hand:this.hand,bg:this.bg,tapZone:this.tapZone}}getLocalPos(t,e){return this.container.toLocal(new wn.b(t,e))}setOnTapCallback(t){this.tapZone.eventMode="static",this.tapZone.cursor="pointer",this.tapZone.once("pointerdown",(()=>{t(),this.tapZone.cursor="auto"}))}setResizeCallback(t){this.resizeCallback=t}resize(t){var e;super.resize(t),null===(e=this.resizeCallback)||void 0===e||e.call(this),this.bg&&!this.bg.destroyed&&(this.bg.width=t.screenWidth/t.scale,this.bg.height=t.screenHeight/t.scale,this.bg.position.set(t.cornerLT.x,t.cornerLT.y))}}class Rx{constructor({app:t}){this.app=t,this.eventEmitter=new zu.b,this.translations=Kc}createScenes(){return this.pictureScene=new Ub({game:this}),this.colorsBarScene=new ex({game:this}),this.gameHeaderScene=new ox({game:this}),this.winScene=new cx({game:this}),this.menuScene=new fx({game:this}),this.switchMenuScene=new yx({game:this}),this.notificationScene=new wx({game:this}),this.menuConfirmScene=new Mx({game:this}),this.tutorScene=new Lx({game:this}),[this.pictureScene,this.colorsBarScene,this.gameHeaderScene,this.winScene,this.menuScene,this.switchMenuScene,this.notificationScene,this.menuConfirmScene,this.tutorScene]}createControllers(){this.modelController=new Kb({storage:new _x,app:this.app}),this.hintService=new Tx({game:this}),this.tutorService=new Ex({game:this}),this.eventEmitter.on(uc,(({id:t})=>this._clickCard(t))),this.eventEmitter.on(cc,(({index:t,color:e})=>this._tapSegment(t,e))),this.eventEmitter.on(pc,(()=>this._openMenu())),this.eventEmitter.on(dc,(({mode:t})=>this._changeProgressMode(t)))}startGameplay(){this.hintService.startServe({changeCount:t=>{this.gameHeaderScene.fillHintButton(t),this.modelController.updateHintCount(t)},startHint:()=>this.pictureScene.goToUnfilled(),initHints:this.modelController.getHintCount()}),this.gameHeaderScene.hide(!0),this.winScene.hide(!0);const t=this.modelController.getCardsPreviews();this.menuScene.create(t),!this.modelController.getIsRulesShown()&&this.startFirstGameOpenScenario()}startFirstGameOpenScenario(){this._openPicture(0),F_(.2,(()=>{this.tutorService.startServe({pictureScene:this.pictureScene,colorBarScene:this.colorsBarScene,tutorScene:this.tutorScene,gameHeaderScene:this.gameHeaderScene,onEndCallback:()=>this.onEndTutor()})}))}onEndTutor(){this.modelController.setTutorShown()}_clickCard(t){if((t=>{try{if(Cx())Android.levelClick(t);else{const e={type:"levelClick",value:t};window.webkit.messageHandlers.ports.postMessage(e)}}catch(t){}})(t),1===this.modelController.getPictureProgress(t)){const e=()=>{this.modelController.resetPictureStorage(t),this._openPicture(t)},r=this.modelController.getPreviewTexture(t);this.menuConfirmScene.create(r,e)}else this._openPicture(t)}_changeProgressMode(t){const e=this.modelController.getProgressModeIds(t);this.menuScene.changeSwitches(e)}_openMenu(){if(this.state===Hb.Menu)return;this.state=Hb.Menu,this.gameHeaderScene.hide(),this.menuScene.show(),this.switchMenuScene.show(),this.colorsBarScene.destroy(),this.pictureScene.destroy();const t=this.modelController.getLevelId(),e=this.modelController.getCardPreview(t);this.menuScene.updateCard(e),this._clearPictureEventListener()}_clearPictureEventListener(){this.eventEmitter.removeListener(lc),this.eventEmitter.removeListener(mc)}_tapSegment(t,e){this.modelController.setSegmentFilled(t);const r=this.modelController.getProgress(),n=this.modelController.getColorProgress(e);this.colorsBarScene.updateColorProgress(e,n),r>=1&&(this.pictureScene.container.eventMode="none",this._showWinScene())}_openPicture(t){if((t=>{try{if(Cx())Android.levelStartInGame(t);else{const e={type:"levelStartInGame",value:t};window.webkit.messageHandlers.ports.postMessage(e)}}catch(t){}})(t),this.state===Hb.Game)return;this.state=Hb.Game,this.modelController.setLevel(t);const{components:e,colors:r,width:n,height:i,colorsProgress:s,labels:o}=this.modelController.getPictureComponents(t);this.pictureScene.create(e,o,n,i),this.colorsBarScene.create(r,s),this.gameHeaderScene.show(),this.colorsBarScene.show(),this.menuScene.hide(),this.switchMenuScene.hide()}_showWinScene(){(t=>{try{if(Cx())Android.levelCompleteInGame(t);else{const e={type:"levelCompleteInGame",value:t};window.webkit.messageHandlers.ports.postMessage(e)}}catch(t){}})(this.modelController.getLevelId()),this.gameHeaderScene.hide(),this.colorsBarScene.hide(),this.winScene.show(),this.pictureScene.showWinAnimation()}}class Px{constructor(){this.isStartGame=!1,this.app=new J,this.game=new Rx({app:this.app});try{Yn.R.shared.maxFPS=120}catch(t){}try{Yn.R.system.maxFPS=120}catch(t){}}run(){this.bootScene=new bc,this.app.stage.addChild(this.bootScene.container),(()=>{try{if(/(android)/i.test(navigator.userAgent))Android.gameLoaded();else{const t={type:"gameLoaded",value:0};window.webkit.messageHandlers.ports.postMessage(t)}}catch(t){}window.clearLocalStorage({y:1100,x:1900,colorButtonDiameter:150,colorBarHeight:225,headerHeight:150})})()}startLoading(){!function(t,e){Wc.add($c,{preload:!0});for(const t of Object.keys(Yc))_e.add({alias:t,src:Yc[t]});for(const t of Object.keys(jc))_e.add({alias:t,src:jc[t]});let r=0,n={};const i=_e.load([...Object.keys(Yc),...Object.keys(jc)],(e=>{r=e,t(1*r)}));Promise.all([i]).then((t=>{const r=t[0];n=r;for(const t of Object.keys(r)){const e=r[t];if(e instanceof Iu.z){const r={};for(const t of Object.keys(e.textures))r[t.slice(0,-4)]=e.textures[t];n[t]=r}}e(n)}))}(this.onProgress.bind(this),this.afterLoad.bind(this)),this._resize(),window.onresize=()=>setTimeout((()=>this._resize()),10)}onProgress(t){this.bootScene&&this.bootScene.update(t)}afterLoad(t){this.game.textures=t,this._onBootEnd()}_onBootEnd(){this.isStartGame||(this.isStartGame=!0,this.app.stage.removeChild(this.bootScene.container),this.scenes=this.game.createScenes(),this.app.stage.removeChild(this.bootScene.container),this.app.renderer.background.color="#ffffff",this.app.stage.addChild(...this.scenes.map((t=>t.container))),this.app.ticker.add((()=>this._update())),this.game.createControllers(),this.game.startGameplay(),this.game.app.stage.sortableChildren=!0,this._resizeCustom())}_update(){var t;null===(t=this.scenes)||void 0===t||t.map((t=>t&&t.update()))}_resize(){this._resizeCustom(),setTimeout((()=>this._resizeCustom()),100)}_resizeCustom(){var t;const e=Zc();this.app.renderer.resize(e.screenWidth,e.screenHeight),this.bootScene&&this.bootScene.resize(e),null===(t=this.scenes)||void 0===t||t.map((t=>t&&t.resize(e)))}}let Bx,Ox={colorButtonDiameter:0,colorBarHeight:0,colorBarGap:20,colorBarPadding:20,headerHeight:0,progressSwitchHeight:150,difficultySwitchHeight:150};!function(){!function(t,e,r,n){new(r||(r=Promise))((function(e,i){function s(t){try{a(n.next(t))}catch(t){i(t)}}function o(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,o)}a((n=n.apply(t,[])).next())}))}(this,0,void 0,(function*(){Bx=new Px,yield Bx.app.init({width:1920,height:1080,backgroundColor:"#cdbb5f",resizeTo:window,resolution:2,autoDensity:!0,antialias:!0}),document.body.appendChild(Bx.app.canvas),globalThis.__PIXI_APP__=Bx.app,Bx.run()}))}();const Ix=t=>{t.preventDefault()};document.addEventListener("touchstart",Ix,{passive:!1}),document.addEventListener("touchmove",Ix,{passive:!1}),document.addEventListener("touchend",Ix,{passive:!1}),document.addEventListener("touchcancel",Ix,{passive:!1}),document.addEventListener("contextmenu",Ix,!0),window.RewardedComplete=function(){Bx.game.eventEmitter.emit(gc)},window.clearLocalStorage=function(t){t.y===sc&&t.x===oc&&(Ox=Object.assign(Object.assign({},Ox),t),Bx.startLoading())},window.SetSoundEnabled=function(t){t?Bx.game.eventEmitter.emit("soundOn"):Bx.game.eventEmitter.emit("soundOff")}})()})();